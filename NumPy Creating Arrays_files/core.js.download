!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.sfs=e():t.sfs=e()}(self,(()=>(()=>{var t={783:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:String(e)}function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,{default:()=>Ct});var u=!1,c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];window.console&&u&&console[t].apply(console,["%c SFS ","background: #000; color: #bada55"].concat(s(e)))};const f=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"debug",value:function(t){u=t.debug}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return c("log",e)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return c("warn",e)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return c("error",e)}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return c("info",e)}}],e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}());var l=[],h=r(654);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function y(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d(e)?e:String(e)}var g=function(){return t=function t(e,r,n,o,i,s){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),1==arguments.length&&!(0,h.kf)(arguments[0]))return Array.isArray(arguments[0])?this.fromArray(arguments[0]):this.fromObject(arguments[0]);this.fromArray(arguments)},(e=[{key:"fromArray",value:function(t){this.reset(),t.length>=6?(this.top=t[0],this.right=t[1],this.bottom=t[2],this.left=t[3],this.width=t[4],this.height=t[5]):t.length>=4?(this.top=t[0],this.right=t[1],this.bottom=t[2],this.left=t[3]):3==t.length?(this.top=t[0],this.right=t[1],this.bottom=t[2],this.left=0):2==t.length?(this.top=t[0],this.right=t[1],this.bottom=t[0],this.left=t[1]):(this.top=t[0],this.right=t[0],this.bottom=t[0],this.left=t[0]),this.update()}},{key:"fromObject",value:function(t){return this.fromArray([t.top,t.right,t.bottom,t.left,t.width,t.height])}},{key:"update",value:function(){this.width||(this.width=this.right-this.left),this.height||(this.height=this.bottom-this.top)}},{key:"reset",value:function(t){t=t||0,this.top=t,this.right=t,this.bottom=t,this.left=t,this.width=t,this.height=t}},{key:"getArea",value:function(){return(this.right-this.left)*(this.bottom-this.top)}}])&&p(t.prototype,e),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function m(t,e){if(!t)return null;var r=k(t).getComputedStyle(t);return e&&r.hasOwnProperty(e)?r[e]:r}function b(t){var e;if(t&&t.style){e=t.getBoundingClientRect(),e=new g(e);var r=w(t);e.left+=r.x,e.right+=r.x,e.top+=r.y,e.bottom+=r.y}else e=new g(0);return e}function v(t,e){var r=b(t);if(e){var n=b(e);r.top=r.top-n.top+e.scrollTop,r.bottom=r.top+r.height+e.scrollTop,r.left=r.left-n.left+e.scrollLeft,r.right=r.left+r.width+e.scrollLeft}return r}function w(t){var e=k(t);return{x:e.pageXOffset,y:e.pageYOffset}}function S(t){try{return 9==t.nodeType?t:t.ownerDocument}catch(t){}}function k(t){var e,r=S(t);try{r&&(e=r.parentWindow||r.defaultView||window)}catch(t){e=window}return e}function x(t){var e=k(t),r=new g(0,e.innerWidth,e.innerHeight,0,e.innerWidth,e.innerHeight),n=w(t);return r.left+=n.x,r.right+=n.x,r.top+=n.y,r.bottom+=n.y,r}function P(t){var e=S(t);if(e)return e.documentElement||e.body}function T(t,e){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function E(t){var e=m(t);return"inline-block"==e.display||"none"!=e.float||"absolute"==e.position||"fixed"==e.position||"auto"!=e.width||"auto"!=e.height}function O(t){var e=m(t),r={};return"scroll"==e.overflowX||"auto"==e.overflowX?r.xscroll=t.offsetWidth-t.clientWidth:r.xscroll=0,"scroll"==e.overflowY||"auto"==e.overflowY?r.yscroll=t.offsetHeight-t.clientHeight:r.yscroll=0,r.xhidden="hidden"==e.overflowX,r.yhidden="hidden"==e.overflowY,r}function j(t){var e=m(t);return!!(e.clip&&"auto"!=e.clip||e.clipPath&&"none"!=e.clipPath)}g.getOverlapRect=function(t,e){var r=(0,h.T9)(t.left,e.left),n=(0,h.jk)(t.left+t.width,e.left+e.width),o=(0,h.T9)(t.top,e.top),i=(0,h.jk)(t.top+t.height,e.top+e.height);return n>=r&&i>=o&&new g(o,n,i,r,n-r,i-o)},g.getOverlapArea=function(t,e){return(0,h.T9)(0,(0,h.jk)(t.right,e.right)-(0,h.T9)(t.left,e.left))*(0,h.T9)(0,(0,h.jk)(t.bottom,e.bottom)-(0,h.T9)(t.top,e.top))};var A="ready",C="loading",I="expanding",D="expanded",N="collapsing",R="collapsed",M="timeout";function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_(n.key),n)}}function _(t){var e=function(t,e){if("object"!=V(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==V(e)?e:String(e)}var z="dasf",B=1,U=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=B++,this.ts=+new Date,this.type=e.type,this.data=e.data,this.originalEvent=e.originalEvent},(e=[{key:"stringify",value:function(){return JSON.stringify({id:this.id,ts:this.ts,type:this.type,namespace:z,data:this.data})}}])&&F(t.prototype,e),r&&F(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();U.fromEvent=function(t){var e;try{e=JSON.parse(t&&t.data)}catch(t){}return e&&e.type&&e.data&&e.namespace===z?(e.originalEvent=t,new U(e)):null};const L=U;function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H(n.key),n)}}function H(t){var e=function(t,e){if("object"!=G(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==G(e)?e:String(e)}var X=new WeakMap,Z=1,q=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=e,this.id=Z++,X.set(this,{listeners:{}}),this.mount(r)},(e=[{key:"trigger",value:function(t,e){return(X.get(this).listeners[t]||[]).filter((function(t){t(e)})),this}},{key:"on",value:function(t,e,r){for(var n=X.get(this).listeners,o=String(t||"").split(" ");o.length;){var i=o.pop();n[i]=n[i]||[],n[i][r?"unshift":"push"](e)}return this}},{key:"off",value:function(t,e){for(var r=X.get(this).listeners,n=String(t||"").split(" ");n.length;){var o=n.pop();r[o]=(r[o]||[]).filter(filterCallbacks)}return this}},{key:"handle",value:function(t){if(!this.win||this.win===t.source){var e=L.fromEvent(t);if(e)return this.trigger(e.type,e),this}}},{key:"send",value:function(t,e){var r=new L({type:t,data:e||{},originalEvent:{source:this.context}});return(this.win||this.context.parent||this.context.top).postMessage(r.stringify(),"*"),this}},{key:"mount",value:function(t){return this.nuke(),this.win=t&&t.contentWindow,this.context.addEventListener("message",this.handle.bind(this),{passive:!0}),this}},{key:"nuke",value:function(){return this.context.removeEventListener("message",this.handle.bind(this)),X.get(this).listeners={},this}}])&&W(t.prototype,e),r&&W(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),J=r(607);function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function $(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q(n.key),n)}}function Q(t){var e=function(t,e){if("object"!=Y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Y(e)?e:String(e)}var K=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e||{},this.privateData=n||{},this.privateKey=r},(e=[{key:"value",value:function(t,e){return void 0!==e?this.privateData.hasOwnProperty(e)&&this.privateData[e].hasOwnProperty(t)?this.privateData[e][t]:void 0:this.data[t]}}])&&$(t.prototype,e),r&&$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rt(n.key),n)}}function rt(t){var e=function(t,e){if("object"!=tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tt(e)?e:String(e)}K.fromString=function(t,e){var r;try{var n=function(t,e){for(var r="",n=t.length,o=e.length,i=0;i<n;i++)r+=String.fromCharCode(t.charCodeAt(i)^e.charCodeAt(i%o));return r}((0,J.atob)(t),e);JSON.parse(n)&&(t=n)}catch(t){}try{r=JSON.parse(t)}catch(t){r={}}var o={};return r.hasOwnProperty(e)&&(o=r[e],delete r[e]),new K(r,e,o)};var nt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.node=e,this.document=S(e),this.window=k(e),this.root=P(e),this.ref=this.getRefNode(e.parentNode)},(e=[{key:"getRefNode",value:function(t){for(;t&&1==t.nodeType;){var e=m(t);if(E(t)||"block"==e.display||"none"!=e.clear){var r=O(t);if(r.xscroll||r.yscroll||r.xhidden||r.yhidden)return t;if(j(t))return t}t=t.parentNode}return this.root}},{key:"getNodesOver",value:function(t,e){e=e||1;var r=[],n=b(this.node),o=b(this.ref),i=function(t){var e=k(t);return new g(e.pageYOffset,e.pageXOffset+e.innerWidth,e.pageYOffset+e.innerHeight,e.pageXOffset,e.innerWidth,e.innerHeight)}(this.node),s=S(t);if(!s.elementFromPoint)return r;for(var a={top:(0,h.T9)(n.top,o.top)-i.top,right:(0,h.jk)(n.right,o.right)-i.left,bottom:(0,h.jk)(n.bottom,o.bottom)-i.top,left:(0,h.T9)(n.left,o.left)-i.left},u=(a.right-a.left)/10,c=(a.bottom-a.top)/10,f=a.left;f<a.right;f+=u)for(var l=a.top;l<a.bottom;l+=c){for(var d=s.elementFromPoint(f,l);d&&1==d.nodeType;){var p=m(d);if(E(d)||"block"==p.display||"none"!=p.clear)break;d=d.parentNode}d&&1==d.nodeType&&d!=this.node&&d!=this.root&&!T(d,this.node)&&(r.push(d),r.length>=e&&(f=a.right,l=a.bottom))}return r}},{key:"getWindowGeom",value:function(){var t=this.window.innerHeight||0,e=this.window.innerWidth||0,r=this.window.screenY||this.window.screenTop||0,n=r+t,o=this.window.screenX||this.window.screenLeft||0;return{t:r,r:o+e,b:n,l:o,w:e,h:t}}},{key:"getSelfGeom",value:function(){var t=b(this.node),e=b(this.ref),r=m(this.node),n=x(this.node),o=t.width,i=t.height;this.ref!=this.root&&(o=(0,h.T9)(0,(0,h.jk)(t.right,e.right)-(0,h.T9)(t.left,e.left)),i=(0,h.T9)(0,(0,h.jk)(t.bottom,e.bottom)-(0,h.T9)(t.top,e.top)));var s=(0,h.T9)(0,(0,h.jk)(t.right,n.right)-(0,h.T9)(t.left,n.left)),a=(0,h.T9)(0,(0,h.jk)(t.bottom,n.bottom)-(0,h.T9)(t.top,n.top)),u=(0,h.jk)(o,s),c=(0,h.jk)(i,a),f=t.width?u/t.width:0,l=t.height?c/t.height:0,d=u*c/(t.width*t.height),p=this.getNodesOver(this.node,1);if(p.length){var y=b(p[0]),g=(0,h.T9)(0,(0,h.jk)(y.right,t.right)-(0,h.T9)(y.left,t.left)),v=(0,h.T9)(0,(0,h.jk)(y.bottom,t.bottom)-(0,h.T9)(y.top,t.top));d=(0,h.T9)(0,(u*c-g*v)/(t.width*t.height))}var S=w(this.node);return{t:t.top-S.y,r:t.right-S.x,b:t.bottom-S.y,l:t.left-S.x,z:r.zIndex,w:t.width,h:t.height,xiv:1==f?"1":Number(f).toFixed(2),yiv:1==l?"1":Number(l).toFixed(2),iv:1==d?"1":Number(d).toFixed(2),date:(new Date).getTime()}}},{key:"getExpandGeom",value:function(){var t=b(this.ref),e=b(this.node),r=x(this.node),n=(0,h.T9)(t.top,r.top),o=(0,h.jk)(t.right,r.right),i=(0,h.jk)(t.bottom,r.bottom),s=(0,h.T9)(t.left,r.left),a=O(this.ref);return{t:(0,h.T9)(0,e.top-n),r:(0,h.T9)(0,o-e.right),b:(0,h.T9)(0,i-e.bottom),l:(0,h.T9)(0,e.left-s),xs:!!a.yscroll,yx:!!a.xscroll}}},{key:"getGeom",value:function(){return{win:this.getWindowGeom(),self:this.getSelfGeom(),exp:this.getExpandGeom()}}}])&&et(t.prototype,e),r&&et(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();const ot={get:function(t){return new nt(t).getGeom()}};function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}var st={context:document,get:function(t){var e="".concat(t="actirise-"+t,"="),r=null;return this.context.cookie.split(";").some((function(t){if(0===(t=t.trim()).indexOf(e)){r=decodeURIComponent(t.substring(e.length,t.length));try{r=JSON.parse(r)}catch(t){return}return"undefined"===r&&(r=void 0),!0}})),r},set:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];t="actirise-"+t;var s="";if(r){var a=new Date(Date.parse(r));s="expires=".concat(a.toUTCString())}"object"===it(e)&&(e=JSON.stringify(e));var u="".concat(t,"=").concat(encodeURIComponent(e));i&&(i="Secure"),o&&(o="domain=".concat(encodeURIComponent(o))),n="path=".concat(n),this.context.cookie=[u,s,o,n,"SameSite=None",i].filter((function(t){return!!t})).join("; ")},remove:function(t){st.set(t,"",-1)},isEnabled:function(){return!!navigator.cookieEnabled||(this.context.cookie="testcookie",-1!=this.context.cookie.indexOf("testcookie"))}};const at=st;function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lt(n.key),n)}}function ft(t,e,r){return(e=lt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lt(t){var e=function(t,e){if("object"!=ut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ut(e)?e:String(e)}var ht={},dt=function(){return t=function t(e,r,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ft(this,"iabVisibility",!1),ft(this,"width",0),ft(this,"height",0),n=n||{},this.onBeforePosMsg=n.onBeforePosMsg||function(){},this.onPosMsg=n.onPosMsg||function(){},this.onEndPosRender=n.onEndPosRender||function(){},this.onVisible=n.onVisible||function(){},this.context=n.context||window,this.timeoutCallback=null,this.id=e,this.node=r,this.status=C,this.rect=v(this.node,this.node.offsetParent),this.collapse_rect=this.rect,this.frameLoaded=!1,this.registered=!1,this.loadedTimeout=0,this.geom=!1;var i=K.fromString(String(r.getAttribute("name")||""),"ksem4sfGoVfcdcByqkyq96QlivN99ZZd41i4Vww3cmIDFP4QcxuS4mAv7dRXr4ntiQgr6rbNryLy"),s=i.value("conf")||{};this.features={"exp-ovr":s["exp-ovr"],"exp-push":s["exp-push"],"read-cookie":n.allowCookieReads&&s["read-cookie"],"write-cookie":n.allowCookieWrites&&s["write-cookie"]},this.params={public:i.data,private:i.privateData},this.timeoutCallback=setTimeout((function(){if(o.status===C||o.status===A){var t=new L({type:"render-timeout",data:{g:o.getGeomInfo(),status:o.TIMEOUT}||{},originalEvent:{source:o.context}});o.onPosMsg(t,o.id)}}),n.timeout)},e=[{key:"checkIabVisibility",value:function(){var t=this,e=.5;this.width>1e3&&(e=.3);var r=this.getGeomInfo(),n=(new Date).getTime(),o=!0;r.self.yiv>=e?(this.iabVisibility&&(this.iabVisibility.pending||this.iabVisibility.sended)||(this.iabVisibility={sended:!1,pending:!0,startDate:n}),this.iabVisibility&&!this.iabVisibility.sended&&n-this.iabVisibility.startDate>=1e3&&(this.iabVisibility={sended:!0,pending:!1,endDate:n},o=!1,this.onVisible(this.id))):this.iabVisibility&&!this.iabVisibility.sended&&(this.iabVisibility={sended:!1,pending:!1}),this.messages.send("geom-update",{g:r,status:this.status}),o&&setTimeout((function(){t.checkIabVisibility()}),210)}},{key:"register",value:function(t){if(!this.registered){if(this.registered=!0,clearTimeout(this.timeoutCallback),this.status=R,this.width=t.w,this.height=t.h,(0,h.TD)(this.node,"width",this.width+"px"),(0,h.TD)(this.node,"height",this.height+"px"),(0,h.TD)(this.node,"display","block",!1),(0,h.TD)(this.node,"position","relative",!1),this.node&&this.node.offsetParent&&!ht[this.node]){var e=O(this.node.offsetParent);if(e.xscroll||e.yscroll){var r=(0,h.nF)(this.scroll.bind(this),1e3);this.context.document.querySelector(this.node.offsetParent).addEventListener("scroll",r,{passive:!0}),this.context.document.querySelector(this.node.offsetParent).addEventListener("mousedown",r,{passive:!0}),ht[this.node]=r}}this.node.setAttribute("name",["da","safeframe",this.id].join("-")),this.messages=new q(this.context,this.node),this.messages.on("cookie",this.cookie.bind(this)).on("expand",this.expand.bind(this)).on("collapse",this.collapse.bind(this)).on("wrong-adsize",this.error.bind(this)).on("error",this.error.bind(this)),this.onEndPosRender(this.id),this.checkIabVisibility()}}},{key:"nuke",value:function(){try{clearTimeout(this.timeoutCallback),clearTimeout(this.loadedTimeout),this.messages.send("unload").nuke();var t=ht[this.node];t&&(this.context.document.querySelector(this.node.offsetParent).removeEventListener("scroll",t),this.context.document.querySelector(this.node.offsetParent).removeEventListener("mousedown",t),delete ht[this.node]),this.node.parentNode.removeChild(this.node)}catch(t){f.warn("Failed to nuke safeframe",this.id)}}},{key:"getGeomInfo",value:function(){var t=this;return(!this.geom||!this.throttleGeom&&this.isInviewPort())&&(this.geom=ot.get(this.node),this.throttleGeom=!0,setTimeout((function(){t.throttleGeom=!1}),250)),this.geom}},{key:"setNodeRect",value:function(t,e){1===arguments.length&&(e=t,t=this.node),(0,h.TD)(t,"top",e.top+"px"),(0,h.TD)(t,"left",e.left+"px"),(0,h.TD)(t,"width",e.width+"px"),(0,h.TD)(t,"height",e.height+"px")}},{key:"getNodeStyles",value:function(t,e){var r={};return e&&e.length&&e.forEach((function(e){r[e]=t.style[e]})),r}},{key:"setNodeStyles",value:function(t,e){if(e&&t&&t.style)for(var r in e)e.hasOwnProperty(r)&&(0,h.TD)(t,r,e[r])}},{key:"supports",value:function(t){return t?this.features[t]||!1:this.features}},{key:"error",value:function(t){this.onPosMsg(t,this.id)}},{key:"cookie",value:function(t){if((this.supports("write-cookie")||this.supports("read-cookie"))&&!0!==this.onBeforePosMsg(t,this.id)&&(this.onPosMsg(t,this.id),at.context=this.context.document,t.data.name)){if(void 0===t.data.value&&this.supports("read-cookie"))return this.messages.send("read-cookie",{cmd:"read-cookie",info:at.get(t.data.name)});if(this.supports("write-cookie"))return"object"===ut(t.data.value)?at.set(t.data.name,t.data.value.info,t.data.value.expires):at.set(t.data.name,t.data.value),this.messages.send("write-cookie",{cmd:"write-cookie",info:at.get(t.data.name)})}}},{key:"expand",value:function(t){if(!0!==this.onBeforePosMsg(t,this.id)&&(this.onPosMsg(t,this.id),this.status!=D&&this.status!=I)){this.status=I,this.messages.send("geom-update",{g:this.getGeomInfo(),status:this.status}),this.offset_parent=this.node.offsetParent,this.rect=v(this.node,this.offset_parent),this.collapse_rect=new g(this.rect);var e=t.data||{};this.rect.top-=e.t||0,this.rect.left-=e.l||0,this.rect.right+=e.r||0,this.rect.bottom+=e.b||0,this.rect.width=this.rect.right-this.rect.left,this.rect.height=this.rect.bottom-this.rect.top;var r=["width","height","top","left","right","bottom","position"];this.node_styles=this.getNodeStyles(this.node,r),t.data.push?(this.offset_parent_styles=this.getNodeStyles(this.offset_parent,r),this.setNodeStyles(this.offset_parent,{width:Math.max(parseInt(this.rect.width,10),this.offset_parent.offsetWidth)+"px",height:Math.max(parseInt(this.rect.height),this.offset_parent.offsetHeight)+"px"}),this.setNodeRect(this.rect)):(this.offset_parent_saved_styles=!1,(0,h.TD)(this.node,"position","absolute"),this.setNodeRect(this.rect)),(0,h.TD)(this.node,"z-index",1e6),this.status=D,this.messages.send("geom-update",{g:this.getGeomInfo(),status:this.status})}}},{key:"collapse",value:function(t){!0!==this.onBeforePosMsg(t,this.id)&&(this.onPosMsg(t,this.id),this.status!=D&&this.status!=I||(this.status=N,this.messages.send("geom-update",{g:this.getGeomInfo(),status:this.status}),this.offset_parent&&this.offset_parent_styles&&this.setNodeStyles(this.offset_paren,this.offset_parent_styles),this.rect=this.collapse_rect,this.setNodeRect(this.rect),this.setNodeStyles(this.node_styles),this.node_styles=this.offset_parent_styles=void 0,this.status=R,this.messages.send("geom-update",{g:this.getGeomInfo(),status:this.status})))}},{key:"resize",value:function(t){this.messages.send("geom-update",{g:this.getGeomInfo(),status:this.status})}},{key:"mouseup",value:function(t){this.messages.send("geom-update",{g:this.getGeomInfo(),status:this.status})}},{key:"touchend",value:function(t){this.messages.send("geom-update",{g:this.getGeomInfo(),status:this.status})}},{key:"scroll",value:function(t){this.isInviewPort()&&this.messages.send("geom-update",{g:this.getGeomInfo(),status:this.status})}},{key:"blur",value:function(t){this.onPosMsg(t,this.id),this.messages.send("focus-change",{g:this.getGeomInfo(),status:this.status,info:!1})}},{key:"focus",value:function(t){this.onPosMsg(t,this.id),this.messages.send("focus-change",{g:this.getGeomInfo(),status:this.status,info:!0})}},{key:"pagehide",value:function(t){this.onPosMsg(t,this.id),this.messages.send("unload",t)}},{key:"isInviewPort",value:function(){return this._inViewport({offset:{top:-500,bottom:-500,left:0,right:0},threshold:0})}},{key:"_inViewport",value:function(t){var e=this.node.getBoundingClientRect(),r=e.top,n=e.right,o=e.bottom,i=e.left,s=e.width,a=e.height,u=o,c=this.context.innerWidth-i,f=this.context.innerHeight-r,l=n,h=t.threshold*s,d=t.threshold*a;return u>t.offset.top+d&&c>t.offset.right+h&&f>t.offset.bottom+d&&l>t.offset.left+h}}],e&&ct(t.prototype,e),r&&ct(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gt(n.key),n)}}function gt(t){var e=function(t,e){if("object"!=pt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pt(e)?e:String(e)}var mt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ads=[],this.errors=l},(e=[{key:"register",value:function(t){t instanceof dt||f.error("Ad must be an instance of ads.safeframe.iab.Ad",t),this.indexOfId(t.id)>-1&&f.warn("Ad with the specified id already exists.",t.id),this.ads.push(t)}},{key:"indexOfId",value:function(t){for(var e=0;e<this.ads.length;++e)if(this.ads[e].id==t)return e;return-1}},{key:"nuke",value:function(t){if(void 0===t)for(;this.ads.length;)this.ads.pop().nuke();else{var e=this.indexOfId(t);e>-1?(this.ads[e].nuke(),this.ads.splice(e,1)):this.errors.push(new Error("Could not nuke a safeframe. The safeframe with the supplied id could not be found.",{id:t}))}}},{key:"get",value:function(t){var e=this.indexOfId(t);if(e>-1)return this.ads[e];this.errors.push(new Error("Could not get a safeframe that has the supplied id.",{id:t}))}},{key:"each",value:function(t){this.ads.forEach(t)}}])&&yt(t.prototype,e),r&&yt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wt(n.key),n)}}function wt(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bt(e)?e:String(e)}var St=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.registry=new mt,this.errors=[]},(e=[{key:"register",value:function(t){return this.registry.register(t)}},{key:"nuke",value:function(t){this.registry.nuke(t)}},{key:"status",value:function(t){var e={};return this.registry.each((function(t){e[t.id]=t.status})),e}}])&&vt(t.prototype,e),r&&vt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tt(n.key),n)}}function Pt(t,e,r){return e&&xt(t.prototype,e),r&&xt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tt(t){var e=function(t,e){if("object"!=kt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kt(e)?e:String(e)}var Et=Pt((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.ver="1-1-1",this.specVersion="1.1",this.debug=!!e.debug,this.auto=!0,this.timeout=e.timeout||8e3,this.allowCookieReads=e["read-cookie"]||!1,this.allowCookieWrites=e["write-cookie"]||!1,this.onBeforePosMsg=e.onBeforePosMsg||!1,this.onPosMsg=e.onPosMsg||!1,this.onVisible=e.onVisible||!1,this.renderFile=e.renderFile||"",this.hostFile=e.hostFile||"",this.onEndPosRender=e.onEndPosRender||!1,this.onFailure=e.onFailure||!1,this.onStartPosRender=e.onStartPosRender||!1,this.onSuccess=e.onSuccess||!1,this.context=e.context||window}));function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,At(n.key),n)}}function At(t){var e=function(t,e){if("object"!=Ot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ot(e)?e:String(e)}var Ct=function(){return t=function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=new Et(e),this.host=new St(this.config),this.messages=new q(this.config.context),this.messages.on("register",this.register.bind(this)),f.debug(this.config),this.triggerAdEvents=function(t){r.host.registry.each((function(e){e[t.type]&&e.status!==A&&e.status!==C&&e.status!==M&&e[t.type].call(e,t)}))},this.triggerAdEventsThrottled=(0,h.nF)(this.triggerAdEvents,1e3),this.config.context.addEventListener("mouseup",this.triggerAdEventsThrottled,{passive:!0}),this.config.context.addEventListener("touchend",this.triggerAdEventsThrottled,{passive:!0}),this.config.context.addEventListener("scroll",this.triggerAdEventsThrottled,{passive:!0}),this.config.context.addEventListener("resize",this.triggerAdEventsThrottled,{passive:!0}),this.config.context.addEventListener("blur",this.triggerAdEvents,{passive:!0}),this.config.context.addEventListener("focus",this.triggerAdEvents,{passive:!0}),this.config.context.addEventListener("pagehide",this.triggerAdEvents,{passive:!0}),f.log("Sparteo safeframe initialized"),this.config.context.$sf=this.api()},(e=[{key:"register",value:function(t){var e=this;if(t&&t.originalEvent)for(var r,n=this.config.context.document.getElementsByTagName("iframe"),o=function(){var r,o=n[i];if(o.contentWindow===t.originalEvent.source)return e.host.registry.each((function(e){e.node==o&&t.data.params.public.conf.id===e.id&&(r=e)})),r?(f.log("Register safeframe.",r),r.register(t.data)):f.log("The safeframe is not pre-registered",t),{v:void 0}},i=0;i<n.length;i++)if(r=o())return r.v}},{key:"preRegister",value:function(t,e){var r;if(this.host.registry.each((function(e){e.id==t&&(r=e)})),r)f.log("Safeframe already registered.",t);else{var n=new dt(t,e,this.config);f.log("Creating new SafeFrame",n),this.host.registry.register(n)}}},{key:"api",value:function(){var t=this,e={info:{errs:this.host.registry.errors,list:this.host.registry.ads},host:{Config:Et,PosMeta:K,PosConfig:null,Position:null,conf:this.config,nuke:function(e){return t.host.registry.nuke(e)},get:function(e){return t.host.registry.get(e)}},register:function(e,r){return t.preRegister(e,r)}};return Object.freeze(e),e}}])&&jt(t.prototype,e),r&&jt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}()},654:(t,e,r)=>{"use strict";function n(t){return null!==t&&!isNaN(+t)&&isFinite(t)}function o(){return Array.prototype.reduce.call(arguments,(function(t,e){return n(e)||(e=Number.MIN_SAFE_INTEGER),t<e?e:t}),Number.MIN_SAFE_INTEGER)}function i(){return Array.prototype.reduce.call(arguments,(function(t,e){return n(e)||(e=Number.MAX_SAFE_INTEGER),t>e?e:t}),Number.MAX_SAFE_INTEGER)}function s(t,e){var r=!1;return function(){var n=arguments,o=this;r||(r=!0,setTimeout((function(){r=!1,t.apply(o,n)}),e||1))}}function a(t,e,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t&&("function"==typeof t.style.setProperty?t.style.setProperty(e,r,n?"important":""):t.style[camelize(e)]=r)}r.d(e,{T9:()=>o,TD:()=>a,jk:()=>i,kf:()=>n,nF:()=>s})},607:(t,e,r)=>{var n,o,i;!function(s){"use strict";if(null!=e&&"number"!=typeof e.nodeType)t.exports=s();else if(null!=r.amdO)o=[],void 0===(i="function"==typeof(n=s)?n.apply(e,o):n)||(t.exports=i);else{var a=s(),u="undefined"!=typeof self?self:$.global;"function"!=typeof u.btoa&&(u.btoa=a.btoa),"function"!=typeof u.atob&&(u.atob=a.atob)}}((function(){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function e(t){this.message=t}return e.prototype=new Error,e.prototype.name="InvalidCharacterError",{btoa:function(r){for(var n,o,i,s,a=String(r),u=0,c="";u<a.length;){if(n=a.charCodeAt(u++),o=a.charCodeAt(u++),i=a.charCodeAt(u++),n>255||o>255||i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");c+=t.charAt((s=n<<16|o<<8|i)>>18&63)+t.charAt(s>>12&63)+t.charAt(s>>6&63)+t.charAt(63&s)}switch(a.length%3){case 0:return c;case 1:return c.slice(0,-2)+"==";case 2:return c.slice(0,-1)+"="}},atob:function(r){var n=String(r).replace(/[=]+$/,"");if(n.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,s=0,a=0,u="";i=n.charAt(a++);~i&&(o=s%4?64*o+i:i,s++%4)?u+=String.fromCharCode(255&o>>(-2*s&6)):0)i=t.indexOf(i);return u}}}))},859:t=>{function e(t){return parseFloat(t)||0}t.exports=function(t){if(t===window||t===document.body)return[window.innerWidth,window.innerHeight];if(!t.parentNode){var r=!0;document.body.appendChild(t)}var n=t.getBoundingClientRect(),o=getComputedStyle(t),i=(0|n.height)+e(o.getPropertyValue("margin-top"))+e(o.getPropertyValue("margin-bottom")),s=(0|n.width)+e(o.getPropertyValue("margin-left"))+e(o.getPropertyValue("margin-right"));r&&document.body.removeChild(t);return[s,i]}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.amdO={},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n={};return(()=>{"use strict";r.d(n,{default:()=>Rt});const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let e;const o=new Uint8Array(16);function i(){if(!e){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");e=crypto.getRandomValues.bind(crypto)}return e(o)}const s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));function a(t,e=0){return(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase()}const u=function(e,r,n){if(t.randomUUID&&!r&&!e)return t.randomUUID();const o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){n=n||0;for(let t=0;t<16;++t)r[n+t]=o[t];return r}return a(o)},c="3.7.7",f=c,l="function"==typeof Buffer,h="function"==typeof TextDecoder?new TextDecoder:void 0,d="function"==typeof TextEncoder?new TextEncoder:void 0,p=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),y=(t=>{let e={};return t.forEach(((t,r)=>e[t]=r)),e})(p),g=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,m=String.fromCharCode.bind(String),b="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),v=t=>t.replace(/=/g,"").replace(/[+\/]/g,(t=>"+"==t?"-":"_")),w=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),S=t=>{let e,r,n,o,i="";const s=t.length%3;for(let s=0;s<t.length;){if((r=t.charCodeAt(s++))>255||(n=t.charCodeAt(s++))>255||(o=t.charCodeAt(s++))>255)throw new TypeError("invalid character found");e=r<<16|n<<8|o,i+=p[e>>18&63]+p[e>>12&63]+p[e>>6&63]+p[63&e]}return s?i.slice(0,s-3)+"===".substring(s):i},k="function"==typeof btoa?t=>btoa(t):l?t=>Buffer.from(t,"binary").toString("base64"):S,x=l?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let r=0,n=t.length;r<n;r+=4096)e.push(m.apply(null,t.subarray(r,r+4096)));return k(e.join(""))},P=(t,e=!1)=>e?v(x(t)):x(t),T=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?m(192|e>>>6)+m(128|63&e):m(224|e>>>12&15)+m(128|e>>>6&63)+m(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return m(240|e>>>18&7)+m(128|e>>>12&63)+m(128|e>>>6&63)+m(128|63&e)},E=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,O=t=>t.replace(E,T),j=l?t=>Buffer.from(t,"utf8").toString("base64"):d?t=>x(d.encode(t)):t=>k(O(t)),A=(t,e=!1)=>e?v(j(t)):j(t),C=t=>A(t,!0),I=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,D=t=>{switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return m(55296+(e>>>10))+m(56320+(1023&e));case 3:return m((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return m((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},N=t=>t.replace(I,D),R=t=>{if(t=t.replace(/\s+/g,""),!g.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,r,n,o="";for(let i=0;i<t.length;)e=y[t.charAt(i++)]<<18|y[t.charAt(i++)]<<12|(r=y[t.charAt(i++)])<<6|(n=y[t.charAt(i++)]),o+=64===r?m(e>>16&255):64===n?m(e>>16&255,e>>8&255):m(e>>16&255,e>>8&255,255&e);return o},M="function"==typeof atob?t=>atob(w(t)):l?t=>Buffer.from(t,"base64").toString("binary"):R,V=l?t=>b(Buffer.from(t,"base64")):t=>b(M(t).split("").map((t=>t.charCodeAt(0)))),F=t=>V(z(t)),_=l?t=>Buffer.from(t,"base64").toString("utf8"):h?t=>h.decode(V(t)):t=>N(M(t)),z=t=>w(t.replace(/[-_]/g,(t=>"-"==t?"+":"/"))),B=t=>_(z(t)),U=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),L=function(){const t=(t,e)=>Object.defineProperty(String.prototype,t,U(e));t("fromBase64",(function(){return B(this)})),t("toBase64",(function(t){return A(this,t)})),t("toBase64URI",(function(){return A(this,!0)})),t("toBase64URL",(function(){return A(this,!0)})),t("toUint8Array",(function(){return F(this)}))},G=function(){const t=(t,e)=>Object.defineProperty(Uint8Array.prototype,t,U(e));t("toBase64",(function(t){return P(this,t)})),t("toBase64URI",(function(){return P(this,!0)})),t("toBase64URL",(function(){return P(this,!0)}))},W={version:c,VERSION:f,atob:M,atobPolyfill:R,btoa:k,btoaPolyfill:S,fromBase64:B,toBase64:A,encode:A,encodeURI:C,encodeURL:C,utob:O,btou:N,decode:B,isValid:t=>{if("string"!=typeof t)return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},fromUint8Array:P,toUint8Array:F,extendString:L,extendUint8Array:G,extendBuiltins:()=>{L(),G()}};let H;try{new EventTarget,H=!0}catch(t){H=!1}var X=H?EventTarget:class{constructor(){this.e={}}addEventListener(t,e,r=!1){this.t(t).push(e)}removeEventListener(t,e,r=!1){const n=this.t(t),o=n.indexOf(e);o>-1&&n.splice(o,1)}dispatchEvent(t){return t.target=this,Object.freeze(t),this.t(t.type).forEach((e=>e(t))),!0}t(t){return this.e[t]=this.e[t]||[]}};var Z=H?Event:class{constructor(t){this.type=t}};class q extends Z{constructor(t,e){super(t),this.newState=e.newState,this.oldState=e.oldState,this.originalEvent=e.originalEvent}}const J="active",Y="passive",$="hidden",Q="frozen",K="terminated",tt="object"==typeof safari&&safari.pushNotification,et=["focus","blur","visibilitychange","freeze","resume","pageshow","onpageshow"in self?"pagehide":"unload"],rt=t=>(t.preventDefault(),t.returnValue="Are you sure?"),nt=[[J,Y,$,K],[J,Y,$,Q],[$,Y,J],[Q,$],[Q,J],[Q,Y]].map((t=>t.reduce(((t,e,r)=>(t[e]=r,t)),{}))),ot=()=>document.visibilityState===$?$:document.hasFocus()?J:Y;var it=new class extends X{constructor(){super();const t=ot();this.s=t,this.i=[],this.a=this.a.bind(this),et.forEach((t=>addEventListener(t,this.a,!0))),tt&&addEventListener("beforeunload",(t=>{this.n=setTimeout((()=>{t.defaultPrevented||t.returnValue.length>0||this.r(t,$)}),0)}))}get state(){return this.s}get pageWasDiscarded(){return document.wasDiscarded||!1}addUnsavedChanges(t){!this.i.indexOf(t)>-1&&(0===this.i.length&&addEventListener("beforeunload",rt),this.i.push(t))}removeUnsavedChanges(t){const e=this.i.indexOf(t);e>-1&&(this.i.splice(e,1),0===this.i.length&&removeEventListener("beforeunload",rt))}r(t,e){if(e!==this.s){const r=((t,e)=>{for(let r,n=0;r=nt[n];++n){const n=r[t],o=r[e];if(n>=0&&o>=0&&o>n)return Object.keys(r).slice(n,o+1)}return[]})(this.s,e);for(let e=0;e<r.length-1;++e){const n=r[e],o=r[e+1];this.s=o,this.dispatchEvent(new q("statechange",{oldState:n,newState:o,originalEvent:t}))}}}a(t){switch(tt&&clearTimeout(this.n),t.type){case"pageshow":case"resume":this.r(t,ot());break;case"focus":this.r(t,J);break;case"blur":this.s===J&&this.r(t,ot());break;case"pagehide":case"unload":this.r(t,t.persisted?Q:K);break;case"visibilitychange":this.s!==Q&&this.s!==K&&this.r(t,ot());break;case"freeze":this.r(t,Q)}}};const st=it;var at=r(783),ut=r(654),ct=!1;function ft(){if(window.console&&ct){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];console.log.apply(console,["%c SFS ","background: #000; color: #bada55"].concat(e))}}function lt(){if(window.console){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];console.error.apply(console,["%c SFS ","background: #000; color: #bada55"].concat(e))}}var ht=r(859),dt=r.n(ht),pt=[];function yt(t){return!!t.dataset.sfs&&t.dataset.sfs}function gt(t){mt(t.sfId),pt.push(t)}function mt(t){pt=pt.filter((function(e){return e.sfId!==t}))}function bt(t){return pt.filter((function(e){return e.sfId===t})).shift()}function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function wt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function St(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(r),!0).forEach((function(e){kt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function kt(t,e,r){return e=function(t){var e=function(t,e){if("object"!=vt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xt(t,e,r){if(!e.observer)return null;var n=new ResizeObserver(function(t,e){var r=0;return function(){for(var n=this,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];clearTimeout(r),r=setTimeout((function(){return t.apply(n,i)}),e)}}((function(){var n=function(t,e){var r=dt()(t)[0],n=t.getBoundingClientRect();n&&n.width&&n.width>300&&n.width<r&&(r=n.width);var o=parseInt(e.getComputedStyle(t,null).getPropertyValue("max-width"));return o&&r===o?o:r-(parseInt(e.getComputedStyle(t,null).getPropertyValue("padding-left"),10)+parseInt(e.getComputedStyle(t,null).getPropertyValue("padding-right"),10))-(parseInt(e.getComputedStyle(t,null).getPropertyValue("margin-left"),10)+parseInt(e.getComputedStyle(t,null).getPropertyValue("margin-right"),10))}(t,r),o=function(t){var e=t.getBoundingClientRect().height;return parseInt(e,10)}(t);Pt(e,n,o,r)}),300));return n.observe(t),n}function Pt(t,e,r,n){var o=t.bidWidth,i=t.bidHeight,s=t.sfId,a=t.upscale,u=t.downscale,c=t.observer,f=t.center;ft("Resizer: init",St({targetWidth:e,targetHeight:r},t));var l=n.document.querySelector('[data-sfs="'.concat(s,'"]'));l.removeAttribute("style");var h=n.document.getElementById("r-"+s);if(h.removeAttribute("style"),null!==r||null!==e){(0,ut.TD)(l,"display","flex"),(0,ut.TD)(l,"overflow","hidden"),(0,ut.TD)(l,"box-sizing","border-box");var d=f?"center":"left";(0,ut.TD)(l,"align-items",d),(0,ut.TD)(l,"justify-content",d),(0,ut.TD)(h,"transform-origin","center ".concat(d));var p,y=o/i;if(y>=1?(e?p=e/o:(p=r/i,e=Math.floor(p*o)),r||(r=Math.floor(p*i)),i*p>=r&&(p=r/i),o*p>=e&&(p=e/o)):(r?p=r/i:(p=e/o,r=Math.floor(p*i)),e||(e=Math.floor(p*o)),o*p>=e&&(p=e/o),i*p>=r&&(p=r/i)),c||((0,ut.TD)(l,"height",r+"px"),(0,ut.TD)(l,"width",e+"px")),"left"===d){var g=Math.floor((r-i)/2),m=d>=0?"padding":"margin";(0,ut.TD)(h,m,"".concat(g,"px 0"))}return p>1&&a?(ft("Resizer: upscale",St({scale:p,ratio:y,targetWidth:e,targetHeight:r},t)),void(0,ut.TD)(h,"transform","scale3d(".concat(p,", ").concat(p,", 1)"))):p<1&&u?(ft("Resizer: downscale",St({scale:p,ratio:y,targetWidth:e,targetHeight:r},t)),(0,ut.TD)(h,"transform","scale3d(".concat(p,", ").concat(p,", 1)")),void(0,ut.TD)(h,"width",o+"px")):void ft("Resizer: no resize",St({scale:p,ratio:y,targetWidth:e,targetHeight:r},t))}ft("Resizer: reset size",t)}var Tt,Et,Ot=["sf","resize"];function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function At(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(r),!0).forEach((function(e){Dt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Dt(t,e,r){return e=function(t){var e=function(t,e){if("object"!=jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Nt=null;const Rt={init:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.sf,n=e.resize,o=At(e,Ot);if(!(Et=It({debug:!1,context:window,endpoint:"https://sf.sparteo.com/{sfId}/render.html",cookieDisallow:!1,resize:It({observer:!1,center:!1,upscale:!1,downscale:!0},n),sf:It({debug:!1,timeout:3e3,"read-cookie":!0,"write-cookie":!0,onEndPosRender:null,onVisible:null,onPosMsg:null,onBeforePosMsg:null},r)},o)).context.postMessage)return lt("Invalid context, must be a valid window instance",Et.context);t=Et.debug,ct=t,ft("Init sfs SDK",Et),new at.default(It(It({},Et.sf),{},{context:Et.context})),st.addEventListener("statechange",(function(t){Nt=t.newState})),Tt=!0},resize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=yt(t),o=bt(n);if(!o)return ft("Manual resize: Container not found or not exist");if(o.observer)return ft("Manual resize: Resize disabled, observer is activate",n);var i=null===e||0===e?null:parseInt(e,10),s=null===r||0===r?null:parseInt(r,10);if(!i&&null!==i||!s&&null!==s)return ft("Manual resize: Invalid size",n,e,r);ft("Manual resize:",n,i,s),Pt(o,i,s,Et.context)},observer:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=yt(t),n=bt(r);return n?n.observer?ft("Observer: Already attach",r):(n.center=e,n.observer=!0,n._observer=xt(t,n,Et.context),gt(n),void ft("Observer: Attached",r,n)):ft("Observer: Container not found or not exist")},render:function(t,e){if(!Tt)return lt("SFS is not available");if(ft("Render",t,e),"banner"!==(null==e?void 0:e.mediaType))return ft("The bid is not a banner mediaType",e);if((null==e?void 0:e.width)<1||(null==e?void 0:e.height)<1)return ft("The bid have no valid size",e);var r=u();t.dataset.sfs=r;var n=function(t,e,r){var n=Et.context.document.createElement("iframe");n.sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation",n.allow="attribution-reporting; accelerometer; autoplay; encrypted-media; gyroscope; geolocation",n.scrolling="no",n.marginHeight="0",n.marginWidth="0",n.frameBorder="0",n.title="blank",n.src="about:blank",n.name='{"conf":{"id": "'.concat(e,'", "write-cookie": true, "read-cookie": true}}'),n.id="sf-"+e,n.width=r.width,n.height=r.height,Et.context.$sf.register(e,n);var o=Et.context.document.createElement("div");return o.id="r-"+e,o.appendChild(n),t.appendChild(o),ft("Append safeframe",e),n}(t,r,e);!function(t,e,r,n){var o={sfId:r,width:n.width,height:n.height,adUrl:n.adUrl,ad:n.ad,cookieDisallow:Et.cookieDisallow},i=Et.context.document.createElement("input");i.name="adp",i.type="hidden",i.value=W.encode(JSON.stringify(o));var s=Et.context.document.createElement("form");s.action=Et.endpoint.replace("{sfId}",r),s.method="POST",s.id="form-"+r,s.target=e.name,(0,ut.TD)(s,"display","none"),s.appendChild(i),t.appendChild(s),"terminated"!==Nt&&(ft("Send form",r,o),s.submit(),s.remove())}(t,n,r,e);var o=It({sfId:r,bidWidth:e.width,bidHeight:e.height},Et.resize);o._observer=xt(t,o,Et.context),gt(o)},destroy:function(t){var e=yt(t),r=bt(e);if(!r)return ft("Destroy: Container not found or not exist");r._observer&&r._observer.disconnect(),mt(e),Et.context.$sf.host.nuke(e),t.removeAttribute("data-sfs"),t.removeAttribute("style"),t.innerHTML="",ft("Destroy",e)}}})(),n=n.default})()));
function vsly(conf){ var vslypbjs = null;
;(function(omidGlobal) {
  var n;function da(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function p(a){var b='undefined'!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if('number'==typeof a.length)return{next:da(a)};throw Error(String(a)+' is not an iterable or ArrayLike');}function r(a){if(!(a instanceof Array)){a=p(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ea='function'==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},fa='function'==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function ha(a){a=['object'==typeof globalThis&&globalThis,a,'object'==typeof window&&window,'object'==typeof self&&self,'object'==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error('Cannot find global object');}var ia=ha(this);function t(a,b){if(b)a:{var c=ia;a=a.split('.');for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&fa(c,a,{configurable:!0,writable:!0,value:b})}}var ja;
if('function'==typeof Object.setPrototypeOf)ja=Object.setPrototypeOf;else{var ka;a:{var la={a:!0},ma={};try{ma.__proto__=la;ka=ma.a;break a}catch(a){}ka=!1}ja=ka?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+' is not extensible');return a}:null}var na=ja;
function oa(a,b){a.prototype=ea(b.prototype);a.prototype.constructor=a;if(na)na(a,b);else for(var c in b)if('prototype'!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.wa=b.prototype}function u(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b}function v(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
var pa='function'==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)v(d,e)&&(a[e]=d[e])}return a};t('Object.assign',function(a){return a||pa});
t('Symbol',function(a){function b(f){if(this instanceof b)throw new TypeError('Symbol is not a constructor');return new c(d+(f||'')+'_'+e++,f)}function c(f,h){this.g=f;fa(this,'description',{configurable:!0,writable:!0,value:h})}if(a)return a;c.prototype.toString=function(){return this.g};var d='jscomp_symbol_'+(1E9*Math.random()>>>0)+'_',e=0;return b});
t('Symbol.iterator',function(a){if(a)return a;a=Symbol('Symbol.iterator');for(var b='Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array'.split(' '),c=0;c<b.length;c++){var d=ia[b[c]];'function'===typeof d&&'function'!=typeof d.prototype[a]&&fa(d.prototype,a,{configurable:!0,writable:!0,value:function(){return qa(da(this))}})}return a});function qa(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
t('WeakMap',function(a){function b(k){this.g=(g+=Math.random()+1).toString();if(k){k=p(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}}function c(){}function d(k){var l=typeof k;return'object'===l&&null!==k||'function'===l}function e(k){if(!v(k,h)){var l=new c;fa(k,h,{value:l})}}function f(k){var l=Object[k];l&&(Object[k]=function(m){if(m instanceof c)return m;Object.isExtensible(m)&&e(m);return l(m)})}if(function(){if(!a||!Object.seal)return!1;try{var k=Object.seal({}),l=Object.seal({}),
m=new a([[k,2],[l,3]]);if(2!=m.get(k)||3!=m.get(l))return!1;m.delete(k);m.set(l,4);return!m.has(k)&&4==m.get(l)}catch(q){return!1}}())return a;var h='$jscomp_hidden_'+Math.random();f('freeze');f('preventExtensions');f('seal');var g=0;b.prototype.set=function(k,l){if(!d(k))throw Error('Invalid WeakMap key');e(k);if(!v(k,h))throw Error('WeakMap key fail: '+k);k[h][this.g]=l;return this};b.prototype.get=function(k){return d(k)&&v(k,h)?k[h][this.g]:void 0};b.prototype.has=function(k){return d(k)&&v(k,
h)&&v(k[h],this.g)};b.prototype.delete=function(k){return d(k)&&v(k,h)&&v(k[h],this.g)?delete k[h][this.g]:!1};return b});
t('Map',function(a){function b(){var g={};return g.L=g.next=g.head=g}function c(g,k){var l=g.g;return qa(function(){if(l){for(;l.head!=g.g;)l=l.L;for(;l.next!=l.head;)return l=l.next,{done:!1,value:k(l)};l=null}return{done:!0,value:void 0}})}function d(g,k){var l=k&&typeof k;'object'==l||'function'==l?f.has(k)?l=f.get(k):(l=''+ ++h,f.set(k,l)):l='p_'+k;var m=g.h[l];if(m&&v(g.h,l))for(g=0;g<m.length;g++){var q=m[g];if(k!==k&&q.key!==q.key||k===q.key)return{id:l,list:m,index:g,A:q}}return{id:l,list:m,
index:-1,A:void 0}}function e(g){this.h={};this.g=b();this.size=0;if(g){g=p(g);for(var k;!(k=g.next()).done;)k=k.value,this.set(k[0],k[1])}}if(function(){if(!a||'function'!=typeof a||!a.prototype.entries||'function'!=typeof Object.seal)return!1;try{var g=Object.seal({x:4}),k=new a(p([[g,'s']]));if('s'!=k.get(g)||1!=k.size||k.get({x:4})||k.set({x:4},'t')!=k||2!=k.size)return!1;var l=k.entries(),m=l.next();if(m.done||m.value[0]!=g||'s'!=m.value[1])return!1;m=l.next();return m.done||4!=m.value[0].x||
't'!=m.value[1]||!l.next().done?!1:!0}catch(q){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(g,k){g=0===g?0:g;var l=d(this,g);l.list||(l.list=this.h[l.id]=[]);l.A?l.A.value=k:(l.A={next:this.g,L:this.g.L,head:this.g,key:g,value:k},l.list.push(l.A),this.g.L.next=l.A,this.g.L=l.A,this.size++);return this};e.prototype.delete=function(g){g=d(this,g);return g.A&&g.list?(g.list.splice(g.index,1),g.list.length||delete this.h[g.id],g.A.L.next=g.A.next,g.A.next.L=g.A.L,g.A.head=null,this.size--,
!0):!1};e.prototype.clear=function(){this.h={};this.g=this.g.L=b();this.size=0};e.prototype.has=function(g){return!!d(this,g).A};e.prototype.get=function(g){return(g=d(this,g).A)&&g.value};e.prototype.entries=function(){return c(this,function(g){return[g.key,g.value]})};e.prototype.keys=function(){return c(this,function(g){return g.key})};e.prototype.values=function(){return c(this,function(g){return g.value})};e.prototype.forEach=function(g,k){for(var l=this.entries(),m;!(m=l.next()).done;)m=m.value,
g.call(k,m[1],m[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});t('Object.values',function(a){return a?a:function(b){var c=[],d;for(d in b)v(b,d)&&c.push(b[d]);return c}});function ra(a,b){a instanceof String&&(a+='');var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}t('Array.prototype.keys',function(a){return a?a:function(){return ra(this,function(b){return b})}});
t('Set',function(a){function b(c){this.g=new Map;if(c){c=p(c);for(var d;!(d=c.next()).done;)this.add(d.value)}this.size=this.g.size}if(function(){if(!a||'function'!=typeof a||!a.prototype.entries||'function'!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new a(p([c]));if(!d.has(c)||1!=d.size||d.add(c)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=c||f.value[1]!=c)return!1;f=e.next();return f.done||f.value[0]==c||4!=f.value[0].x||
f.value[1]!=f.value[0]?!1:e.next().done}catch(h){return!1}}())return a;b.prototype.add=function(c){c=0===c?0:c;this.g.set(c,c);this.size=this.g.size;return this};b.prototype.delete=function(c){c=this.g.delete(c);this.size=this.g.size;return c};b.prototype.clear=function(){this.g.clear();this.size=0};b.prototype.has=function(c){return this.g.has(c)};b.prototype.entries=function(){return this.g.entries()};b.prototype.values=function(){return this.g.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=
b.prototype.values;b.prototype.forEach=function(c,d){var e=this;this.g.forEach(function(f){return c.call(d,f,f,e)})};return b});t('Object.is',function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});t('Array.prototype.includes',function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});
t('String.prototype.includes',function(a){return a?a:function(b,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError('First argument to String.prototype.includes must not be a regular expression');return-1!==this.indexOf(b,c||0)}});t('Array.prototype.values',function(a){return a?a:function(){return ra(this,function(b,c){return c})}});
var x={na:'loaded',ta:'start',ka:'firstQuartile',oa:'midpoint',ua:'thirdQuartile',ia:'complete',pa:'pause',ra:'resume',ha:'bufferStart',ga:'bufferFinish',sa:'skipped',va:'volumeChange',qa:'playerStateChange',fa:'adUserInteraction'},sa={la:'full',ja:'domain',ma:'limited'};function z(a,b){this.x=null!=a.x?a.x:a.left;this.y=null!=a.y?a.y:a.top;this.width=a.width;this.height=a.height;this.J=this.x+this.width;this.K=this.y+this.height;this.H=a.H||void 0;this.V=a.V||[];this.h=a.friendlyObstructionClass||void 0;this.i=a.friendlyObstructionPurpose||void 0;this.j=a.friendlyObstructionReason||void 0;this.P=void 0!==a.P?!0===a.P:!0;this.m=void 0!==a.hasWindowFocus?!0===a.hasWindowFocus:!0;this.D=a.D||void 0;this.aa=a.aa||void 0;this.W='true'===a.W||!0===a.W||!1;this.N=a.N||
[];this.R=a.R||!1;this.g=b}function ta(a){var b={};return b.width=a.width,b.height=a.height,b}function C(a){var b={};return Object.assign({},ta(a),(b.x=a.x,b.y=a.y,b))}function ua(a){var b=C(a),c={};return Object.assign({},b,(c.endX=a.J,c.endY=a.K,c))}z.prototype.T=function(a){if(null==a)return!1;a=C(a);var b=a.y,c=a.width,d=a.height;return this.x===a.x&&this.y===b&&this.width===c&&this.height===d};function Aa(a){return a.width*a.height}function Ba(a){return 0===a.width||0===a.height};function Ca(a,b){a=C(a);for(var c=[],d=[],e=0;e<b.length;e++){var f=C(b[e]);f=Da(a,f);Ea(c,f.x);Ea(c,f.J);Ea(d,f.y);Ea(d,f.K)}c=c.sort(function(h,g){return h-g});d=d.sort(function(h,g){return h-g});return{da:c,ea:d}}function Da(a,b){return{x:Math.max(a.x,b.x),y:Math.max(a.y,b.y),J:Math.min(a.x+a.width,b.x+b.width),K:Math.min(a.y+a.height,b.y+b.height)}}function Ea(a,b){-1===a.indexOf(b)&&a.push(b)};function Fa(){this.h=this.g=this.i=this.l=void 0;this.u=0;this.o=[];this.v=[];this.B=0;this.s=[];this.j=[];this.m=[]}Fa.prototype.T=function(a){return null==a?!1:JSON.stringify(Ga(this))===JSON.stringify(Ga(a))};
function Ga(a){var b=[],c=[],d={viewport:a.l,adView:{percentageInView:a.u,pixelsInView:a.B,reasons:a.m},declaredFriendlyObstructions:a.o.length};if(void 0!==a.g){d.adView.geometry=C(a.g);d.adView.geometry.pixels=Aa(a.g);d.adView.onScreenGeometry=C(a.h);d.adView.onScreenGeometry.pixels=Ha(a);for(var e=0;e<a.j.length;e++)b.push(C(a.j[e]));for(e=0;e<a.v.length;e++){var f=a.v[e],h=f,g={};h.h&&(g.obstructionClass=h.h);h.i&&(g.obstructionPurpose=h.i);h.j&&(g.obstructionReason=h.j);f=Da(a.g,f);c.push(Object.assign({},
{x:f.x,y:f.y,width:f.J-f.x,height:f.K-f.y},g))}d.adView.onScreenGeometry.obstructions=b;d.adView.onScreenGeometry.friendlyObstructions=c}return d}function Ia(a,b){b=ta(b);a.l={};a.l.width=b.width;a.l.height=b.height;a.i={};a.i.x=0;a.i.y=0;a.i.width=b.width;a.i.height=b.height;a.i.endX=b.width;a.i.endY=b.height}function Ja(){return{x:0,y:0,endX:0,endY:0,width:0,height:0}}
function Ka(a,b){var c={};c.x=Math.max(a.x,b.x);c.y=Math.max(a.y,b.y);c.endX=Math.min(a.endX,b.endX);c.endY=Math.min(a.endY,b.endY);c.width=Math.max(0,c.endX-c.x);c.height=Math.max(0,c.endY-c.y);return c}function La(a,b){return.01<b.width-a.width||.01<b.height-a.height}function Ma(a){if(-1!==a.m.indexOf('backgrounded'))a.u=0,a.B=0;else{var b=Aa(a.g);if(0!==b){var c=Ha(a);a.u=Math.round(c/b*100);a.B=c}}}
function Na(a,b){if(Ba(b)||!a.h)b=!1;else{var c=ua(a.h),d=c.y,e=c.endX;a=c.endY;var f=b.J;c=c.x;(f=f<c||.01>Math.abs(f-c))||(f=b.x,f=f>e||.01>Math.abs(f-e));(e=f)||(e=b.K,e=e<d||.01>Math.abs(e-d));(d=e)||(b=b.y,d=b>a||.01>Math.abs(b-a));b=!d}return b}function E(a,b){for(var c=!1,d=0;d<a.m.length;d++)a.m[d]===b&&(c=!0);c||a.m.push(b)}
function Ha(a){var b=Math,c=b.max,d=Aa(a.h),e=a.j,f=0;if(0<e.length){var h=Ca(a.h,e);a=h.da;h=h.ea;for(var g=0;g<a.length-1;g++)for(var k=(a[g]+(a[g]+1))/2,l=a[g+1]-a[g],m=0;m<h.length-1;m++){for(var q=(h[m]+(h[m]+1))/2,D=h[m+1]-h[m],H=!1,L=0;L<e.length;L++){var y=C(e[L]);if(y.x<k&&y.x+y.width>k&&y.y<q&&y.y+y.height>q){H=!0;break}}H&&(f+=Math.round(l)*Math.round(D))}}return c.call(b,0,d-f)};function Oa(){};function Pa(){}
function Qa(a,b,c,d){var e=b.R?!0:b.H===d;if(e){c.g=b;var f=ua(c.g);a=Ka(c.i,f);var h=c.g;'notAttached'===h.D||'noWindowFocus'===h.D||'noAdView'===h.D?(E(c,'notFound'),c.h=new z(Ja(),!1)):(h=c.g,'viewInvisible'===h.D||'viewGone'===h.D||'viewNotVisible'===h.D||'viewAlphaZero'===h.D||'viewHidden'===h.D||void 0!==c.g.D||Ba(c.g)?(E(c,'hidden'),c.h=new z(Ja(),!1)):(c.g.W&&E(c,'pictureInPicture'),c.g.m||(E(c,'backgrounded'),E(c,'noWindowFocus')),La(a,f)&&E(c,'clipped'),c.h=new z(a,!1)))}else if(f=!0,b.g&&
(f=-1!==b.V.indexOf(d)?!1:!1===b.P),f){h=b.N;for(var g=0;g<h.length;g++)f=void 0!==c.g,Qa(a,new z(h[g],f),c,d)}e||void 0===c.g||(b.g?-1!==b.V.indexOf(d)?c.o.push(b):c.s.push(b):(e=ua(b),d=ua(c.h),C(c.h),!Ba(c.h)&&b.P&&(b=Ka(d,e),La(b,d)&&(E(c,'clipped'),c.h=new z(b,!1)))))};function Ra(){this.g=new Map;this.h=null}function Sa(){Ta||(Ta=new Ra);return Ta}var Ta=null;function Ua(a,b){this.y=this.x=0;this.width=a;this.height=b};function Va(){this.H=null;this.i={apiVersion:'1.0',accessMode:'limited',environment:'web',omidJsInfo:{omidImplementer:'omsdk',serviceVersion:'1.5.5-iab77'},adSessionType:'html',supports:['clid','vlid']};this.C=null;this.B='foregrounded';this.s=this.j='none';this.o=this.l=this.m=this.G=this.h=this.g=this.M=this.v=null;this.u=new Map};var F=function(){if('undefined'!==typeof omidGlobal&&omidGlobal)return omidGlobal;if('undefined'!==typeof global&&global)return global;if('undefined'!==typeof window&&window)return window;if('undefined'!==typeof globalThis&&globalThis)return globalThis;var a=Function('return this')();if(a)return a;throw Error('Could not determine global object context.');}();function Wa(a){if(a===F)return!1;try{if('undefined'===typeof a.location.hostname)return!0}catch(b){return!0}return!1}function eb(){var a=omidGlobal;if(null==a||'undefined'===typeof a.top||null==a.top)return null;try{var b=a.top;return Wa(b)?null:b.location.href}catch(c){return null}};function fb(a,b){this.g=a;this.h=b}ia.Object.defineProperties(fb.prototype,{event:{configurable:!0,enumerable:!0,get:function(){return this.g}},origin:{configurable:!0,enumerable:!0,get:function(){return this.h}}});function G(){var a=u.apply(0,arguments);gb(function(){throw new (Function.prototype.bind.apply(Error,[null,'Could not complete the test successfully - '].concat(r(a))));},function(){return console.error.apply(console,r(a))})}function hb(){var a=u.apply(0,arguments);gb(function(){},function(){return console.error.apply(console,r(a))})}function gb(a,b){'undefined'!==typeof jasmine&&jasmine?a():'undefined'!==typeof console&&console&&console.error&&b()};function ib(a){this.g=a;this.m=[];this.i=[];this.j=[];this.l=[];this.o={}}function jb(a,b){if(void 0!==a.g&&a.g.H&&!1!==kb(a,b)){var c=b.event;a.j.filter(function(d){return d.type===c.type}).forEach(function(d){a.h(d.I,c)})}}function I(a,b){a.m.push(b);jb(a,b)}function lb(a,b,c){void 0!==a.g&&a.g.H&&a.m.filter(function(d){return d.event.type===b&&kb(a,d)}).map(function(d){return d.event}).forEach(function(d){a.h(c.I,d)})}
function kb(a,b){var c=b.event.type,d=-1!==Object.values(x).indexOf(c)&&'volumeChange'!==c;return'impression'===c||'loaded'===c&&a.g.h?b.origin===a.g.s:d?b.origin===a.g.j:!0}function mb(a,b,c){Object.keys(x).forEach(function(d){d=x[d];var e={type:d,U:c,I:b};a.j.push(e);lb(a,d,e)})}function nb(a,b,c,d){var e={ba:c,U:d,I:b};a.l.push(e);a.i.forEach(function(f){var h=ob(f);'sessionStart'===f.event.type&&pb(a,h,e);a.h(e.I,h)})}
function qb(a,b,c){var d=M(a,'sessionError','native',{errorType:b,message:c});a.i.push(d);a.l.forEach(function(e){a.h(e.I,d.event)})}function rb(a,b){a.o=Object.assign(a.o,b);b=a.g.i;if(void 0!==b){b=Object.assign({},sb(tb(a,ub(a,{context:b}),!0)),{supportsLoadedEvent:!!a.g.h||'video'==a.g.g});Object.assign(b,{pageUrl:eb(),contentUrl:a.g.C});var c=M(a,'sessionStart','native',b);a.i.push(c);a.l.forEach(function(d){var e=ob(c);pb(a,e,d);a.h(d.I,e)},a);vb(a)}}
function pb(a,b,c){c.ba&&(b.data.verificationParameters=a.o[c.ba]);c.U&&(c=a.g.u.get(c.U))&&(b.data.verificationParameters=c.verificationParameters,b.data.context.accessMode=c.accessMode,'full'===c.accessMode&&(a.g.l&&(b.data.context.videoElement=a.g.l),a.g.m&&(b.data.context.slotElement=a.g.m)))}function wb(a){var b=M(a,'sessionFinish','native');a.i.push(b);a.l.forEach(function(c){a.h(c.I,b.event)})}ib.prototype.h=function(a){var b=u.apply(1,arguments);try{a.apply(null,r(b))}catch(c){hb(c)}};
function vb(a){var b=a.m.filter(function(f){return Object.values(x).includes(f.event.type)&&'video'==a.g.g&&f.origin===a.g.j||'loaded'==f.event.type&&'display'==a.g.g&&f.origin===a.g.s?!0:!1}).map(function(f){return f.event}),c=a.g.H||'',d={};b=p(b);for(var e=b.next();!e.done;d={F:d.F},e=b.next()){d.F=e.value;d.F.adSessionId||(d.F.adSessionId=c);if('loaded'==d.F.type){if(!a.g.h&&'display'==a.g.g)continue;d.F.data=tb(a,ub(a,d.F.data))}a.j.filter(function(f){return function(h){return h.type===f.F.type}}(d)).forEach(function(f){return function(h){return h.I(f.F)}}(d))}}
function xb(a,b){a:{b=new Set(b);a=p(a.m.concat(a.i));for(var c=a.next();!c.done;c=a.next())if(c=c.value,b.has(c.event.type)&&'javascript'!=c.origin){b=!0;break a}b=!1}return b?(G('Event owner cannot be registered after its events have already been published.'),!1):!0}function yb(a){var b=a.g.s;return'none'!=b&&'javascript'!=b?(G('Impression event is owned by '+(a.g.s+', not javascript.')),!1):!0}
function zb(a){var b=a.g.j;return'none'!=b&&'javascript'!=b?(G('Media events are owned by '+(a.g.j+', not javascript.')),!1):!0}function tb(a,b,c){c=void 0===c?!1:c;b=Object.assign({},b);a.g.g&&Object.assign(b,{mediaType:a.g.g});a.g.h&&(c||'definedByJavaScript'!==a.g.h)&&Object.assign(b,{creativeType:a.g.h});return b}function sb(a){var b=Sa().h;return b?Object.assign({},a,{lastActivity:b}):a}function ub(a,b){return a.g.G?Object.assign({},b,{impressionType:a.g.G}):b}
function M(a,b,c,d){return new fb({adSessionId:a.g.H||'',timestamp:(new Date).getTime(),type:b,data:d},c)}function ob(a){a=a.event;var b=a.data?Object.assign({},a.data):void 0;'sessionStart'===a.type&&(b.context=Object.assign({},b.context));return{adSessionId:a.adSessionId,timestamp:a.timestamp,type:a.type,data:b}}function Ab(a,b,c){'start'!==b&&'volumeChange'!==b||null!=(c&&c.deviceVolume)||(c.deviceVolume=a.g.v)}
function Bb(a,b,c){if(c&&('start'===b||'volumeChange'===b)){b=c.videoPlayerVolume;var d=c.mediaPlayerVolume;null!=b?(Object.assign(c,{mediaPlayerVolume:b}),a.g.M=b):null!=d&&(Object.assign(c,{videoPlayerVolume:d}),a.g.M=d)}};function Cb(a,b){this.h=a;this.g=b};function Db(){var a;this.g=a=void 0===a?omidGlobal:a}Db.prototype.setInterval=function(a,b){return Eb(this,'setInterval')(a,b)};Db.prototype.clearInterval=function(a){Eb(this,'clearInterval')(a)};function Fb(a,b){Eb(a,'clearTimeout')(b)}function Eb(a,b){return a.g&&a.g[b]?a.g[b]:Gb(a,b)}
function Hb(a,b,c,d){if(a.g.document&&a.g.document.body){var e=a.g.document.createElement('img');e.width=1;e.height=1;e.style.display='none';e.src=b;c&&e.addEventListener('load',function(){return c()});d&&e.addEventListener('error',function(){return d()});a.g.document.body.appendChild(e)}else Gb(a,'sendUrl')(b,c,d)}function Gb(a,b){if(a.g&&a.g.omidNative&&a.g.omidNative[b])return a.g.omidNative[b].bind(a.g.omidNative);throw Error('Native interface method "'+b+'" not found.');};function Ib(a){return!(!a||!a.tagName||'iframe'!==a.tagName.toLowerCase())};function O(a,b,c,d,e){this.j=a;this.ca=b;this.X=c;this.i=d;this.$=e;this.h=null;this.g=this.m=this.M=void 0;this.Z=!0;this.o=void 0;Jb(this)}
function Jb(a){if(!a.h){var b;a:{if((b=a.j.document)&&b.getElementsByClassName&&(b=b.getElementsByClassName('omid-element'))){if(1==b.length){b=b[0];break a}1<b.length&&a.Z&&(qb(a.X,'generic',"More than one element with 'omid-element' class name."),a.Z=!1)}b=null}if(b&&b.tagName&&'video'===b.tagName.toLowerCase())a.i.l=b;else if(b&&b.tagName)a.i.m=b;else return;Kb(a)}}function Kb(a){a.i.l?(a.h=a.i.l,a.s()):a.i.m&&(a.h=a.i.m,Ib(a.h)?a.i.o&&a.s():a.s())}
function P(a){a.g&&(Ib(a.h)?a.i.o&&(a.S(),Lb(a)):(a.S(),Lb(a)))}O.prototype.v=function(){this.o&&(this.j.document.removeEventListener('visibilitychange',this.o),this.o=void 0)};O.prototype.s=function(){var a=this;this.o||(this.o=function(){a.i.B=a.j.document.hidden?'backgrounded':'foregrounded';P(a)},this.j.document.addEventListener('visibilitychange',this.o),this.o())};
function Lb(a){if(a.M){a.i.S=a.M;a=a.ca;var b=a.g.S,c=a.g.O;if(b&&!b.T(c)){c=Ga(b);var d=a.h;'audio'!=d.g.h&&I(d,M(d,'geometryChange','native',c));a.g.O=b}}}function Mb(a){if(a.g&&a.i.o){var b=new z(a.i.o,!1),c=a.g.x;a=a.g.y;b.x+=c;b.y+=a;b.J+=c;b.K+=a;b.P=!0;return b}};function Q(a,b,c,d,e,f){O.call(this,a,c,d,e,f);this.u=b;this.l=void 0}oa(Q,O);Q.prototype.v=function(){void 0!==this.l&&(this.$.clearInterval(this.l),this.l=void 0);O.prototype.v.call(this)};Q.prototype.s=function(){var a=this;O.prototype.s.call(this);null==this.h?this.l=void 0:void 0===this.l&&(this.l=this.$.setInterval(function(){return Nb(a)},200),Nb(this))};
Q.prototype.S=function(){if(this.m){var a=Mb(this);if(a){this.g.R=!1;a.R=!0;for(var b=!1,c=0;c<this.g.N.length;c++)if(this.g.N[c].R){this.g.N[c]=a;b=!0;break}b||this.g.N.push(a)}else this.g.R=!0;b=this.u;c=this.i.B;var d=this.i.H,e=this.O();a=new Fa;var f=new z(this.m,!1);Ia(a,f);Qa(b,f,a,d);if(e)if(f.aa)E(a,'backgrounded'),E(a,'noOutputDevice');else if('backgrounded'===c)E(a,'backgrounded');else if(void 0!==a.g){for(b=0;b<a.o.length;b++)Na(a,a.o[b])&&a.v.push(a.o[b]);for(b=0;b<a.s.length;b++){if(c=
Na(a,a.s[b])){b:{c=a.s[b];for(d=0;d<a.j.length;d++)if(a.j[d].T(c)){c=!0;break b}c=!1}c=!c}c&&(E(a,'obstructed'),a.j.push(a.s[b]))}Ma(a)}else E(a,'notFound');else a.m=['unmeasurable'],a.l=void 0,a.u=0,a.j=[],a.g&&(b=a.g,c={},b=new z((c.x=0,c.y=0,c.width=b.width,c.height=b.height,c),b.g),a.g=b),a.h=Ja();this.M=a}};Q.prototype.O=function(){return Ob(this)};
function Nb(a){if(void 0!==a.l){if(Ob(a)){var b=a.j.top;b=new z(new Ua(b.innerWidth,b.innerHeight),!1)}else b=new z(new Ua(0,0),!1);var c=a.h.getBoundingClientRect();if(null==c.x||isNaN(c.x))c.x=c.left;if(null==c.y||isNaN(c.y))c.y=c.top;c=new z(c,!1);b.T(a.m)&&c.T(a.g)||(a.g=c,a.g.P=!0,a.m=b,a.m.N.push(a.g),P(a))}}function Ob(a){try{var b=a.j.top;return 0<=b.innerHeight&&0<=b.innerWidth}catch(c){}return!1};function R(a,b,c,d,e,f){O.call(this,a,c,d,e,f);this.C=this.u=this.B=this.l=void 0;this.Y=!1;this.G=void 0}oa(R,O);R.prototype.v=function(){this.l&&this.l.disconnect();Pb(this);O.prototype.v.call(this)};R.prototype.s=function(){O.prototype.s.call(this);if(this.h&&(this.l||(this.l=Qb(this)),Rb(this),Sb(this.h)&&Tb(this),'backgrounded'===this.i.B)){var a=Ub(new Ua(0,0));this.G=this.g=this.m=a;P(this)}};
R.prototype.S=function(){if(this.g&&this.G){var a=Mb(this);if(a){var b=a;var c=this.G;var d=Math.max(a.x,c.x);var e=Math.max(a.y,c.y),f=Math.min(a.J,c.J);a=Math.min(a.K,c.K);f<=d||a<=e?d=null:(c={},d=new z((c.x=d,c.y=e,c.width=Math.abs(f-d),c.height=Math.abs(a-e),c),!1));d||(d=new z({x:0,y:0,width:0,height:0},!1))}else b=this.g,d=this.G;e=new Fa;this.m&&Ia(e,this.m);(f='backgrounded'==this.i.B)&&E(e,'backgrounded');e.g=b;e.h=d;Ma(e);this.Y?!f&&Ba(e.g)?E(e,'hidden'):f||100===e.u||E(e,'clipped'):E(e,
'viewport');this.M=e}};R.prototype.O=function(){return!0};function Pb(a){a.B&&(a.B.disconnect(),a.B=void 0);a.u&&(a.u.disconnect(),a.u=void 0);a.C&&((0,a.j.removeEventListener)('resize',a.C),a.C=void 0)}function Rb(a){a.l&&a.h&&(a.l.unobserve(a.h),a.l.observe(a.h))}function Sb(a){a=a.getBoundingClientRect();return 0==a.width||0==a.height}
function Qb(a){return new a.j.IntersectionObserver(function(b){try{if(b.length){for(var c,d=b[0],e=1;e<b.length;e++)b[e].time>d.time&&(d=b[e]);c=d;a.m=Ub(c.rootBounds);a.g=Ub(c.boundingClientRect);a.G=Ub(c.intersectionRect);a.Y=!!c.isIntersecting;P(a)}}catch(f){a.v(),qb(a.X,'generic','Problem handling IntersectionObserver callback: '+f.message)}},{root:null,rootMargin:'0px',threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]})}
function Tb(a){a.j.ResizeObserver?a.B||(a.B=Vb(a,function(){return Wb(a)}),a.B.observe(a.h)):(a.C||(a.C=function(){return Wb(a)},(0,a.j.addEventListener)('resize',a.C)),a.u||(a.u=new MutationObserver(function(){return Wb(a)}),a.u.observe(a.h,{childList:!1,attributes:!0,subtree:!1})))}function Wb(a){a.h&&!Sb(a.h)&&(Rb(a),Pb(a))}function Vb(a,b){return new a.j.ResizeObserver(b)}function Ub(a){if(a&&null!==a.x&&null!==a.y&&null!==a.width&&null!==a.height)return new z(a,!1)};function Xb(a){if('object'===typeof a&&'object'===typeof a.webOSSystem)return a.webOSSystem}function Yb(a){return'object'===typeof Xb(a)}function S(a){if('object'===typeof a&&'object'===typeof a.tizen)return a.tizen}function T(a){return'object'===typeof S(a)};function Zb(a,b){this.h=a;this.g=b};function $b(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(a){var b=16*Math.random()|0;return'y'===a?(b&3|8).toString(16):b.toString(16)})};function ac(a,b){var c=void 0===c?F:c;this.i=a;this.g=c;this.j=b;this.h=[]}
function bc(a){if(!a.g||!a.g.document)throw Error('OMID Service Script is not running within a window.');var b=a.h;a.h=[];b.forEach(function(c){try{var d=c.accessMode,e='string'===typeof d&&-1!==Object.values(sa).indexOf(d)?c.accessMode:null;var f=e?'domain'==e?'limited':e:'limited';c.accessMode=f;a:{var h=c.resourceUrl,g=a.g.location.origin;try{var k=new URL(h,g);break a}catch(D){}try{k=new URL(h);break a}catch(D){}k=null}if(d=k){var l=$b();wc(a,l,d,f);var m=c.vendorKey,q=c.verificationParameters;
m=void 0===m?'':m;q=void 0===q?'':q;m&&'string'===typeof m&&''!==m&&q&&'string'===typeof q&&''!==q&&(a.i.o[m]=q);a.j.u.set(l,c)}}catch(D){hb('OMID verification script '+c.resourceUrl+' failed to load: '+D)}})}
function wc(a,b,c,d){var e=a.g.document,f=e.createElement('iframe');f.id='omid-verification-script-frame-'+b;f.style.display='none';if('full'==d){var h=function(){var g=f.contentWindow;g.omidVerificationProperties={serviceWindow:a.g,injectionSource:'web',injectionId:b};g=g.document;var k=g.createElement('script');k.src=c.href;g.head.appendChild(k);f.removeEventListener('load',h)};f.addEventListener('load',h)}else'limited'==d&&(f.srcdoc="<html><head>\n<script type=\"text/javascript\">window['omidVerificationProperties'] = {\n'serviceWindow': window.parent,\n'injectionSource': 'web',\n'injectionId': '"+
(b+'\',\n};\x3c/script>\n<script type="text/javascript" src="')+c.href+'">\x3c/script>\n</head><body></body></html>',f.sandbox='allow-scripts');e.body.appendChild(f);Sa().g.set(b,f)};function xc(a,b){var c=window,d=this;if(Yb(c))if(c)if(c.WebOSServiceBridge){this.i=a;this.h=b;this.g=new c.WebOSServiceBridge;this.g.onservicecallback=function(e){try{var f=JSON.parse(e);if(f&&f.errorCode)d.error(e);else if(!f)d.error('No object recieved from webOS bridge');else if(!yc(d,e,f,'volumeStatus','object')){var h=f.volumeStatus;yc(d,e,h,'muteStatus','boolean')||yc(d,e,h,'volume','number')||yc(d,e,h,'maxVolume','number')||(0>=h.maxVolume?d.error('Invalid max volume status.'):d.i(h.muteStatus?
0:h.volume/h.maxVolume))}}catch(g){d.error(g)}};try{this.g.call('luna://com.webos.service.audio/master/getVolume','{"subscribe":true}')}catch(e){this.error(e)}}else this.h('No WebOSServiceBridge on windowContext');else this.h('No window context')}xc.prototype.stop=function(){this.g&&this.g.cancel&&this.g.cancel();this.g=null};xc.prototype.error=function(a){this.stop();this.h&&this.h(a)};
function yc(a,b,c,d,e){if(typeof c[d]===e)return!1;a.error('Unexpected formatting on message from webOS bridge: "'+b+'". Expected "'+d+'" to be of type "'+e+'" but was of type "'+typeof c[d]+'".');return!0};function zc(a){return T(a)?'object'===typeof S(a).tvinputdevice:!1}function Ac(a,b){var c=window,d=this;if(c)if(this.validate(c)){this.h=b;var e=S(c).tvaudiocontrol;this.g=void 0;b=function(){var f=e.isMute()?0:e.getVolume()/100;if(void 0===d.g||d.g!=f)d.g=f,a(d.g)};b();this.i=c.setInterval(b,200);this.j=c}else b('Invalid Tizen window context');else b('No window context')}
Ac.prototype.stop=function(){void 0!==this.i&&'function'===typeof this.j.clearInterval&&this.j.clearInterval(this.i);this.h=this.g=this.i=void 0};Ac.prototype.validate=function(a){return T(a)&&zc(a)&&'object'===typeof S(a).tvaudiocontrol&&'function'===typeof a.setInterval&&'function'===typeof a.clearInterval};Ac.prototype.error=function(a){this.stop();this.h&&this.h(a)};function Bc(a,b,c,d,e){var f=this;this.g=a;this.i=b;this.h=c;this.l=d;this.o=e;this.m=!1;Cc(this,function(h){if('sessionStart'===h.type){f.m=!0;try{bc(f.l)}catch(g){G(g.message)}}'sessionFinish'===h.type&&(f.m=!1)})}function Cc(a,b,c,d){nb(a.i,b,c,d)}n=Bc.prototype;n.setSlotElement=function(a){a&&a.tagName?(this.g.m=a,this.h&&Kb(this.h)):G('setSlotElement called with a non-HTMLElement.  It will be ignored.')};n.setElementBounds=function(a){this.g.o=a;this.h&&Kb(this.h);this.h&&P(this.h)};
n.error=function(a,b){qb(this.i,a,b)};n.injectVerificationScriptResources=function(a){var b=this.l;b.h.push.apply(b.h,r(a));if(this.m)try{bc(this.l)}catch(c){G(c.message)}};n.setCreativeType=function(a,b){b=void 0===b?null:b;if(!this.g.g||this.g.h)this.g.h=a,'video'==a||'audio'==a?this.g.g='video':'htmlDisplay'==a||'nativeDisplay'==a?this.g.g='display':'definedByJavaScript'==a&&b&&(this.g.g='none'==b?'display':'video')};n.setImpressionType=function(a){if(!this.g.g||this.g.h)this.g.G=a};
n.setClientInfo=function(a,b,c){var d=this.g.i||{};d.omidJsInfo=Object.assign({},d.omidJsInfo,{sessionClientVersion:a,partnerName:b,partnerVersion:c});this.g.i=d;return this.g.i.omidJsInfo.serviceVersion};
function Dc(a){if(T(window)||Yb(window)){var b=function(d){if(a.g.v!==d&&'none'!==a.i.g.j&&'number'===typeof d&&!isNaN(d)){a.g.v=d;var e=a.o,f=e.g.M;null!=f&&(d=e.h,e={mediaPlayerVolume:f,deviceVolume:e.g.v},Ab(d,'volumeChange',e),Bb(d,'volumeChange',e),I(d,M(d,'volumeChange','native',e)))}},c=function(d){G(d)};Yb(window)?a.j=new xc(b,c):T(window)&&(a.j=new Ac(b,c))}};function Ec(a,b){if(!b)return a.g;for(var c=p(a.h.values()),d=c.next();!d.done;d=c.next())if(d=d.value,d.g.u.has(b))return d;return a.g}function U(a,b){return null==b?a.g:a.h.get(b)||a.g}function Fc(a){var b=new Va,c=new ib(b),d=new Oa,e=new Pa,f=new Cb(c,b);a=a.i;var h=omidGlobal;d=h?h.IntersectionObserver&&(h.MutationObserver||h.ResizeObserver)?new R(h,d,f,c,b,a):new Q(h,e,f,c,b,a):null;return new Bc(b,c,d,new ac(c,b),new Zb(c,b))};function V(a,b,c,d){this.h=a;this.method=b;this.version=c;this.g=d}function Gc(a){return!!a&&void 0!==a.omid_message_guid&&void 0!==a.omid_message_method&&void 0!==a.omid_message_version&&'string'===typeof a.omid_message_guid&&'string'===typeof a.omid_message_method&&'string'===typeof a.omid_message_version&&(void 0===a.omid_message_args||void 0!==a.omid_message_args)}function Hc(a){return new V(a.omid_message_guid,a.omid_message_method,a.omid_message_version,a.omid_message_args)}
function Ic(a){var b={};b=(b.omid_message_guid=a.h,b.omid_message_method=a.method,b.omid_message_version=a.version,b);void 0!==a.g&&(b.omid_message_args=a.g);return b};function Jc(a){this.i=a};function X(a){this.i=a;this.handleExportedMessage=X.prototype.j.bind(this)}oa(X,Jc);X.prototype.h=function(a,b){b=void 0===b?this.i:b;if(!b)throw Error('Message destination must be defined at construction time or when sending the message.');b.handleExportedMessage(Ic(a),this)};X.prototype.j=function(a,b){Gc(a)&&this.g&&this.g(Hc(a),b)};function Kc(a){return Lc(a,'SessionService.')}function Lc(a,b){return(a=a.match(new RegExp('^'+b+'(.*)')))&&a[1]};function Mc(a,b){this.h=a;this.i=b}Mc.prototype.g=function(a){var b=u.apply(1,arguments);a:switch(a){case 'registerSessionObserver':var c=b.slice(1);break a;default:c=b}return this.h('SessionService.'+a,this.j.bind(this,a,b),c)};Mc.prototype.j=function(a,b,c){switch(a){case 'registerSessionObserver':a=p(b).next().value,a(c)}};function Y(a,b){return a.g.bind(a,b)}
function Nc(a,b){b=void 0===b?F:b;null==b.omidSessionInterface&&(a={setSessionClientWindow:a.i,setClientInfo:Y(a,'setClientInfo'),registerSessionObserver:Y(a,'registerSessionObserver'),startAdSession:Y(a,'startSession'),finishAdSession:Y(a,'finishSession'),reportError:Y(a,'sessionError'),registerAdEvents:Y(a,'registerAdEvents'),registerMediaEvents:Y(a,'registerMediaEvents'),injectVerificationScriptResources:Y(a,'injectVerificationScriptResources'),setSlotElement:Y(a,'setSlotElement'),setVideoElement:Y(a,
'setVideoElement'),setElementBounds:Y(a,'setElementBounds'),setCreativeType:Y(a,'setCreativeType'),setImpressionType:Y(a,'setImpressionType'),setContentUrl:Y(a,'setContentUrl'),adEvents:{impressionOccurred:Y(a,'impressionOccurred'),loaded:Y(a,'loaded')},mediaEvents:{start:Y(a,'start'),firstQuartile:Y(a,'firstQuartile'),midpoint:Y(a,'midpoint'),thirdQuartile:Y(a,'thirdQuartile'),complete:Y(a,'complete'),pause:Y(a,'pause'),resume:Y(a,'resume'),bufferStart:Y(a,'bufferStart'),bufferFinish:Y(a,'bufferFinish'),
skipped:Y(a,'skipped'),volumeChange:Y(a,'volumeChange'),playerStateChange:Y(a,'playerStateChange'),adUserInteraction:Y(a,'adUserInteraction')}},a.mediaEvents.loaded=a.adEvents.loaded,a.videoEvents=a.mediaEvents,Object.freeze(a),Object.defineProperty(b,'omidSessionInterface',{value:a,writable:!1}))};function Oc(a,b){this.i=b=void 0===b?F:b;var c=this;a.addEventListener('message',function(d){if('object'===typeof d.data){var e=d.data;Gc(e)&&d.source&&c.g&&c.g(Hc(e),d.source)}})}oa(Oc,Jc);Oc.prototype.h=function(a,b){b=void 0===b?this.i:b;if(!b)throw Error('Message destination must be defined at construction time or when sending the message.');b.postMessage(Ic(a),'*')};function Pc(){this.g=Qc}n=Pc.prototype;n.registerSessionObserver=function(a,b){Cc(U(this.g,a),b)};n.setSlotElement=function(a,b){U(this.g,a).setSlotElement(b)};n.setElementBounds=function(a,b){U(this.g,a).setElementBounds(b)};n.error=function(a,b,c){U(this.g,a).error(b,c)};
function Z(a,b,c,d){a=U(a.g,b);if('impression'==c)yb(a.i)&&(c=a.i,d=(d=c.g.O)?Ga(d):null,d=tb(c,ub(c,d)),I(c,M(c,'impression','javascript',d)),a.h&&Jb(a.h));else{if('loaded'==c){if(b=d,b=void 0===b?null:b,zb(a.i)&&(d=a.i,d.g.h||'display'!=d.g.g))b=M(d,'loaded','javascript',tb(d,ub(d,void 0===b?null:b))),I(d,b)}else zb(a.i)&&(b=a.i,Ab(b,c,d),Bb(b,c,d),I(b,M(b,c,'javascript',d)));['loaded','start'].includes(c)&&a.h&&Jb(a.h)}}n.injectVerificationScriptResources=function(a,b){U(this.g,a).injectVerificationScriptResources(b)};
n.setCreativeType=function(a,b,c){c=void 0===c?null:c;U(this.g,a).setCreativeType(b,c)};n.setImpressionType=function(a,b){U(this.g,a).setImpressionType(b)};n.setClientInfo=function(a,b,c,d){var e=this.g;if(null==a)a=e.g;else{var f=[].concat(r(e.h.values())).includes(e.g)?Fc(e):e.g;e.h.set(a,f);a=f}return a.setClientInfo(b,c,d)};function Rc(a){a=a.split('-')[0].split('.');for(var b=['1','0','3'],c=0;3>c;c++){var d=parseInt(a[c],10),e=parseInt(b[c],10);if(d>e)break;else if(d<e)return!1}return!0};function Sc(a,b){return/\d+\.\d+\.\d+(-.*)?/.test(a)&&Rc(a)?b:JSON.stringify(b)}function Tc(a,b){return/\d+\.\d+\.\d+(-.*)?/.test(a)&&Rc(a)?b?b:[]:b&&'string'===typeof b?JSON.parse(b):[]};function Uc(){var a=Vc,b=this;var c=void 0===c?omidGlobal:c;this.g=a;this.h=c;this.j=new X;this.h.omid=this.h.omid||{};this.h.omid.v1_SessionServiceCommunication=this.j;this.i=c&&c.addEventListener&&c.postMessage?new Oc(c):null;this.m=null;this.j.g=this.l.bind(this);this.i&&(this.i.g=this.o.bind(this));this.s=new Mc(function(d,e,f){try{Wc(b,d,e,f)}catch(h){G(Xc(h))}},function(d){b.m=d;var e=$b();b.i.h(new V(e,'identifyServiceWindow','1.5.5-iab77'),d)});Nc(this.s,this.h)}
Uc.prototype.l=function(a,b){null!=Kc(a.method)&&Yc(this,a,b,this.j)};Uc.prototype.o=function(a,b){if(null!=Kc(a.method)){if(!this.m||b!==this.m)return G('Unrecognized session client window. Cross-origin session clients must register via the setSessionClientWindow API. See https://interactiveadvertisingbureau.github.io/Open-Measurement-SDKJS/iframes.html#om-sdk-js-session-client'),!1;Yc(this,a,b,this.i)}};
function Yc(a,b,c,d){function e(){var k=new V(f,'response',g,Sc(g,u.apply(0,arguments)));d.h(k,c)}var f=b.h,h=b.method,g=b.version;b=Tc(g,b.g);try{Wc(a,h,e,b)}catch(k){d.h(new V(f,'error',g,Xc(k)),c)}}
function Wc(a,b,c,d){if(null!=Kc(b))switch(Kc(b)){case 'registerAdEvents':var e=p(d).next().value,f=U(a.g.g,e).i;xb(f,['impression'])&&yb(f)&&(f.g.s='javascript');break;case 'registerMediaEvents':var h=p(d).next().value,g=U(a.g.g,h).i;xb(g,Object.values(x))&&zb(g)&&(g.g.j='javascript');break;case 'registerSessionObserver':var k=p(d).next().value;a.g.registerSessionObserver(k,c);break;case 'setSlotElement':var l=p(d),m=l.next().value,q=l.next().value;a.g.setSlotElement(q,m);break;case 'setVideoElement':var D=
p(d),H=D.next().value,L=D.next().value,y=U(a.g.g,L);H&&H.tagName&&'video'===H.tagName.toLowerCase()?(y.g.l=H,y.h&&Kb(y.h)):G('setVideoElement called with a non-HTMLVideoElement. It will be ignored.');break;case 'setElementBounds':var va=p(d),Xa=va.next().value,Ya=va.next().value;a.g.setElementBounds(Ya,Xa);break;case 'startSession':var aa=p(d),A=aa.next().value,wa=aa.next().value;var B=a.h;if(null!=A&&'object'===typeof A){var ba=A.customReferenceData,w=A.underEvaluation,cc=A.universalAdId;'string'===
typeof ba||(ba=void 0);'boolean'===typeof w||(w=!1);var J={customReferenceData:ba,underEvaluation:w};'string'===typeof cc&&(J.universalAdId=cc);if(Yb(B)){var dc=Xb(B),xa;'object'===typeof dc&&(xa=dc.identifier);J.app={appId:xa&&'string'===typeof xa?xa:void 0};b:{var ec=Xb(B);if('object'===typeof ec){try{var fc=JSON.parse(ec.deviceInfo)}catch(gd){var Za=void 0;break b}Za={deviceType:fc.modelName||'Unknown',osVersion:fc.platformVersion||'Unknown',os:'webOS'}}else Za=void 0}J.deviceInfo=Za;J.deviceCategory=
'ctv'}else if(T(B)){b:{if(T(B)){try{var gc=S(B).application.getCurrentApplication().appInfo.id}catch(gd){var $a=void 0;break b}if('string'===typeof gc){$a=gc;break b}}$a=void 0}J.app={appId:$a};if(T(B)){var ya=S(B).systeminfo;if('object'===typeof ya&&'function'===typeof ya.getCapability){var hd=ya.getCapability('http://tizen.org/system/model_name');var id=ya.getCapability('http://tizen.org/feature/platform.version')}var hc={deviceType:hd||'Unknown',osVersion:id||'Unknown',os:'tizen'}}else hc=void 0;
J.deviceInfo=hc;zc(B)&&(J.deviceCategory='ctv')}A=J}else A=null;if(null==A)break;var N=A;var ab=void 0===ab?null:ab;var K=U(a.g.g,wa),ic=K.g.i;ic.sessionOwner||(ic.sessionOwner='javascript');var jd=wa||$b();K.g.H=jd;N.canMeasureVisibility=K.h.O();var bb=K.g;void 0!==N.contentUrl&&(bb.C=N.contentUrl,N.contentUrl=void 0);var jc=bb.i||{};N.omidJsInfo=Object.assign({},jc.omidJsInfo||{},N.omidJsInfo||{});var kd=Object.assign({},jc,N);bb.i=kd;rb(K.i,ab);K.h&&Jb(K.h);Dc(K);break;case 'finishSession':var ld=
p(d).next().value,kc=a.g,ca=U(kc.g,ld),lc=kc.g;lc.g=Fc(lc);wb(ca.i);ca.h.v();ca.j&&(ca.j.stop(),ca.j=null);break;case 'impressionOccurred':var md=p(d).next().value;Z(a.g,md,'impression');break;case 'loaded':var mc=p(d),W=mc.next().value,nc=mc.next().value;if(W){var oc={skippable:W.isSkippable,autoPlay:W.isAutoPlay,position:W.position};W.isSkippable&&(oc.skipOffset=W.skipOffset);Z(a.g,nc,'loaded',oc)}else Z(a.g,nc,'loaded');break;case 'start':var cb=p(d),nd=cb.next().value,od=cb.next().value,pd=cb.next().value;
Z(a.g,pd,'start',{duration:nd,mediaPlayerVolume:od});break;case 'firstQuartile':var qd=p(d).next().value;Z(a.g,qd,'firstQuartile');break;case 'midpoint':var rd=p(d).next().value;Z(a.g,rd,'midpoint');break;case 'thirdQuartile':var sd=p(d).next().value;Z(a.g,sd,'thirdQuartile');break;case 'complete':var td=p(d).next().value;Z(a.g,td,'complete');break;case 'pause':var ud=p(d).next().value;Z(a.g,ud,'pause');break;case 'resume':var vd=p(d).next().value;Z(a.g,vd,'resume');break;case 'bufferStart':var wd=
p(d).next().value;Z(a.g,wd,'bufferStart');break;case 'bufferFinish':var xd=p(d).next().value;Z(a.g,xd,'bufferFinish');break;case 'skipped':var yd=p(d).next().value;Z(a.g,yd,'skipped');break;case 'volumeChange':var pc=p(d),zd=pc.next().value,Ad=pc.next().value;Z(a.g,Ad,'volumeChange',{mediaPlayerVolume:zd});break;case 'playerStateChange':var qc=p(d),Bd=qc.next().value,Cd=qc.next().value;Z(a.g,Cd,'playerStateChange',{state:Bd});break;case 'adUserInteraction':var rc=p(d),Dd=rc.next().value,Ed=rc.next().value;
Z(a.g,Ed,'adUserInteraction',{interactionType:Dd});break;case 'setClientInfo':var za=p(d),Fd=za.next().value,Gd=za.next().value,Hd=za.next().value,Id=za.next().value,Jd=a.g.setClientInfo(Id,Fd,Gd,Hd);c(Jd);break;case 'injectVerificationScriptResources':var sc=p(d),Kd=sc.next().value,Ld=sc.next().value;a.g.injectVerificationScriptResources(Ld,Kd);break;case 'setCreativeType':var tc=p(d),Md=tc.next().value,Nd=tc.next().value;a.g.setCreativeType(Nd,Md);break;case 'setImpressionType':var uc=p(d),Od=uc.next().value,
Pd=uc.next().value;a.g.setImpressionType(Pd,Od);break;case 'setContentUrl':var vc=p(d),Qd=vc.next().value,Rd=vc.next().value;U(a.g.g,Rd).g.C=Qd;break;case 'sessionError':var db=p(d),Sd=db.next().value,Td=db.next().value,Ud=db.next().value;a.g.error(Ud,Sd,Td)}}
function Xc(a){return'\n        name: '+a.name+'\n        message: '+a.message+'\n        filename: '+a.filename+'\n        lineNumber: '+a.lineNumber+'\n        columnNumber: '+a.columnNumber+'\n        stack: '+a.stack+'\n        toString(): '+a.toString()};function Zc(){var a=Qc,b=$c,c=this;var d=void 0===d?F:d;this.j=a;this.g=b;this.l={};this.m={};this.i=new X;d.omid=d.omid||{};d.omid.v1_VerificationServiceCommunication=this.i;this.h=null;d&&d.addEventListener&&d.postMessage&&(this.h=new Oc(d));this.i.g=function(e,f){ad(c,e,f,c.i)};this.h&&(this.h.g=function(e,f){c.h&&ad(c,e,f,c.h)})}
function bd(a){a({adSessionId:'',timestamp:(new Date).getTime(),type:'sessionError',data:{errorType:'generic',message:'Registration to session events is only allowed for verification clients injected by the OM-SDK service itself. Please note that in a future release registration in this manner will be rejected.'}})}function cd(a,b,c,d){a=Ec(a.j,d);void 0!==d&&a.g.u.has(d)?(a=a.i,'media'===b||'video'===b?mb(a,c,d):(c={type:b,U:d,I:c},a.j.push(c),lb(a,b,c))):bd(c)}
function dd(a,b,c,d){a=Ec(a.j,d);void 0!==d&&a.g.u.has(d)?Cc(a,b,c,d):bd(b)}function ed(a,b,c,d){Hb(a.g,b,c,d)}Zc.prototype.setInterval=function(a,b){return this.g.setInterval(a,b)};Zc.prototype.clearInterval=function(a){this.g.clearInterval(a)};function fd(a,b,c,d){Gb(a.g,'downloadJavaScriptResource')(b,c,d)}
function ad(a,b,c,d){function e(){var w=new V(f,'response',g,Sc(g,u.apply(0,arguments)));d.h(w,c)}var f=b.h,h=b.method,g=b.version;b=Tc(g,b.g);if(null!=Lc(h,'VerificationService.')){h=Lc(h,'VerificationService.');try{switch(h){case 'addEventListener':var k=p(b),l=k.next().value,m=k.next().value||Vd(c);cd(a,l,e,m);break;case 'addSessionListener':var q=p(b),D=q.next().value,H=q.next().value||Vd(c);dd(a,e,D,H);break;case 'sendUrl':var L=p(b).next().value;ed(a,L,function(){return e(!0)},function(){return e(!1)});
break;case 'setTimeout':var y=p(b),va=y.next().value,Xa=y.next().value;a.l[va]=Eb(a.g,'setTimeout')(e,Xa);break;case 'clearTimeout':var Ya=p(b).next().value;Fb(a.g,a.l[Ya]);break;case 'setInterval':var aa=p(b),A=aa.next().value,wa=aa.next().value;a.m[A]=a.setInterval(e,wa);break;case 'clearInterval':var B=p(b).next().value;a.clearInterval(a.m[B]);break;case 'injectJavaScriptResource':var ba=p(b).next().value;fd(a,ba,function(w){return e(!0,w)},function(){return e(!1)});break;case 'getVersion':e('1.5.5-iab77')}}catch(w){d.h(new V(f,
'error',g,'\n              name: '+w.name+'\n              message: '+w.message+'\n              filename: '+w.filename+'\n              lineNumber: '+w.lineNumber+'\n              columnNumber: '+w.columnNumber+'\n              stack: '+w.stack+'\n              toString(): '+w.toString()+'\n          '),c)}}}
function Vd(a){for(var b=Sa().g,c=p(b.keys()),d=c.next();!d.done;d=c.next()){d=d.value;var e=b.get(d);if(e){if(e.contentWindow===a)return d;try{if(e.contentWindow.Object.prototype.isPrototypeOf(a))return d}catch(f){}}}};function Wd(a){var b={};return(b.app='omid_v1_present_app',b.web='omid_v1_present_web',b)[a]}function Xd(a,b){a.document.write('<iframe style="display:none" id="'+(b+'" name="'+b+'" sandbox></iframe>'))}function Yd(a,b){var c=a.document.createElement('iframe');c.id=b;c.name=b;c.style.display='none';c.sandbox='';a.document.body.appendChild(c)}
function Zd(a,b){var c=new MutationObserver(function(d){d.forEach(function(e){'BODY'===e.addedNodes[0].nodeName&&(e=Wd(b),Yd(a,'omid_v1_present'),Yd(a,e),c.disconnect())})});c.observe(a.document.documentElement,{childList:!0})};var $c=new Db,Qc=new function(){this.i=$c;this.h=new Map;this.g=Fc(this)},Vc=new Pc;new Zc;new Uc;(function(a,b){a.frames&&a.document&&!['omid_v1_present','omid_v1_present_web','omid_v1_present_app'].some(function(c){return!!a.frames[c]})&&(null==a.document.body&&'MutationObserver'in a?Zd(a,b):(b=Wd(b),a.document.body?(Yd(a,'omid_v1_present'),Yd(a,b)):(Xd(a,'omid_v1_present'),Xd(a,b))))})(F,'web');
}).call(this, this);


;(function(omidGlobal, factory, exports) {
  // CommonJS support
  if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {
    factory(omidGlobal, exports);

  // If neither AMD nor CommonJS are used, export to a versioned name in the
  // global context.
  } else {
    var exports = {};
    var versions = ['1.5.5-iab77'];
    var additionalVersionString = 'default';
    if (!!additionalVersionString) {
       versions.push(additionalVersionString);
    }

    factory(omidGlobal, exports);

    function deepFreeze(object) {
      for (var key in object) {
        if (object.hasOwnProperty(key)) {
          object[key] = deepFreeze(object[key]);
        }
      }
      return Object.freeze(object);
    }

    // Inject and freeze the exported components of omid.
    for (var key in exports) {
      if (exports.hasOwnProperty(key)) {
        if (Object.getOwnPropertyDescriptor(omidGlobal, key) == null) {
          // Define the top level property in the global scope
          Object.defineProperty(omidGlobal, key, {
            value: {},
          });
        }
        versions.forEach(function(version) {
          if (Object.getOwnPropertyDescriptor(omidGlobal[key], version) == null) {
            var frozenObject = deepFreeze(exports[key]);
            // Define the object exports keyed-off versions
            Object.defineProperty(omidGlobal[key], version, {
              get: function () {
                return frozenObject;
              },
              enumerable: true,
            });
          }
        });
      }
    }
  }
}(typeof global === 'undefined' ? this : global, function(omidGlobal, omidExports) {
  var $jscomp = $jscomp || {};
$jscomp.scope = {};
$jscomp.createTemplateTagFirstArg = function(a) {
  return a.raw = a;
};
$jscomp.createTemplateTagFirstArgWithRaw = function(a, b) {
  a.raw = b;
  return a;
};
$jscomp.arrayIteratorImpl = function(a) {
  var b = 0;
  return function() {
    return b < a.length ? {done:!1, value:a[b++],} : {done:!0};
  };
};
$jscomp.arrayIterator = function(a) {
  return {next:$jscomp.arrayIteratorImpl(a)};
};
$jscomp.makeIterator = function(a) {
  var b = "undefined" != typeof Symbol && Symbol.iterator && a[Symbol.iterator];
  if (b) {
    return b.call(a);
  }
  if ("number" == typeof a.length) {
    return $jscomp.arrayIterator(a);
  }
  throw Error(String(a) + " is not an iterable or ArrayLike");
};
$jscomp.arrayFromIterator = function(a) {
  for (var b, c = []; !(b = a.next()).done;) {
    c.push(b.value);
  }
  return c;
};
$jscomp.arrayFromIterable = function(a) {
  return a instanceof Array ? a : $jscomp.arrayFromIterator($jscomp.makeIterator(a));
};
$jscomp.ASSUME_ES5 = !1;
$jscomp.ASSUME_NO_NATIVE_MAP = !1;
$jscomp.ASSUME_NO_NATIVE_SET = !1;
$jscomp.SIMPLE_FROUND_POLYFILL = !1;
$jscomp.ISOLATE_POLYFILLS = !1;
$jscomp.FORCE_POLYFILL_PROMISE = !1;
$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION = !1;
$jscomp.objectCreate = $jscomp.ASSUME_ES5 || "function" == typeof Object.create ? Object.create : function(a) {
  var b = function() {
  };
  b.prototype = a;
  return new b();
};
$jscomp.defineProperty = $jscomp.ASSUME_ES5 || "function" == typeof Object.defineProperties ? Object.defineProperty : function(a, b, c) {
  if (a == Array.prototype || a == Object.prototype) {
    return a;
  }
  a[b] = c.value;
  return a;
};
$jscomp.getGlobal = function(a) {
  a = ["object" == typeof globalThis && globalThis, a, "object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global,];
  for (var b = 0; b < a.length; ++b) {
    var c = a[b];
    if (c && c.Math == Math) {
      return c;
    }
  }
  throw Error("Cannot find global object");
};
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE = "function" === typeof Symbol && "symbol" === typeof Symbol("x");
$jscomp.TRUST_ES6_POLYFILLS = !$jscomp.ISOLATE_POLYFILLS || $jscomp.IS_SYMBOL_NATIVE;
$jscomp.polyfills = {};
$jscomp.propertyToPolyfillSymbol = {};
$jscomp.POLYFILL_PREFIX = "$jscp$";
var $jscomp$lookupPolyfilledValue = function(a, b, c) {
  if (!c || null != a) {
    c = $jscomp.propertyToPolyfillSymbol[b];
    if (null == c) {
      return a[b];
    }
    c = a[c];
    return void 0 !== c ? c : a[b];
  }
};
$jscomp.polyfill = function(a, b, c, d) {
  b && ($jscomp.ISOLATE_POLYFILLS ? $jscomp.polyfillIsolated(a, b, c, d) : $jscomp.polyfillUnisolated(a, b, c, d));
};
$jscomp.polyfillUnisolated = function(a, b, c, d) {
  c = $jscomp.global;
  a = a.split(".");
  for (d = 0; d < a.length - 1; d++) {
    var e = a[d];
    if (!(e in c)) {
      return;
    }
    c = c[e];
  }
  a = a[a.length - 1];
  d = c[a];
  b = b(d);
  b != d && null != b && $jscomp.defineProperty(c, a, {configurable:!0, writable:!0, value:b});
};
$jscomp.polyfillIsolated = function(a, b, c, d) {
  var e = a.split(".");
  a = 1 === e.length;
  d = e[0];
  d = !a && d in $jscomp.polyfills ? $jscomp.polyfills : $jscomp.global;
  for (var l = 0; l < e.length - 1; l++) {
    var m = e[l];
    if (!(m in d)) {
      return;
    }
    d = d[m];
  }
  e = e[e.length - 1];
  c = $jscomp.IS_SYMBOL_NATIVE && "es6" === c ? d[e] : null;
  b = b(c);
  null != b && (a ? $jscomp.defineProperty($jscomp.polyfills, e, {configurable:!0, writable:!0, value:b}) : b !== c && (void 0 === $jscomp.propertyToPolyfillSymbol[e] && (c = 1E9 * Math.random() >>> 0, $jscomp.propertyToPolyfillSymbol[e] = $jscomp.IS_SYMBOL_NATIVE ? $jscomp.global.Symbol(e) : $jscomp.POLYFILL_PREFIX + c + "$" + e), $jscomp.defineProperty(d, $jscomp.propertyToPolyfillSymbol[e], {configurable:!0, writable:!0, value:b})));
};
$jscomp.getConstructImplementation = function() {
  function a() {
    function c() {
    }
    new c();
    Reflect.construct(c, [], function() {
    });
    return new c() instanceof c;
  }
  if ($jscomp.TRUST_ES6_POLYFILLS && "undefined" != typeof Reflect && Reflect.construct) {
    if (a()) {
      return Reflect.construct;
    }
    var b = Reflect.construct;
    return function(c, d, e) {
      c = b(c, d);
      e && Reflect.setPrototypeOf(c, e.prototype);
      return c;
    };
  }
  return function(c, d, e) {
    void 0 === e && (e = c);
    e = $jscomp.objectCreate(e.prototype || Object.prototype);
    return Function.prototype.apply.call(c, e, d) || e;
  };
};
$jscomp.construct = {valueOf:$jscomp.getConstructImplementation}.valueOf();
$jscomp.underscoreProtoCanBeSet = function() {
  var a = {a:!0}, b = {};
  try {
    return b.__proto__ = a, b.a;
  } catch (c) {
  }
  return !1;
};
$jscomp.setPrototypeOf = $jscomp.TRUST_ES6_POLYFILLS && "function" == typeof Object.setPrototypeOf ? Object.setPrototypeOf : $jscomp.underscoreProtoCanBeSet() ? function(a, b) {
  a.__proto__ = b;
  if (a.__proto__ !== b) {
    throw new TypeError(a + " is not extensible");
  }
  return a;
} : null;
$jscomp.inherits = function(a, b) {
  a.prototype = $jscomp.objectCreate(b.prototype);
  a.prototype.constructor = a;
  if ($jscomp.setPrototypeOf) {
    var c = $jscomp.setPrototypeOf;
    c(a, b);
  } else {
    for (c in b) {
      if ("prototype" != c) {
        if (Object.defineProperties) {
          var d = Object.getOwnPropertyDescriptor(b, c);
          d && Object.defineProperty(a, c, d);
        } else {
          a[c] = b[c];
        }
      }
    }
  }
  a.superClass_ = b.prototype;
};
$jscomp.getRestArguments = function() {
  for (var a = Number(this), b = [], c = a; c < arguments.length; c++) {
    b[c - a] = arguments[c];
  }
  return b;
};
$jscomp.polyfill("Reflect", function(a) {
  return a ? a : {};
}, "es6", "es3");
$jscomp.polyfill("Reflect.construct", function(a) {
  return $jscomp.construct;
}, "es6", "es3");
$jscomp.polyfill("Reflect.setPrototypeOf", function(a) {
  if (a) {
    return a;
  }
  if ($jscomp.setPrototypeOf) {
    var b = $jscomp.setPrototypeOf;
    return function(c, d) {
      try {
        return b(c, d), !0;
      } catch (e) {
        return !1;
      }
    };
  }
  return null;
}, "es6", "es5");
$jscomp.initSymbol = function() {
};
$jscomp.polyfill("Symbol", function(a) {
  if (a) {
    return a;
  }
  var b = function(l, m) {
    this.$jscomp$symbol$id_ = l;
    $jscomp.defineProperty(this, "description", {configurable:!0, writable:!0, value:m});
  };
  b.prototype.toString = function() {
    return this.$jscomp$symbol$id_;
  };
  var c = "jscomp_symbol_" + (1E9 * Math.random() >>> 0) + "_", d = 0, e = function(l) {
    if (this instanceof e) {
      throw new TypeError("Symbol is not a constructor");
    }
    return new b(c + (l || "") + "_" + d++, l);
  };
  return e;
}, "es6", "es3");
$jscomp.polyfill("Symbol.iterator", function(a) {
  if (a) {
    return a;
  }
  a = Symbol("Symbol.iterator");
  for (var b = "Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "), c = 0; c < b.length; c++) {
    var d = $jscomp.global[b[c]];
    "function" === typeof d && "function" != typeof d.prototype[a] && $jscomp.defineProperty(d.prototype, a, {configurable:!0, writable:!0, value:function() {
      return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this));
    }});
  }
  return a;
}, "es6", "es3");
$jscomp.iteratorPrototype = function(a) {
  a = {next:a};
  a[Symbol.iterator] = function() {
    return this;
  };
  return a;
};
$jscomp.iteratorFromArray = function(a, b) {
  a instanceof String && (a += "");
  var c = 0, d = !1, e = {next:function() {
    if (!d && c < a.length) {
      var l = c++;
      return {value:b(l, a[l]), done:!1};
    }
    d = !0;
    return {done:!0, value:void 0};
  }};
  e[Symbol.iterator] = function() {
    return e;
  };
  return e;
};
$jscomp.polyfill("Array.prototype.keys", function(a) {
  return a ? a : function() {
    return $jscomp.iteratorFromArray(this, function(b) {
      return b;
    });
  };
}, "es6", "es3");
$jscomp.owns = function(a, b) {
  return Object.prototype.hasOwnProperty.call(a, b);
};
$jscomp.polyfill("Object.values", function(a) {
  return a ? a : function(b) {
    var c = [], d;
    for (d in b) {
      $jscomp.owns(b, d) && c.push(b[d]);
    }
    return c;
  };
}, "es8", "es3");
$jscomp.checkEs6ConformanceViaProxy = function() {
  try {
    var a = {}, b = Object.create(new $jscomp.global.Proxy(a, {get:function(c, d, e) {
      return c == a && "q" == d && e == b;
    }}));
    return !0 === b.q;
  } catch (c) {
    return !1;
  }
};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS = !1;
$jscomp.ES6_CONFORMANCE = $jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS && $jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap", function(a) {
  function b() {
    if (!a || !Object.seal) {
      return !1;
    }
    try {
      var f = Object.seal({}), h = Object.seal({}), k = new a([[f, 2], [h, 3]]);
      if (2 != k.get(f) || 3 != k.get(h)) {
        return !1;
      }
      k.delete(f);
      k.set(h, 4);
      return !k.has(f) && 4 == k.get(h);
    } catch (n) {
      return !1;
    }
  }
  function c() {
  }
  function d(f) {
    var h = typeof f;
    return "object" === h && null !== f || "function" === h;
  }
  function e(f) {
    if (!$jscomp.owns(f, m)) {
      var h = new c();
      $jscomp.defineProperty(f, m, {value:h});
    }
  }
  function l(f) {
    if (!$jscomp.ISOLATE_POLYFILLS) {
      var h = Object[f];
      h && (Object[f] = function(k) {
        if (k instanceof c) {
          return k;
        }
        Object.isExtensible(k) && e(k);
        return h(k);
      });
    }
  }
  if ($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS) {
    if (a && $jscomp.ES6_CONFORMANCE) {
      return a;
    }
  } else {
    if (b()) {
      return a;
    }
  }
  var m = "$jscomp_hidden_" + Math.random();
  l("freeze");
  l("preventExtensions");
  l("seal");
  var p = 0, g = function(f) {
    this.id_ = (p += Math.random() + 1).toString();
    if (f) {
      f = $jscomp.makeIterator(f);
      for (var h; !(h = f.next()).done;) {
        h = h.value, this.set(h[0], h[1]);
      }
    }
  };
  g.prototype.set = function(f, h) {
    if (!d(f)) {
      throw Error("Invalid WeakMap key");
    }
    e(f);
    if (!$jscomp.owns(f, m)) {
      throw Error("WeakMap key fail: " + f);
    }
    f[m][this.id_] = h;
    return this;
  };
  g.prototype.get = function(f) {
    return d(f) && $jscomp.owns(f, m) ? f[m][this.id_] : void 0;
  };
  g.prototype.has = function(f) {
    return d(f) && $jscomp.owns(f, m) && $jscomp.owns(f[m], this.id_);
  };
  g.prototype.delete = function(f) {
    return d(f) && $jscomp.owns(f, m) && $jscomp.owns(f[m], this.id_) ? delete f[m][this.id_] : !1;
  };
  return g;
}, "es6", "es3");
$jscomp.MapEntry = function() {
};
$jscomp.polyfill("Map", function(a) {
  function b() {
    if ($jscomp.ASSUME_NO_NATIVE_MAP || !a || "function" != typeof a || !a.prototype.entries || "function" != typeof Object.seal) {
      return !1;
    }
    try {
      var g = Object.seal({x:4}), f = new a($jscomp.makeIterator([[g, "s"]]));
      if ("s" != f.get(g) || 1 != f.size || f.get({x:4}) || f.set({x:4}, "t") != f || 2 != f.size) {
        return !1;
      }
      var h = f.entries(), k = h.next();
      if (k.done || k.value[0] != g || "s" != k.value[1]) {
        return !1;
      }
      k = h.next();
      return k.done || 4 != k.value[0].x || "t" != k.value[1] || !h.next().done ? !1 : !0;
    } catch (n) {
      return !1;
    }
  }
  if ($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS) {
    if (a && $jscomp.ES6_CONFORMANCE) {
      return a;
    }
  } else {
    if (b()) {
      return a;
    }
  }
  var c = new WeakMap(), d = function(g) {
    this.data_ = {};
    this.head_ = m();
    this.size = 0;
    if (g) {
      g = $jscomp.makeIterator(g);
      for (var f; !(f = g.next()).done;) {
        f = f.value, this.set(f[0], f[1]);
      }
    }
  };
  d.prototype.set = function(g, f) {
    g = 0 === g ? 0 : g;
    var h = e(this, g);
    h.list || (h.list = this.data_[h.id] = []);
    h.entry ? h.entry.value = f : (h.entry = {next:this.head_, previous:this.head_.previous, head:this.head_, key:g, value:f,}, h.list.push(h.entry), this.head_.previous.next = h.entry, this.head_.previous = h.entry, this.size++);
    return this;
  };
  d.prototype.delete = function(g) {
    g = e(this, g);
    return g.entry && g.list ? (g.list.splice(g.index, 1), g.list.length || delete this.data_[g.id], g.entry.previous.next = g.entry.next, g.entry.next.previous = g.entry.previous, g.entry.head = null, this.size--, !0) : !1;
  };
  d.prototype.clear = function() {
    this.data_ = {};
    this.head_ = this.head_.previous = m();
    this.size = 0;
  };
  d.prototype.has = function(g) {
    return !!e(this, g).entry;
  };
  d.prototype.get = function(g) {
    return (g = e(this, g).entry) && g.value;
  };
  d.prototype.entries = function() {
    return l(this, function(g) {
      return [g.key, g.value];
    });
  };
  d.prototype.keys = function() {
    return l(this, function(g) {
      return g.key;
    });
  };
  d.prototype.values = function() {
    return l(this, function(g) {
      return g.value;
    });
  };
  d.prototype.forEach = function(g, f) {
    for (var h = this.entries(), k; !(k = h.next()).done;) {
      k = k.value, g.call(f, k[1], k[0], this);
    }
  };
  d.prototype[Symbol.iterator] = d.prototype.entries;
  var e = function(g, f) {
    var h = f && typeof f;
    "object" == h || "function" == h ? c.has(f) ? h = c.get(f) : (h = "" + ++p, c.set(f, h)) : h = "p_" + f;
    var k = g.data_[h];
    if (k && $jscomp.owns(g.data_, h)) {
      for (g = 0; g < k.length; g++) {
        var n = k[g];
        if (f !== f && n.key !== n.key || f === n.key) {
          return {id:h, list:k, index:g, entry:n};
        }
      }
    }
    return {id:h, list:k, index:-1, entry:void 0};
  }, l = function(g, f) {
    var h = g.head_;
    return $jscomp.iteratorPrototype(function() {
      if (h) {
        for (; h.head != g.head_;) {
          h = h.previous;
        }
        for (; h.next != h.head;) {
          return h = h.next, {done:!1, value:f(h)};
        }
        h = null;
      }
      return {done:!0, value:void 0};
    });
  }, m = function() {
    var g = {};
    return g.previous = g.next = g.head = g;
  }, p = 0;
  return d;
}, "es6", "es3");
var module$contents$omid$common$InternalMessage_GUID_KEY = "omid_message_guid", module$contents$omid$common$InternalMessage_METHOD_KEY = "omid_message_method", module$contents$omid$common$InternalMessage_VERSION_KEY = "omid_message_version", module$contents$omid$common$InternalMessage_ARGS_KEY = "omid_message_args", module$exports$omid$common$InternalMessage = function(a, b, c, d) {
  this.guid = a;
  this.method = b;
  this.version = c;
  this.args = d;
};
module$exports$omid$common$InternalMessage.isValidSerializedMessage = function(a) {
  return !!a && void 0 !== a[module$contents$omid$common$InternalMessage_GUID_KEY] && void 0 !== a[module$contents$omid$common$InternalMessage_METHOD_KEY] && void 0 !== a[module$contents$omid$common$InternalMessage_VERSION_KEY] && "string" === typeof a[module$contents$omid$common$InternalMessage_GUID_KEY] && "string" === typeof a[module$contents$omid$common$InternalMessage_METHOD_KEY] && "string" === typeof a[module$contents$omid$common$InternalMessage_VERSION_KEY] && (void 0 === a[module$contents$omid$common$InternalMessage_ARGS_KEY] || 
  void 0 !== a[module$contents$omid$common$InternalMessage_ARGS_KEY]);
};
module$exports$omid$common$InternalMessage.deserialize = function(a) {
  return new module$exports$omid$common$InternalMessage(a[module$contents$omid$common$InternalMessage_GUID_KEY], a[module$contents$omid$common$InternalMessage_METHOD_KEY], a[module$contents$omid$common$InternalMessage_VERSION_KEY], a[module$contents$omid$common$InternalMessage_ARGS_KEY]);
};
module$exports$omid$common$InternalMessage.prototype.serialize = function() {
  var a = {};
  a = (a[module$contents$omid$common$InternalMessage_GUID_KEY] = this.guid, a[module$contents$omid$common$InternalMessage_METHOD_KEY] = this.method, a[module$contents$omid$common$InternalMessage_VERSION_KEY] = this.version, a);
  void 0 !== this.args && (a[module$contents$omid$common$InternalMessage_ARGS_KEY] = this.args);
  return a;
};
var module$exports$omid$common$constants = {AdEventType:{IMPRESSION:"impression", LOADED:"loaded", GEOMETRY_CHANGE:"geometryChange", SESSION_START:"sessionStart", SESSION_ERROR:"sessionError", SESSION_FINISH:"sessionFinish", MEDIA:"media", VIDEO:"video", START:"start", FIRST_QUARTILE:"firstQuartile", MIDPOINT:"midpoint", THIRD_QUARTILE:"thirdQuartile", COMPLETE:"complete", PAUSE:"pause", RESUME:"resume", BUFFER_START:"bufferStart", BUFFER_FINISH:"bufferFinish", SKIPPED:"skipped", VOLUME_CHANGE:"volumeChange", 
PLAYER_STATE_CHANGE:"playerStateChange", AD_USER_INTERACTION:"adUserInteraction", STATE_CHANGE:"stateChange",}, MediaEventType:{LOADED:"loaded", START:"start", FIRST_QUARTILE:"firstQuartile", MIDPOINT:"midpoint", THIRD_QUARTILE:"thirdQuartile", COMPLETE:"complete", PAUSE:"pause", RESUME:"resume", BUFFER_START:"bufferStart", BUFFER_FINISH:"bufferFinish", SKIPPED:"skipped", VOLUME_CHANGE:"volumeChange", PLAYER_STATE_CHANGE:"playerStateChange", AD_USER_INTERACTION:"adUserInteraction",}, ImpressionType:{DEFINED_BY_JAVASCRIPT:"definedByJavaScript", 
UNSPECIFIED:"unspecified", LOADED:"loaded", BEGIN_TO_RENDER:"beginToRender", ONE_PIXEL:"onePixel", VIEWABLE:"viewable", AUDIBLE:"audible", OTHER:"other",}, ErrorType:{GENERIC:"generic", VIDEO:"video", MEDIA:"media",}, AdSessionType:{NATIVE:"native", HTML:"html", JAVASCRIPT:"javascript",}, EventOwner:{NATIVE:"native", JAVASCRIPT:"javascript", NONE:"none",}, SessionOwner:{JAVASCRIPT:"javascript", NATIVE:"native",}, AccessMode:{FULL:"full", DOMAIN:"domain", LIMITED:"limited",}, AppState:{BACKGROUNDED:"backgrounded", 
FOREGROUNDED:"foregrounded",}, DeviceLockState:{LOCKED:"locked", UNLOCKED:"unlocked",}, Environment:{APP:"app", WEB:"web",}, DeviceCategory:{CTV:"ctv", DESKTOP:"desktop", MOBILE:"mobile", OTHER:"other",}, InteractionType:{CLICK:"click", INVITATION_ACCEPT:"invitationAccept",}, CreativeType:{DEFINED_BY_JAVASCRIPT:"definedByJavaScript", HTML_DISPLAY:"htmlDisplay", NATIVE_DISPLAY:"nativeDisplay", VIDEO:"video", AUDIO:"audio",}, MediaType:{DISPLAY:"display", VIDEO:"video",}, Reason:{NOT_FOUND:"notFound", 
HIDDEN:"hidden", BACKGROUNDED:"backgrounded", PICTURE_IN_PICTURE:"pictureInPicture", DEVICE_LOCKED:"deviceLocked", VIEWPORT:"viewport", OBSTRUCTED:"obstructed", CLIPPED:"clipped", UNMEASURABLE:"unmeasurable", NO_WINDOW_FOCUS:"noWindowFocus", NO_OUTPUT_DEVICE:"noOutputDevice",}, SupportedFeatures:{CONTAINER:"clid", VIDEO:"vlid",}, VideoPosition:{PREROLL:"preroll", MIDROLL:"midroll", POSTROLL:"postroll", STANDALONE:"standalone",}, VideoPlayerState:{MINIMIZED:"minimized", COLLAPSED:"collapsed", NORMAL:"normal", 
EXPANDED:"expanded", FULLSCREEN:"fullscreen",}, NativeViewKeys:{X:"x", LEFT:"left", Y:"y", TOP:"top", WIDTH:"width", HEIGHT:"height", AD_SESSION_ID:"adSessionId", IS_FRIENDLY_OBSTRUCTION_FOR:"isFriendlyObstructionFor", CLIPS_TO_BOUNDS:"clipsToBounds", CHILD_VIEWS:"childViews", END_X:"endX", END_Y:"endY", OBSTRUCTIONS:"obstructions", OBSTRUCTION_CLASS:"obstructionClass", OBSTRUCTION_PURPOSE:"obstructionPurpose", OBSTRUCTION_REASON:"obstructionReason", PIXELS:"pixels", HAS_WINDOW_FOCUS:"hasWindowFocus",
}, MeasurementStateChangeSource:{CONTAINER:"container", CREATIVE:"creative",}, ElementMarkup:{OMID_ELEMENT_CLASS_NAME:"omid-element",}, CommunicationType:{NONE:"NONE", DIRECT:"DIRECT", POST_MESSAGE:"POST_MESSAGE",}, OmidImplementer:{OMSDK:"omsdk",}, MessageMethod:{IDENTIFY_SERVICE_WINDOW:"identifyServiceWindow",}};
var module$exports$omid$common$Communication = function(a) {
  this.to = a;
  this.communicationType_ = module$exports$omid$common$constants.CommunicationType.NONE;
};
module$exports$omid$common$Communication.prototype.sendMessage = function(a, b) {
};
module$exports$omid$common$Communication.prototype.handleMessage = function(a, b) {
  if (this.onMessage) {
    this.onMessage(a, b);
  }
};
module$exports$omid$common$Communication.prototype.serialize = function(a) {
  return JSON.stringify(a);
};
module$exports$omid$common$Communication.prototype.deserialize = function(a) {
  return JSON.parse(a);
};
module$exports$omid$common$Communication.prototype.isDirectCommunication = function() {
  return this.communicationType_ === module$exports$omid$common$constants.CommunicationType.DIRECT;
};
module$exports$omid$common$Communication.prototype.isCrossOrigin = function() {
};
var module$exports$omid$common$argsChecker = {};
function module$contents$omid$common$argsChecker_assertTruthyString(a, b) {
  if (!b) {
    throw Error("Value for " + a + " is undefined, null or blank.");
  }
  if ("string" !== typeof b && !(b instanceof String)) {
    throw Error("Value for " + a + " is not a string.");
  }
  if ("" === b.trim()) {
    throw Error("Value for " + a + " is empty string.");
  }
}
function module$contents$omid$common$argsChecker_assertNotNullObject(a, b) {
  if (null == b) {
    throw Error("Value for " + a + " is undefined or null");
  }
}
function module$contents$omid$common$argsChecker_assertNumber(a, b) {
  if (null == b) {
    throw Error(a + " must not be null or undefined.");
  }
  if ("number" !== typeof b || isNaN(b)) {
    throw Error("Value for " + a + " is not a number");
  }
}
function module$contents$omid$common$argsChecker_assertNumberBetween(a, b, c, d) {
  module$contents$omid$common$argsChecker_assertNumber(a, b);
  if (b < c || b > d) {
    throw Error("Value for " + a + " is outside the range [" + c + "," + d + "]");
  }
}
function module$contents$omid$common$argsChecker_assertFunction(a, b) {
  if (!b) {
    throw Error(a + " must not be truthy.");
  }
}
function module$contents$omid$common$argsChecker_assertPositiveNumber(a, b) {
  module$contents$omid$common$argsChecker_assertNumber(a, b);
  if (0 > b) {
    throw Error(a + " must be a positive number.");
  }
}
module$exports$omid$common$argsChecker.assertTruthyString = module$contents$omid$common$argsChecker_assertTruthyString;
module$exports$omid$common$argsChecker.assertNotNullObject = module$contents$omid$common$argsChecker_assertNotNullObject;
module$exports$omid$common$argsChecker.assertNumber = module$contents$omid$common$argsChecker_assertNumber;
module$exports$omid$common$argsChecker.assertNumberBetween = module$contents$omid$common$argsChecker_assertNumberBetween;
module$exports$omid$common$argsChecker.assertFunction = module$contents$omid$common$argsChecker_assertFunction;
module$exports$omid$common$argsChecker.assertPositiveNumber = module$contents$omid$common$argsChecker_assertPositiveNumber;
var module$exports$omid$common$exporter = {};
function module$contents$omid$common$exporter_getOmidExports() {
  return "undefined" === typeof omidExports ? null : omidExports;
}
function module$contents$omid$common$exporter_getOrCreateName(a, b) {
  return a && (a[b] || (a[b] = {}));
}
function module$contents$omid$common$exporter_packageExport(a, b, c) {
  if (c = void 0 === c ? module$contents$omid$common$exporter_getOmidExports() : c) {
    a = a.split("."), a.slice(0, a.length - 1).reduce(module$contents$omid$common$exporter_getOrCreateName, c)[a[a.length - 1]] = b;
  }
}
module$exports$omid$common$exporter.packageExport = module$contents$omid$common$exporter_packageExport;
var module$exports$omid$sessionClient$Partner = function(a, b) {
  module$contents$omid$common$argsChecker_assertTruthyString("Partner.name", a);
  module$contents$omid$common$argsChecker_assertTruthyString("Partner.version", b);
  this.name = a;
  this.version = b;
};
module$contents$omid$common$exporter_packageExport("OmidSessionClient.Partner", module$exports$omid$sessionClient$Partner);
var module$exports$omid$sessionClient$VerificationScriptResource = function(a, b, c, d) {
  d = void 0 === d ? module$exports$omid$common$constants.AccessMode.FULL : d;
  module$contents$omid$common$argsChecker_assertTruthyString("VerificationScriptResource.resourceUrl", a);
  this.resourceUrl = a;
  this.vendorKey = b;
  this.verificationParameters = c;
  this.accessMode = d;
};
module$exports$omid$sessionClient$VerificationScriptResource.prototype.toJSON = function() {
  return {accessMode:this.accessMode, resourceUrl:this.resourceUrl, vendorKey:this.vendorKey, verificationParameters:this.verificationParameters,};
};
module$contents$omid$common$exporter_packageExport("OmidSessionClient.VerificationScriptResource", module$exports$omid$sessionClient$VerificationScriptResource);
var module$exports$omid$sessionClient$UniversalAdId = function(a, b) {
  module$contents$omid$common$argsChecker_assertTruthyString("UniversalAdId.value", a);
  module$contents$omid$common$argsChecker_assertTruthyString("UniversalAdId.idRegistry", b);
  this.value = a;
  this.idRegistry = b;
};
module$exports$omid$sessionClient$UniversalAdId.prototype.toSerialisedValue = function() {
  return this.value + "; " + this.idRegistry;
};
module$contents$omid$common$exporter_packageExport("OmidSessionClient.UniversalAdId", module$exports$omid$sessionClient$UniversalAdId);
var module$exports$omid$sessionClient$Context = function(a, b, c, d, e) {
  c = void 0 === c ? null : c;
  d = void 0 === d ? null : d;
  e = void 0 === e ? null : e;
  module$contents$omid$common$argsChecker_assertNotNullObject("Context.partner", a);
  this.partner = a;
  this.verificationScriptResources = b;
  this.videoElement = this.slotElement = null;
  this.contentUrl = c;
  this.customReferenceData = d;
  this.underEvaluation = !1;
  this.serviceWindow = null;
  this.universalAdId = e;
};
module$exports$omid$sessionClient$Context.prototype.setVideoElement = function(a) {
  module$contents$omid$common$argsChecker_assertNotNullObject("Context.videoElement", a);
  this.videoElement = a;
};
module$exports$omid$sessionClient$Context.prototype.setSlotElement = function(a) {
  module$contents$omid$common$argsChecker_assertNotNullObject("Context.slotElement", a);
  this.slotElement = a;
};
module$exports$omid$sessionClient$Context.prototype.setServiceWindow = function(a) {
  module$contents$omid$common$argsChecker_assertNotNullObject("Context.serviceWindow", a);
  this.serviceWindow = a;
};
module$contents$omid$common$exporter_packageExport("OmidSessionClient.Context", module$exports$omid$sessionClient$Context);
var module$exports$omid$common$OmidGlobalProvider = {};
function module$contents$omid$common$OmidGlobalProvider_getOmidGlobal() {
  if ("undefined" !== typeof omidGlobal && omidGlobal) {
    return omidGlobal;
  }
  if ("undefined" !== typeof global && global) {
    return global;
  }
  if ("undefined" !== typeof window && window) {
    return window;
  }
  if ("undefined" !== typeof globalThis && globalThis) {
    return globalThis;
  }
  var a = Function("return this")();
  if (a) {
    return a;
  }
  throw Error("Could not determine global object context.");
}
module$exports$omid$common$OmidGlobalProvider.omidGlobal = module$contents$omid$common$OmidGlobalProvider_getOmidGlobal();
var module$contents$omid$sessionClient$OmidJsSessionInterface_ExportedNodeKeys = {ROOT:"omidSessionInterface", AD_EVENTS:"adEvents", MEDIA_EVENTS:"mediaEvents",}, module$contents$omid$sessionClient$OmidJsSessionInterface_MethodNameMap = {sessionError:"reportError",}, module$contents$omid$sessionClient$OmidJsSessionInterface_MediaEventMethodNames = Object.keys(module$exports$omid$common$constants.MediaEventType).map(function(a) {
  return module$exports$omid$common$constants.MediaEventType[a];
}), module$contents$omid$sessionClient$OmidJsSessionInterface_AdEventMethodNames = ["impressionOccurred",], module$exports$omid$sessionClient$OmidJsSessionInterface = function(a) {
  a = void 0 === a ? module$exports$omid$common$OmidGlobalProvider.omidGlobal : a;
  this.interfaceRoot_ = a[module$contents$omid$sessionClient$OmidJsSessionInterface_ExportedNodeKeys.ROOT];
};
module$exports$omid$sessionClient$OmidJsSessionInterface.prototype.isSupported = function() {
  return null != this.interfaceRoot_;
};
module$exports$omid$sessionClient$OmidJsSessionInterface.prototype.sendMessage = function(a, b, c) {
  "registerSessionObserver" == a && (c = [b]);
  module$contents$omid$sessionClient$OmidJsSessionInterface_MethodNameMap[a] && (a = module$contents$omid$sessionClient$OmidJsSessionInterface_MethodNameMap[a]);
  b = this.interfaceRoot_;
  0 <= module$contents$omid$sessionClient$OmidJsSessionInterface_AdEventMethodNames.indexOf(a) && (b = b[module$contents$omid$sessionClient$OmidJsSessionInterface_ExportedNodeKeys.AD_EVENTS]);
  0 <= module$contents$omid$sessionClient$OmidJsSessionInterface_MediaEventMethodNames.indexOf(a) && (b = b[module$contents$omid$sessionClient$OmidJsSessionInterface_ExportedNodeKeys.MEDIA_EVENTS]);
  b = b[a];
  if (!b) {
    throw Error("Unrecognized method name: " + a + ".");
  }
  b.apply(null, $jscomp.arrayFromIterable(c));
};
var module$exports$omid$common$Rectangle = function(a, b, c, d) {
  this.x = a;
  this.y = b;
  this.width = c;
  this.height = d;
};
var module$exports$omid$common$guid = {};
function module$contents$omid$common$guid_generateGuid() {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(a) {
    var b = 16 * Math.random() | 0;
    a = "y" === a ? (b & 3 | 8).toString(16) : b.toString(16);
    return a;
  });
}
module$exports$omid$common$guid.generateGuid = module$contents$omid$common$guid_generateGuid;
var module$exports$omid$common$logger = {};
function module$contents$omid$common$logger_error() {
  var a = $jscomp.getRestArguments.apply(0, arguments);
  module$contents$omid$common$logger_executeLog(function() {
    throw new (Function.prototype.bind.apply(Error, [null, "Could not complete the test successfully - "].concat($jscomp.arrayFromIterable(a))))();
  }, function() {
    return console.error.apply(console, $jscomp.arrayFromIterable(a));
  });
}
function module$contents$omid$common$logger_debug() {
  var a = $jscomp.getRestArguments.apply(0, arguments);
  module$contents$omid$common$logger_executeLog(function() {
  }, function() {
    return console.error.apply(console, $jscomp.arrayFromIterable(a));
  });
}
function module$contents$omid$common$logger_executeLog(a, b) {
  "undefined" !== typeof jasmine && jasmine ? a() : "undefined" !== typeof console && console && console.error && b();
}
module$exports$omid$common$logger.error = module$contents$omid$common$logger_error;
module$exports$omid$common$logger.debug = module$contents$omid$common$logger_debug;
var module$exports$omid$common$eventTypedefs = {};
var module$exports$omid$common$version = {ApiVersion:"1.0", Version:"1.5.5-iab77"};
var module$exports$omid$common$VersionUtils = {}, module$contents$omid$common$VersionUtils_SEMVER_DIGITS_NUMBER = 3;
function module$contents$omid$common$VersionUtils_isValidVersion(a) {
  return /\d+\.\d+\.\d+(-.*)?/.test(a);
}
function module$contents$omid$common$VersionUtils_versionGreaterOrEqual(a, b) {
  a = a.split("-")[0].split(".");
  b = b.split("-")[0].split(".");
  for (var c = 0; c < module$contents$omid$common$VersionUtils_SEMVER_DIGITS_NUMBER; c++) {
    var d = parseInt(a[c], 10), e = parseInt(b[c], 10);
    if (d > e) {
      break;
    } else if (d < e) {
      return !1;
    }
  }
  return !0;
}
module$exports$omid$common$VersionUtils.isValidVersion = module$contents$omid$common$VersionUtils_isValidVersion;
module$exports$omid$common$VersionUtils.versionGreaterOrEqual = module$contents$omid$common$VersionUtils_versionGreaterOrEqual;
var module$exports$omid$common$ArgsSerDe = {}, module$contents$omid$common$ArgsSerDe_ARGS_NOT_SERIALIZED_VERSION = "1.0.3";
function module$contents$omid$common$ArgsSerDe_serializeMessageArgs(a, b) {
  return module$contents$omid$common$VersionUtils_isValidVersion(a) && module$contents$omid$common$VersionUtils_versionGreaterOrEqual(a, module$contents$omid$common$ArgsSerDe_ARGS_NOT_SERIALIZED_VERSION) ? b : JSON.stringify(b);
}
function module$contents$omid$common$ArgsSerDe_deserializeMessageArgs(a, b) {
  return module$contents$omid$common$VersionUtils_isValidVersion(a) && module$contents$omid$common$VersionUtils_versionGreaterOrEqual(a, module$contents$omid$common$ArgsSerDe_ARGS_NOT_SERIALIZED_VERSION) ? b ? b : [] : b && "string" === typeof b ? JSON.parse(b) : [];
}
module$exports$omid$common$ArgsSerDe.serializeMessageArgs = module$contents$omid$common$ArgsSerDe_serializeMessageArgs;
module$exports$omid$common$ArgsSerDe.deserializeMessageArgs = module$contents$omid$common$ArgsSerDe_deserializeMessageArgs;
var module$exports$omid$common$serviceMethodUtils = {}, module$contents$omid$common$serviceMethodUtils_ServiceMethodPrefix = {SESSION_SERVICE:"SessionService.", VERIFICATION_SERVICE:"VerificationService.",};
function module$contents$omid$common$serviceMethodUtils_getPrefixedSessionServiceMethod(a) {
  return module$contents$omid$common$serviceMethodUtils_getPrefixedMethod(a, module$contents$omid$common$serviceMethodUtils_ServiceMethodPrefix.SESSION_SERVICE);
}
function module$contents$omid$common$serviceMethodUtils_getUnprefixedSessionServiceMethod(a) {
  return module$contents$omid$common$serviceMethodUtils_getUnprefixedMethod(a, module$contents$omid$common$serviceMethodUtils_ServiceMethodPrefix.SESSION_SERVICE);
}
function module$contents$omid$common$serviceMethodUtils_isPrefixedSessionServiceMethod(a) {
  return null != module$contents$omid$common$serviceMethodUtils_getUnprefixedSessionServiceMethod(a);
}
function module$contents$omid$common$serviceMethodUtils_getPrefixedVerificationServiceMethod(a) {
  return module$contents$omid$common$serviceMethodUtils_getPrefixedMethod(a, module$contents$omid$common$serviceMethodUtils_ServiceMethodPrefix.VERIFICATION_SERVICE);
}
function module$contents$omid$common$serviceMethodUtils_getUnprefixedVerificationServiceMethod(a) {
  return module$contents$omid$common$serviceMethodUtils_getUnprefixedMethod(a, module$contents$omid$common$serviceMethodUtils_ServiceMethodPrefix.VERIFICATION_SERVICE);
}
function module$contents$omid$common$serviceMethodUtils_isPrefixedVerificationServiceMethod(a) {
  return null != module$contents$omid$common$serviceMethodUtils_getUnprefixedVerificationServiceMethod(a);
}
function module$contents$omid$common$serviceMethodUtils_getPrefixedMethod(a, b) {
  return b + a;
}
function module$contents$omid$common$serviceMethodUtils_getUnprefixedMethod(a, b) {
  return (a = a.match(new RegExp("^" + b + "(.*)"))) && a[1];
}
module$exports$omid$common$serviceMethodUtils.getPrefixedSessionServiceMethod = module$contents$omid$common$serviceMethodUtils_getPrefixedSessionServiceMethod;
module$exports$omid$common$serviceMethodUtils.getPrefixedVerificationServiceMethod = module$contents$omid$common$serviceMethodUtils_getPrefixedVerificationServiceMethod;
module$exports$omid$common$serviceMethodUtils.getUnprefixedSessionServiceMethod = module$contents$omid$common$serviceMethodUtils_getUnprefixedSessionServiceMethod;
module$exports$omid$common$serviceMethodUtils.getUnprefixedVerificationServiceMethod = module$contents$omid$common$serviceMethodUtils_getUnprefixedVerificationServiceMethod;
module$exports$omid$common$serviceMethodUtils.isPrefixedSessionServiceMethod = module$contents$omid$common$serviceMethodUtils_isPrefixedSessionServiceMethod;
module$exports$omid$common$serviceMethodUtils.isPrefixedVerificationServiceMethod = module$contents$omid$common$serviceMethodUtils_isPrefixedVerificationServiceMethod;
var module$exports$omid$common$windowUtils = {};
function module$contents$omid$common$windowUtils_isValidWindow(a) {
  return null != a && "undefined" !== typeof a.top && null != a.top;
}
function module$contents$omid$common$windowUtils_isCrossOrigin(a) {
  if (a === module$exports$omid$common$OmidGlobalProvider.omidGlobal) {
    return !1;
  }
  try {
    if ("undefined" === typeof a.location.hostname) {
      return !0;
    }
    module$contents$omid$common$windowUtils_isSameOriginForIE(a);
  } catch (b) {
    return !0;
  }
  return !1;
}
function module$contents$omid$common$windowUtils_isSameOriginForIE(a) {
  return "" === a.x || "" !== a.x;
}
function module$contents$omid$common$windowUtils_resolveGlobalContext(a) {
  "undefined" === typeof a && "undefined" !== typeof window && window && (a = window);
  return module$contents$omid$common$windowUtils_isValidWindow(a) ? a : module$exports$omid$common$OmidGlobalProvider.omidGlobal;
}
function module$contents$omid$common$windowUtils_resolveTopWindowContext(a) {
  return module$contents$omid$common$windowUtils_isValidWindow(a) ? a.top : module$exports$omid$common$OmidGlobalProvider.omidGlobal;
}
function module$contents$omid$common$windowUtils_isTopWindowAccessible(a) {
  try {
    return a.top.location.href ? !0 : !1;
  } catch (b) {
    return !1;
  }
}
function module$contents$omid$common$windowUtils_removeDomElements(a) {
  a.type === module$exports$omid$common$constants.AdEventType.SESSION_START && ("undefined" !== typeof a.data.context.videoElement && (a.data.context.videoElement = "Video Element (" + a.data.context.videoElement.id + ")"), "undefined" !== typeof a.data.context.slotElement && (a.data.context.slotElement = "Slot Element (" + a.data.context.slotElement.id + ")"));
  return a;
}
function module$contents$omid$common$windowUtils_evaluatePageUrl(a) {
  if (!module$contents$omid$common$windowUtils_isValidWindow(a)) {
    return null;
  }
  try {
    var b = a.top;
    return module$contents$omid$common$windowUtils_isCrossOrigin(b) ? null : b.location.href;
  } catch (c) {
    return null;
  }
}
module$exports$omid$common$windowUtils.evaluatePageUrl = module$contents$omid$common$windowUtils_evaluatePageUrl;
module$exports$omid$common$windowUtils.isCrossOrigin = module$contents$omid$common$windowUtils_isCrossOrigin;
module$exports$omid$common$windowUtils.removeDomElements = module$contents$omid$common$windowUtils_removeDomElements;
module$exports$omid$common$windowUtils.resolveGlobalContext = module$contents$omid$common$windowUtils_resolveGlobalContext;
module$exports$omid$common$windowUtils.resolveTopWindowContext = module$contents$omid$common$windowUtils_resolveTopWindowContext;
module$exports$omid$common$windowUtils.isTopWindowAccessible = module$contents$omid$common$windowUtils_isTopWindowAccessible;
var module$exports$omid$common$DirectCommunication = function(a) {
  module$exports$omid$common$Communication.call(this, a);
  this.communicationType_ = module$exports$omid$common$constants.CommunicationType.DIRECT;
  this.handleExportedMessage = module$exports$omid$common$DirectCommunication.prototype.handleExportedMessage.bind(this);
};
$jscomp.inherits(module$exports$omid$common$DirectCommunication, module$exports$omid$common$Communication);
module$exports$omid$common$DirectCommunication.prototype.sendMessage = function(a, b) {
  b = void 0 === b ? this.to : b;
  if (!b) {
    throw Error("Message destination must be defined at construction time or when sending the message.");
  }
  b.handleExportedMessage(a.serialize(), this);
};
module$exports$omid$common$DirectCommunication.prototype.handleExportedMessage = function(a, b) {
  module$exports$omid$common$InternalMessage.isValidSerializedMessage(a) && this.handleMessage(module$exports$omid$common$InternalMessage.deserialize(a), b);
};
module$exports$omid$common$DirectCommunication.prototype.isCrossOrigin = function() {
  return !1;
};
var module$exports$omid$common$PostMessageCommunication = function(a, b) {
  b = void 0 === b ? module$exports$omid$common$OmidGlobalProvider.omidGlobal : b;
  module$exports$omid$common$Communication.call(this, b);
  var c = this;
  this.communicationType_ = module$exports$omid$common$constants.CommunicationType.POST_MESSAGE;
  a.addEventListener("message", function(d) {
    if ("object" === typeof d.data) {
      var e = d.data;
      module$exports$omid$common$InternalMessage.isValidSerializedMessage(e) && (e = module$exports$omid$common$InternalMessage.deserialize(e), d.source && c.handleMessage(e, d.source));
    }
  });
};
$jscomp.inherits(module$exports$omid$common$PostMessageCommunication, module$exports$omid$common$Communication);
module$exports$omid$common$PostMessageCommunication.isCompatibleContext = function(a) {
  return !!(a && a.addEventListener && a.postMessage);
};
module$exports$omid$common$PostMessageCommunication.prototype.sendMessage = function(a, b) {
  b = void 0 === b ? this.to : b;
  if (!b) {
    throw Error("Message destination must be defined at construction time or when sending the message.");
  }
  b.postMessage(a.serialize(), "*");
};
module$exports$omid$common$PostMessageCommunication.prototype.isCrossOrigin = function() {
  return this.to ? module$contents$omid$common$windowUtils_isCrossOrigin(this.to) : !0;
};
var module$exports$omid$common$DetectOmid = {OMID_PRESENT_FRAME_NAME:"omid_v1_present", OMID_PRESENT_FRAME_NAME_WEB:"omid_v1_present_web", OMID_PRESENT_FRAME_NAME_APP:"omid_v1_present_app", getEnvironmentIframeName:function(a) {
  var b = {};
  return (b[module$exports$omid$common$constants.Environment.APP] = module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME_APP, b[module$exports$omid$common$constants.Environment.WEB] = module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME_WEB, b)[a];
}};
function module$contents$omid$common$DetectOmid_isIframePresent(a, b) {
  try {
    return a.frames && !!a.frames[b];
  } catch (c) {
    return !1;
  }
}
module$exports$omid$common$DetectOmid.isOmidPresent = function(a) {
  return [module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME, module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME_WEB, module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME_APP,].some(function(b) {
    return module$contents$omid$common$DetectOmid_isIframePresent(a, b);
  });
};
module$exports$omid$common$DetectOmid.getOmidEnvironment = function(a) {
  for (var b = $jscomp.makeIterator(Object.values(module$exports$omid$common$constants.Environment)), c = b.next(); !c.done; c = b.next()) {
    c = c.value;
    var d = module$exports$omid$common$DetectOmid.getEnvironmentIframeName(c);
    if (module$contents$omid$common$DetectOmid_isIframePresent(a, d)) {
      return c;
    }
  }
  return null;
};
function module$contents$omid$common$DetectOmid_writePresenceIframe_(a, b) {
  a.document.write('<iframe style="display:none" id="' + (b + '" name="' + b + '" sandbox></iframe>'));
}
module$exports$omid$common$DetectOmid.declareOmidPresence = function(a, b) {
  a.frames && a.document && ![module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME, module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME_WEB, module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME_APP,].some(function(c) {
    return !!a.frames[c];
  }) && (null == a.document.body && module$exports$omid$common$DetectOmid.isMutationObserverAvailable_(a) ? module$exports$omid$common$DetectOmid.registerMutationObserver_(a, b) : (b = module$exports$omid$common$DetectOmid.getEnvironmentIframeName(b), a.document.body ? (module$exports$omid$common$DetectOmid.appendPresenceIframe_(a, module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME), module$exports$omid$common$DetectOmid.appendPresenceIframe_(a, b)) : (module$contents$omid$common$DetectOmid_writePresenceIframe_(a, 
  module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME), module$contents$omid$common$DetectOmid_writePresenceIframe_(a, b))));
};
module$exports$omid$common$DetectOmid.appendPresenceIframe_ = function(a, b) {
  var c = a.document.createElement("iframe");
  c.id = b;
  c.name = b;
  c.style.display = "none";
  c.sandbox = "";
  a.document.body.appendChild(c);
};
module$exports$omid$common$DetectOmid.isMutationObserverAvailable_ = function(a) {
  return "MutationObserver" in a;
};
module$exports$omid$common$DetectOmid.registerMutationObserver_ = function(a, b) {
  var c = new MutationObserver(function(d) {
    d.forEach(function(e) {
      "BODY" === e.addedNodes[0].nodeName && (e = module$exports$omid$common$DetectOmid.getEnvironmentIframeName(b), module$exports$omid$common$DetectOmid.appendPresenceIframe_(a, module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME), module$exports$omid$common$DetectOmid.appendPresenceIframe_(a, e), c.disconnect());
    });
  });
  c.observe(a.document.documentElement, {childList:!0});
};
var module$exports$omid$common$serviceCommunication = {}, module$contents$omid$common$serviceCommunication_EXPORTED_SESSION_COMMUNICATION_NAME = ["omid", "v1_SessionServiceCommunication"], module$contents$omid$common$serviceCommunication_EXPORTED_VERIFICATION_COMMUNICATION_NAME = ["omid", "v1_VerificationServiceCommunication"], module$contents$omid$common$serviceCommunication_EXPORTED_SERVICE_WINDOW_NAME = ["omidVerificationProperties", "serviceWindow"];
function module$contents$omid$common$serviceCommunication_getValueForKeypath(a, b) {
  return b.reduce(function(c, d) {
    return c && c[d];
  }, a);
}
function module$contents$omid$common$serviceCommunication_startServiceCommunication(a, b, c, d) {
  if (!module$contents$omid$common$windowUtils_isCrossOrigin(b)) {
    try {
      var e = module$contents$omid$common$serviceCommunication_getValueForKeypath(b, c);
      if (e) {
        return new module$exports$omid$common$DirectCommunication(e);
      }
    } catch (l) {
    }
  }
  return d(b) ? new module$exports$omid$common$PostMessageCommunication(a, b) : null;
}
function module$contents$omid$common$serviceCommunication_startServiceCommunicationFromCandidates(a, b, c, d) {
  b = $jscomp.makeIterator(b);
  for (var e = b.next(); !e.done; e = b.next()) {
    if (e = module$contents$omid$common$serviceCommunication_startServiceCommunication(a, e.value, c, d)) {
      return e;
    }
  }
  return null;
}
function module$contents$omid$common$serviceCommunication_startSessionServiceCommunication(a, b, c) {
  c = void 0 === c ? module$exports$omid$common$DetectOmid.isOmidPresent : c;
  var d = [a, module$contents$omid$common$windowUtils_resolveTopWindowContext(a)];
  b && d.unshift(b);
  return module$contents$omid$common$serviceCommunication_startServiceCommunicationFromCandidates(a, d, module$contents$omid$common$serviceCommunication_EXPORTED_SESSION_COMMUNICATION_NAME, c);
}
function module$contents$omid$common$serviceCommunication_startVerificationServiceCommunication(a, b) {
  b = void 0 === b ? module$exports$omid$common$DetectOmid.isOmidPresent : b;
  var c = [], d = module$contents$omid$common$serviceCommunication_getValueForKeypath(a, module$contents$omid$common$serviceCommunication_EXPORTED_SERVICE_WINDOW_NAME);
  d && c.push(d);
  c.push(module$contents$omid$common$windowUtils_resolveTopWindowContext(a));
  return module$contents$omid$common$serviceCommunication_startServiceCommunicationFromCandidates(a, c, module$contents$omid$common$serviceCommunication_EXPORTED_VERIFICATION_COMMUNICATION_NAME, b);
}
module$exports$omid$common$serviceCommunication.startSessionServiceCommunication = module$contents$omid$common$serviceCommunication_startSessionServiceCommunication;
module$exports$omid$common$serviceCommunication.startVerificationServiceCommunication = module$contents$omid$common$serviceCommunication_startVerificationServiceCommunication;
var module$contents$omid$sessionClient$AdSession_SESSION_CLIENT_VERSION = module$exports$omid$common$version.Version, module$exports$omid$sessionClient$AdSession = function(a, b, c) {
  module$contents$omid$common$argsChecker_assertNotNullObject("AdSession.context", a);
  this.adSessionId_ = module$contents$omid$common$guid_generateGuid();
  this.context_ = a;
  this.impressionOccurred_ = !1;
  var d = this.context_.serviceWindow || void 0;
  this.communication_ = b || module$contents$omid$common$serviceCommunication_startSessionServiceCommunication(module$contents$omid$common$windowUtils_resolveGlobalContext(), d);
  this.sessionInterface_ = c || new module$exports$omid$sessionClient$OmidJsSessionInterface();
  this.isSessionRunning_ = this.hasMediaEvents_ = this.hasAdEvents_ = !1;
  this.impressionType_ = this.creativeType_ = null;
  this.creativeLoaded_ = !1;
  this.callbackMap_ = {};
  this.communication_ && (this.communication_.onMessage = this.handleInternalMessage_.bind(this));
  this.setClientInfo_();
  this.injectVerificationScripts_(a.verificationScriptResources);
  this.sendSlotElement_(a.slotElement);
  this.sendVideoElement_(a.videoElement);
  this.sendContentUrl_(a.contentUrl);
  this.watchSessionEvents_();
};
module$exports$omid$sessionClient$AdSession.prototype.getAdSessionId = function() {
  return this.adSessionId_;
};
module$exports$omid$sessionClient$AdSession.prototype.setCreativeType = function(a) {
  if (a === module$exports$omid$common$constants.CreativeType.DEFINED_BY_JAVASCRIPT) {
    throw Error("Creative type cannot be redefined with value " + module$exports$omid$common$constants.CreativeType.DEFINED_BY_JAVASCRIPT);
  }
  if (this.impressionOccurred_) {
    throw Error("Impression has already occurred");
  }
  if (this.creativeLoaded_) {
    throw Error("Creative has already loaded");
  }
  if (this.creativeType_ && this.creativeType_ !== module$exports$omid$common$constants.CreativeType.DEFINED_BY_JAVASCRIPT) {
    throw Error("Creative type cannot be redefined");
  }
  if (void 0 === this.creativeType_) {
    throw Error("Native integration is using OMID 1.2 or earlier");
  }
  this.sendOneWayMessage("setCreativeType", a, this.adSessionId_);
  this.creativeType_ = a;
};
module$exports$omid$sessionClient$AdSession.prototype.setImpressionType = function(a) {
  if (a === module$exports$omid$common$constants.ImpressionType.DEFINED_BY_JAVASCRIPT) {
    throw Error("Impression type cannot be redefined with value " + module$exports$omid$common$constants.ImpressionType.DEFINED_BY_JAVASCRIPT);
  }
  if (this.impressionOccurred_) {
    throw Error("Impression has already occurred");
  }
  if (this.creativeLoaded_) {
    throw Error("Creative has already loaded");
  }
  if (this.impressionType_ && this.impressionType_ !== module$exports$omid$common$constants.ImpressionType.DEFINED_BY_JAVASCRIPT) {
    throw Error("Impression type cannot be redefined");
  }
  if (void 0 === this.impressionType_) {
    throw Error("Native integration is using OMID 1.2 or earlier");
  }
  this.sendOneWayMessage("setImpressionType", a, this.adSessionId_);
  this.impressionType_ = a;
};
module$exports$omid$sessionClient$AdSession.prototype.isSupported = function() {
  return !!this.communication_ || this.sessionInterface_.isSupported();
};
module$exports$omid$sessionClient$AdSession.prototype.isSendingElementsSupported_ = function() {
  return this.communication_ ? this.communication_.isDirectCommunication() : this.sessionInterface_.isSupported();
};
module$exports$omid$sessionClient$AdSession.prototype.registerSessionObserver = function(a) {
  this.sendMessage("registerSessionObserver", a, this.adSessionId_);
};
module$exports$omid$sessionClient$AdSession.prototype.start = function() {
  var a = {customReferenceData:this.context_.customReferenceData, underEvaluation:this.context_.underEvaluation,};
  this.context_.universalAdId && (a.universalAdId = this.context_.universalAdId.toSerialisedValue());
  this.sendOneWayMessage("startSession", a, this.adSessionId_);
};
module$exports$omid$sessionClient$AdSession.prototype.finish = function() {
  this.sendOneWayMessage("finishSession", this.adSessionId_);
};
module$exports$omid$sessionClient$AdSession.prototype.error = function(a, b) {
  this.sendOneWayMessage("sessionError", a, b, this.adSessionId_);
};
module$exports$omid$sessionClient$AdSession.prototype.registerAdEvents = function() {
  if (this.hasAdEvents_) {
    throw Error("AdEvents already registered.");
  }
  this.hasAdEvents_ = !0;
  this.sendOneWayMessage("registerAdEvents", this.adSessionId_);
};
module$exports$omid$sessionClient$AdSession.prototype.registerMediaEvents = function() {
  if (this.hasMediaEvents_) {
    throw Error("MediaEvents already registered.");
  }
  this.hasMediaEvents_ = !0;
  this.sendOneWayMessage("registerMediaEvents", this.adSessionId_);
};
module$exports$omid$sessionClient$AdSession.prototype.sendOneWayMessage = function(a) {
  var b = $jscomp.getRestArguments.apply(1, arguments);
  this.sendMessage.apply(this, [a, null].concat($jscomp.arrayFromIterable(b)));
};
module$exports$omid$sessionClient$AdSession.prototype.sendMessage = function(a, b) {
  var c = $jscomp.getRestArguments.apply(2, arguments);
  this.communication_ ? this.sendInternalMessage_(a, b, c) : this.sessionInterface_.isSupported() && this.sendInterfaceMessage_(a, b, c);
};
module$exports$omid$sessionClient$AdSession.prototype.sendInternalMessage_ = function(a, b, c) {
  var d = module$contents$omid$common$guid_generateGuid();
  b && (this.callbackMap_[d] = b);
  a = new module$exports$omid$common$InternalMessage(d, module$contents$omid$common$serviceMethodUtils_getPrefixedSessionServiceMethod(a), module$exports$omid$common$version.Version, module$contents$omid$common$ArgsSerDe_serializeMessageArgs(module$exports$omid$common$version.Version, c));
  this.communication_.sendMessage(a);
};
module$exports$omid$sessionClient$AdSession.prototype.handleInternalMessage_ = function(a, b) {
  b = a.method;
  var c = a.guid;
  a = a.args;
  if ("response" === b && this.callbackMap_[c]) {
    var d = module$contents$omid$common$ArgsSerDe_deserializeMessageArgs(module$exports$omid$common$version.Version, a);
    this.callbackMap_[c].apply(this, d);
  }
  "error" === b && window.console && module$contents$omid$common$logger_error(a);
};
module$exports$omid$sessionClient$AdSession.prototype.sendInterfaceMessage_ = function(a, b, c) {
  try {
    this.sessionInterface_.sendMessage(a, b, c);
  } catch (d) {
    module$contents$omid$common$logger_error("Failed to communicate with SessionInterface with error:"), module$contents$omid$common$logger_error(d);
  }
};
module$exports$omid$sessionClient$AdSession.prototype.assertSessionRunning = function() {
  if (!this.isSessionRunning_) {
    throw Error("Session not started.");
  }
};
module$exports$omid$sessionClient$AdSession.prototype.impressionOccurred = function() {
  if (this.creativeType_ === module$exports$omid$common$constants.CreativeType.DEFINED_BY_JAVASCRIPT) {
    throw Error("Creative type has not been redefined");
  }
  if (this.impressionType_ === module$exports$omid$common$constants.ImpressionType.DEFINED_BY_JAVASCRIPT) {
    throw Error("Impression type has not been redefined");
  }
  this.impressionOccurred_ = !0;
};
module$exports$omid$sessionClient$AdSession.prototype.creativeLoaded = function() {
  if (this.creativeType_ === module$exports$omid$common$constants.CreativeType.DEFINED_BY_JAVASCRIPT) {
    throw Error("Creative type has not been redefined");
  }
  if (this.impressionType_ === module$exports$omid$common$constants.ImpressionType.DEFINED_BY_JAVASCRIPT) {
    throw Error("Impression type has not been redefined");
  }
  this.creativeLoaded_ = !0;
};
module$exports$omid$sessionClient$AdSession.prototype.setClientInfo_ = function() {
  this.sendOneWayMessage("setClientInfo", module$exports$omid$common$version.Version, this.context_.partner.name, this.context_.partner.version, this.adSessionId_);
};
module$exports$omid$sessionClient$AdSession.prototype.injectVerificationScripts_ = function(a) {
  a && (a = a.map(function(b) {
    return b.toJSON();
  }), this.sendOneWayMessage("injectVerificationScriptResources", a, this.adSessionId_));
};
module$exports$omid$sessionClient$AdSession.prototype.sendSlotElement_ = function(a) {
  this.sendElement_(a, "setSlotElement");
};
module$exports$omid$sessionClient$AdSession.prototype.sendVideoElement_ = function(a) {
  this.sendElement_(a, "setVideoElement");
};
module$exports$omid$sessionClient$AdSession.prototype.sendElement_ = function(a, b) {
  a && (this.isSendingElementsSupported_() ? this.sendOneWayMessage(b, a, this.adSessionId_) : this.error(module$exports$omid$common$constants.ErrorType.GENERIC, "Session Client " + b + " called when communication is cross-origin"));
};
module$exports$omid$sessionClient$AdSession.prototype.sendContentUrl_ = function(a) {
  a && this.sendOneWayMessage("setContentUrl", a, this.adSessionId_);
};
module$exports$omid$sessionClient$AdSession.prototype.setElementBounds = function(a) {
  module$contents$omid$common$argsChecker_assertNotNullObject("AdSession.elementBounds", a);
  this.sendOneWayMessage("setElementBounds", a, this.adSessionId_);
};
module$exports$omid$sessionClient$AdSession.prototype.watchSessionEvents_ = function() {
  var a = this;
  this.registerSessionObserver(function(b) {
    b.type === module$exports$omid$common$constants.AdEventType.SESSION_START && (a.isSessionRunning_ = !0, a.creativeType_ = b.data.creativeType, a.impressionType_ = b.data.impressionType);
    b.type === module$exports$omid$common$constants.AdEventType.SESSION_FINISH && (a.isSessionRunning_ = !1);
  });
};
module$contents$omid$common$exporter_packageExport("OmidSessionClient.AdSession", module$exports$omid$sessionClient$AdSession);
var module$exports$omid$common$VastProperties = function(a, b, c, d) {
  this.isSkippable = a;
  this.skipOffset = b;
  this.isAutoPlay = c;
  this.position = d;
};
module$exports$omid$common$VastProperties.prototype.toJSON = function() {
  return {isSkippable:this.isSkippable, skipOffset:this.skipOffset, isAutoPlay:this.isAutoPlay, position:this.position,};
};
var module$exports$omid$sessionClient$AdEvents = function(a) {
  module$contents$omid$common$argsChecker_assertNotNullObject("AdEvents.adSession", a);
  this.adSessionId_ = a.getAdSessionId();
  try {
    a.registerAdEvents(), this.adSession = a;
  } catch (b) {
    throw Error("AdSession already has an ad events instance registered");
  }
};
module$exports$omid$sessionClient$AdEvents.prototype.impressionOccurred = function() {
  this.adSession.assertSessionRunning();
  this.adSession.impressionOccurred();
  this.adSession.sendOneWayMessage("impressionOccurred", this.adSessionId_);
};
module$exports$omid$sessionClient$AdEvents.prototype.loaded = function(a) {
  a = void 0 === a ? null : a;
  this.adSession.creativeLoaded();
  a = a ? a.toJSON() : null;
  this.adSession.sendOneWayMessage("loaded", a, this.adSessionId_);
};
module$contents$omid$common$exporter_packageExport("OmidSessionClient.AdEvents", module$exports$omid$sessionClient$AdEvents);
var module$exports$omid$sessionClient$MediaEvents = function(a) {
  module$contents$omid$common$argsChecker_assertNotNullObject("MediaEvents.adSession", a);
  this.adSessionId_ = a.getAdSessionId();
  try {
    a.registerMediaEvents(), this.adSession = a;
  } catch (b) {
    throw Error("AdSession already has a media events instance registered");
  }
};
module$exports$omid$sessionClient$MediaEvents.prototype.start = function(a, b) {
  module$contents$omid$common$argsChecker_assertNumber("MediaEvents.start.duration", a);
  module$contents$omid$common$argsChecker_assertNumberBetween("MediaEvents.start.mediaPlayerVolume", b, 0, 1);
  this.adSession.sendOneWayMessage("start", a, b, this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.firstQuartile = function() {
  this.adSession.sendOneWayMessage("firstQuartile", this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.midpoint = function() {
  this.adSession.sendOneWayMessage("midpoint", this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.thirdQuartile = function() {
  this.adSession.sendOneWayMessage("thirdQuartile", this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.complete = function() {
  this.adSession.sendOneWayMessage("complete", this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.pause = function() {
  this.adSession.sendOneWayMessage("pause", this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.resume = function() {
  this.adSession.sendOneWayMessage("resume", this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.bufferStart = function() {
  this.adSession.sendOneWayMessage("bufferStart", this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.bufferFinish = function() {
  this.adSession.sendOneWayMessage("bufferFinish", this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.skipped = function() {
  this.adSession.sendOneWayMessage("skipped", this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.volumeChange = function(a) {
  module$contents$omid$common$argsChecker_assertNumberBetween("MediaEvents.volumeChange.mediaPlayerVolume", a, 0, 1);
  this.adSession.sendOneWayMessage("volumeChange", a, this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.playerStateChange = function(a) {
  module$contents$omid$common$argsChecker_assertNotNullObject("MediaEvents.playerStateChange.playerState", a);
  this.adSession.sendOneWayMessage("playerStateChange", a, this.adSessionId_);
};
module$exports$omid$sessionClient$MediaEvents.prototype.adUserInteraction = function(a) {
  module$contents$omid$common$argsChecker_assertNotNullObject("MediaEvents.adUserInteraction.interactionType", a);
  this.adSession.sendOneWayMessage("adUserInteraction", a, this.adSessionId_);
};
module$contents$omid$common$exporter_packageExport("OmidSessionClient.MediaEvents", module$exports$omid$sessionClient$MediaEvents);
var module$exports$omid$sessionClient$OmidVersion = function(a, b) {
  module$contents$omid$common$argsChecker_assertTruthyString("OmidVersion.semanticVersion", a);
  module$contents$omid$common$argsChecker_assertTruthyString("OmidVersion.apiLevel", b);
};
module$contents$omid$common$exporter_packageExport("OmidSessionClient.OmidVersion", module$exports$omid$sessionClient$OmidVersion);
var module$exports$omid$sessionClient$ServiceCommunication = {};
function module$contents$omid$sessionClient$ServiceCommunication_listenForServiceWindow(a) {
  var b = module$contents$omid$common$windowUtils_resolveGlobalContext();
  (new module$exports$omid$common$PostMessageCommunication(b)).onMessage = function(c, d) {
    c.method === module$exports$omid$common$constants.MessageMethod.IDENTIFY_SERVICE_WINDOW && a(d);
  };
}
module$contents$omid$common$exporter_packageExport("OmidSessionClient.listenForServiceWindow", module$contents$omid$sessionClient$ServiceCommunication_listenForServiceWindow);
module$exports$omid$sessionClient$ServiceCommunication.listenForServiceWindow = module$contents$omid$sessionClient$ServiceCommunication_listenForServiceWindow;
var module$exports$omid$sessionClient$VastPropertiesExports = {};
module$contents$omid$common$exporter_packageExport("OmidSessionClient.VastProperties", module$exports$omid$common$VastProperties);
var module$exports$omid$sessionClient$VerificationVendor = {VerificationVendorId:{OTHER:1, MOAT:2, DOUBLEVERIFY:3, INTEGRAL_AD_SCIENCE:4, PIXELATE:5, NIELSEN:6, COMSCORE:7, MEETRICS:8, GOOGLE:9, HUMAN:10,}};
function module$contents$omid$sessionClient$VerificationVendor_verificationVendorIdForScriptUrl(a) {
  for (var b = $jscomp.makeIterator(module$contents$omid$sessionClient$VerificationVendor_VERIFICATION_VENDORS.keys()), c = b.next(); !c.done; c = b.next()) {
    c = c.value;
    for (var d = $jscomp.makeIterator(module$contents$omid$sessionClient$VerificationVendor_VERIFICATION_VENDORS.get(c)), e = d.next(); !e.done; e = d.next()) {
      if (e.value.test(a)) {
        return c;
      }
    }
  }
  return module$exports$omid$sessionClient$VerificationVendor.VerificationVendorId.OTHER;
}
var module$contents$omid$sessionClient$VerificationVendor_VERIFICATION_VENDORS = new Map([[module$exports$omid$sessionClient$VerificationVendor.VerificationVendorId.DOUBLEVERIFY, [/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.doubleverify\.com\/.*$/, /^(https?:\/\/|\/\/)?c\.[\w\-]+\.com\/vfw\/dv\/.*$/, /^(https?:\/\/|\/\/)?(www\.)?[\w]+\.tv\/r\/s\/d\/.*$/, /^(https?:\/\/|\/\/)?(\w\.?)+\.dv\.tech\/.*$/,],], [module$exports$omid$sessionClient$VerificationVendor.VerificationVendorId.INTEGRAL_AD_SCIENCE, [/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.adsafeprotected\.com\/.*$/,
],], [module$exports$omid$sessionClient$VerificationVendor.VerificationVendorId.PIXELATE, [/^https?:\/\/(q|cdn)\.adrta\.com\/s\/.*\/(aa|aanf)\.js.*$/, /^https:\/\/cdn\.rta247\.com\/s\/.*\/(aa|aanf)\.js.*$/,],], [module$exports$omid$sessionClient$VerificationVendor.VerificationVendorId.NIELSEN, [],], [module$exports$omid$sessionClient$VerificationVendor.VerificationVendorId.COMSCORE, [/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.voicefive\.com\/.*$/, /^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.measuread\.com\/.*$/, 
/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.scorecardresearch\.com\/.*$/,],], [module$exports$omid$sessionClient$VerificationVendor.VerificationVendorId.MEETRICS, [/^(https?:\/\/|\/\/)?s418\.mxcdn\.net\/bb-serve\/omid-meetrics.*\.js$/,],], [module$exports$omid$sessionClient$VerificationVendor.VerificationVendorId.GOOGLE, [/^(https?:\/\/|\/\/)?pagead2\.googlesyndication\.com\/.*$/, /^(https?:\/\/|\/\/)?www\.googletagservices\.com\/.*$/,],], [module$exports$omid$sessionClient$VerificationVendor.VerificationVendorId.HUMAN, 
[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.script\.ac\/.*$/, /^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\/(2|ag|static)\/[a-zA-Z0-9.]*\/analytics.js.*$/,],],]);
module$contents$omid$common$exporter_packageExport("OmidSessionClient.verificationVendorIdForScriptUrl", module$contents$omid$sessionClient$VerificationVendor_verificationVendorIdForScriptUrl);
module$contents$omid$common$exporter_packageExport("OmidSessionClient.VerificationVendorId", module$exports$omid$sessionClient$VerificationVendor.VerificationVendorId);
module$exports$omid$sessionClient$VerificationVendor.verificationVendorIdForScriptUrl = module$contents$omid$sessionClient$VerificationVendor_verificationVendorIdForScriptUrl;
var module$exports$omid$common$FloatComparer = {}, module$contents$omid$common$FloatComparer_FLOAT_ROUGH_DIFF_TOLERANCE = 0.01;
function module$contents$omid$common$FloatComparer_roughlyEqual(a, b) {
  return Math.abs(a - b) < module$contents$omid$common$FloatComparer_FLOAT_ROUGH_DIFF_TOLERANCE;
}
function module$contents$omid$common$FloatComparer_roughlyLessThan(a, b) {
  return b - a > module$contents$omid$common$FloatComparer_FLOAT_ROUGH_DIFF_TOLERANCE;
}
function module$contents$omid$common$FloatComparer_lessThanOrRoughlyEqual(a, b) {
  return a < b || module$contents$omid$common$FloatComparer_roughlyEqual(a, b);
}
function module$contents$omid$common$FloatComparer_greaterThanOrRoughlyEqual(a, b) {
  return a > b || module$contents$omid$common$FloatComparer_roughlyEqual(a, b);
}
module$exports$omid$common$FloatComparer.roughlyEqual = module$contents$omid$common$FloatComparer_roughlyEqual;
module$exports$omid$common$FloatComparer.roughlyLessThan = module$contents$omid$common$FloatComparer_roughlyLessThan;
module$exports$omid$common$FloatComparer.lessThanOrRoughlyEqual = module$contents$omid$common$FloatComparer_lessThanOrRoughlyEqual;
module$exports$omid$common$FloatComparer.greaterThanOrRoughlyEqual = module$contents$omid$common$FloatComparer_greaterThanOrRoughlyEqual;
var module$exports$omid$common$webtvUtils = {}, module$contents$omid$common$webtvUtils_WebOSSystem, module$contents$omid$common$webtvUtils_WEBOSSYSTEM = "webOSSystem";
function module$contents$omid$common$webtvUtils_getWebOSSystem(a) {
  if ("object" === typeof a && "object" === typeof a[module$contents$omid$common$webtvUtils_WEBOSSYSTEM]) {
    return a[module$contents$omid$common$webtvUtils_WEBOSSYSTEM];
  }
}
module$exports$omid$common$webtvUtils.getWebOSSystem = module$contents$omid$common$webtvUtils_getWebOSSystem;
function module$contents$omid$common$webtvUtils_isWebOS(a) {
  return "object" === typeof module$contents$omid$common$webtvUtils_getWebOSSystem(a);
}
module$exports$omid$common$webtvUtils.isWebOS = module$contents$omid$common$webtvUtils_isWebOS;
var module$contents$omid$common$webtvUtils_Tizen, module$contents$omid$common$webtvUtils_TIZEN = "tizen";
function module$contents$omid$common$webtvUtils_getTizen(a) {
  if ("object" === typeof a && "object" === typeof a[module$contents$omid$common$webtvUtils_TIZEN]) {
    return a[module$contents$omid$common$webtvUtils_TIZEN];
  }
}
module$exports$omid$common$webtvUtils.getTizen = module$contents$omid$common$webtvUtils_getTizen;
function module$contents$omid$common$webtvUtils_isTizen(a) {
  return "object" === typeof module$contents$omid$common$webtvUtils_getTizen(a);
}
module$exports$omid$common$webtvUtils.isTizen = module$contents$omid$common$webtvUtils_isTizen;

}, typeof exports === 'undefined' ? undefined : exports));


(()=>{var e={686:function(e,t){!function(e){"use strict";function t(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function i(e){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?t(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,r=d(e);if(t){var n=d(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return h(this,i)}}function p(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}var f=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],n=E(e);for(var s in!t.ERRORCODE||i.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=R(Math.round(1e8*Math.random())),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING,t)t[s]=S(t[s]);for(var o in n){var a=n[o];"string"==typeof a&&r.push(g(a,t))}return r}function g(e,t){var i=(e=_(e,t)).match(/[^[\]]+(?=])/g);if(!i)return e;var r=i.filter((function(e){return f.indexOf(e)>-1}));return 0===r.length?e:_(e,r=r.reduce((function(e,t){return e[t]=-1,e}),{}))}function _(e,t){var i=e;for(var r in t){var n=t[r];i=i.replace(new RegExp("(?:\\[|%%)(".concat(r,")(?:\\]|%%)"),"g"),n)}return i}function E(e){return Array.isArray(e)?e.map((function(e){return e&&e.hasOwnProperty("url")?e.url:e})):e}function T(e,t){for(var i=0;i<t.length;i++)if(y(t[i],e))return!0;return!1}function y(e,t){if(e&&t){var i=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);return i.length===r.length&&e.id===t.id&&e.url===t.url}return!1}function S(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e.toString().padStart(t,"0")}var k={track:function(e,t,i){A(e,t,i).forEach((function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:A,extractURLsFromTemplates:E,containsTemplateObject:T,isTemplateObjectEqual:y,encodeURIComponentRFC3986:S,replaceUrlMacros:g,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,i){return t.concat(Array.isArray(i)?e(i):i)}),[])},joinArrayOfUniqueTemplateObjs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=Array.isArray(e)?e:[],r=Array.isArray(t)?t:[];return i.concat(r).reduce((function(e,t){return T(t,e)||e.push(t),e}),[])},isValidTimeValue:function(e){return Number.isFinite(e)&&e>=-2},addLeadingZeros:R};function b(e){return-1!==["true","TRUE","True","1"].indexOf(e)}var C={childByName:function(e,t){var i=e.childNodes;for(var r in i){var n=i[r];if(n.nodeName===t)return n}},childrenByName:function(e,t){var i=[],r=e.childNodes;for(var n in r){var s=r[n];s.nodeName===t&&i.push(s)}return i},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){var i=location.protocol;return"".concat(i).concat(e)}if(-1===e.indexOf("://")){var r=t.slice(0,t.lastIndexOf("/"));return"".concat(r,"/").concat(e)}return e},parseBoolean:b,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,i){var r=t.getAttribute(e);r&&i.setAttribute(e,r)},parseAttributes:function(e){for(var t=e.attributes,i={},r=0;r<t.length;r++)i[t[r].nodeName]=t[r].nodeValue;return i},parseDuration:function(e){if(null==e)return-1;if(k.isNumeric(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var i=t[2].split("."),r=parseInt(i[0]);2===i.length&&(r+=parseFloat("0.".concat(i[1])));var n=parseInt(60*t[1]),s=parseInt(60*t[0]*60);return isNaN(s)||isNaN(n)||isNaN(r)||n>3600||r>60?-1:s+n+r},splitVAST:function(e){var t=[],i=null;return e.forEach((function(r,n){if(r.sequence&&(r.sequence=parseInt(r.sequence,10)),r.sequence>1){var s=e[n-1];if(s&&s.sequence===r.sequence-1)return void(i&&i.push(r));delete r.sequence}i=[r],t.push(i)})),t},assignAttributes:function(e,t){if(e)for(var i in e){var r=e[i];if(r.nodeName&&r.nodeValue&&t.hasOwnProperty(r.nodeName)){var n=r.nodeValue;"boolean"==typeof t[r.nodeName]&&(n=b(n)),t[r.nodeName]=n}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),t.viewableImpression.length>0&&(e.viewableImpression=[].concat(p(e.viewableImpression),p(t.viewableImpression))),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;var i=(t.creatives||[]).filter((function(e){return e&&"companion"===e.type})),r=i.reduce((function(e,t){return(t.variations||[]).forEach((function(t){(t.companionClickTrackingURLTemplates||[]).forEach((function(t){k.containsTemplateObject(t,e)||e.push(t)}))})),e}),[]);e.creatives=i.concat(e.creatives);var n=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,s=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var i in t.trackingEvents[e.type]){var o=t.trackingEvents[e.type][i];Array.isArray(e.trackingEvents[i])||(e.trackingEvents[i]=[]),e.trackingEvents[i]=e.trackingEvents[i].concat(o)}"linear"===e.type&&(n&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),s&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),"companion"===e.type&&r.length&&(e.variations||[]).forEach((function(e){e.companionClickTrackingURLTemplates=k.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,r)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function V(e,t){var i=function(){var e=m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"companion",required:null,variations:[]}}(t);return i.required=e.getAttribute("required")||null,i.variations=C.childrenByName(e,"Companion").map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(C.parseAttributes(e));t.htmlResources=C.childrenByName(e,"HTMLResource").reduce((function(e,t){var i=C.parseNodeText(t);return i?e.concat(i):e}),[]),t.iframeResources=C.childrenByName(e,"IFrameResource").reduce((function(e,t){var i=C.parseNodeText(t);return i?e.concat(i):e}),[]),t.staticResources=C.childrenByName(e,"StaticResource").reduce((function(e,t){var i=C.parseNodeText(t);return i?e.concat({url:i,creativeType:t.getAttribute("creativeType")||null}):e}),[]),t.altText=C.parseNodeText(C.childByName(e,"AltText"))||null;var i=C.childByName(e,"TrackingEvents");i&&C.childrenByName(i,"Tracking").forEach((function(e){var i=e.getAttribute("event"),r=C.parseNodeText(e);i&&r&&(Array.isArray(t.trackingEvents[i])||(t.trackingEvents[i]=[]),t.trackingEvents[i].push(r))})),t.companionClickTrackingURLTemplates=C.childrenByName(e,"CompanionClickTracking").map((function(e){return{id:e.getAttribute("id")||null,url:C.parseNodeText(e)}})),t.companionClickThroughURLTemplate=C.parseNodeText(C.childByName(e,"CompanionClickThrough"))||null;var r=C.childByName(e,"AdParameters");return r&&(t.adParameters=C.parseNodeText(r),t.xmlEncoded=r.getAttribute("xmlEncoded")||null),t})),i}function I(e){return"linear"===e.type}function w(e,t){var i,r=function(){var e=m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);r.duration=C.parseDuration(C.parseNodeText(C.childByName(e,"Duration")));var n=e.getAttribute("skipoffset");if(null==n)r.skipDelay=null;else if("%"===n.charAt(n.length-1)&&-1!==r.duration){var s=parseInt(n,10);r.skipDelay=r.duration*(s/100)}else r.skipDelay=C.parseDuration(n);var o=C.childByName(e,"VideoClicks");if(o){var a=C.childByName(o,"ClickThrough");r.videoClickThroughURLTemplate=a?{id:a.getAttribute("id")||null,url:C.parseNodeText(a)}:null,C.childrenByName(o,"ClickTracking").forEach((function(e){r.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})})),C.childrenByName(o,"CustomClick").forEach((function(e){r.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})}))}var l=C.childByName(e,"AdParameters");l&&(r.adParameters=C.parseNodeText(l)),C.childrenByName(e,"TrackingEvents").forEach((function(e){C.childrenByName(e,"Tracking").forEach((function(e){var t=e.getAttribute("event"),n=C.parseNodeText(e);if(t&&n){if("progress"===t){if(!(i=e.getAttribute("offset")))return;t="%"===i.charAt(i.length-1)?"progress-".concat(i):"progress-".concat(Math.round(C.parseDuration(i)))}Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(n)}}))})),C.childrenByName(e,"MediaFiles").forEach((function(e){C.childrenByName(e,"MediaFile").forEach((function(e){r.mediaFiles.push(function(e){var t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=C.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);var i=e.getAttribute("scalable");i&&"string"==typeof i&&(t.scalable=C.parseBoolean(i));var r=e.getAttribute("maintainAspectRatio");return r&&"string"==typeof r&&(t.maintainAspectRatio=C.parseBoolean(r)),t}(e))}));var t=C.childByName(e,"InteractiveCreativeFile");t&&(r.interactiveCreativeFile=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:C.parseBoolean(e.variableDuration),fileURL:null}}(C.parseAttributes(e));return t.fileURL=C.parseNodeText(e),t}(t));var i=C.childByName(e,"ClosedCaptionFiles");i&&C.childrenByName(i,"ClosedCaptionFile").forEach((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(C.parseAttributes(e));t.fileURL=C.parseNodeText(e),r.closedCaptionFiles.push(t)}));var n,s,o,a=C.childByName(e,"Mezzanine"),l=(n=a,s={},o=!1,["delivery","type","width","height"].forEach((function(e){n&&n.getAttribute(e)?s[e]=n.getAttribute(e):o=!0})),o?null:s);if(l){var d={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};d.id=a.getAttribute("id"),d.fileURL=C.parseNodeText(a),d.delivery=l.delivery,d.codec=a.getAttribute("codec"),d.type=l.type,d.width=parseInt(l.width,10),d.height=parseInt(l.height,10),d.fileSize=parseInt(a.getAttribute("fileSize"),10),d.mediaType=a.getAttribute("mediaType")||"2D",r.mezzanine=d}}));var d=C.childByName(e,"Icons");return d&&C.childrenByName(d,"Icon").forEach((function(e){r.icons.push(function(e){var t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=function(e){return-1!==["left","right"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("xPosition")),t.yPosition=function(e){return-1!==["top","bottom"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=C.parseDuration(e.getAttribute("offset")),t.duration=C.parseDuration(e.getAttribute("duration")),C.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=C.parseNodeText(e)})),C.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=C.parseNodeText(e)})),C.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=C.parseNodeText(e)}));var i=C.childByName(e,"IconClicks");return i&&(t.iconClickThroughURLTemplate=C.parseNodeText(C.childByName(i,"IconClickThrough")),C.childrenByName(i,"IconClickTracking").forEach((function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})}))),t.iconViewTrackingURLTemplate=C.parseNodeText(C.childByName(e,"IconViewTracking")),t}(e))})),r}function L(e,t){var i=function(){var e=m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return C.childrenByName(e,"TrackingEvents").forEach((function(e){var t,r;C.childrenByName(e,"Tracking").forEach((function(e){t=e.getAttribute("event"),r=C.parseNodeText(e),t&&r&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(r))}))})),C.childrenByName(e,"NonLinear").forEach((function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=C.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=C.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=C.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),C.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=C.parseNodeText(e)})),C.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=C.parseNodeText(e)})),C.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=C.parseNodeText(e)}));var r=C.childByName(e,"AdParameters");r&&(t.adParameters=C.parseNodeText(r)),t.nonlinearClickThroughURLTemplate=C.parseNodeText(C.childByName(e,"NonLinearClickThrough")),C.childrenByName(e,"NonLinearClickTracking").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})})),i.variations.push(t)})),i}function N(e){var t=[];return e.forEach((function(e){var i=O(e);i&&t.push(i)})),t}function O(e){if("#comment"===e.nodeName)return null;var t,i={name:null,value:null,attributes:{},children:[]},r=e.attributes,n=e.childNodes;if(i.name=e.nodeName,e.attributes)for(var s in r)if(r.hasOwnProperty(s)){var o=r[s];o.nodeName&&o.nodeValue&&(i.attributes[o.nodeName]=o.nodeValue)}for(var a in n)if(n.hasOwnProperty(a)){var l=O(n[a]);l&&i.children.push(l)}if(0===i.children.length||1===i.children.length&&["#cdata-section","#text"].indexOf(i.children[0].name)>=0){var d=C.parseNodeText(e);""!==d&&(i.value=d),i.children=[]}return null===(t=i).value&&0===Object.keys(t.attributes).length&&0===t.children.length?null:i}function D(e){var t=[];return e.forEach((function(e){var i,r={id:e.getAttribute("id")||null,adId:P(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},n=[];C.childrenByName(e,"UniversalAdId").forEach((function(e){var t={idRegistry:e.getAttribute("idRegistry")||"unknown",value:C.parseNodeText(e)};n.push(t)}));var s=C.childByName(e,"CreativeExtensions");for(var o in s&&(i=N(C.childrenByName(s,"CreativeExtension"))),e.childNodes){var a=e.childNodes[o],l=void 0;switch(a.nodeName){case"Linear":l=w(a,r);break;case"NonLinearAds":l=L(a,r);break;case"CompanionAds":l=V(a,r)}l&&(n&&(l.universalAdIds=n),i&&(l.creativeExtensions=i),t.push(l))}})),t}function P(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}var U={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function M(e,t){if(U[e.nodeName]&&U[e.nodeName].attributes){var i=U[e.nodeName].attributes.filter((function(t){return!e.getAttribute(t)}));i.length>0&&B({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:i},t)}}function x(e,t,i){var r=U[e.nodeName],n=!i&&"Wrapper"!==e.nodeName;if(r&&!n){if(r.subElements){var s=r.subElements.filter((function(t){return!C.childByName(e,t)}));s.length>0&&B({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:s},t)}i&&r.oneOfinLineResources&&(r.oneOfinLineResources.some((function(t){return C.childByName(e,t)}))||B({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:r.oneOfinLineResources},t))}}function F(e){return e.children&&0!==e.children.length}function B(e,t){var i=e.name,r=e.parentName,n=e.attributes,s=e.subElements,o=e.oneOfResources,a="Element '".concat(i,"'");t("VAST-warning",{message:a+=n?" missing required attribute(s) '".concat(n.join(", "),"' "):s?" missing required sub element(s) '".concat(s.join(", "),"' "):o?" must provide one of the following '".concat(o.join(", "),"' "):" is empty",parentElement:r,specVersion:4.1})}var j={verifyRequiredValues:function e(t,i,r){if(t&&t.nodeName)if("InLine"===t.nodeName&&(r=!0),M(t,i),F(t)){x(t,i,r);for(var n=0;n<t.children.length;n++)e(t.children[n],i,r)}else 0===C.parseNodeText(t).length&&B({name:t.nodeName,parentName:t.parentNode.nodeName},i)},hasSubElements:F,emitMissingValueWarning:B,verifyRequiredAttributes:M,verifyRequiredSubElements:x};function W(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.allowMultipleAds,n=i.followAdditionalWrappers,s=e.childNodes;for(var o in s){var a=s[o];if(-1!==["Wrapper","InLine"].indexOf(a.nodeName)&&("Wrapper"!==a.nodeName||!1!==n)){if(C.copyNodeAttribute("id",e,a),C.copyNodeAttribute("sequence",e,a),C.copyNodeAttribute("adType",e,a),"Wrapper"===a.nodeName)return{ad:Q(a,t),type:"WRAPPER"};if("InLine"===a.nodeName)return{ad:q(a,t,{allowMultipleAds:r}),type:"INLINE"}}}}function q(e,t){return!1===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allowMultipleAds&&e.getAttribute("sequence")?null:H(e,t)}function H(e,t){var i=[];t&&j.verifyRequiredValues(e,t);var r=e.childNodes,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(C.parseAttributes(e));for(var s in r){var o=r[s];switch(o.nodeName){case"Error":n.errorURLTemplates.push(C.parseNodeText(o));break;case"Impression":n.impressionURLTemplates.push({id:o.getAttribute("id")||null,url:C.parseNodeText(o)});break;case"Creatives":n.creatives=D(C.childrenByName(o,"Creative"));break;case"Extensions":var a=C.childrenByName(o,"Extension");n.extensions=N(a),n.adVerifications.length||(i=G(a));break;case"AdVerifications":n.adVerifications=z(C.childrenByName(o,"Verification"));break;case"AdSystem":n.system={value:C.parseNodeText(o),version:o.getAttribute("version")||null};break;case"AdTitle":n.title=C.parseNodeText(o);break;case"AdServingId":n.adServingId=C.parseNodeText(o);break;case"Category":n.categories.push({authority:o.getAttribute("authority")||null,value:C.parseNodeText(o)});break;case"Expires":n.expires=parseInt(C.parseNodeText(o),10);break;case"ViewableImpression":n.viewableImpression.push(Y(o));break;case"Description":n.description=C.parseNodeText(o);break;case"Advertiser":n.advertiser={id:o.getAttribute("id")||null,value:C.parseNodeText(o)};break;case"Pricing":n.pricing={value:C.parseNodeText(o),model:o.getAttribute("model")||null,currency:o.getAttribute("currency")||null};break;case"Survey":n.survey=C.parseNodeText(o);break;case"BlockedAdCategories":n.blockedAdCategories.push({authority:o.getAttribute("authority")||null,value:C.parseNodeText(o)})}}return i.length&&(n.adVerifications=n.adVerifications.concat(i)),n}function Q(e,t){var i=H(e,t),r=e.getAttribute("followAdditionalWrappers"),n=e.getAttribute("allowMultipleAds"),s=e.getAttribute("fallbackOnNoAd");i.followAdditionalWrappers=!r||C.parseBoolean(r),i.allowMultipleAds=!!n&&C.parseBoolean(n),i.fallbackOnNoAd=s?C.parseBoolean(s):null;var o=C.childByName(e,"VASTAdTagURI");if(o?i.nextWrapperURL=C.parseNodeText(o):(o=C.childByName(e,"VASTAdTagURL"))&&(i.nextWrapperURL=C.parseNodeText(C.childByName(o,"URL"))),i.creatives.forEach((function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){i.trackingEvents||(i.trackingEvents={}),i.trackingEvents[e.type]||(i.trackingEvents[e.type]={});var t=function(t){var r=e.trackingEvents[t];Array.isArray(i.trackingEvents[e.type][t])||(i.trackingEvents[e.type][t]=[]),r.forEach((function(r){i.trackingEvents[e.type][t].push(r)}))};for(var r in e.trackingEvents)t(r)}e.videoClickTrackingURLTemplates&&(Array.isArray(i.videoClickTrackingURLTemplates)||(i.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){i.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(i.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(i.videoCustomClickURLTemplates)||(i.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){i.videoCustomClickURLTemplates.push(e)})))}})),i.nextWrapperURL)return i}function z(e){var t=[];return e.forEach((function(e){var i={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},r=e.childNodes;for(var n in C.assignAttributes(e.attributes,i),r){var s=r[n];switch(s.nodeName){case"JavaScriptResource":case"ExecutableResource":i.resource=C.parseNodeText(s),C.assignAttributes(s.attributes,i);break;case"VerificationParameters":i.parameters=C.parseNodeText(s)}}var o=C.childByName(e,"TrackingEvents");o&&C.childrenByName(o,"Tracking").forEach((function(e){var t=e.getAttribute("event"),r=C.parseNodeText(e);t&&r&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(r))})),t.push(i)})),t}function G(e){var t=null,i=[];return e.some((function(e){return t=C.childByName(e,"AdVerifications")})),t&&(i=z(C.childrenByName(t,"Verification"))),i}function Y(e){var t={};t.id=e.getAttribute("id")||null;var i=e.childNodes;for(var r in i){var n=i[r],s=n.nodeName,o=C.parseNodeText(n);if(("Viewable"===s||"NotViewable"===s||"ViewUndetermined"===s)&&o){var a=s.toLowerCase();Array.isArray(t[a])||(t[a]=[]),t[a].push(o)}}return t}var K=function(){function e(){n(this,e),this._handlers=[]}return o(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type ".concat(r(t)));if(!e)throw new TypeError("The event argument must be of type String. Received type ".concat(r(e)));return this._handlers.push({event:e,handler:t}),this}},{key:"once",value:function(e,t){return this.on(e,function(e,t,i){var r={fired:!1,wrapFn:void 0};function n(){r.fired||(e.off(t,r.wrapFn),r.fired=!0,i.bind(e).apply(void 0,arguments))}return r.wrapFn=n,n}(this,e,t))}},{key:"off",value:function(e,t){return this._handlers=this._handlers.filter((function(i){return i.event!==e||i.handler!==t})),this}},{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var n=!1;return this._handlers.forEach((function(t){"*"===t.event&&(n=!0,t.handler.apply(t,[e].concat(i))),t.event===e&&(n=!0,t.handler.apply(t,i))})),n}},{key:"removeAllListeners",value:function(e){return e?(this._handlers=this._handlers.filter((function(t){return t.event!==e})),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(e){return this._handlers.filter((function(t){return t.event===e})).length}},{key:"listeners",value:function(e){return this._handlers.reduce((function(t,i){return i.event===e&&t.push(i.handler),t}),[])}},{key:"eventNames",value:function(){return this._handlers.map((function(e){return e.event}))}}]),e}(),X={get:function(e,t,i){i(new Error("Please bundle the library for node to use the node urlHandler"))}},Z=12e4;function J(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function $(e,t,i){var r=i?408:e.status,n=i?"XHRURLHandler: Request timed out after ".concat(e.timeout," ms (").concat(r,")"):"XHRURLHandler: ".concat(e.statusText," (").concat(r,")");t(new Error(n),null,{statusCode:r})}var ee={get:function(e,t,i){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var r=J();r.open("GET",e),r.timeout=t.timeout||Z,r.withCredentials=t.withCredentials||!1,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onload=function(){return function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):$(e,t,!1)}(r,i)},r.onerror=function(){return $(r,i,!1)},r.onabort=function(){return $(r,i,!1)},r.ontimeout=function(){return $(r,i,!0)},r.send()}catch(e){i(new Error("XHRURLHandler: Unexpected error"))}},supported:function(){return!!J()}},te={get:function(e,t,i){return i||("function"==typeof t&&(i=t),t={}),"undefined"==typeof window||null===window?X.get(e,t,i):ee.supported()?ee.get(e,t,i):i(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},ie=0,re=0,ne=function(e,t){!e||!t||e<=0||t<=0||(re=(re*ie+8*e/t)/++ie)},se={ERRORCODE:900,extensions:[]},oe=function(e){l(i,e);var t=c(i);function i(){var e;return n(this,i),(e=t.call(this)).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return o(i,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];this.emit("VAST-error",Object.assign.apply(Object,[{},se,t].concat(r))),k.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return re}},{key:"fetchVAST",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(s,o){t.URLTemplateFilters.forEach((function(t){e=t(e)})),t.parentURLs.push(e);var a=Date.now();t.emit("VAST-resolving",{url:e,previousUrl:r,wrapperDepth:i,maxWrapperDepth:t.maxWrapperDepth,timeout:t.fetchingOptions.timeout,wrapperAd:n}),t.urlHandler.get(e,t.fetchingOptions,(function(n,l){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=Math.round(Date.now()-a),h=Object.assign({url:e,previousUrl:r,wrapperDepth:i,error:n,duration:u},d);t.emit("VAST-resolved",h),ne(d.byteLength,u),n?o(n):s(l)}))}))}},{key:"initParsingStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||Z,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||te,this.vastVersion=null,ne(e.byteLength,e.requestDuration)}},{key:"getRemainingAds",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var i=e?k.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(i,{wrapperDepth:0,url:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))}},{key:"getAndParseVAST",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(i),this.URLTemplateFilters.forEach((function(t){e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((function(r){return i.previousUrl=e,i.isRootVAST=!0,i.url=e,t.parse(r,i).then((function(e){return t.buildVASTResponse(e)}))}))}},{key:"parseVAST",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(i),i.isRootVAST=!0,this.parse(e,i).then((function(e){return t.buildVASTResponse(e)}))}},{key:"buildVASTResponse",value:function(e){var t,i={ads:(t={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:t.errorURLTemplates||[],version:t.version||null};return this.completeWrapperResolving(i),i}},{key:"parseVastXml",value:function(e,t){var i=t.isRootVAST,r=void 0!==i&&i,n=t.url,s=void 0===n?null:n,o=t.wrapperDepth,a=void 0===o?0:o,l=t.allowMultipleAds,d=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:s,wrapperDepth:a}),new Error("Invalid VAST XMLDocument");var u=[],h=e.documentElement.childNodes,c=e.documentElement.getAttribute("version");for(var p in r&&c&&(this.vastVersion=c),h){var v=h[p];if("Error"===v.nodeName){var m=C.parseNodeText(v);r?this.rootErrorURLTemplates.push(m):this.errorURLTemplates.push(m)}else if("Ad"===v.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)l=!0;else if(!1===l&&u.length>1)break;var f=W(v,this.emit.bind(this),{allowMultipleAds:l,followAdditionalWrappers:d});f.ad?(u.push(f.ad),this.emit("VAST-ad-parsed",{type:f.type,url:s,wrapperDepth:a,adIndex:u.length-1,vastVersion:c})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return u}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.url,r=void 0===i?null:i,n=t.resolveAll,s=void 0===n||n,o=t.wrapperSequence,a=void 0===o?null:o,l=t.previousUrl,d=void 0===l?null:l,u=t.wrapperDepth,h=void 0===u?0:u,c=t.isRootVAST,p=void 0!==c&&c,v=t.followAdditionalWrappers,m=t.allowMultipleAds,f=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&p&&(m=!0);try{f=this.parseVastXml(e,{isRootVAST:p,url:r,wrapperDepth:h,allowMultipleAds:m,followAdditionalWrappers:v})}catch(e){return Promise.reject(e)}return 1===f.length&&null!=a&&(f[0].sequence=a),!1===s&&(this.remainingAds=C.splitVAST(f),f=this.remainingAds.shift()),this.resolveAds(f,{wrapperDepth:h,previousUrl:d,url:r})}},{key:"resolveAds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,r=i.wrapperDepth,n=i.previousUrl,s=i.url,o=[];return n=s,t.forEach((function(t){var i=e.resolveWrappers(t,r,n);o.push(i)})),Promise.all(o).then((function(t){var i=k.flatten(t);if(!i&&e.remainingAds.length>0){var o=e.remainingAds.shift();return e.resolveAds(o,{wrapperDepth:r,previousUrl:n,url:s})}return i}))}},{key:"resolveWrappers",value:function(e,t,i){var r=this;return new Promise((function(n){var s;if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,n(e);if(t>=r.maxWrapperDepth||-1!==r.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,n(e);e.nextWrapperURL=C.resolveVastAdTagURI(e.nextWrapperURL,i),r.URLTemplateFilters.forEach((function(t){e.nextWrapperURL=t(e.nextWrapperURL)}));var o=null!==(s=r.parsingOptions.allowMultipleAds)&&void 0!==s?s:e.allowMultipleAds,a=e.sequence;r.fetchVAST(e.nextWrapperURL,t,i,e).then((function(s){return r.parse(s,{url:e.nextWrapperURL,previousUrl:i,wrapperSequence:a,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:o}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],n(e);t.forEach((function(t){t&&C.mergeWrapperAdData(t,e)})),n(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,n(e)}))}))}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var i=e.ads[t];(i.errorCode||0===i.creatives.length)&&(this.trackVastError(i.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:i.errorCode||303},{ERRORMESSAGE:i.errorMessage||""},{extensions:i.extensions},{system:i.system}),e.ads.splice(t,1))}}}]),i}(K),ae=null,le={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},de=function(){function e(){n(this,e),this.storage=this.initStorage()}return o(e,[{key:"initStorage",value:function(){if(ae)return ae;try{ae="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){ae=null}return ae&&!this.isStorageDisabled(ae)||(ae=le).clear(),ae}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),e}(),ue=function(){function e(t,i,r){n(this,e),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=i||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new oe,this.storage=r||new de,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return o(e,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Date.now();return(i=Object.assign({},this.defaultOptions,i)).hasOwnProperty("resolveAll")||(i.resolveAll=!1),this.totalCallsTimeout<r?(this.totalCalls=1,this.totalCallsTimeout=r+36e5):this.totalCalls++,new Promise((function(n,s){if(t.cappingFreeLunch>=t.totalCalls)return s(new Error("VAST call canceled  FreeLunch capping not reached yet ".concat(t.totalCalls,"/").concat(t.cappingFreeLunch)));var o=r-t.lastSuccessfulAd;if(o<0)t.lastSuccessfulAd=0;else if(o<t.cappingMinimumTimeInterval)return s(new Error("VAST call canceled  (".concat(t.cappingMinimumTimeInterval,")ms minimum interval reached")));t.vastParser.getAndParseVAST(e,i).then((function(e){return n(e)})).catch((function(e){return s(e)}))}))}}]),e}(),he=function(e){l(s,e);var t=c(s);function s(e,i,r){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var l in n(this,s),(o=t.call(this)).ad=i,o.creative=r,o.variation=a,o.muted=!1,o.impressed=!1,o.skippable=!1,o.trackingEvents={},o.lastPercentage=0,o._alreadyTriggeredQuartiles={},o.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],o.creative.trackingEvents){var d=o.creative.trackingEvents[l];o.trackingEvents[l]=d.slice(0)}return I(o.creative)?o._initLinearTracking():o._initVariationTracking(),e&&o.on("start",(function(){e.lastSuccessfulAd=Date.now()})),o}return o(s,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(e){return"companionAd"===e.adType}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){k.isValidTimeValue(e)&&(this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100})}},{key:"setProgress",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(k.isValidTimeValue(e)&&"object"===r(i)){var n=this.skipDelay||-1;if(-1===n||this.skippable||(n>e?this.emit("skip-countdown",n-e):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var s=Math.round(e/this.assetDuration*100),o=[];if(e>0){o.push("start");for(var a=this.lastPercentage;a<s;a++)o.push("progress-".concat(a+1,"%"));for(var l in o.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(l,this.quartiles[l],e)&&(o.push(l),this._alreadyTriggeredQuartiles[l]=!0);this.lastPercentage=s}o.forEach((function(e){t.track(e,{macros:i,once:!0})})),e<this.progress&&this.track("rewind",{macros:i})}this.progress=e}}},{key:"isQuartileReached",value:function(e,t,i){var r=!1;return t<=i&&!this._alreadyTriggeredQuartiles[e]&&(r=!0),r}},{key:"setMuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.muted!==e&&this.track(e?"mute":"unmute",{macros:t}),this.muted=e)}},{key:"setPaused",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.paused!==e&&this.track(e?"pause":"resume",{macros:t}),this.paused=e)}},{key:"setFullscreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen",{macros:t}),this.fullscreen=e)}},{key:"setExpand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.expanded!==e&&(this.track(e?"expand":"collapse",{macros:t}),this.track(e?"playerExpand":"playerCollapse",{macros:t})),this.expanded=e)}},{key:"setSkipDelay",value:function(e){k.isValidTimeValue(e)&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&(this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track("creativeView",{macros:e})))}},{key:"error",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"object"===r(e)&&"boolean"==typeof t&&this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:"errorWithCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"string"==typeof e&&"boolean"==typeof t&&this.error({ERRORCODE:e},t)}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("complete",{macros:e})}},{key:"notUsed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&(this.track("notUsed",{macros:e}),this.trackingEvents=[])}},{key:"otherAdInteraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("otherAdInteraction",{macros:e})}},{key:"acceptInvitation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("acceptInvitation",{macros:e})}},{key:"adExpand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("adExpand",{macros:e})}},{key:"adCollapse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("adCollapse",{macros:e})}},{key:"minimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("minimize",{macros:e})}},{key:"verificationNotExecuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e&&"object"===r(t)){if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!e)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var i=this.ad.adVerifications.find((function(t){return t.vendor===e}));if(!i)throw new Error("No associated verification element found for vendor: ".concat(e));var n=i.trackingEvents;if(n&&n.verificationNotExecuted){var s=n.verificationNotExecuted;this.trackURLs(s,t),this.emit("verificationNotExecuted",{trackingURLTemplates:s})}}}},{key:"overlayViewDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&"object"===r(t)&&(t.ADPLAYHEAD=e,this.track("overlayViewDuration",{macros:t}))}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track(this.linear?"closeLinear":"close",{macros:e})}},{key:"skip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("skip",{macros:e})}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("loaded",{macros:e})}},{key:"click",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((null===e||"string"==typeof e)&&"object"===r(t)){this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t);var n=this.clickThroughURLTemplate||e,s=i({},t);if(n){this.progress&&(s.ADPLAYHEAD=this.progressFormatted());var o=k.resolveURLTemplates([n],s)[0];this.emit("clickthrough",o)}}}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.macros,n=void 0===i?{}:i,s=t.once,o=void 0!==s&&s;if("object"===r(n)){"closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close");var a=this.trackingEvents[e],l=this.emitAlwaysEvents.indexOf(e)>-1;a?(this.emit(e,{trackingURLTemplates:a}),this.trackURLs(a,n)):l&&this.emit(e,null),o&&(delete this.trackingEvents[e],l&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}}},{key:"trackURLs",value:function(e){var t,r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(s.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(s.ADPLAYHEAD=this.progressFormatted())),null!==(t=this.creative)&&void 0!==t&&null!==(r=t.universalAdIds)&&void 0!==r&&r.length&&(s.UNIVERSALADID=this.creative.universalAdIds.map((function(e){return e.idRegistry.concat(" ",e.value)})).join(",")),this.ad&&(this.ad.sequence&&(s.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(s.ADTYPE=this.ad.adType),this.ad.adServingId&&(s.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(s.ADCATEGORIES=this.ad.categories.map((function(e){return e.value})).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(s.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),k.track(e,s,n)}},{key:"convertToTimecode",value:function(e){if(!k.isValidTimeValue(e))return"";var t=1e3*e,i=Math.floor(t/36e5),r=Math.floor(t/6e4%60),n=Math.floor(t/1e3%60),s=Math.floor(t%1e3);return"".concat(k.addLeadingZeros(i,2),":").concat(k.addLeadingZeros(r,2),":").concat(k.addLeadingZeros(n,2),".").concat(k.addLeadingZeros(s,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),s}(K);e.VASTClient=ue,e.VASTParser=oe,e.VASTTracker=he,Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,i),s.exports}(()=>{"use strict";var e=i(686);const t=function(e,t,i){this.message=e,this.errorCode=t,this.innerError=i};t.prototype.getMessage=function(){return this.message},t.prototype.getErrorCode=function(){return this.errorCode},t.prototype.getInnerError=function(){return this.innerError instanceof Object?this.innerError:null},t.prototype.setInnerError=function(e){this.innerError=e},t.prototype.formatMessage=function(...e){return this.message=function(e,...t){try{t.forEach(((t,i)=>{e=e.replace(new RegExp("\\{"+i+"}","g"),t)}))}catch(e){}return e}(this.message,e),this},t.prototype.toString=function(){return"AdError "+this.getErrorCode()+": "+this.getMessage()+(null!=this.getInnerError()?" Caused by: "+this.getInnerError():"")};const r=t,n=function(e){this.adId=e.adId,this.duration=e.duration,this.linear="linear"===e.type};n.prototype.getAdId=function(){return this.adId},n.prototype.getDuration=function(){return this.duration},n.prototype.getMediaUrl=function(){return null},n.prototype.isLinear=function(){return this.linear};const s=n;let o=null;try{if(window.OmidSessionClient&&"object"==typeof window.OmidSessionClient&&null!==window.OmidSessionClient)if(window.OmidSessionClient.default)o=window.OmidSessionClient.default;else for(const e in window.OmidSessionClient)if(Object.prototype.hasOwnProperty.call(window.OmidSessionClient,e)&&"object"==typeof window.OmidSessionClient[e]&&null!==window.OmidSessionClient[e]&&"function"==typeof window.OmidSessionClient[e].AdSession){o=window.OmidSessionClient[e];break}o&&"function"==typeof o.AdSession||(o={})}catch(e){o={}}const a=o,l="full",d="video",u="beginToRender",h="click",c="generic",p="media",v="sessionStart",m="sessionError",f="sessionFinish",{AdSession:A,AdEvents:g,MediaEvents:_,Context:E,Partner:T,VerificationScriptResource:y,VastProperties:S}=a,R=function(e){if(!e||!(e instanceof HTMLElement||e.getRootNode))throw new Error("ad container is not defined");this._adContainer=e,this._ownSlot=null,this._videoSlot=null,this._slot=null,this.createOwnSlot(),this.EVENTS={AdsManagerLoaded:"AdsManagerLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog",AllAdsCompleted:"AllAdsCompleted"},this._eventCallbacks={},this._creativeEventCallbacks={},this._attributes={width:300,height:154,viewMode:"normal",desiredBitrate:-1,duration:10,remainingTime:10,currentTime:0,volume:0,version:"1.2.15"},this._quartileEvents=[{event:"AdImpression",value:0},{event:"AdVideoStart",value:0},{event:"AdVideoFirstQuartile",value:25},{event:"AdVideoMidpoint",value:50},{event:"AdVideoThirdQuartile",value:75},{event:"AdVideoComplete",value:100}],this._nextQuartileIndex=0,this._defaultEventCallbacks={AdImpression:this.onAdImpression.bind(this),AdVideoStart:this.onAdVideoStart.bind(this),AdVideoFirstQuartile:this.onAdVideoFirstQuartile.bind(this),AdVideoMidpoint:this.onAdVideoMidpoint.bind(this),AdVideoThirdQuartile:this.onAdVideoThirdQuartile.bind(this),AdVideoComplete:this.onAdVideoComplete.bind(this)},this._options={autoplay:!0,muted:!0,vastLoadTimeout:23e3,loadVideoTimeout:8e3,withCredentials:!1,wrapperLimit:10,resolveAll:!0,playNextAdInPod:!0},this.ERROR_CODES={VAST_MALFORMED_RESPONSE:100,ADS_REQUEST_NETWORK_ERROR:1012,FAILED_TO_REQUEST_ADS:1005,UNKNOWN_AD_RESPONSE:1010,VAST_ASSET_NOT_FOUND:1007,VAST_EMPTY_RESPONSE:1009,VAST_LINEAR_ASSET_MISMATCH:403,VAST_LOAD_TIMEOUT:301,VAST_MEDIA_LOAD_TIMEOUT:402,VIDEO_PLAY_ERROR:400,VPAID_ERROR:901},this.ERROR_MESSAGES={VAST_MALFORMED_RESPONSE:"VAST response was malformed and could not be parsed.",ADS_REQUEST_ERROR:"Unable to request ads from server. Cause: {0}.",ADS_REQUEST_NETWORK_ERROR:"Unable to request ads from server due to network error.",FAILED_TO_REQUEST_ADS:"The was a problem requesting ads from the server.",NO_ADS_FOUND:"The response does not contain any valid ads.",UNKNOWN_AD_RESPONSE:"The ad response was not understood and cannot be parsed.",VAST_ASSET_NOT_FOUND:"No assets were found in the VAST ad response.",VAST_EMPTY_RESPONSE:"The VAST response document is empty.",VAST_LINEAR_ASSET_MISMATCH:"Linear assets were found in the VAST ad response, but none of them matched the player's capabilities.",VAST_LOAD_TIMEOUT:"Ad request reached a timeout.",VAST_MEDIA_LOAD_TIMEOUT:"VAST media file loading reached a timeout of {0} seconds.",VIDEO_PLAY_ERROR:"There was an error playing the video ad.",VPAID_CREATIVE_ERROR:"An unexpected error occurred within the VPAID creative. Refer to the inner error for more info."},this.ERRORS={VAST_MALFORMED_RESPONSE:new r(this.ERROR_MESSAGES.VAST_MALFORMED_RESPONSE,this.ERROR_CODES.VAST_MALFORMED_RESPONSE),VAST_EMPTY_RESPONSE:new r(this.ERROR_MESSAGES.VAST_EMPTY_RESPONSE,this.ERROR_CODES.VAST_EMPTY_RESPONSE),VAST_ASSET_NOT_FOUND:new r(this.ERROR_MESSAGES.VAST_ASSET_NOT_FOUND,this.ERROR_CODES.VAST_ASSET_NOT_FOUND),VAST_LINEAR_ASSET_MISMATCH:new r(this.ERROR_MESSAGES.VAST_LINEAR_ASSET_MISMATCH,this.ERROR_CODES.VAST_LINEAR_ASSET_MISMATCH),VAST_LOAD_TIMEOUT:new r(this.ERROR_MESSAGES.VAST_LOAD_TIMEOUT,this.ERROR_CODES.VAST_LOAD_TIMEOUT),VAST_MEDIA_LOAD_TIMEOUT:new r(this.ERROR_MESSAGES.VAST_MEDIA_LOAD_TIMEOUT,this.ERROR_CODES.VAST_MEDIA_LOAD_TIMEOUT),VIDEO_PLAY_ERROR:new r(this.ERROR_MESSAGES.VIDEO_PLAY_ERROR,this.ERROR_CODES.VIDEO_PLAY_ERROR),VPAID_CREATIVE_ERROR:new r(this.ERROR_MESSAGES.VPAID_CREATIVE_ERROR,this.ERROR_CODES.VPAID_ERROR)},this._vastClient=null,this._vastParser=null,this._vastTracker=null,this._ad=null,this._adPod=null,this._isAdPod=!1,this._creative=null,this._mediaFiles=null,this._mediaFileIndex=0,this._mediaFile=null,this._isVPAID=!1,this._vpaidIframe=null,this._vpaidCreative=null,this._vastMediaLoadTimer=null,this._vpaidProgressTimer=null,this._requestId=null,this._handleLoadCreativeMessage=this.handleLoadCreativeMessage.bind(this),this._handleSlotClick=this.handleSlotClick.bind(this),this._handleVideoSlotError=this.handleVideoSlotError.bind(this),this._handleVideoSlotCanPlay=this.handleVideoSlotCanPlay.bind(this),this._handleVideoSlotVolumeChange=this.handleVideoSlotVolumeChange.bind(this),this._handleVideoSlotTimeUpdate=this.handleVideoSlotTimeUpdate.bind(this),this._handleVideoSlotLoadedMetaData=this.handleVideoSlotLoadedMetaData.bind(this),this._handleVideoSlotEnded=this.handleVideoSlotEnded.bind(this),this.MIN_VPAID_VERSION=2,this._hasLoaded=!1,this._hasError=!1,this._hasImpression=!1,this._hasStarted=!1,this._omidAdSession=null,this._omidAdEvents=null,this._omidMediaEvents=null,this._omidSessionStarted=!1,this._omidEventQueue=[]};R.prototype._dispatchOmidEvent=function(e,t,...i){if(!this._omidAdSession)return;const r=()=>{try{e&&"function"==typeof e[t]&&e[t](...i)}catch(e){}};this._omidSessionStarted?r():this._omidEventQueue.push(r)},R.prototype._handleOmidSessionEvent=function(e){e.type===v?(this._omidSessionStarted=!0,this._omidEventQueue.forEach((e=>e())),this._omidEventQueue=[]):e.type===f?(this._omidSessionStarted=!1,this._omidAdSession=null,this._omidAdEvents=null,this._omidMediaEvents=null):e.type===m&&this.onAdError(new r(`OMID Session Error: ${e.data.message||"Unknown Error"}`,e.data.code||"OMID_SESSION_ERROR"))},R.prototype.createOwnSlot=function(){this._ownSlot=document.createElement("div"),this._ownSlot.style.position="absolute",this._adContainer.appendChild(this._ownSlot),this.createVideoSlot(),this.createSlot()},R.prototype.removeSlot=function(){this._ownSlot.parentNode&&this._ownSlot.parentNode.removeChild(this._ownSlot)},R.prototype.showSlot=function(){""===this._videoSlot.src&&this.hideVideoSlot(),this._ownSlot.style.display="block"},R.prototype.hideSlot=function(){this._ownSlot.style.display="none"},R.prototype.resizeSlot=function(e,t){this._ownSlot.style.width=e+"px",this._ownSlot.style.height=t+"px"},R.prototype.createVideoSlot=function(){this._videoSlot=document.createElement("video"),this._videoSlot.addEventListener("error",(()=>{})),this._videoSlot.setAttribute("webkit-playsinline",!0),this._videoSlot.setAttribute("playsinline",!0),this._videoSlot.style.width="100%",this._videoSlot.style.height="100%",this._videoSlot.style.backgroundColor="rgb(0, 0, 0)",this._videoSlot.style.display="none";const e=this,t=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"src");Object.defineProperty(this._videoSlot,"src",{set(i){if(""===i)return this.removeAttribute("src"),void e.showHideVideoSlot();t.set.call(this,i),e.showHideVideoSlot()},get(){const e=t.get.call(this);return e===window.location.href?"":e}});const i=this._videoSlot.setAttribute;this._videoSlot.setAttribute=function(){const t=i.apply(this,[].slice.call(arguments));return"src"===arguments[0]&&e.showHideVideoSlot(),t},this._ownSlot.appendChild(this._videoSlot)},R.prototype.createSlot=function(){this._slot=document.createElement("div"),this._slot.style.position="absolute",this._slot.style.top="0px",this._slot.style.left="0px",this._slot.style.right="0px",this._slot.style.bottom="0px",this._ownSlot.appendChild(this._slot)},R.prototype.hideVideoSlot=function(){this._videoSlot.style.display="none"},R.prototype.showVideoSlot=function(){this._videoSlot.style.display="block"},R.prototype.showHideVideoSlot=function(){""===this._videoSlot.getAttribute("src")?this.hideVideoSlot():this.showVideoSlot()},R.prototype.stopVASTMediaLoadTimeout=function(){this._vastMediaLoadTimer&&(clearTimeout(this._vastMediaLoadTimer),this._vastMediaLoadTimer=null)},R.prototype.startVASTMediaLoadTimeout=function(){this.stopVASTMediaLoadTimeout(),this._vastMediaLoadTimer=setTimeout((()=>{this.onAdError(this.ERRORS.VAST_MEDIA_LOAD_TIMEOUT.formatMessage(Math.floor(this._options.loadVideoTimeout/1e3%60)))}),this._options.loadVideoTimeout)},R.prototype.updateVPAIDProgress=function(){this._attributes.remainingTime=this._isCreativeFunctionInvokable("getAdRemainingTime")?this._vpaidCreative.getAdRemainingTime():-1,-1===this._attributes.remainingTime||isNaN(this._attributes.remainingTime)||(this._attributes.duration=this._isCreativeFunctionInvokable("getAdDuration")?this._vpaidCreative.getAdDuration():this._attributes.duration,this._attributes.duration>0&&(this._attributes.currentTime=this._attributes.duration-this._attributes.remainingTime,this._vastTracker.setProgress(this._attributes.currentTime)))},R.prototype.startVPAIDProgress=function(){this.stopVPAIDProgress(),this._vpaidProgressTimer=setInterval((()=>{this._isVPAID&&this._vpaidCreative&&this._vastTracker?this.updateVPAIDProgress():this.stopVPAIDProgress()}),1e3)},R.prototype.stopVPAIDProgress=function(){this._vpaidProgressTimer&&(clearInterval(this._vpaidProgressTimer),this._vpaidProgressTimer=null)},R.prototype._callEvent=function(e){e in this._eventCallbacks&&this._eventCallbacks[e]()},R.prototype.addEventListener=function(e,t,i){const r=t.bind(i);this._eventCallbacks[e]=r},R.prototype.removeEventListener=function(e){this._eventCallbacks[e]=null},R.prototype.removeEventListeners=function(e){for(const t in e)e.hasOwnProperty(t)&&this.removeEventListener(t)},R.prototype.onAdsManagerLoaded=function(){this._callEvent(this.EVENTS.AdsManagerLoaded)},R.prototype.onAdLoaded=function(){if(this._hasLoaded=!0,this.stopVASTMediaLoadTimeout(),this.EVENTS.AdLoaded in this._eventCallbacks&&this._eventCallbacks[this.EVENTS.AdLoaded](new s(this._creative)),this._omidAdSession&&S){const e=new S(null!==this._creative.skipDelay,this._creative.skipDelay||0,this._options.autoplay,"preroll");this._dispatchOmidEvent(this._omidAdEvents,"loaded",e)}},R.prototype.onAdDurationChange=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&(this._attributes.duration=this._isCreativeFunctionInvokable("getAdDuration")?this._vpaidCreative.getAdDuration():-1,-1!==this._attributes.duration&&this._vastTracker.setDuration(this._attributes.duration)),this._callEvent(this.EVENTS.AdDurationChange)},R.prototype.onAdSizeChange=function(){this._callEvent(this.EVENTS.AdSizeChange)},R.prototype.onAdStarted=function(){this._hasStarted=!0,this.EVENTS.AdStarted in this._eventCallbacks&&this._eventCallbacks[this.EVENTS.AdStarted](new s(this._ad)),this._dispatchOmidEvent(this._omidMediaEvents,"start",this._attributes.duration,this.getVolume())},R.prototype.onAdVideoStart=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this._callEvent(this.EVENTS.AdVideoStart)},R.prototype.onAdStopped=function(){this._hasStarted?(this._omidAdSession&&(this._omidAdSession.finish(),this._omidAdSession=null,this._omidAdEvents=null,this._omidMediaEvents=null,this._omidSessionStarted=!1,this._omidEventQueue=[]),this._isAdPod&&0!=this._adPod.length?(this._nextQuartileIndex=0,this._hasImpression=!1,window.removeEventListener("message",this._handleLoadCreativeMessage),this._isVPAID&&(this.removeCallbacksForCreative(this._creativeEventCallbacks),this.removeCreativeAsset(),this._isVPAID=!1),this._removeHandlers(),this._videoSlot.pause(),this._videoSlot.removeAttribute("src"),this._videoSlot.load(),this._options.playNextAdInPod?setTimeout((()=>{this._nextAd()}),75):this._abort()):(this._callEvent(this.EVENTS.AdStopped),this._abort())):this.onAdError(this.ERRORS.VPAID_CREATIVE_ERROR)},R.prototype.onAdSkipped=function(){this._callEvent(this.EVENTS.AdSkipped),this._omidMediaEvents&&this._omidMediaEvents.skipped(),this._abort()},R.prototype.onAdVolumeChange=function(e){const t=e?e.target.muted:0===this.getVolume();this._vastTracker&&this._vastTracker.setMuted(t),this._callEvent(this.EVENTS.AdVolumeChange),this._omidMediaEvents&&this._omidMediaEvents.volumeChange(this.getVolume())},R.prototype.onAdImpression=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&(this._hasImpression||(this._attributes.duration=this._isCreativeFunctionInvokable("getAdDuration")?this._vpaidCreative.getAdDuration():-1,-1!==this._attributes.duration&&this._vastTracker.setDuration(this._attributes.duration),this._vastTracker.trackImpression(),this.startVPAIDProgress(),this._hasImpression=!0)),this._callEvent(this.EVENTS.AdImpression),this._dispatchOmidEvent(this._omidAdEvents,"impressionOccurred")},R.prototype.onAdClickThru=function(e,t,i){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this._vastTracker.click(),this.EVENTS.AdClickThru in this._eventCallbacks&&this._eventCallbacks[this.EVENTS.AdClickThru](e,t,i),this._omidMediaEvents&&this._omidMediaEvents.adUserInteraction(h)},R.prototype.onAdVideoFirstQuartile=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this._callEvent(this.EVENTS.AdVideoFirstQuartile),this._dispatchOmidEvent(this._omidMediaEvents,"firstQuartile")},R.prototype.onAdVideoMidpoint=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this._callEvent(this.EVENTS.AdVideoMidpoint),this._dispatchOmidEvent(this._omidMediaEvents,"midpoint")},R.prototype.onAdVideoThirdQuartile=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this._callEvent(this.EVENTS.AdVideoThirdQuartile),this._dispatchOmidEvent(this._omidMediaEvents,"thirdQuartile")},R.prototype.onAdPaused=function(){this._vastTracker&&this._vastTracker.setPaused(!0),this._callEvent(this.EVENTS.AdPaused),this._omidMediaEvents&&this._omidMediaEvents.pause()},R.prototype.onAdPlaying=function(){this._vastTracker&&this._vastTracker.setPaused(!1),this._callEvent(this.EVENTS.AdPlaying),this._omidMediaEvents&&this._omidMediaEvents.resume()},R.prototype.onAdVideoComplete=function(){this.isCreativeExists()&&(this._isVPAID&&this._vastTracker&&this._vastTracker.complete(),this._callEvent(this.EVENTS.AdVideoComplete),this._dispatchOmidEvent(this._omidMediaEvents,"complete"),this._isVPAID&&this.onAdStopped())},R.prototype.onAllAdsCompleted=function(){this._callEvent(this.EVENTS.AllAdsCompleted)},R.prototype.onAdError=function(e){if(this._hasError=!0,this.abort(),this.EVENTS.AdError in this._eventCallbacks&&this._eventCallbacks[this.EVENTS.AdError]("object"!=typeof e?new r(e):e),this._omidAdSession){let t=c;if(e&&"function"==typeof e.getErrorCode){const i=e.getErrorCode();[this.ERROR_CODES.VIDEO_PLAY_ERROR,this.ERROR_CODES.VAST_MEDIA_LOAD_TIMEOUT].includes(i)&&(t=p)}this._omidAdSession.error(t,e.getMessage?e.getMessage():String(e))}},R.prototype.onAdLog=function(e){this.EVENTS.AdLog in this._eventCallbacks&&this._eventCallbacks[this.EVENTS.AdLog](e)},R.prototype.processVASTResponse=function(e){const t=e.ads;0!=t.length?(t.length>1?(this._isAdPod=!0,this._adPod=t.sort((function(e,t){const i=e.sequence,r=t.sequence;return i===r?0:null===i?1:null===r||i<r?-1:i>r?1:0})),this._ad=this._adPod.shift()):this._ad=t[0],this._processAd()):this.onAdError(this.ERRORS.VAST_EMPTY_RESPONSE)},R.prototype.requestAds=function(t,i={}){if(this._isDestroyed)return;this._requestId=(new Date).getTime(),Object.assign(this._options,i);const r={timeout:this._options.vastLoadTimeout,withCredentials:this._options.withCredentials,wrapperLimit:this._options.wrapperLimit,resolveAll:this._options.resolveAll};if(this.abort(),t&&"string"==typeof t){let i=!1;try{new URL(t),i=!0}catch(e){}if(i)this._vastClient=new e.VASTClient,this._vastClient.get(t,r).then((e=>{this.processVASTResponse(e)})).catch((e=>{this.onAdError(e.message)}));else{const i=(new window.DOMParser).parseFromString(t,"text/xml");this._vastParser=new e.VASTParser,this._vastParser.parseVAST(i,r).then((e=>{this.processVASTResponse(e)})).catch((e=>{this.onAdError(e.message)}))}}else this.onAdError("VAST URL/XML is empty")},R.prototype.canPlayVideoType=function(e){return!("video/3gpp"!==e||!this.supportsThreeGPVideo())||(!("video/webm"!==e||!this.supportsWebmVideo())||(!("video/ogg"!==e||!this.supportsOggTheoraVideo())||!("video/mp4"!==e||!this.supportsH264BaselineVideo())))},R.prototype.supportsVideo=function(){return!!document.createElement("video").canPlayType},R.prototype.supportsH264BaselineVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')},R.prototype.supportsOggTheoraVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/ogg; codecs="theora, vorbis"')},R.prototype.supportsWebmVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/webm; codecs="vp8, vorbis"')},R.prototype.supportsThreeGPVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/3gpp; codecs="mp4v.20.8, samr"')},R.prototype.handshakeVersion=function(e){return this._vpaidCreative.handshakeVersion(e)},R.prototype._isCreativeFunctionInvokable=function(e){return!!this._vpaidCreative&&((e=this._vpaidCreative[e])&&"function"==typeof e)},R.prototype.checkVPAIDInterface=function(e){const t={passed:!0,missingInterfaces:""};for(let i=e.length-1;0<=i;i--)this._isCreativeFunctionInvokable(e[i])||(t.passed=!1,t.missingInterfaces+=e[i]+" ");return t},R.prototype.setCallbacksForCreative=function(e,t){for(const i in e)e.hasOwnProperty(i)&&this._vpaidCreative.subscribe(e[i],i,t)},R.prototype.removeCallbacksForCreative=function(e){if(null!==this._vpaidCreative)for(const t in e)e.hasOwnProperty(t)&&this._vpaidCreative.unsubscribe(t)},R.prototype.creativeAssetLoaded=function(){if(function(e){const t=e.checkVPAIDInterface("handshakeVersion initAd startAd stopAd subscribe unsubscribe getAdLinear".split(" "));return t.passed||e.onAdError("Missing interfaces in the VPAID creative: "+t.missingInterfaces),t.passed}(this)&&(()=>{const e=this.handshakeVersion(this.MIN_VPAID_VERSION.toFixed(1));return e?!(parseFloat(e)<this.MIN_VPAID_VERSION)||(this.onAdError("Only support creatives with VPAID version >= "+this.MIN_VPAID_VERSION.toFixed(1)),!1):(this.onAdError("Cannot get VPAID version from the creative"),!1)})()){this._creativeEventCallbacks={AdStarted:this.onAdStarted,AdStopped:this.onAdStopped,AdSkipped:this.onAdSkipped,AdLoaded:this.onAdLoaded,AdSizeChange:this.onAdSizeChange,AdDurationChange:this.onAdDurationChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog},this.setCallbacksForCreative(this._creativeEventCallbacks,this);const e=this._attributes.width,t=this._attributes.height,i={AdParameters:this._creative.adParameters},r={slot:this._slot,videoSlot:this._videoSlot,videoSlotCanAutoPlay:!0};this.startVASTMediaLoadTimeout();try{this._vpaidCreative.initAd(e,t,this._attributes.viewMode,this._attributes.desiredBitrate,i,r)}catch(e){this.onAdError(e)}}},R.prototype.handleLoadCreativeMessage=function(e){if(e&&e.data){const t=String(e.data).match(new RegExp("adm:"+this._requestId+"://(.*)"));if(t){const e=JSON.parse(t[1]);if("load"==e)try{let e=this._vpaidIframe.contentWindow.getVPAIDAd;e&&"function"==typeof e?(e=e(),void 0===e?this.onAdError("getVPAIDAd() returns undefined value"):null==e?this.onAdError("getVPAIDAd() returns null"):(this._vpaidCreative=e,this.creativeAssetLoaded())):this.onAdError("getVPAIDAd() is undefined")}catch(e){this.onAdError(e)}else"error"==e&&this.onAdError("Error load VPAID")}}},R.prototype.loadCreativeAsset=function(e){window.addEventListener("message",this._handleLoadCreativeMessage),this._vpaidIframe=document.createElement("iframe"),this._vpaidIframe.style.display="none",this._vpaidIframe.style.width="0px",this._vpaidIframe.style.height="0px",this._adContainer.appendChild(this._vpaidIframe),this._vpaidIframe.contentWindow.document.open(),this._vpaidIframe.contentWindow.document.write(`\n<script>function sendMessage(msg) {\n  var postMsg = 'adm:${this._requestId}://' + JSON.stringify(msg);\n  window.parent.postMessage(postMsg, '*');\n} <\/script>\n<script type="text/javascript" onload="sendMessage('load')" onerror="sendMessage('error')" src="${e}"> <\/script>`),this._vpaidIframe.contentWindow.document.close()},R.prototype.removeCreativeAsset=function(){this._vpaidIframe&&this._vpaidIframe.parentNode.removeChild(this._vpaidIframe),[...this._ownSlot.children].forEach((e=>{e!==this._videoSlot&&e!==this._slot&&this._ownSlot.removeChild(e)})),[...this._slot.children].forEach((e=>{this._slot.removeChild(e)}))},R.prototype._removeHandlers=function(){this._ownSlot.removeEventListener("click",this._handleSlotClick),this._videoSlot.removeEventListener("error",this._handleVideoSlotError,!1),this._videoSlot.removeEventListener("canplay",this._handleVideoSlotCanPlay),this._videoSlot.removeEventListener("volumechange",this._handleVideoSlotVolumeChange),this._videoSlot.removeEventListener("timeupdate",this._handleVideoSlotTimeUpdate,!0),this._videoSlot.removeEventListener("loadedmetadata",this._handleVideoSlotLoadedMetaData),this._videoSlot.removeEventListener("ended",this._handleVideoSlotEnded)},R.prototype._abort=function(){this.abort(),this.onAllAdsCompleted()},R.prototype.isCreativeExists=function(){return this._creative&&0!=this._creative.mediaFiles.length},R.prototype.handleSlotClick=function(){!this._isVPAID&&this._vastTracker&&this._vastTracker.click()},R.prototype.handleVideoSlotError=function(){this.onAdError(this.ERRORS.VIDEO_PLAY_ERROR)},R.prototype.handleVideoSlotCanPlay=function(){},R.prototype.handleVideoSlotVolumeChange=function(e){this._vastTracker&&this._vastTracker.setMuted(e.target.muted)},R.prototype.handleVideoSlotTimeUpdate=function(e){if(this.isCreativeExists()){if(this._nextQuartileIndex>=this._quartileEvents.length)return;const t=e.target.currentTime/e.target.duration*100;if(t>=this._quartileEvents[this._nextQuartileIndex].value){const e=this._quartileEvents[this._nextQuartileIndex].event;this._defaultEventCallbacks[e](),this._nextQuartileIndex+=1}t>=0&&(this._hasImpression||(this._vastTracker&&this._vastTracker.trackImpression(),this._hasImpression=!0)),this._vastTracker&&this._vastTracker.setProgress(e.target.currentTime),e.target.duration>0&&(this._attributes.remainingTime=e.target.duration-e.target.currentTime)}},R.prototype.handleVideoSlotLoadedMetaData=function(e){this._attributes.duration=e.target.duration,this._vastTracker&&this._vastTracker.setDuration(e.target.duration),this.onAdDurationChange()},R.prototype.handleVideoSlotEnded=function(){this._vastTracker&&this._vastTracker.complete(),this.onAdStopped()},R.prototype._processAd=function(t=!1){if(this._creative=this._ad.creatives.filter((e=>"linear"===e.type))[0],this._creative)if(0!=this._creative.mediaFiles.length)if(this._mediaFiles=this._creative.mediaFiles.filter((e=>this.canPlayVideoType(e.mimeType)||"application/javascript"===e.mimeType?e:void 0)),this._mediaFiles.sort((function(e,t){const i=e.height,r=t.height;return i<r?-1:i>r?1:0})),this._mediaFiles&&0!=this._mediaFiles.length){if(this._vastTracker=new e.VASTTracker(null,this._ad,this._creative),this._vastTracker.load(),a&&A)try{const e=new T("Sparteo","1.0.0"),t=this._ad.adVerifications?this._ad.adVerifications.map((e=>"omid"===e.apiFramework&&e.resource?new y(e.resource,e.vendor,e.parameters,l):null)).filter(Boolean):[],i=new E(e,t,window.location.href,"");i.setVideoElement(this._videoSlot),i.setSlotElement(this._slot),i.setServiceWindow(window.top),this._omidAdSession=new A(i),"function"==typeof this._omidAdSession.setCreativeType&&this._omidAdSession.setCreativeType(d),"function"==typeof this._omidAdSession.setImpressionType&&this._omidAdSession.setImpressionType(u),this._omidAdEvents=new g(this._omidAdSession),this._omidMediaEvents=new _(this._omidAdSession),this._omidAdSession.registerSessionObserver(this._handleOmidSessionEvent.bind(this)),this._omidAdSession.start()}catch(e){this.onAdError(new r("OMID Initialization Failed","OMID_ERROR"))}t?this.init(this._attributes.width,this._attributes.height,this._attributes.viewMode,t):this.onAdsManagerLoaded()}else this.onAdError(this.ERRORS.VAST_LINEAR_ASSET_MISMATCH);else this.onAdError(this.ERRORS.VAST_ASSET_NOT_FOUND);else this.onAdError("non linear")},R.prototype._nextAd=function(){this._ad=this._adPod.shift(),this._processAd(!0)},R.prototype.init=function(e,t,i,r=!1){this._isDestroyed||this.isCreativeExists()&&(r||this._options.muted&&(this._videoSlot.muted=!0,this._videoSlot.volume=0),this._mediaFileIndex=this._mediaFiles.findIndex((function(e){return e.height>=t})),-1!=this._mediaFileIndex?this._mediaFile=this._mediaFiles[this._mediaFileIndex]:this._mediaFile=this._mediaFiles[this._mediaFiles.length-1],this._mediaFile&&("application/javascript"===this._mediaFile.mimeType&&(this._isVPAID=!0),this._attributes.width=e,this._attributes.height=t,this._attributes.viewMode=i,this.resizeSlot(this._attributes.width,this._attributes.height),this._videoSlot.addEventListener("error",this._handleVideoSlotError,!1),this._isVPAID?this.loadCreativeAsset(this._mediaFile.fileURL):(this._ownSlot.addEventListener("click",this._handleSlotClick),this._videoSlot.addEventListener("canplay",this._handleVideoSlotCanPlay),this._videoSlot.addEventListener("volumechange",this._handleVideoSlotVolumeChange),this._videoSlot.addEventListener("timeupdate",this._handleVideoSlotTimeUpdate,!0),this._videoSlot.addEventListener("loadedmetadata",this._handleVideoSlotLoadedMetaData),this._videoSlot.addEventListener("ended",this._handleVideoSlotEnded),this._videoSlot.setAttribute("src",this._mediaFile.fileURL),this.onAdLoaded()),this._vastTracker&&this._vastTracker.on("clickthrough",(e=>{this._isVPAID||this.onAdClickThru(e);const t=window.open(e,"_blank");void 0!==t?t.focus():window.location.href=e}))))},R.prototype.start=function(){if(this.isCreativeExists()){const e=this._videoSlot.play,t=3;let i=0;this._videoSlot.play=function(){const r=e.apply(this,[].slice.call(arguments));return r instanceof Promise&&r.then((e=>{})).catch((e=>{i<=t&&(this.muted=!0,this.play(),i++)})),r},this._isVPAID?this._isCreativeFunctionInvokable("startAd")&&this._vpaidCreative.startAd():(this._videoSlot.load(),this._videoSlot.play(),this.onAdStarted())}},R.prototype.getDuration=function(){return this.isCreativeExists()?this._isVPAID?this._isCreativeFunctionInvokable("getAdDuration")?this._vpaidCreative.getAdDuration():-1:this._videoSlot.duration:0},R.prototype.pause=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("pauseAd")&&this._vpaidCreative.pauseAd():(this._videoSlot.pause(),this.onAdPaused()))},R.prototype.resume=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("resumeAd")&&this._vpaidCreative.resumeAd():(this._videoSlot.play(),this.onAdPlaying()))},R.prototype.stop=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("stopAd")&&this._vpaidCreative.stopAd():this.onAdStopped())},R.prototype.skip=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("skipAd")&&this._vpaidCreative.skipAd():this.onAdSkipped())},R.prototype.resize=function(e,t,i){this.isCreativeExists()&&(this._attributes.width=e,this._attributes.height=t,this._attributes.viewMode=i,this.resizeSlot(this._attributes.width,this._attributes.height),this._isVPAID?this._isCreativeFunctionInvokable("resizeAd")&&this._vpaidCreative.resizeAd(e,t,i):this.onAdSizeChange())},R.prototype.getVolume=function(){if(this.isCreativeExists())return this._isVPAID?this._isCreativeFunctionInvokable("getAdVolume")?this._vpaidCreative.getAdVolume():-1:this._videoSlot.muted?0:this._videoSlot.volume},R.prototype.setVolume=function(e){if(this.isCreativeExists()){this._isVPAID&&this._isCreativeFunctionInvokable("setAdVolume")&&this._vpaidCreative.setAdVolume(e);const t=e!==this.getVolume();this._attributes.volume=e,0!==this._attributes.volume?this._videoSlot.muted=!1:this._videoSlot.muted=!0,this._videoSlot.volume=this._attributes.volume,t&&this.onAdVolumeChange()}},R.prototype.getRemainingTime=function(){if(this.isCreativeExists())return this._isVPAID?this._isCreativeFunctionInvokable("getAdRemainingTime")?this._vpaidCreative.getAdRemainingTime():-1:this._attributes.remainingTime},R.prototype.collapse=function(){this.isCreativeExists()&&this._isVPAID&&this._isCreativeFunctionInvokable("collapseAd")&&this._vpaidCreative.collapseAd()},R.prototype.expand=function(){this.isCreativeExists()&&this._isVPAID&&this._isCreativeFunctionInvokable("expandAd")&&this._vpaidCreative.expandAd()},R.prototype.abort=function(){this._isDestroyed||(this._omidAdSession&&(this._omidAdSession.finish(),this._omidAdSession=null,this._omidAdEvents=null,this._omidMediaEvents=null,this._omidSessionStarted=!1,this._omidEventQueue=[]),window.removeEventListener("message",this._handleLoadCreativeMessage),this.stopVASTMediaLoadTimeout(),this.stopVPAIDProgress(),this._isVPAID&&(this.removeCallbacksForCreative(this._creativeEventCallbacks),this.removeCreativeAsset()),this._nextQuartileIndex=0,this._isVPAID=!1,this._hasLoaded=!1,this._hasError=!1,this._hasImpression=!1,this._hasStarted=!1,this._ad=null,this._adPod=null,this._isAdPod=!1,this._creative=null,this._mediaFile=null,this._vpaidCreative=null,this._vastTracker=null,this._removeHandlers(),this._videoSlot.pause(),this._videoSlot.removeAttribute("src"),this._videoSlot.load(),this.hideVideoSlot())},R.prototype.destroy=function(){this._isDestroyed||(this.abort(),this.removeEventListeners(this._eventCallbacks),this.removeSlot(),this._adContainer=null,this._ownSlot=null,this._videoSlot=null,this._slot=null,this._isDestroyed=!0)},R.prototype.isDestroyed=function(){return this._isDestroyed},R.prototype.getVersion=function(){return this._attributes.version};const k=R;window.adserve=window.adserve||{},window.adserve.AdsManager=k})()})();
/* lifecycle.es5.js v0.1.1 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.lifecycle=t()}(this,function(){"use strict";var e=void 0;try{new EventTarget,e=!1}catch(t){e=!1}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},s=function(){function e(){n(this,e),this._registry={}}return i(e,[{key:"addEventListener",value:function(e,t){this._getRegistry(e).push(t)}},{key:"removeEventListener",value:function(e,t){var n=this._getRegistry(e),i=n.indexOf(t);i>-1&&n.splice(i,1)}},{key:"dispatchEvent",value:function(e){return e.target=this,Object.freeze(e),this._getRegistry(e.type).forEach(function(t){return t(e)}),!0}},{key:"_getRegistry",value:function(e){return this._registry[e]=this._registry[e]||[]}}]),e}(),o=e?EventTarget:s,u=e?Event:function e(t){n(this,e),this.type=t},f=function(e){function t(e,i){n(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.newState=i.newState,r.oldState=i.oldState,r.originalEvent=i.originalEvent,r}return r(t,u),t}(),c="active",h="passive",d="hidden",l="frozen",p="terminated",v="object"===("undefined"==typeof safari?"undefined":t(safari))&&safari.pushNotification,y=["focus","blur","visibilitychange","freeze","resume","pageshow","onpageshow"in self?"pagehide":"unload"],g=function(e){return e.preventDefault(),e.returnValue="Are you sure?"},_=[[c,h,d,p],[c,h,d,l],[d,h,c],[l,d],[l,c],[l,h]].map(function(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}),b=function(){return document.visibilityState===d?d:document.hasFocus()?c:h};return new(function(e){function t(){n(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=b();return e._state=i,e._unsavedChanges=[],e._handleEvents=e._handleEvents.bind(e),y.forEach(function(t){return addEventListener(t,e._handleEvents,!0)}),v&&addEventListener("beforeunload",function(t){e._safariBeforeUnloadTimeout=setTimeout(function(){t.defaultPrevented||t.returnValue.length>0||e._dispatchChangesIfNeeded(t,d)},0)}),e}return r(t,o),i(t,[{key:"addUnsavedChanges",value:function(e){!this._unsavedChanges.indexOf(e)>-1&&(0===this._unsavedChanges.length&&addEventListener("beforeunload",g),this._unsavedChanges.push(e))}},{key:"removeUnsavedChanges",value:function(e){var t=this._unsavedChanges.indexOf(e);t>-1&&(this._unsavedChanges.splice(t,1),0===this._unsavedChanges.length&&removeEventListener("beforeunload",g))}},{key:"_dispatchChangesIfNeeded",value:function(e,t){if(t!==this._state)for(var n=function(e,t){for(var n,i=0;n=_[i];++i){var r=n[e],a=n[t];if(r>=0&&a>=0&&a>r)return Object.keys(n).slice(r,a+1)}return[]}(this._state,t),i=0;i<n.length-1;++i){var r=n[i],a=n[i+1];this._state=a,this.dispatchEvent(new f("statechange",{oldState:r,newState:a,originalEvent:e}))}}},{key:"_handleEvents",value:function(e){switch(v&&clearTimeout(this._safariBeforeUnloadTimeout),e.type){case"pageshow":case"resume":this._dispatchChangesIfNeeded(e,b());break;case"focus":this._dispatchChangesIfNeeded(e,c);break;case"blur":this._state===c&&this._dispatchChangesIfNeeded(e,b());break;case"pagehide":case"unload":this._dispatchChangesIfNeeded(e,e.persisted?l:p);break;case"visibilitychange":this._state!==l&&this._state!==p&&this._dispatchChangesIfNeeded(e,b());break;case"freeze":this._dispatchChangesIfNeeded(e,l)}}},{key:"state",get:function(){return this._state}},{key:"pageWasDiscarded",get:function(){return document.wasDiscarded||!1}}]),t}())});
/* activity-detector.js v2.0.0 */
var hidden,visibilityChangeEvent,ACTIVE="active",IDLE="idle",DEFAULT_INITIAL_STATE=ACTIVE,DEFAULT_ACTIVITY_EVENTS=["click","mousemove","keydown","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","focus"],DEFAULT_INACTIVITY_EVENTS=["blur","visibilitychange"],DEFAULT_IGNORED_EVENTS_WHEN_IDLE=["mousemove"];if(void 0!==document.hidden)hidden="hidden",visibilityChangeEvent="visibilitychange";else for(var prefixes=["webkit","moz","ms"],i=0;i<prefixes.length;i++){var prefix=prefixes[i];if(void 0!==document[prefix+"Hidden"]){hidden=prefix+"Hidden",visibilityChangeEvent=prefix+"visibilitychange";break}}var activityDetector=function(){var i,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.activityEvents||DEFAULT_ACTIVITY_EVENTS,E=n.inactivityEvents||DEFAULT_INACTIVITY_EVENTS,o=n.ignoredEventsWhenIdle||DEFAULT_IGNORED_EVENTS_WHEN_IDLE,r=n.timeToIdle||3e4,v=n.initialState||DEFAULT_INITIAL_STATE,T=void 0===n.autoInit||n.autoInit,c={};c[ACTIVE]=[],c[IDLE]=[];var d=function n(t){clearTimeout(e),t===ACTIVE&&(e=setTimeout((function(){return n(IDLE)}),r)),i!==t&&c[i=t].forEach((function(i){return i()}))},u=function(e){(i===ACTIVE||o.indexOf(e.type)<0)&&d(ACTIVE)},I=function(){d(IDLE)},a=function(){d(document[hidden]?IDLE:ACTIVE)},s=function(){d((arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_INITIAL_STATE)===ACTIVE?ACTIVE:IDLE),t.forEach((function(i){return window.addEventListener(i,u)})),E.filter((function(i){return"visibilitychange"!==i})).forEach((function(i){return window.addEventListener(i,I)})),E.indexOf("visibilitychange")>=0&&visibilityChangeEvent&&document.addEventListener(visibilityChangeEvent,a)};return T&&s(v),{on:function(i,e){c[i].push(e);return function(){var n=c[i].indexOf(e);n>=0&&c[i].splice(n,1)}},stop:function(){c[ACTIVE]=[],c[IDLE]=[],clearTimeout(e),t.forEach((function(i){return window.removeEventListener(i,u)})),E.forEach((function(i){return window.removeEventListener(i,I)})),visibilityChangeEvent&&document.removeEventListener(visibilityChangeEvent,a)},init:s}};
/*! For license information please see prebid.js.LICENSE.txt */
(()=>{var e={29:(e,n,t)=>{"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,{A:()=>r})},89:(e,n,t)=>{"use strict";t.r(n),t.d(n,{_each:()=>Ce,_map:()=>Oe,_setEventEmitter:()=>R,binarySearch:()=>jn,buildUrl:()=>An,canAccessWindowTop:()=>re,checkCookieSupport:()=>rn,cleanObj:()=>vn,compareCodeAndSlot:()=>ln,compressDataWithGZip:()=>Mn,contains:()=>Te,convertObjectToArray:()=>Dn,createIframe:()=>pe,createInvisibleIframe:()=>ge,createTrackPixelHtml:()=>_e,createTrackPixelIframeHtml:()=>Ue,cyrb53Hash:()=>Cn,debugTurnedOn:()=>le,deepAccess:()=>h.A,deepClone:()=>$e,deepEqual:()=>In,deepSetValue:()=>b.J,delayExecution:()=>on,encodeMacroURI:()=>Pe,extractDomainFromHost:()=>Un,flatten:()=>qe,formatQS:()=>yn,generateUUID:()=>L,getBidIdParameter:()=>z,getBidRequest:()=>Ne,getBidderCodes:()=>We,getDNT:()=>dn,getDefinedParams:()=>sn,getDocument:()=>te,getDomLoadingDuration:()=>nn,getParameterByName:()=>ve,getPerformanceNow:()=>en,getPrebidInternal:()=>N,getSafeframeGeometry:()=>Ve,getUniqueIdentifierStr:()=>F,getUnixTimestampFromNow:()=>xn,getUserConfiguredParams:()=>cn,getValue:()=>Me,getWinDimensions:()=>P,getWindowLocation:()=>ne,getWindowSelf:()=>ee,getWindowTop:()=>Z,groupBy:()=>an,hasConsoleLogger:()=>de,hasDeviceAccess:()=>tn,hasNonSerializableProperty:()=>_n,inIframe:()=>Je,insertElement:()=>ke,insertHtmlIntoIframe:()=>Re,insertUserSyncIframe:()=>je,internal:()=>B,isA:()=>me,isAdUnitCodeMatchingSlot:()=>fn,isApnGetTagDefined:()=>Le,isArray:()=>ye,isArrayOfNums:()=>hn,isBoolean:()=>Ie,isEmpty:()=>Ee,isEmptyStr:()=>Se,isFn:()=>he,isGptPubadsDefined:()=>Fe,isGzipCompressionSupported:()=>Nn,isInteger:()=>gn,isNumber:()=>we,isPlainObject:()=>Ae,isSafariBrowser:()=>Ke,isSafeFrameWindow:()=>He,isStr:()=>be,isValidMediaTypes:()=>un,logError:()=>se,logInfo:()=>oe,logMessage:()=>ie,logWarn:()=>ae,memoize:()=>kn,mergeDeep:()=>En,parseGPTSingleSizeArray:()=>K,parseGPTSingleSizeArrayToRtbSize:()=>Q,parseQS:()=>bn,parseQueryStringParameters:()=>G,parseSizesInput:()=>H,parseUrl:()=>wn,pick:()=>mn,prefixLog:()=>ue,replaceAuctionPrice:()=>Qe,replaceClickThrough:()=>Xe,replaceMacros:()=>Ye,resetWinDimensions:()=>U,safeJSONEncode:()=>On,safeJSONParse:()=>Tn,setOnAny:()=>Pn,setScriptAttributes:()=>Rn,shuffle:()=>Ge,sizeTupleToRtbSize:()=>Y,sizeTupleToSizeString:()=>V,sizesToSizeTuples:()=>J,sortByHighestCpm:()=>ze,timestamp:()=>Ze,transformAdServerTargetingObj:()=>$,triggerNurlWithCpm:()=>Bn,triggerPixel:()=>De,uniques:()=>Be,unsupportedBidderMessage:()=>pn,waitForElementToLoad:()=>xe});var r=t(848),i=t(458),o=t(284),a=t(467),s=t(296),u=t(756),c=t.n(u),d=t(718);function l(e){var n,t,r;if(Array.isArray(e)){for(t=Array(n=e.length);n--;)t[n]=(r=e[n])&&"object"==typeof r?l(r):r;return t}if("[object Object]"===Object.prototype.toString.call(e)){for(n in t={},e)"__proto__"===n?Object.defineProperty(t,n,{value:l(e[n]),configurable:!0,enumerable:!0,writable:!0}):t[n]=(r=e[n])&&"object"==typeof r?l(r):r;return t}return e}var f,p,g=t(743),v=t(492),m=t(831),h=t(433),b=t(410),y="String",w="Function",A="Number",I="Object",E="Boolean",S=Object.prototype.toString,C=Boolean(window.console),T=Boolean(C&&window.console.log),O=Boolean(C&&window.console.info),k=Boolean(C&&window.console.warn),x=Boolean(C&&window.console.error),D=(0,m.m)();function R(e){f=e}function j(){null!=f&&f.apply(void 0,arguments)}var _,P=function(){return(!p||!_||Date.now()-_>20)&&(B.resetWinDimensions(),_=Date.now()),p};function U(){var e,n,t,r,i,o,a,s,u,c,d,l,f,g,v,m=re()?B.getWindowTop():B.getWindowSelf();p={screen:{width:null===(e=m.screen)||void 0===e?void 0:e.width,height:null===(n=m.screen)||void 0===n?void 0:n.height,availWidth:null===(t=m.screen)||void 0===t?void 0:t.availWidth,availHeight:null===(r=m.screen)||void 0===r?void 0:r.availHeight,colorDepth:null===(i=m.screen)||void 0===i?void 0:i.colorDepth},innerHeight:m.innerHeight,innerWidth:m.innerWidth,outerWidth:m.outerWidth,outerHeight:m.outerHeight,visualViewport:{height:null===(o=m.visualViewport)||void 0===o?void 0:o.height,width:null===(a=m.visualViewport)||void 0===a?void 0:a.width},document:{documentElement:{clientWidth:null===(s=m.document)||void 0===s||null===(s=s.documentElement)||void 0===s?void 0:s.clientWidth,clientHeight:null===(u=m.document)||void 0===u||null===(u=u.documentElement)||void 0===u?void 0:u.clientHeight,scrollTop:null===(c=m.document)||void 0===c||null===(c=c.documentElement)||void 0===c?void 0:c.scrollTop,scrollLeft:null===(d=m.document)||void 0===d||null===(d=d.documentElement)||void 0===d?void 0:d.scrollLeft},body:{scrollTop:null===(l=document.body)||void 0===l?void 0:l.scrollTop,scrollLeft:null===(f=document.body)||void 0===f?void 0:f.scrollLeft,clientWidth:null===(g=document.body)||void 0===g?void 0:g.clientWidth,clientHeight:null===(v=document.body)||void 0===v?void 0:v.clientHeight}}}}var B={checkCookieSupport:rn,createTrackPixelIframeHtml:Ue,getWindowSelf:ee,getWindowTop:Z,canAccessWindowTop:re,getWindowLocation:ne,insertUserSyncIframe:je,insertElement:ke,isFn:he,triggerPixel:De,logError:se,logWarn:ae,logMessage:ie,logInfo:oe,parseQS:bn,formatQS:yn,deepEqual:In,resetWinDimensions:U},q={};function N(){return q}var M,W=(M=0,function(){return++M});function F(){return W()+Math.random().toString(16).substr(2)}function L(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,L)}function z(e,n){return(null==n?void 0:n[e])||""}function G(e){var n="";for(var t in e)e.hasOwnProperty(t)&&(n+=t+"="+encodeURIComponent(e[t])+"&");return n.replace(/&$/,"")}function $(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map(function(n){return"".concat(n,"=").concat(encodeURIComponent(e[n]))}).join("&"):""}function J(e){return"string"==typeof e?e.split(/\s*,\s*/).map(function(e){return e.match(/^(\d+)x(\d+)$/i)}).filter(function(e){return e}).map(function(e){var n=(0,s.A)(e,3),t=(n[0],n[1]),r=n[2];return[parseInt(t,10),parseInt(r,10)]}):Array.isArray(e)?X(e)?[e]:e.filter(X):[]}function H(e){return J(e).map(V)}function V(e){return e[0]+"x"+e[1]}function K(e){if(X(e))return V(e)}function Y(e){return{w:e[0],h:e[1]}}function Q(e){if(X(e))return Y(e)}function X(e){return ye(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function Z(){return window.top}function ee(){return window.self}function ne(){return window.location}function te(){return document}function re(){try{if(B.getWindowTop().location.href)return!0}catch(e){return!1}}function ie(){le()&&T&&console.log.apply(console,ce(arguments,"MESSAGE:"))}function oe(){le()&&O&&console.info.apply(console,ce(arguments,"INFO:"))}function ae(){le()&&k&&console.warn.apply(console,ce(arguments,"WARNING:")),j(g.qY.AUCTION_DEBUG,{type:"WARNING",arguments})}function se(){le()&&x&&console.error.apply(console,ce(arguments,"ERROR:")),j(g.qY.AUCTION_DEBUG,{type:"ERROR",arguments})}function ue(e){function n(n){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.apply(void 0,[e].concat(r))}}return{logError:n(se),logWarn:n(ae),logMessage:n(ie),logInfo:n(oe)}}function ce(e,n){e=[].slice.call(e);var t=d.$W.getCurrentBidder();return n&&e.unshift(n),t&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(t?"%c".concat(t):"")),e;function r(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function de(){return T}function le(){return!!d.$W.getConfig("debug")}var fe,pe=(fe={border:"0px",hspace:"0",vspace:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",frameBorder:"0",allowtransparency:"true"},function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.createElement("iframe");return Object.assign(r,Object.assign({},fe,n)),Object.assign(r.style,t),r});function ge(){return pe(document,{id:F(),width:0,height:0,src:"about:blank"},{display:"none",height:"0px",width:"0px",border:"0px"})}function ve(e){return bn(ne().search)[e]||""}function me(e,n){return S.call(e)==="[object "+n+"]"}function he(e){return me(e,w)}function be(e){return me(e,y)}var ye=Array.isArray.bind(Array);function we(e){return me(e,A)}function Ae(e){return me(e,I)}function Ie(e){return me(e,E)}function Ee(e){return!e||(ye(e)||be(e)?!(e.length>0):Object.keys(e).length<=0)}function Se(e){return be(e)&&(!e||0===e.length)}function Ce(e,n){var t=this;if(he(null==e?void 0:e.forEach))return e.forEach(n,this);Object.entries(e||{}).forEach(function(e){var r=(0,s.A)(e,2),i=r[0],o=r[1];return n.call(t,o,i)})}function Te(e,n){return he(null==e?void 0:e.includes)&&e.includes(n)}function Oe(e,n){return he(null==e?void 0:e.map)?e.map(n):Object.entries(e||{}).map(function(t){var r=(0,s.A)(t,2),i=r[0],o=r[1];return n(o,i,e)})}function ke(e,n,t,r){var i;n=n||document,i=t?n.getElementsByTagName(t):n.getElementsByTagName("head");try{if((i=i.length?i:n.getElementsByTagName("body")).length){i=i[0];var o=r?null:i.firstChild;return i.insertBefore(e,o)}}catch(e){}}function xe(e,n){var t=null;return new v.U9(function(r){var i=function(){e.removeEventListener("load",i),e.removeEventListener("error",i),null!=t&&window.clearTimeout(t),r()};e.addEventListener("load",i),e.addEventListener("error",i),null!=n&&(t=window.setTimeout(i,n))})}function De(e,n,t){var r=new Image;n&&B.isFn(n)&&xe(r,t).then(n),r.src=e}function Re(e){if(e){var n,t=ge();B.insertElement(t,document,"body"),(n=t.contentWindow.document).open(),n.write(e),n.close()}}function je(e,n,t){var r=B.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),i=document.createElement("div");i.innerHTML=r;var o=i.firstChild;n&&B.isFn(n)&&xe(o,t).then(n),B.insertElement(o,document,"html",!0)}function _e(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:encodeURI;return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;">'+'<img src="'+n(e)+'"></div>':""}function Pe(e){return Array.from(e.matchAll(/\$({[^}]+})/g)).map(function(e){return e[1]}).reduce(function(e,n){return e.replace("$"+encodeURIComponent(n),"$"+n)},encodeURI(e))}function Ue(e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e=encodeURI(e)),n&&(n='sandbox="'.concat(n,'"')),"<iframe ".concat(n,' id="').concat(F(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')):""}function Be(e,n,t){return t.indexOf(e)===n}function qe(e,n){return e.concat(n)}function Ne(e,n){if(e)return n.flatMap(function(e){return e.bids}).find(function(n){return["bidId","adId","bid_id"].some(function(t){return n[t]===e})})}function Me(e,n){return e[n]}function We(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.adUnits).map(function(e){return e.bids.map(function(e){return e.bidder}).reduce(qe,[])}).reduce(qe,[]).filter(function(e){return void 0!==e}).filter(Be)}function Fe(){if(window.googletag&&he(window.googletag.pubads)&&he(window.googletag.pubads().getSlots))return!0}function Le(){if(window.apntag&&he(window.apntag.getTag))return!0}var ze=function(e,n){return n.cpm-e.cpm};function Ge(e){for(var n=e.length;n>0;){var t=Math.floor(Math.random()*n),r=e[--n];e[n]=e[t],e[t]=r}return e}function $e(e){return l(e)||{}}function Je(){try{return B.getWindowSelf()!==B.getWindowTop()}catch(e){return!0}}function He(){if(!Je())return!1;var e=B.getWindowSelf();return!(!e.$sf||!e.$sf.ext)}function Ve(){try{var e=ee();return"function"==typeof e.$sf.ext.geom?e.$sf.ext.geom():void 0}catch(e){return void se("Error getting SafeFrame geometry",e)}}function Ke(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)}function Ye(e,n){if(e)return Object.entries(n).reduce(function(e,n){var t=(0,s.A)(n,2),r=t[0],i=t[1];return e.replace(new RegExp("\\$\\{"+r+"\\}","g"),i||"")},e)}function Qe(e,n){return Ye(e,{AUCTION_PRICE:n})}function Xe(e,n){if(e&&n&&"string"==typeof n)return e.replace(/\${CLICKTHROUGH}/g,n)}function Ze(){return(new Date).getTime()}function en(){return window.performance&&window.performance.now&&window.performance.now()||0}function nn(e){var n,t=-1,r=(e=e||ee()).performance;if(null!==(n=e.performance)&&void 0!==n&&n.timing&&e.performance.timing.navigationStart>0){var i=r.timing.domLoading-r.timing.navigationStart;i>0&&(t=i)}return t}function tn(){return!1!==d.$W.getConfig("deviceAccess")}function rn(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function on(e,n){if(n<1)throw new Error("numRequiredCalls must be a positive number. Got ".concat(n));var t=0;return function(){++t===n&&e.apply(this,arguments)}}function an(e,n){return e.reduce(function(e,t){return(e[t[n]]=e[t[n]]||[]).push(t),e},{})}function sn(e,n){return n.filter(function(n){return e[n]}).reduce(function(n,t){return Object.assign(n,(0,a.A)({},t,e[t]))},{})}function un(e){var n=["banner","native","video"];return!!Object.keys(e).every(function(e){return n.includes(e)})&&(!e.video||!e.video.context||["instream","outstream","adpod"].includes(e.video.context))}function cn(e,n,t){return e.filter(function(e){return e.code===n}).flatMap(function(e){return e.bids}).filter(function(e){return e.bidder===t}).map(function(e){return e.params||{}})}function dn(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack}var ln=function(e,n){return e.getAdUnitPath()===n||e.getSlotElementId()===n};function fn(e){return function(n){return ln(e,n)}}function pn(e,n){var t=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(t," ad unit\n    containing bidders that don't support ").concat(t,": ").concat(n,".\n    This bidder won't fetch demand.\n  ")}var gn=Number.isInteger.bind(Number);function vn(e){return Object.fromEntries(Object.entries(e).filter(function(e){var n=(0,s.A)(e,2);return n[0],void 0!==n[1]}))}function mn(e,n){return"object"!==(0,o.A)(e)?{}:n.reduce(function(t,r,i){if("function"==typeof r)return t;var o=r,a=r.match(/^(.+?)\sas\s(.+?)$/i);a&&(r=a[1],o=a[2]);var s=e[r];return"function"==typeof n[i+1]&&(s=n[i+1](s,t)),void 0!==s&&(t[o]=s),t},{})}function hn(e,n){return ye(e)&&(!n||e.length===n)&&e.every(function(e){return gn(e)})}function bn(e){return e?e.replace(/^\?/,"").split("&").reduce(function(e,n){var t=n.split("="),r=(0,s.A)(t,2),i=r[0],o=r[1];return/\[\]$/.test(i)?(e[i=i.replace("[]","")]=e[i]||[],e[i].push(o)):e[i]=o||"",e},{}):{}}function yn(e){return Object.keys(e).map(function(n){return Array.isArray(e[n])?e[n].map(function(e){return"".concat(n,"[]=").concat(e)}).join("&"):"".concat(n,"=").concat(e[n])}).join("&")}function wn(e,n){var t=document.createElement("a");n&&"noDecodeWholeURL"in n&&n.noDecodeWholeURL?t.href=e:t.href=decodeURIComponent(e);var r=n&&"decodeSearchAsString"in n&&n.decodeSearchAsString;return{href:t.href,protocol:(t.protocol||"").replace(/:$/,""),hostname:t.hostname,port:+t.port,pathname:t.pathname.replace(/^(?!\/)/,"/"),search:r?t.search:B.parseQS(t.search||""),hash:(t.hash||"").replace(/^#/,""),host:t.host||window.location.host}}function An(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(B.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}function In(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkTypes,r=void 0!==t&&t;if(e===n)return!0;if("object"!==(0,o.A)(e)||null===e||"object"!==(0,o.A)(n)||null===n)return!1;var i=Array.isArray(e),a=Array.isArray(n);if(i&&a){if(e.length!==n.length)return!1;for(var s=0;s<e.length;s++)if(!In(e[s],n[s],{checkTypes:r}))return!1;return!0}if(i||a)return!1;if(r&&e.constructor!==n.constructor)return!1;var u=Object.keys(e),c=Object.keys(n);if(u.length!==c.length)return!1;for(var d=0,l=u;d<l.length;d++){var f=l[d];if(!Object.prototype.hasOwnProperty.call(n,f))return!1;if(!In(e[f],n[f],{checkTypes:r}))return!1}return!0}function En(e){for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n++){var t=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];Ae(t)&&Sn(e,t)}return e}function Sn(e,n){if(Ae(e)&&Ae(n))for(var t=Object.keys(n),r=function(){var r=t[o];if("__proto__"===r||"constructor"===r)return 1;var a=n[r];Ae(a)?(e[r]||(e[r]={}),Sn(e[r],a)):Array.isArray(a)?Array.isArray(e[r])?a.forEach(function(n){e[r].some(function(e){return In(e,n)})||e[r].push(n)}):e[r]=(0,i.A)(a):e[r]=a},o=0;o<t.length;o++)r()}function Cn(e){for(var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=function(e,n){if(he(Math.imul))return Math.imul(e,n);var t=(4194303&e)*(n|=0);return 4290772992&e&&(t+=(4290772992&e)*n|0),0|t},i=3735928559^t,o=1103547991^t,a=0;a<e.length;a++)i=r(i^(n=e.charCodeAt(a)),2654435761),o=r(o^n,1597334677);return i=r(i^i>>>16,2246822507)^r(o^o>>>13,3266489909),(4294967296*(2097151&(o=r(o^o>>>16,2246822507)^r(i^i>>>13,3266489909)))+(i>>>0)).toString()}function Tn(e){try{return JSON.parse(e)}catch(e){}}function On(e){try{return JSON.stringify(e)}catch(e){return""}}function kn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},t=new Map,r=function(){var r=n.apply(this,arguments);return t.has(r)||t.set(r,e.apply(this,arguments)),t.get(r)};return r.clear=t.clear.bind(t),r}function xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d";if(["m","d"].indexOf(n)<0)return Date.now();var t=e/("m"===n?1440:1);return Date.now()+(e&&e>0?864e5*t:0)}function Dn(e){return Object.keys(e).map(function(n){return(0,a.A)({},n,e[n])})}function Rn(e,n){Object.entries(n).forEach(function(n){var t=(0,s.A)(n,2),r=t[0],i=t[1];return e.setAttribute(r,i)})}function jn(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=0,i=e.length&&e.length-1,o=t(n);i-r>1;){var a=r+Math.round((i-r)/2);o>t(e[a])?r=a:i=a}for(;e.length>r&&o>t(e[r]);)r++;return r}function _n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(var t in e){var r=e[t],i=(0,o.A)(r);if(void 0===r||"function"===i||"symbol"===i||r instanceof RegExp||r instanceof Map||r instanceof Set||r instanceof Date||null!==r&&"object"===i&&r.hasOwnProperty("toJSON"))return!0;if(null!==r&&"object"===i&&r.constructor===Object){if(n.has(r))return!0;if(n.add(r),_n(r,n))return!0}}return!1}function Pn(e,n){for(var t,r=0;r<e.length;r++)if(t=(0,h.A)(e[r],n))return t}function Un(e){var n=null;try{var t=/[-\w]+\.([-\w]+|[-\w]{3,}|[-\w]{1,3}\.[-\w]{2})$/i.exec(e);if(null!=t&&t.length>0){n=t[0];for(var r=1;r<t.length;r++)t[r].length>n.length&&(n=t[r])}}catch(e){n=null}return n}function Bn(e,n){be(e.nurl)&&""!==e.nurl&&(e.nurl=e.nurl.replace(/\${AUCTION_PRICE}/,n),De(e.nurl))}var qn,Nn=function(){if(void 0!==qn)return qn;try{void 0===window.CompressionStream?qn=!1:(new window.CompressionStream("gzip"),qn=!0)}catch(e){qn=!1}return qn};function Mn(e){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,r.A)(c().mark(function e(n){var t,r,i,o,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!=typeof n&&(n=JSON.stringify(n)),t=new TextEncoder,r=t.encode(n),i=new Blob([r]).stream().pipeThrough(new window.CompressionStream("gzip")),e.next=1,new Response(i).blob();case 1:return o=e.sent,e.next=2,o.arrayBuffer();case 2:return a=e.sent,e.abrupt("return",new Uint8Array(a));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}},127:(e,n,t)=>{"use strict";t.d(n,{j:()=>l,q:()=>p});var r=t(89),i=t(718),o=2,a={buckets:[{max:5,increment:.5}]},s={buckets:[{max:20,increment:.1}]},u={buckets:[{max:20,increment:.01}]},c={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},d={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function l(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=parseFloat(e);return isNaN(r)&&(r=""),{low:""===r?"":f(e,a,t),med:""===r?"":f(e,s,t),high:""===r?"":f(e,u,t),auto:""===r?"":f(e,d,t),dense:""===r?"":f(e,c,t),custom:""===r?"":f(e,n,t)}}function f(e,n,t){var a="";if(!p(n))return a;var s=n.buckets.reduce(function(e,n){return e.max>n.max?e:n},{max:0}),u=0,c=n.buckets.find(function(n){if(e>s.max*t){var r=n.precision;void 0===r&&(r=o),a=(n.max*t).toFixed(r)}else{if(e<=n.max*t&&e>=u*t)return n.min=u,n;u=n.max}});return c&&(a=function(e,n,t){var a=void 0!==n.precision?n.precision:o,s=n.increment*t,u=n.min*t,c=Math.floor,d=i.$W.getConfig("cpmRoundingFunction");"function"==typeof d&&(c=d);var l,f,p=Math.pow(10,a+2),g=(e*p-u*p)/(s*p);try{l=c(g)*s+u}catch(e){f=!0}return(f||"number"!=typeof l)&&((0,r.logWarn)("Invalid rounding function passed in config"),l=Math.floor(g)*s+u),(l=Number(l.toFixed(10))).toFixed(a)}(e,c,t)),a}function p(e){if((0,r.isEmpty)(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var n=!0;return e.buckets.forEach(function(e){e.max&&e.increment||(n=!1)}),n}},128:e=>{o.SYNC=1,o.ASYNC=2,o.QUEUE=4;var n="fun-hooks",t=Object.freeze({ready:0}),r=new WeakMap;function i(e,n){return Array.prototype.slice.call(e,n)}function o(e){var a,s={},u=[];function c(e,n){return"function"==typeof e?p.call(null,"sync",e,n):"string"==typeof e&&"function"==typeof n?p.apply(null,arguments):"object"==typeof e?d.apply(null,arguments):void 0}function d(e,n,t){var r=!0;void 0===n&&(n=Object.getOwnPropertyNames(e).filter(e=>!e.match(/^_/)),r=!1);var i={},o=["constructor"];do{n.forEach(function(n){var r=n.match(/(?:(sync|async):)?(.+)/),a=r[1]||"sync",s=r[2];if(!i[s]&&"function"==typeof e[s]&&-1===o.indexOf(s)){var u=e[s];i[s]=e[s]=p(a,u,t?[t,s]:void 0)}}),e=Object.getPrototypeOf(e)}while(r&&e);return i}function l(e){var t=Array.isArray(e)?e:e.split(".");return t.reduce(function(r,i,o){var s=r[i],c=!1;return s||(o===t.length-1?(a||u.push(function(){c||console.warn(n+": referenced '"+e+"' but it was never created")}),r[i]=f(function(e){r[i]=e,c=!0})):r[i]={})},s)}function f(e){var n=[],t=[],i=function(){},o={before:function(e,t){return s.call(this,n,"before",e,t)},after:function(e,n){return s.call(this,t,"after",e,n)},getHooks:function(e){var r=n.concat(t);"object"==typeof e&&(r=r.filter(function(n){return Object.keys(e).every(function(t){return n[t]===e[t]})}));try{Object.assign(r,{remove:function(){return r.forEach(function(e){e.remove()}),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return r},removeAll:function(){return this.getHooks().remove()}},a={install:function(r,o,a){this.type=r,i=a,a(n,t),e&&e(o)}};return r.set(o.after,a),o;function s(e,r,o,a){var s={hook:o,type:r,priority:a||10,remove:function(){var r=e.indexOf(s);-1!==r&&(e.splice(r,1),i(n,t))}};return e.push(s),e.sort(function(e,n){return n.priority-e.priority}),i(n,t),this}}function p(t,s,c){var d=s.after&&r.get(s.after);if(d){if(d.type!==t)throw n+": recreated hookable with different type";return s}var p,g=c?l(c):f(),v={get:function(e,n){return g[n]||Reflect.get.apply(Reflect,arguments)}};a||u.push(h);var m=new Proxy(s,v);return r.get(m.after).install(t,m,function(e,n){var r,o=[];function a(e){o.push(e.hook)}e.length||n.length?(e.forEach(a),r=o.push(void 0)-1,n.forEach(a),p=function(e,n,a){var s,u=o.slice(),c=0,d="async"===t&&"function"==typeof a[a.length-1]&&a.pop();function l(e){"sync"===t?s=e:d&&d.apply(null,arguments)}function f(e){if(u[c]){var r=i(arguments);return f.bail=l,r.unshift(f),u[c++].apply(n,r)}"sync"===t?s=e:d&&d.apply(null,arguments)}return u[r]=function(){var r=i(arguments,1);"async"===t&&d&&(delete f.bail,r.push(f));var o=e.apply(n,r);"sync"===t&&f(o)},f.apply(null,a),s}):p=void 0,h()}),m;function h(){!a&&("sync"!==t||e.ready&o.SYNC)&&("async"!==t||e.ready&o.ASYNC)?"sync"!==t&&e.ready&o.QUEUE?v.apply=function(){var e=arguments;u.push(function(){m.apply(e[1],e[2])})}:v.apply=function(){throw n+": hooked function not ready"}:v.apply=p}}return(e=Object.assign({},t,e)).ready?c.ready=function(){a=!0,function(e){for(var n;n=e.shift();)n()}(u)}:a=!0,c.get=l,c}e.exports=o},145:(e,n,t)=>{"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}t.d(n,{A:()=>r})},172:e=>{e.exports=function(e,n){this.v=e,this.k=n},e.exports.__esModule=!0,e.exports.default=e.exports},284:(e,n,t)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.d(n,{A:()=>r})},296:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(800);function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(s.push(r.value),s.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,n)||(0,r.A)(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},373:e=>{e.exports=function(e){var n=Object(e),t=[];for(var r in n)t.unshift(r);return function e(){for(;t.length;)if((r=t.pop())in n)return e.value=r,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},410:(e,n,t)=>{"use strict";function r(e,n,t){n.split&&(n=n.split("."));for(var r,i,o=0,a=n.length,s=e;o<a&&"__proto__"!=(i=""+n[o++])&&"constructor"!==i&&"prototype"!==i;)s=s[i]=o===a?t:typeof(r=s[i])==typeof n?r:0*n[o]!=0||~(""+n[o]).indexOf(".")?{}:[]}t.d(n,{J:()=>r})},433:(e,n,t)=>{"use strict";function r(e,n,t,r,i){for(n=n.split?n.split("."):n,r=0;r<n.length;r++)e=e?e[n[r]]:i;return e===i?t:e}t.d(n,{A:()=>r})},458:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(145),i=t(800);function o(e){return function(e){if(Array.isArray(e))return(0,r.A)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.A)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},467:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(816);function i(e,n,t){return(n=(0,r.A)(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}},492:(e,n,t)=>{"use strict";t.d(n,{U9:()=>w,v6:()=>I,cb:()=>A});var r=t(296),i=t(29),o=t(901);function a(e,n,t){(function(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,n),n.set(e,t)}function s(e,n){return e.get(c(e,n))}function u(e,n,t){return e.set(c(e,n),t),t}function c(e,n,t){if("function"==typeof e?e===n:e.has(n))return arguments.length<3?n:t;throw new TypeError("Private element is not present on this object")}var d=0,l=1,f=new WeakMap,p=new WeakMap,g=function(){function e(n){if((0,i.A)(this,e),a(this,f,void 0),a(this,p,void 0),"function"!=typeof n)throw new Error("resolver not a function");var t=[],o=[],s=[d,l].map(function(e){return function(n){if(e===d&&"function"==typeof(null==n?void 0:n.then))n.then(g,v);else if(!t.length)for(t.push(e,n);o.length;)o.shift()()}}),c=(0,r.A)(s,2),g=c[0],v=c[1];try{n(g,v)}catch(e){v(e)}u(f,this,t),u(p,this,o)}return(0,o.A)(e,[{key:"then",value:function(e,n){var t=this,i=s(f,this);return new this.constructor(function(o,a){var u=function(){var t=i[1],s=i[0]===d?[e,o]:[n,a],u=(0,r.A)(s,2),c=u[0],l=u[1];if("function"==typeof c){try{t=c(t)}catch(e){return void a(e)}l=o}l(t)};i.length?u():s(p,t).push(u)})}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"finally",value:function(e){var n,t=this;return this.then(function(t){return n=t,e()},function(r){return n=t.constructor.reject(r),e()}).then(function(){return n})}}],[{key:"race",value:function(n){var t=this;return new this(function(r,i){c(e,t,v).call(t,n,function(e,n){return e?r(n):i(n)})})}},{key:"all",value:function(n){var t=this;return new this(function(r,i){var o=[];c(e,t,v).call(t,n,function(e,n,t){return e?o[t]=n:i(n)},function(){return r(o)})})}},{key:"allSettled",value:function(n){var t=this;return new this(function(r){var i=[];c(e,t,v).call(t,n,function(e,n,t){return i[t]=e?{status:"fulfilled",value:n}:{status:"rejected",reason:n}},function(){return r(i)})})}},{key:"resolve",value:function(e){return new this(function(n){return n(e)})}},{key:"reject",value:function(e){return new this(function(n,t){return t(e)})}}])}();function v(e,n,t){var r=this,i=e.length;function o(){n.apply(this,arguments),--i<=0&&t&&t()}0===e.length&&t?t():e.forEach(function(e,n){return r.resolve(e).then(function(e){return o(!0,e,n)},function(e){return o(!1,e,n)})})}var m,h,b=t(831),y=null!==(m=(0,b.m)().setTimeout)&&void 0!==m?m:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n>0)return setTimeout(e,n);e()},w=null!==(h=(0,b.m)().Promise)&&void 0!==h?h:g;function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new w(function(n){y(n,e)})}function I(){var e,n,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).promiseFactory;function r(e){return function(n){return e(n)}}return{promise:(void 0===t?function(e){return new w(e)}:t)(function(t,r){e=t,n=r}),resolve:r(e),reject:r(n)}}},546:e=>{function n(t,r,i,o){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}e.exports=n=function(e,t,r,i){function o(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,r,i,o)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,n,t)=>{var r=t(738).default;e.exports=function(e){if(null!=e){var n=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],t=0;if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}throw new TypeError(r(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},633:(e,n,t)=>{var r=t(172),i=t(993),o=t(869),a=t(887),s=t(791),u=t(373),c=t(579);function d(){"use strict";var n=i(),t=n.m(d),l=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function f(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))}var p={throw:1,return:2,break:3,continue:3};function g(e){var n,t;return function(r){n||(n={stop:function(){return t(r.a,2)},catch:function(){return r.v},abrupt:function(e,n){return t(r.a,p[e],n)},delegateYield:function(e,i,o){return n.resultName=i,t(r.d,c(e),o)},finish:function(e){return t(r.f,e)}},t=function(e,t,i){r.p=n.prev,r.n=n.next;try{return e(t,i)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return e.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(e.exports=d=function(){return{wrap:function(e,t,r,i){return n.w(g(e),t,r,i&&i.reverse())},isGeneratorFunction:f,mark:n.m,awrap:function(e,n){return new r(e,n)},AsyncIterator:s,async:function(e,n,t,r,i){return(f(n)?a:o)(g(e),n,t,r,i)},keys:u,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports},718:(e,n,t)=>{"use strict";t.d(n,{$W:()=>A,Ov:()=>m});var r=t(284),i=t(467),o=t(458),a=t(296),s=t(127),u=t(89),c=t(433),d=t(743);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach(function(n){(0,i.A)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var g="TRUE"===(0,u.getParameterByName)(d.M).toUpperCase(),v={},m="random",h={};h[m]=!0,h.fixed=!0;var b=m,y={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"};function w(e){var n=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?{}:{priceGranularity:y.MEDIUM,customPriceBucket:{},mediaTypePriceGranularity:{},bidderSequence:b,auctionOptions:{}};function t(e){return n[e]}function r(t,r){n.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0}),n[t]=r}var i={publisherDomain:{set:function(e){null!=e&&(0,u.logWarn)("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),r("publisherDomain",e)}},priceGranularity:{set:function(e){c(e)&&("string"==typeof e?r("priceGranularity",o(e)?e:y.MEDIUM):(0,u.isPlainObject)(e)&&(r("customPriceBucket",e),r("priceGranularity",y.CUSTOM),(0,u.logMessage)("Using custom price granularity")))}},customPriceBucket:{},mediaTypePriceGranularity:{set:function(e){null!=e&&r("mediaTypePriceGranularity",Object.keys(e).reduce(function(n,r){return c(e[r])?"string"==typeof e?n[r]=o(e[r])?e[r]:t("priceGranularity"):(0,u.isPlainObject)(e)&&(n[r]=e[r],(0,u.logMessage)("Using custom price granularity for ".concat(r))):(0,u.logWarn)("Invalid price granularity for media type: ".concat(r)),n},{}))}},bidderSequence:{set:function(e){h[e]?r("bidderSequence",e):(0,u.logWarn)("Invalid order: ".concat(e,". Bidder Sequence was not set."))}},auctionOptions:{set:function(e){(function(e){if(!(0,u.isPlainObject)(e))return(0,u.logWarn)("Auction Options must be an object"),!1;for(var n=0,t=Object.keys(e);n<t.length;n++){var r=t[n];if("secondaryBidders"!==r&&"suppressStaleRender"!==r&&"suppressExpiredRender"!==r)return(0,u.logWarn)("Auction Options given an incorrect param: ".concat(r)),!1;if("secondaryBidders"===r){if(!(0,u.isArray)(e[r]))return(0,u.logWarn)("Auction Options ".concat(r," must be of type Array")),!1;if(!e[r].every(u.isStr))return(0,u.logWarn)("Auction Options ".concat(r," must be only string")),!1}else if(("suppressStaleRender"===r||"suppressExpiredRender"===r)&&!(0,u.isBoolean)(e[r]))return(0,u.logWarn)("Auction Options ".concat(r," must be of type boolean")),!1}return!0})(e)&&r("auctionOptions",e)}}};return Object.defineProperties(e,Object.fromEntries(Object.entries(i).map(function(e){var i=(0,a.A)(e,2),o=i[0],s=i[1];return[o,Object.assign({get:t.bind(null,o),set:r.bind(null,o),enumerable:n.hasOwnProperty(o),configurable:!n.hasOwnProperty(o)},s)]}))),e;function o(e){return Object.keys(y).find(function(n){return e===y[n]})}function c(e){if(!e)return(0,u.logError)("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)o(e)||(0,u.logWarn)("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if((0,u.isPlainObject)(e)&&!(0,s.q)(e))return(0,u.logError)("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}}var A=function(){var e,n,t,s=[],d=null;function l(){e={};var r=w({debug:g,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,disableAjaxTimeout:!1,maxNestedIframes:10,maxBid:5e3,userSync:{topics:v}});n&&k(Object.keys(n).reduce(function(e,t){return n[t]!==r[t]&&(e[t]=r[t]||{}),e},{})),n=r,t={}}function m(){if(d&&t&&(0,u.isPlainObject)(t[d])){var e,r=t[d],i={},a=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return p(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}(new Set([].concat((0,o.A)(Object.keys(n)),(0,o.A)(Object.keys(r)))));try{for(a.s();!(e=a.n()).done;){var s=e.value,c=n[s],l=r[s];i[s]=void 0===l?c:void 0===c?l:(0,u.isPlainObject)(l)?(0,u.mergeDeep)({},c,l):l}}catch(e){a.e(e)}finally{a.f()}return i}return f({},n)}var h=[m,function(){var e=m();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map(function(e){return function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var n=arguments.length<=0?void 0:arguments[0];return n?(0,c.A)(e(),n):m()}return O.apply(void 0,arguments)}}),b=(0,a.A)(h,2),y=b[0],A=b[1],I=[A,y].map(function(e){return function(){var n=e.apply(void 0,arguments);return n&&"object"===(0,r.A)(n)&&(n=(0,u.deepClone)(n)),n}}),E=(0,a.A)(I,2),S=E[0],C=E[1];function T(t){if((0,u.isPlainObject)(t)){var r=Object.keys(t),i={};r.forEach(function(r){var o=t[r];(0,u.isPlainObject)(e[r])&&(0,u.isPlainObject)(o)&&(o=Object.assign({},e[r],o));try{i[r]=n[r]=o}catch(e){(0,u.logWarn)("Cannot set config for property ".concat(r," : "),e)}}),k(i)}else(0,u.logError)("setConfig options must be an object")}function O(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n;if("string"!=typeof e&&(r=e,e="*",t=n||{}),"function"==typeof r){var o={topic:e,callback:r};return s.push(o),t.init&&r("*"===e?A():(0,i.A)({},e,A(e))),function(){s.splice(s.indexOf(o),1)}}(0,u.logError)("listener must be a function")}function k(e){var n=Object.keys(e);s.filter(function(e){return n.includes(e.topic)}).forEach(function(n){n.callback((0,i.A)({},n.topic,e[n.topic]))}),s.filter(function(e){return"*"===e.topic}).forEach(function(n){return n.callback(e)})}function x(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{!function(e){if(!(0,u.isPlainObject)(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!(0,u.isPlainObject)(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach(function(r){t[r]||(t[r]=w({},!1)),Object.keys(e.config).forEach(function(i){var o=e.config[i],a=t[r][i];if((0,u.isPlainObject)(o)&&(null==a||(0,u.isPlainObject)(a))){var s=n?u.mergeDeep:Object.assign;t[r][i]=s({},a||{},o)}else t[r][i]=o})})}catch(e){(0,u.logError)(e)}}function D(e,n){d=e;try{return n()}finally{R()}}function R(){d=null}return l(),{getCurrentBidder:function(){return d},resetBidder:R,getConfig:A,getAnyConfig:y,readConfig:S,readAnyConfig:C,setConfig:T,mergeConfig:function(e){if((0,u.isPlainObject)(e)){var n=(0,u.mergeDeep)(m(),e);return T(f({},n)),n}(0,u.logError)("mergeConfig input must be an object")},setDefaults:function(t){(0,u.isPlainObject)(e)?(Object.assign(e,t),Object.assign(n,t)):(0,u.logError)("defaults must be an object")},resetConfig:l,runWithBidder:D,callbackWithBidder:function(e){return function(n){return function(){if("function"==typeof n){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return D(e,n.bind.apply(n,[this].concat(r)))}(0,u.logWarn)("config.callbackWithBidder callback is not a function")}}},setBidderConfig:x,getBidderConfig:function(){return t},mergeBidderConfig:function(e){return x(e,!0)}}}()},738:e=>{function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},743:(e,n,t)=>{"use strict";t.d(n,{IY:()=>A,M:()=>i,RW:()=>p,Tf:()=>v,UE:()=>c,XQ:()=>o,Zh:()=>l,_B:()=>y,as:()=>s,cA:()=>u,h0:()=>m,iD:()=>r,jO:()=>h,nl:()=>w,oA:()=>b,qY:()=>a,tl:()=>g,x5:()=>f,xS:()=>d});var r={PL_CODE:"code",PL_SIZE:"sizes",PL_BIDS:"bids",BD_BIDDER:"bidder",BD_ID:"paramsd",BD_PL_ID:"placementId",ADSERVER_TARGETING:"adserverTargeting",BD_SETTING_STANDARD:"standard"},i="pbjs_debug",o={GOOD:1},a={AUCTION_INIT:"auctionInit",AUCTION_TIMEOUT:"auctionTimeout",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_REJECTED:"bidRejected",NO_BID:"noBid",SEAT_NON_BID:"seatNonBid",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",BIDDER_ERROR:"bidderError",SET_TARGETING:"setTargeting",BEFORE_REQUEST_BIDS:"beforeRequestBids",BEFORE_BIDDER_HTTP:"beforeBidderHttp",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed",AD_RENDER_SUCCEEDED:"adRenderSucceeded",TCF2_ENFORCEMENT:"tcf2Enforcement",AUCTION_DEBUG:"auctionDebug",BID_VIEWABLE:"bidViewable",STALE_RENDER:"staleRender",EXPIRED_RENDER:"expiredRender",BILLABLE_EVENT:"billableEvent",BID_ACCEPTED:"bidAccepted",RUN_PAAPI_AUCTION:"paapiRunAuction",PBS_ANALYTICS:"pbsAnalytics",PAAPI_BID:"paapiBid",PAAPI_NO_BID:"paapiNoBid",PAAPI_ERROR:"paapiError",BEFORE_PBS_HTTP:"beforePBSHttp",BROWSI_INIT:"browsiInit",BROWSI_DATA:"browsiData"},s={PREVENT_WRITING_ON_MAIN_DOCUMENT:"preventWritingOnMainDocument",NO_AD:"noAd",EXCEPTION:"exception",CANNOT_FIND_AD:"cannotFindAd",MISSING_DOC_OR_ADID:"missingDocOrAdid"},u={bidWon:"adUnitCode"},c={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},d={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",SOURCE:"hb_source",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_ID:"hb_cache_id",CACHE_HOST:"hb_cache_host",ADOMAIN:"hb_adomain",ACAT:"hb_acat",CRID:"hb_crid",DSP:"hb_dsp"},l={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_HOST:"hb_cache_host"},f={title:"hb_native_title",body:"hb_native_body",body2:"hb_native_body2",privacyLink:"hb_native_privacy",privacyIcon:"hb_native_privicon",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayurl",cta:"hb_native_cta",rating:"hb_native_rating",address:"hb_native_address",downloads:"hb_native_downloads",likes:"hb_native_likes",phone:"hb_native_phone",price:"hb_native_price",salePrice:"hb_native_saleprice",rendererUrl:"hb_renderer_url",adTemplate:"hb_adTemplate"},p={SRC:"s2s",DEFAULT_ENDPOINT:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",SYNCED_BIDDERS_KEY:"pbjsSyncs"},g={BID_TARGETING_SET:"targetingSet",RENDERED:"rendered",BID_REJECTED:"bidRejected"},v={INVALID:"Bid has missing or invalid properties",INVALID_REQUEST_ID:"Invalid request ID",BIDDER_DISALLOWED:"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes",FLOOR_NOT_MET:"Bid does not meet price floor",CANNOT_CONVERT_CURRENCY:"Unable to convert currency",DSA_REQUIRED:"Bid does not provide required DSA transparency info",DSA_MISMATCH:"Bid indicates inappropriate DSA rendering method",PRICE_TOO_HIGH:"Bid price exceeds maximum value"},m={body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl"},h={sponsored:1,desc:2,rating:3,likes:4,downloads:5,price:6,saleprice:7,phone:8,address:9,desc2:10,displayurl:11,ctatext:12},b={ICON:1,MAIN:3},y=["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"],w={REQUEST:"Prebid Request",RESPONSE:"Prebid Response",NATIVE:"Prebid Native",EVENT:"Prebid Event"},A="__pb_locator__"},756:(e,n,t)=>{var r=t(633)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},791:(e,n,t)=>{var r=t(172),i=t(546);e.exports=function e(n,t){function o(e,i,a,s){try{var u=n[e](i),c=u.value;return c instanceof r?t.resolve(c.v).then(function(e){o("next",e,a,s)},function(e){o("throw",e,a,s)}):t.resolve(c).then(function(e){u.value=e,a(u)},function(e){return o("throw",e,a,s)})}catch(e){s(e)}}var a;this.next||(i(e.prototype),i(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),i(this,"_invoke",function(e,n,r){function i(){return new t(function(n,t){o(e,r,n,t)})}return a=a?a.then(i,i):i()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},800:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(145);function i(e,n){if(e){if("string"==typeof e)return(0,r.A)(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?(0,r.A)(e,n):void 0}}},816:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(284);function i(e){var n=function(e){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=(0,r.A)(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,r.A)(n)?n:n+""}},831:(e,n,t)=>{"use strict";t.d(n,{E:()=>a,m:()=>o});var r={},i=r.vslypbjs=r.vslypbjs||{};function o(){return i}function a(e){i.installedModules.push(e)}i.cmd=i.cmd||[],i.que=i.que||[],r===window&&(r._pbjsGlobals=r._pbjsGlobals||[],r._pbjsGlobals.push("vslypbjs"))},848:(e,n,t)=>{"use strict";function r(e,n,t,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void t(e)}s.done?n(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(i,o){var a=e.apply(n,t);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)})}}t.d(n,{A:()=>i})},869:(e,n,t)=>{var r=t(887);e.exports=function(e,n,t,i,o){var a=r(e,n,t,i,o);return a.next().then(function(e){return e.done?e.value:a.next()})},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,n,t)=>{var r=t(993),i=t(791);e.exports=function(e,n,t,o,a){return new i(r().w(e,n,t,o),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},901:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(816);function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.A)(i.key),i)}}function o(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}},969:(e,n,t)=>{const{internal:r,logWarn:i,logInfo:o,logError:a}=t(89),s=["sync.adprime.com","visitor.omnitagjs.com/visitor/isync","prebid.a-mo.net/isyn","acdn.adnxs.com/dmp/async_usersync.html","gum.criteo.com/syncframe","cdn.deepintent.com/syncpixel.html","ms-cookie-sync.presage.io/user-sync.html","ads.stickyadstv.com/auto-user-sync","x.bidswitch.net/sync","hb.360yield.com/prebid-universal-creative/load-cookie.html","k.r66net.com/GetUserSync","js-sec.indexww.com/um/ixmatch.html","onetag-sys.com/usync/","u.openx.net/w/1.0/pd","ads.pubmatic.com/AdServer/js/user_sync.html","bh.contextweb.com/visitormatch","sync.richaudience.com/","rubiconproject.com/usync.html","csync.smilewanted.com","sync.sparteo.com/sync/iframe.html","cdn.taboola.com/scripts/prebid_iframe_sync.html","eb2.3lift.com/sync"];try{const e=r.insertElement;r.insertElement=(n,t,o,...a)=>{const u=n&&n.src||"";n&&"IFRAME"===n.tagName&&s.some(e=>u.includes(e))&&(i("PREBID | HOOK | User-Sync iframe detected. Scheduling 5s removal.",u),setTimeout(()=>{n&&n.parentNode&&("requestIdleCallback"in window?window.requestIdleCallback(()=>{i("PREBID | HOOK | Removing User-Sync iframe (5s + idle).",u),n.remove()},{timeout:2e3}):(i("PREBID | HOOK | Removing User-Sync iframe (5s).",u),n.remove()))},5e3)),e.call(r,n,t,o,...a)},o("PREBID | HOOK | User-Sync (internal.insertElement) override applied successfully.")}catch(e){a("PREBID | HOOK | FAILED TO APPLY User-Sync override",e)}},993:(e,n,t)=>{var r=t(546);function i(){var n,t,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.toStringTag||"@@toStringTag";function u(e,i,o,a){var s=i&&i.prototype instanceof d?i:d,u=Object.create(s.prototype);return r(u,"_invoke",function(e,r,i){var o,a,s,u=0,d=i||[],l=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return o=e,a=0,s=n,f.n=t,c}};function p(e,r){for(a=e,s=r,t=0;!l&&u&&!i&&t<d.length;t++){var i,o=d[t],p=f.p,g=o[2];e>3?(i=g===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=n):o[0]<=p&&((i=e<2&&p<o[1])?(a=0,f.v=r,f.n=o[1]):p<g&&(i=e<3||o[0]>r||r>g)&&(o[4]=e,o[5]=r,f.n=g,a=0))}if(i||e>1)return c;throw l=!0,r}return function(i,d,g){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,g),a=d,s=g;(t=a<2?n:s)||!l;){o||(a?a<3?(a>1&&(f.n=-1),p(a,s)):f.n=s:f.v=s);try{if(u=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=n}else if((t=(l=f.n<0)?s:e.call(r,f))!==c)break}catch(e){o=n,a=1,s=e}finally{u=1}}return{value:t,done:l}}}(e,o,a),!0),u}var c={};function d(){}function l(){}function f(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(r(t={},a,function(){return this}),t),g=f.prototype=d.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e}return l.prototype=f,r(g,"constructor",f),r(f,"constructor",l),l.displayName="GeneratorFunction",r(f,s,"GeneratorFunction"),r(g),r(g,s,"Generator"),r(g,a,function(){return this}),r(g,"toString",function(){return"[object Generator]"}),(e.exports=i=function(){return{w:u,m:v}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=t(467),n=t(296),r=t(458),i=t(831),o=t(89),a=t(433),s=t(284),u=t(127);function c(e){Object.assign(this,{getAuction:function(n){var t=n.auctionId;if(null!=t)return e().find(function(e){return e.getAuctionId()===t})},getAdUnit:function(n){var t=n.adUnitId;if(null!=t)return e().flatMap(function(e){return e.getAdUnits()}).find(function(e){return e.adUnitId===t})},getMediaTypes:function(e){var n=e.adUnitId,t=e.requestId;if(null!=t){var r=this.getBidRequest({requestId:t});if(null!=r&&(null==n||r.adUnitId===n))return r.mediaTypes}else if(null!=n){var i=this.getAdUnit({adUnitId:n});if(null!=i)return i.mediaTypes}},getBidderRequest:function(n){var t=n.requestId,r=n.bidderRequestId;if(null!=t||null!=r){var i=e().flatMap(function(e){return e.getBidRequests()});return null!=r&&(i=i.filter(function(e){return e.bidderRequestId===r})),null==t?i[0]:i.find(function(e){return e.bids&&null!=e.bids.find(function(e){return e.bidId===t})})}},getBidRequest:function(n){var t=n.requestId;if(null!=t)return e().flatMap(function(e){return e.getBidRequests()}).flatMap(function(e){return e.bids}).find(function(e){return e&&e.bidId===t})},getOrtb2:function(e){var n,t;return(null===(n=this.getBidderRequest(e))||void 0===n?void 0:n.ortb2)||(null===(t=this.getAuction(e))||void 0===t||null===(t=t.getFPD())||void 0===t||null===(t=t.global)||void 0===t?void 0:t.ortb2)}})}var d=t(743),l=t(718);function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var p="performanceMetrics",g=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},v=new WeakMap;function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.now,t=void 0===n?g:n,r=e.mkNode,i=void 0===r?y:r,o=e.mkTimer,a=void 0===o?b:o,s=e.mkRenamer,u=void 0===s?function(e){return e}:s,c=e.nodes,d=void 0===c?v:c;return function(){return function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{forEach:function(n){n(e)}}};r=u(r);var o=function(e){return n.dfWalk({visit:function(n,t){var r=t.timestamps;if(r.hasOwnProperty(e))return r[e]}})};function s(e,t){var i=r(e);n.dfWalk({follow:function(e,n){return n.propagate&&(!e||!e.stopPropagation)},visit:function(e,n){i.forEach(function(r){null==e?n.metrics[r]=t:(n.groups.hasOwnProperty(r)||(n.groups[r]=[]),n.groups[r].push(t))})}})}function c(e){return a(t,function(n){return s(e,n)})}function l(){var e={};return n.dfWalk({visit:function(n,t){e=Object.assign({},!n||n.includeGroups?t.groups:null,t.metrics,e)}}),e}var f={startTiming:c,measureTime:function(e,n){return c(e).stopAfter(n)()},measureHookTime:function(e,n,t){var r=c(e);return t(function(e){var n=r.stopBefore(e);return n.bail=e.bail&&r.stopBefore(e.bail),n.stopTiming=r,n.untimed=e,n}(n))},checkpoint:function(e){n.timestamps[e]=t()},timeSince:function(e,n){var r=o(e),i=null!=r?t()-r:null;return null!=n&&s(n,i),i},timeBetween:function(e,n,t){var r=o(e),i=o(n),a=null!=r&&null!=i?i-r:null;return null!=t&&s(t,a),a},setMetric:s,getMetrics:l,fork:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.propagate,a=void 0===o||o,s=t.stopPropagation,u=void 0!==s&&s,c=t.includeGroups;return e(i([[n,{propagate:a,stopPropagation:u,includeGroups:void 0!==c&&c}]]),r)},join:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.propagate,i=void 0===r||r,o=t.stopPropagation,a=void 0!==o&&o,s=t.includeGroups,u=void 0!==s&&s,c=d.get(e);null!=c&&c.addParent(n,{propagate:i,stopPropagation:a,includeGroups:u})},newMetrics:function(){return e(n.newSibling(),r)},renameWith:function(t){return e(n,t)},toJSON:function(){return l()}};return d.set(f,n),f}(i([]))}}function h(e,n,t){return function(){n&&n();try{return e.apply(this,arguments)}finally{t&&t()}}}function b(e,n){var t=e(),r=!1;function i(){r||(n(e()-t),r=!0)}return i.stopBefore=function(e){return h(e,i)},i.stopAfter=function(e){return h(e,null,i)},i}function y(e){return{metrics:{},timestamps:{},groups:{},addParent:function(n,t){e.push([n,t])},newSibling:function(){return y(e.slice())},dfWalk:function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.visit,o=r.follow,a=void 0===o?function(){return!0}:o,s=r.visited,u=void 0===s?new Set:s,c=r.inEdge;if(!u.has(this)){if(u.add(this),null!=(t=i(c,this)))return t;var d,l=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return f(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}(e);try{for(l.s();!(d=l.n()).done;){var p=(0,n.A)(d.value,2),g=p[0],v=p[1];if(a(c,v)&&null!=(t=g.dfWalk({visit:i,follow:a,visited:u,inEdge:v})))return t}}catch(e){l.e(e)}finally{l.f()}}}}}var w=function(){var e=function(){},n=function(){return{}},t={forEach:e},r=function(){return null};r.stopBefore=function(e){return e},r.stopAfter=function(e){return e};var i=Object.defineProperties({dfWalk:e,newSibling:function(){return i},addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map(function(e){return[e,{get:n}]})));return m({now:function(){return 0},mkNode:function(){return i},mkRenamer:function(){return function(){return t}},mkTimer:function(){return r},nodes:{get:e,set:e}})()}(),A=!0;function I(e){return A&&e||w}l.$W.getConfig(p,function(e){A=!!e[p]});var E,S=(E=m(),function(){return A?E():w});function C(e,n){return function(t,r){return function(i){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var u=this;return I(n.apply(u,a)).measureHookTime(e+t,i,function(e){return r.call.apply(r,[u,e].concat(a))})}}}var T=C("requestBids.",function(e){return e.metrics}),O=C("addBidResponse.",function(e,n){return n.metrics}),k=t(492),x=null,D=0,R=[];function j(e,n){var t=D,r=setTimeout(function(){D===t&&null==x?e():null!=x?R.push({callback:e,startTime:t,setTimerId:function(e){r=e}}):r=j(e,D-t)()},n);return function(){return r}}function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function P(){var t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.startTime,s=void 0===a?o.timestamp:a,u=i.ttl,c=void 0===u?function(){return null}:u,d=i.monotonic,l=void 0!==d&&d,f=i.slack,p=void 0===f?5e3:f,g=new Map,v=[],m=[],h=l?function(e){return m.push(e)}:function(e){return m.splice((0,o.binarySearch)(m,e,function(e){return e.expiry}),0,e)};function b(){if(r&&clearTimeout(r),m.length>0){var e=(0,o.timestamp)();t=Math.max(e,m[0].expiry+p),r=j(function(){for(var e=(0,o.timestamp)(),n=0,t=function(){var t=a[i];if(t.expiry>e)return 1;v.forEach(function(e){try{e(t.item)}catch(e){(0,o.logError)(e)}}),g.delete(t.item),n++},i=0,a=m;i<a.length&&!t();i++);m.splice(0,n),r=null,b()},t-e)}else r=null}var y={};return(0,e.A)((0,e.A)((0,e.A)((0,e.A)((0,e.A)((0,e.A)({},Symbol.iterator,function(){return g.keys()}),"add",function(e){!g.has(e)&&g.set(e,function(e){var i,o={},a=y,u=Object.entries({start:s,delta:c}).map(function(s){var u,c=(0,n.A)(s,2),d=c[0],l=c[1];return function(){var n=u={};k.U9.resolve(l(e)).then(function(e){n===u&&(o[d]=e,a===y&&null!=o.start&&null!=o.delta&&(i=o.start+o.delta,h(g),(null==r||t>i+p)&&b()))})}}),d=(0,n.A)(u,2),l=d[0],f=d[1],g={item:e,refresh:f,get expiry(){return i}};return l(),f(),g}(e))}),"clear",function(){m.length=0,b(),g.clear(),y={}}),"toArray",function(){return Array.from(g.keys())}),"refresh",function(){m.length=0,b();var e,n=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return _(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}(g.values());try{for(n.s();!(e=n.n()).done;)e.value.refresh()}catch(e){n.e(e)}finally{n.f()}}),"onExpiry",function(e){return v.push(e),function(){var n=v.indexOf(e);n>=0&&v.splice(n,1)}})}document.addEventListener("visibilitychange",function(){document.hidden?x=Date.now():(D+=Date.now()-(null!=x?x:0),x=null,R.forEach(function(e){var n=e.callback,t=e.startTime;return(0,e.setTimerId)(j(n,D-t)())}),R=[])});var U="minBidCacheTTL",B=1,q=null,N=[];function M(){return q}function W(e){N.push(e)}function F(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}l.$W.getConfig("ttlBuffer",function(e){"number"==typeof e.ttlBuffer?B=e.ttlBuffer:(0,o.logError)("Invalid value for ttlBuffer",e.ttlBuffer)}),l.$W.getConfig(U,function(e){q!==(q="number"==typeof(q=null==e?void 0:e[U])?q:null)&&N.forEach(function(e){return e(q)})});var L=function(){var e=P({startTime:function(e){return e.end.then(function(){return e.getAuctionEnd()})},ttl:function(e){return null==M()?null:e.end.then(function(){return 1e3*Math.max.apply(Math,[M()].concat((0,r.A)(e.getBidsReceived().map(function(e){return e.ttl}))))})}});W(function(){return e.refresh()});var t={onExpiry:e.onExpiry};function i(n){var t,r=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return F(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.getAuctionId()===n)return i}}catch(e){r.e(e)}finally{r.f()}}function a(){return e.toArray().flatMap(function(e){return e.getBidsReceived()})}return t.addWinningBid=function(e){var n=I(e.metrics);n.checkpoint("bidWon"),n.timeBetween("auctionEnd","bidWon","adserver.pending"),n.timeBetween("requestBids","bidWon","adserver.e2e");var t=i(e.auctionId);t?t.addWinningBid(e):(0,o.logWarn)("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:function(e){return e.getAuctionStatus()===Li}},getAdUnitCodes:{post:o.uniques}}).forEach(function(r){var i=(0,n.A)(r,2),o=i[0],a=i[1],s=a.name,u=void 0===s?o:s,c=a.pre,d=a.post,l=null==c?function(e){return e[u]()}:function(e){return c(e)?e[u]():[]},f=null==d?function(e){return e}:function(e){return e.filter(d)};t[o]=function(){return f(e.toArray().flatMap(l))}}),t.getAllBidsForAdUnitCode=function(e){return a().filter(function(n){return n&&n.adUnitCode===e})},t.createAuction=function(n){var t=function(e){var n=e.adUnits,t=e.adUnitCodes,r=e.callback,i=e.cbTimeout,a=e.labels,s=e.auctionId,u=e.ortb2Fragments,c=e.metrics;c=I(c);var f,p,g,v,m=n,h=a,b=t,y=s||(0,o.generateUUID)(),w=i,A=new Set,E=(0,k.v6)(),S=(0,k.v6)(),C=[],T=r,O=[],x=P({startTime:function(e){return e.responseTimestamp},ttl:function(e){return null==M()?null:1e3*Math.max(M(),e.ttl)}}),D=[],R=[],j=[];function _(){return{auctionId:y,timestamp:f,auctionEnd:p,auctionStatus:v,adUnits:m,adUnitCodes:b,labels:h,bidderRequests:O,noBids:D,bidsReceived:x.toArray(),bidsRejected:C,winningBids:R,timeout:w,metrics:c,seatNonBids:j}}function U(e){if(e?ee(d.qY.AUCTION_TIMEOUT,_()):clearTimeout(g),void 0===p){var t=[];e&&((0,o.logMessage)("Auction ".concat(y," timedOut")),(t=O.filter(function(e){return!A.has(e.bidderRequestId)}).flatMap(function(e){return e.bids})).length&&ee(d.qY.BID_TIMEOUT,t)),v=Li,p=Date.now(),c.checkpoint("auctionEnd"),c.timeBetween("requestBids","auctionEnd","requestBids.total"),c.timeBetween("callBids","auctionEnd","requestBids.callBids"),E.resolve(),ee(d.qY.AUCTION_END,_()),Xi(m,function(){try{if(null!=T){var r=x.toArray().filter(function(e){return b.includes(e.adUnitCode)}).reduce(po,{});T.apply(Hi,[r,e,y]),T=null}}catch(e){(0,o.logError)("Error executing bidsBackHandler",null,e)}finally{t.length&&rr.callTimedOutBidders(n,t,w);var i=l.$W.getConfig("userSync")||{};i.enableOverride||Mi(i.syncDelay)}})}}function B(){l.$W.resetBidder(),(0,o.logInfo)("Bids Received for Auction with id: ".concat(y),x.toArray()),v=Li,U(!1)}function q(e){A.add(e)}function N(e){var n=this;e.forEach(function(e){var n;n=e,O=O.concat(n)});var t={},r={bidRequests:e,run:function(){Vi(n),g=setTimeout(function(){return U(!0)},w),v=Fi,ee(d.qY.AUCTION_INIT,_());var r=Zi(B,n);rr.callBids(m,e,r.addBidResponse,r.adapterDone,{request:function(e,n){a(Gi,n),a(t,e),$i[e]||($i[e]={SRA:!0,origin:n}),t[e]>1&&($i[e].SRA=!1)},done:function(e){Gi[e]--,Ji[0]&&i(Ji[0])&&Ji.shift()}},w,q,u),S.resolve()}};function i(e){var n=!0,t=l.$W.getConfig("maxRequestsPerOrigin")||zi;return e.bidRequests.some(function(e){var r=1,i=void 0!==e.src&&e.src===d.RW.SRC?"s2s":e.bidderCode;return $i[i]&&(!1===$i[i].SRA&&(r=Math.min(e.bids.length,t)),Gi[$i[i].origin]+r>t&&(n=!1)),!n}),n&&e.run(),n}function a(e,n){void 0===e[n]?e[n]=1:e[n]++}i(r)||((0,o.logWarn)("queueing auction due to limited endpoint capacity"),Ji.push(r))}return W(function(){return x.refresh()}),Q(d.qY.SEAT_NON_BID,function(e){var n;e.auctionId===y&&(n=e.seatnonbid,j=j.concat(n))}),{addBidReceived:function(e){x.add(e)},addBidRejected:function(e){C=C.concat(e)},addNoBid:function(e){D=D.concat(e)},callBids:function(){v=Wi,f=Date.now();var e=c.measureTime("requestBids.makeRequests",function(){return rr.makeBidRequests(m,f,y,w,h,u,c)});(0,o.logInfo)("Bids Requested for Auction with id: ".concat(y),e),c.checkpoint("callBids"),e.length<1?((0,o.logWarn)("No valid bid requests returned for auction"),B()):Qi.call({dispatch:N,context:this},e)},addWinningBid:function(e){R=R.concat(e),rr.callBidWonBidder(e.adapterCode||e.bidder,e,n),e.deferBilling||rr.triggerBilling(e)},setBidTargeting:function(e){rr.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:function(){return R},getAuctionStart:function(){return f},getAuctionEnd:function(){return p},getTimeout:function(){return w},getAuctionId:function(){return y},getAuctionStatus:function(){return v},getAdUnits:function(){return m},getAdUnitCodes:function(){return b},getBidRequests:function(){return O},getBidsReceived:function(){return x.toArray()},getNoBids:function(){return D},getNonBids:function(){return j},getFPD:function(){return u},getMetrics:function(){return c},end:E.promise,requestsDone:S.promise,getProperties:_}}(n);return function(n){e.add(n)}(t),t},t.findBidByAdId=function(e){return a().find(function(n){return n.adId===e})},t.getStandardBidderAdServerTargeting=function(){return lo()[d.iD.ADSERVER_TARGETING]},t.setStatusForBids=function(e,n){var r=t.findBidByAdId(e);if(r&&(r.status=n),r&&n===d.tl.BID_TARGETING_SET){var o=i(r.auctionId);o&&o.setBidTargeting(r)}},t.getLastAuctionId=function(){var n=e.toArray();return n.length&&n[n.length-1].getAuctionId()},t.clearAllAuctions=function(){e.clear()},t.index=new c(function(){return e.toArray()}),t}(),z="eventHistoryTTL",G=null,$=P({monotonic:!0,ttl:function(){return G}});l.$W.getConfig(z,function(e){var n,t=G;e=null===(n=e)||void 0===n?void 0:n[z],t!==(G="number"==typeof e?1e3*e:null)&&$.refresh()});var J=Array.prototype.slice,H=Array.prototype.push,V=Object.values(d.qY),K=d.cA,Y=function(){var e={},n={};function t(e){return V.includes(e)}return n.has=t,n.on=function(n,r,i){if(t(n)){var a=e[n]||{que:[]};i?(a[i]=a[i]||{que:[]},a[i].que.push(r)):a.que.push(r),e[n]=a}else o.logError("Wrong event name : "+n+" Valid event names :"+V)},n.emit=function(n){!function(n,t){o.logMessage("Emitting event for: "+n);var r=t[0]||{},i=r[K[n]],a=e[n]||{que:[]},s=Object.keys(a),u=[];$.add({eventType:n,args:r,id:i,elapsedTime:o.getPerformanceNow()}),i&&s.includes(i)&&H.apply(u,a[i].que),H.apply(u,a.que),(u||[]).forEach(function(e){if(e)try{e.apply(null,t)}catch(e){o.logError("Error executing handler:","events.js",e,n)}})}(n,J.call(arguments,1))},n.off=function(n,t,r){var i=e[n];o.isEmpty(i)||o.isEmpty(i.que)&&o.isEmpty(i[r])||r&&(o.isEmpty(i[r])||o.isEmpty(i[r].que))||(r?(i[r].que||[]).forEach(function(e){var n=i[r].que;e===t&&n.splice(n.indexOf(e),1)}):(i.que||[]).forEach(function(e){var n=i.que;e===t&&n.splice(n.indexOf(e),1)}),e[n]=i)},n.get=function(){return e},n.addEvents=function(e){V=V.concat(e)},n.getEvents=function(){return $.toArray().map(function(e){return Object.assign({},e)})},n}();o._setEventEmitter(Y.emit.bind(Y));var Q=Y.on,X=Y.off,Z=(Y.get,Y.getEvents),ee=Y.emit;Y.addEvents,Y.has;var ne="accessDevice",te="syncUser",re="enrichEids",ie="fetchBids",oe="transmitEids",ae="transmitUfpd",se="transmitPreciseGeo",ue="transmitTid",ce="loadExternalScript";function de(e){var n=e;return{callBids:function(){},setBidderCode:function(e){n=e},getBidderCode:function(){return n}}}function le(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.src,r=void 0===t?"client":t,i=n.bidder,a=void 0===i?"":i,s=n.bidId,u=n.transactionId,c=n.adUnitId,d=n.auctionId,l=r,f=e||0;Object.assign(this,{bidderCode:a,width:0,height:0,statusMessage:function(){switch(f){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),adId:(0,o.getUniqueIdentifierStr)(),requestId:s,transactionId:u,adUnitId:c,auctionId:d,mediaType:"banner",source:l}),this.getStatusCode=function(){return f},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,adUnitId:this.adUnitId,auctionId:this.auctionId}}}function fe(e,n){return new le(e,n)}var pe=t(29),ge=t(901);function ve(e,n,t){if("function"==typeof e?e===n:e.has(n))return arguments.length<3?n:t;throw new TypeError("Private element is not present on this object")}var me=new WeakSet;function he(e){return null==e?this.defaultScope:e}var be=new(function(){return(0,ge.A)(function e(n,t){var r,i;(0,pe.A)(this,e),function(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=me),i.add(r),this.getSettings=n,this.defaultScope=t},[{key:"get",value:function(e,n){var t=this.getOwn(e,n);return void 0===t&&(t=this.getOwn(null,n)),t}},{key:"getOwn",value:function(e,n){return e=ve(me,this,he).call(this,e),(0,a.A)(this.getSettings(),"".concat(e,".").concat(n))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter(function(n){return n!==e.defaultScope})}},{key:"settingsFor",value:function(e){return(0,o.mergeDeep)({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=ve(me,this,he).call(this,e),this.getSettings()[e]||{}}}])}())(function(){return(0,i.m)().bidderSettings||{}},d.iD.BD_SETTING_STANDARD),ye="prebid",we="bidder",Ae="userId",Ie="analytics",Ee=t(128),Se=t.n(Ee),Ce=Se()({ready:Se().SYNC|Se().ASYNC|Se().QUEUE}),Te=(0,k.v6)();Ce.ready=function(){var e=Ce.ready;return function(){try{return e.apply(Ce,arguments)}finally{Te.resolve()}}}();var Oe=Te.promise,ke=Ce.get;function xe(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;0===e.getHooks({hook:n}).length&&e.before(n,t)}var De={};function Re(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).postInstallAllowed,i=void 0!==t&&t;Ce("async",function(t){t.forEach(function(e){return n.apply(void 0,(0,r.A)(e))}),i&&(De[e]=n)},e)([])}function je(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var i=De[e];if(i)return i.apply(void 0,t);ke(e).before(function(e,n){n.push(t),e(n)})}function _e(e,n){return Object.defineProperties(n,Object.fromEntries(["before","after","getHooks","removeAll"].map(function(n){return[n,{get:function(){return e[n]}}]}))),n}var Pe="component",Ue=Pe+"Type",Be=Pe+"Name",qe="adapterCode",Ne="storageType",Me="syncType";function We(n){return function(t,r,i){var o=(0,e.A)((0,e.A)((0,e.A)({},Ue,t),Be,r),Pe,"".concat(t,".").concat(r));return t===we&&(o[qe]=n(r)),Fe(Object.assign(o,i))}}var Fe=Ce("sync",function(e){return e});function Le(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.prefixLog)("Activity control:"),t={};function r(e){return t[e]=t[e]||[]}function i(n,t,r,i){var o;try{o=r(i)}catch(r){e.logError("Exception in rule ".concat(t," for '").concat(n,"'"),r),o={allow:!1,reason:r}}return o&&Object.assign({activity:n,name:t,component:i[Pe]},o)}var a={};function s(n){var t=n.activity,r=n.name,i=n.allow,o=n.reason,s=n.component,u="".concat(r," ").concat(i?"allowed":"denied"," '").concat(t,"' for '").concat(s,"'").concat(o?":":""),c=a.hasOwnProperty(u);if(c&&clearTimeout(a[u]),a[u]=setTimeout(function(){return delete a[u]},1e3),!c){var d=[u];o&&d.push(o),(i?e.logInfo:e.logWarn).apply(e,d)}}return[function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,a=r(e),s=a.findIndex(function(e){var t=(0,n.A)(e,1)[0];return o<t}),u=[o,t,i];return a.splice(s<0?a.length:s,0,u),function(){var e=a.indexOf(u);e>=0&&a.splice(e,1)}},function(e,t){var o,a,u,c=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return Le(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Le(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}(r(e));try{for(c.s();!(u=c.n()).done;){var d=(0,n.A)(u.value,3),l=d[0],f=d[1],p=d[2];if(o!==l&&a)break;o=l;var g=i(e,f,p,t);if(g){if(!g.allow)return s(g),!1;a=g}}}catch(e){c.e(e)}finally{c.f()}return a&&s(a),!0}]}(),Ge=(0,n.A)(ze,2),$e=Ge[0],Je=Ge[1];function He(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Ve(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}var Ke="html5",Ye="cookie",Qe=[];function Xe(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.moduleName,r=n.moduleType,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isAllowed,a=void 0===i?Je:i;function s(n,i){var o=t,s=l.$W.getCurrentBidder();return s&&r===we&&rr.aliasRegistry[s]===t&&(o=s),n({valid:a(ne,ir(r,o,(0,e.A)({},Ne,i)))})}function u(e,n,t){if(!t||"function"!=typeof t)return s(e,n);Qe.push(function(){var r=s(e,n);t(r)})}function c(n){var t=n.charAt(0).toUpperCase()+n.substring(1),r=function(){return window[n]},i=function(e){return u(function(e){if(e&&e.valid)try{return!!r()}catch(e){(0,o.logError)("".concat(n," api disabled"))}return!1},Ke,e)};return(0,e.A)((0,e.A)((0,e.A)((0,e.A)((0,e.A)({},"has".concat(t),i),"".concat(n,"IsEnabled"),function(e){return u(function(e){if(e&&e.valid)try{return r().setItem("prebid.cookieTest","1"),"1"===r().getItem("prebid.cookieTest")}catch(e){}finally{try{r().removeItem("prebid.cookieTest")}catch(e){}}return!1},Ke,e)}),"setDataIn".concat(t),function(e,n,t){return u(function(t){t&&t.valid&&i()&&r().setItem(e,n)},Ke,t)}),"getDataFrom".concat(t),function(e,n){return u(function(n){return n&&n.valid&&i()?r().getItem(e):null},Ke,n)}),"removeDataFrom".concat(t),function(e,n){return u(function(n){n&&n.valid&&i()&&r().removeItem(e)},Ke,n)})}return Ve(Ve(Ve({setCookie:function(e,n,t,r,i,o){return u(function(o){if(o&&o.valid){var a=i&&""!==i?" ;domain=".concat(encodeURIComponent(i)):"",s=t&&""!==t?" ;expires=".concat(t):"",u=null!=r&&"none"==r.toLowerCase()?"; Secure":"";document.cookie="".concat(e,"=").concat(encodeURIComponent(n)).concat(s,"; path=/").concat(a).concat(r?"; SameSite=".concat(r):"").concat(u)}},Ye,o)},getCookie:function(e,n){return u(function(n){if(n&&n.valid){var t=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return t?decodeURIComponent(t[2]):null}return null},Ye,n)},cookiesAreEnabled:function(e){return u(function(e){return!(!e||!e.valid)&&(0,o.checkCookieSupport)()},Ye,e)}},c("localStorage")),c("sessionStorage")),{},{findSimilarCookies:function(e,n){return u(function(n){if(n&&n.valid){var t=[];if((0,o.hasDeviceAccess)())for(var r=document.cookie.split(";");r.length;){var i=r.pop(),a=i.indexOf("=");a=a<0?i.length:a,decodeURIComponent(i.slice(0,a).replace(/^\s+/,"")).indexOf(e)>=0&&t.push(decodeURIComponent(i.slice(a+1)))}return t}},Ye,n)}})}function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.moduleType,t=e.moduleName,r=e.bidderCode;function i(){throw new Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return r?((n&&n!==we||t)&&i(),n=we,t=r):t&&n||i(),Xe({moduleType:n,moduleName:t})}function en(e){return Xe({moduleName:e,moduleType:ye})}$e(ne,"deviceAccess config",function(){if(!(0,o.hasDeviceAccess)())return{allow:!1}}),$e(ne,"bidderSettings.*.storageAllowed",function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be;if(e[Ue]===we){var t=n.get(e[qe],"storageAllowed");if(t&&!0!==t){var r=e[Ne];t=Array.isArray(t)?t.some(function(e){return e===r}):t===r}else t=!!t;return t?void 0:{allow:t}}});var nn={syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:500};l.$W.setDefaults({userSync:(0,o.deepClone)(nn)});var tn=en("usersync"),rn=function(t){var r={},i={image:[],iframe:[]},a=new Set,s={},u={image:!0,iframe:!1},c=t.config;function d(){if(c.syncEnabled&&t.browserSupportsCookies){try{u.iframe&&f(i.iframe,function(e){var t=(0,n.A)(e,2),r=t[0],a=t[1];(0,o.logMessage)("Invoking iframe user sync for bidder: ".concat(r)),(0,o.insertUserSyncIframe)(a),function(e,n){e.image=e.image.filter(function(e){return e[0]!==n})}(i,r)}),u.image&&f(i.image,function(e){var t=(0,n.A)(e,2),r=t[0],i=t[1];(0,o.logMessage)("Invoking image pixel user sync for bidder: ".concat(r)),(0,o.triggerPixel)(i)})}catch(e){return(0,o.logError)("Error firing user syncs",e)}i={image:[],iframe:[]}}}function f(e,n){(0,o.shuffle)(e).forEach(n)}return l.$W.getConfig("userSync",function(e){if(e.userSync){var n=e.userSync.filterSettings;(0,o.isPlainObject)(n)&&(n.image||n.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}c=Object.assign(c,e.userSync)}),t.regRule(te,"userSync config",function(e){if(!c.syncEnabled)return{allow:!1,reason:"syncs are disabled"};if(e[Ue]===we){var n=e[Me],t=e[Be];if(!r.canBidderRegisterSync(n,t))return{allow:!1,reason:"".concat(n," syncs are not enabled for ").concat(t)}}}),r.registerSync=function(n,r,u){return a.has(r)?(0,o.logMessage)('already fired syncs for "'.concat(r,'", ignoring registerSync call')):c.syncEnabled&&(0,o.isArray)(i[n])?r?0!==c.syncsPerBidder&&Number(s[r])>=c.syncsPerBidder?(0,o.logWarn)('Number of user syncs exceeded for "'.concat(r,'"')):void(t.isAllowed(te,ir(we,r,(0,e.A)((0,e.A)({},Me,n),"syncUrl",u)))&&(i[n].push([r,u]),s=function(e,n){return e[n]?e[n]+=1:e[n]=1,e}(s,r))):(0,o.logWarn)("Bidder is required for registering sync"):(0,o.logWarn)('User sync type "'.concat(n,'" not supported'))},r.bidderDone=a.add.bind(a),r.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(d,Number(e));d()},r.triggerUserSyncs=function(){c.enableOverride&&r.syncUsers()},r.canBidderRegisterSync=function(e,n){return!c.filterSettings||!function(e,n){var t=c.filterSettings;if(function(e,n){if(e.all&&e[n])return(0,o.logWarn)('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(n,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var t=e.all?e.all:e[n],r=e.all?"all":n;if(!t)return!1;var i=t.filter,a=t.bidders;return i&&"include"!==i&&"exclude"!==i?((0,o.logWarn)('UserSync "filterSettings.'.concat(r,".filter\" setting '").concat(i,"' is not a valid option; use either 'include' or 'exclude'.")),!1):!!("*"===a||Array.isArray(a)&&a.length>0&&a.every(function(e){return(0,o.isStr)(e)&&"*"!==e}))||((0,o.logWarn)('Detected an invalid setup in userSync "filterSettings.'.concat(r,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1)}(t,e)){u[e]=!0;var r=t.all?t.all:t[e],i="*"===r.bidders?[n]:r.bidders;return{include:function(e,n){return!e.includes(n)},exclude:function(e,n){return e.includes(n)}}[r.filter||"include"](i,n)}return!u[e]}(e,n)},r}(Object.defineProperties({config:l.$W.getConfig("userSync"),isAllowed:Je,regRule:$e},{browserSupportsCookies:{get:function(){return!(0,o.isSafariBrowser)()&&tn.cookiesAreEnabled()}}})),on="outstream",an=new Map([["mimes",function(e){return Array.isArray(e)&&e.length>0&&e.every(function(e){return"string"==typeof e})}],["minduration",o.isInteger],["maxduration",o.isInteger],["startdelay",o.isInteger],["maxseq",o.isInteger],["poddur",o.isInteger],["protocols",o.isArrayOfNums],["w",o.isInteger],["h",o.isInteger],["podid",o.isStr],["podseq",o.isInteger],["rqddurs",o.isArrayOfNums],["placement",o.isInteger],["plcmt",o.isInteger],["linearity",o.isInteger],["skip",function(e){return[1,0].includes(e)}],["skipmin",o.isInteger],["skipafter",o.isInteger],["sequence",o.isInteger],["slotinpod",o.isInteger],["mincpmpersec",o.isNumber],["battr",o.isArrayOfNums],["maxextended",o.isInteger],["minbitrate",o.isInteger],["maxbitrate",o.isInteger],["boxingallowed",o.isInteger],["playbackmethod",o.isArrayOfNums],["playbackend",o.isInteger],["delivery",o.isArrayOfNums],["pos",o.isInteger],["api",o.isArrayOfNums],["companiontype",o.isArrayOfNums],["poddedupe",o.isArrayOfNums]]),sn=Ce("sync",function(e,n,t,r,i){if(t&&(i||r!==on)){var a=l.$W.getConfig("cache")||{},s=a.url,u=a.useLocal;return s||u||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):((0,o.logError)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling either prebid cache with vslypbjs.setConfig({ cache: {url: "..."} });\n        or local cache with vslypbjs.setConfig({ cache: { useLocal: true }});\n      '),!1)}return!(r===on&&!i&&!(e.renderer||n&&n.renderer||t.renderer))},"checkVideoBidSetup"),un=["cpm","ttl","creativeId","netRevenue","currency"],cn=["auctionId","transactionId"];function dn(e){var n=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function t(e){var t=fn(e);rr.registerBidAdapter(t,e.code,n)}t(e),Array.isArray(e.aliases)&&e.aliases.forEach(function(n){var r,i,a=n;(0,o.isPlainObject)(n)&&(a=n.code,r=n.gvlid,i=n.skipPbsAliasing),rr.aliasRegistry[a]=e.code,t(Object.assign({},e,{code:a,gvlid:r,skipPbsAliasing:i}))})}var ln=(0,o.memoize)(function(e){var t=e.bidderCode;if(Je(ue,ir(we,t)))return{bidRequest:function(e){return e},bidderRequest:function(e){return e}};function r(e,n,t){return cn.includes(n)?null:Reflect.get(e,n,t)}function i(e,t){var r=new Proxy(e,t);return Object.entries(e).filter(function(e){var t=(0,n.A)(e,2);return t[0],"function"==typeof t[1]}).forEach(function(t){var i=(0,n.A)(t,2),o=i[0],a=i[1];return r[o]=a.bind(e)}),r}var a=(0,o.memoize)(function(e){return i(e,{get:r})},function(e){return e.bidId});return{bidRequest:a,bidderRequest:function(e){return i(e,{get:function(n,t,i){return"bids"===t?e.bids.map(a):r(n,t,i)}})}}});function fn(e){return Object.assign(new de(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:n,callBids:function(t,r,i,a,s,u){if(Array.isArray(t.bids)){var c=ln(t),f={},p=[],g=bn(t).measureTime("validate",function(){return t.bids.filter(function(n){return t=c.bidRequest(n),!!e.isBidRequestValid(t)||((0,o.logWarn)("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(t))),!1);var t})});if(0!==g.length){var v={};g.forEach(function(e){v[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)}),gn(e,g,t,a,u,{onRequest:function(e){return ee(d.qY.BEFORE_BIDDER_HTTP,t,e)},onResponse:function(n){s(e.code),p.push(n)},onPaapi:function(e){var n=v[e.bidId];n?mn(n,e):(0,o.logWarn)("Received fledge auction configuration for an unknown bidId",e)},onError:function(n,r){r.timedOut||s(e.code),rr.callBidderError(e.code,r,t),ee(d.qY.BIDDER_ERROR,{error:r,bidderRequest:t}),(0,o.logError)("Server call for ".concat(e.code," failed: ").concat(n," ").concat(r.status,". Continuing without bids."),{bidRequests:g})},onBid:function(n){var t,i,a,s,u=v[n.requestId];if(u){var c;if(n.adapterCode=u.bidder,t=n.bidderCode,i=u.bidder,a=be.get(i,"allowAlternateBidderCodes")||!1,s=be.get(i,"allowedAlternateBidderCodes"),t&&i&&i!==t&&(s=(0,o.isArray)(s)?s.map(function(e){return e.trim().toLowerCase()}).filter(function(e){return!!e}).filter(o.uniques):s,!a||(0,o.isArray)(s)&&"*"!==s[0]&&!s.includes(t)))return(0,o.logWarn)("".concat(n.bidderCode," is not a registered partner or known bidder of ").concat(u.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.")),void r.reject(u.adUnitCode,n,d.Tf.BIDDER_DISALLOWED);n.originalCpm=n.cpm,n.originalCurrency=n.currency,n.meta=n.meta||Object.assign({},n[u.bidder]),n.deferBilling=u.deferBilling,n.deferRendering=n.deferBilling&&(null!==(c=n.deferRendering)&&void 0!==c?c:"function"!=typeof e.onBidBillable);var l=Object.assign(fe(d.XQ.GOOD,u),n,(0,o.pick)(u,cn));!function(e,n){var t=I(n.metrics);t.checkpoint("addBidResponse"),f[e]=!0,t.measureTime("addBidResponse.validate",function(){return hn(e,n)})?r(e,n):r.reject(e,n,d.Tf.INVALID)}(u.adUnitCode,l)}else(0,o.logWarn)("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(n.requestId,". Ignoring.")),r.reject(null,n,d.Tf.INVALID_REQUEST_ID)},onCompletion:m})}else m()}function m(){i(),l.$W.runWithBidder(e.code,function(){ee(d.qY.BIDDER_DONE,t),n(p,t.gdprConsent,t.uspConsent,t.gppConsent)})}}});function n(n,t,r,i){vn(e,n,t,r,i)}}var pn=["bids","paapi"],gn=Ce("async",function(e,n,t,r,i,a){var u=a.onRequest,c=a.onResponse,l=a.onPaapi,f=a.onError,p=a.onBid,g=a.onCompletion,v=bn(t);g=v.startTiming("total").stopBefore(g);var m=ln(t),h=v.measureTime("buildRequests",function(){return e.buildRequests(n.map(m.bidRequest),m.bidderRequest(t))});if(h&&0!==h.length){Array.isArray(h)||(h=[h]);var b=(0,o.delayExecution)(g,h.length);h.forEach(function(n){var t,a=v.fork();function g(e){null!=e&&(e.metrics=a.fork().renameWith()),p(e)}var m=i(function(t,r){w();try{t=JSON.parse(t)}catch(e){}t={body:t,headers:{get:r.getResponseHeader.bind(r)}},c(t);try{t=a.measureTime("interpretResponse",function(){return e.interpretResponse(t,n)})}catch(n){return(0,o.logError)("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,n),void b()}var i,s;t&&!Object.keys(t).some(function(e){return!pn.includes(e)})?(i=t.bids,s=t.paapi):i=t,(0,o.isArray)(s)&&s.forEach(l),i&&((0,o.isArray)(i)?i.forEach(g):g(i)),b()}),h=i(function(e,n){w(),f(e,n),b()});u(n);var y,w=a.startTiming("net"),A="TRUE"===(0,o.getParameterByName)(d.M).toUpperCase()||(0,o.debugTurnedOn)();function I(t){var r,i=n.options;return Object.assign(t,i,{browsingTopics:!(null!=i&&i.hasOwnProperty("browsingTopics")&&!i.browsingTopics)&&(null===(r=be.get(e.code,"topicsHeader"))||void 0===r||r)&&Je(ae,ir(we,e.code)),suppressTopicsEnrollmentWarning:null!=i&&i.hasOwnProperty("suppressTopicsEnrollmentWarning")?i.suppressTopicsEnrollmentWarning:!A})}switch(n.method){case"GET":r("".concat(n.url).concat((y=n.data)?"?".concat("object"===(0,s.A)(y)?(0,o.parseQueryStringParameters)(y):y):""),{success:m,error:h},void 0,I({method:"GET",withCredentials:!0}));break;case"POST":var E=null===(t=n.options)||void 0===t?void 0:t.endpointCompression,S=function(e){var n=e.url,t=e.payload;r(n,{success:m,error:h},t,I({method:"POST",contentType:"text/plain",withCredentials:!0}))};E&&A&&(0,o.logWarn)("Skipping GZIP compression for ".concat(e.code," as debug mode is enabled")),E&&!A&&(0,o.isGzipCompressionSupported)()?(0,o.compressDataWithGZip)(n.data).then(function(e){var t=new URL(n.url,window.location.origin);t.searchParams.has("gzip")||t.searchParams.set("gzip","1"),S({url:t.href,payload:e})}):S({url:n.url,payload:"string"==typeof n.data?n.data:JSON.stringify(n.data)});break;default:(0,o.logWarn)("Skipping invalid request from ".concat(e.code,". Request type ").concat(n.type," must be GET or POST")),b()}})}else g()},"processBidderRequests"),vn=Ce("async",function(e,n,t,r,i){var o=l.$W.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(o||!rr.aliasRegistry[e.code])){var a=e.getUserSyncs({iframeEnabled:rn.canBidderRegisterSync("iframe",e.code),pixelEnabled:rn.canBidderRegisterSync("image",e.code)},n,t,r,i);a&&(Array.isArray(a)||(a=[a]),a.forEach(function(n){rn.registerSync(n.type,e.code,n.url)}),rn.bidderDone(e.code))}},"registerSyncs"),mn=Ce("sync",function(e,n){},"addPaapiConfig");function hn(e,t){var r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,a=void 0===i?L.index:i;function s(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}return e?t?(r=Object.keys(t),un.every(function(e){return r.includes(e)&&![void 0,null].includes(t[e])})?"native"!==t.mediaType||function(e){var n,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,r=(void 0===t?L.index:t).getAdUnit(e);if(!r)return!1;var i=r.nativeOrtbRequest;return function(e,n){var t;if(null==e||null===(t=e.link)||void 0===t||!t.url)return(0,o.logError)("native response doesn't have 'link' property. Ortb response: ",e),!1;var r=n.assets.filter(function(e){return 1===e.required}).map(function(e){return e.id}),i=e.assets.map(function(e){return e.id}),a=r.every(function(e){return i.includes(e)});return a||(0,o.logError)("didn't receive a bid with all required assets. Required ids: ".concat(r,", but received ids in response: ").concat(i)),a}((null===(n=e.native)||void 0===n?void 0:n.ortb)||Si(e.native,i),i)}(t,{index:a})?"video"!==t.mediaType||function(e){var n,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,r=void 0===t?L.index:t,i=null===(n=r.getMediaTypes(e))||void 0===n?void 0:n.video,o=i&&(null==i?void 0:i.context),a=i&&(null==i?void 0:i.useCacheKey),s=r.getAdUnit(e);return sn(e,s,i,o,a)}(t,{index:a})?!("banner"===t.mediaType&&!function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===r?L.index:r;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;if(null!=t.wratio&&null!=t.hratio)return t.wratio=parseInt(t.wratio,10),t.hratio=parseInt(t.hratio,10),!0;var a=i.getBidRequest(t),s=i.getMediaTypes(t),u=a&&a.sizes||s&&s.banner&&s.banner.sizes,c=(0,o.parseSizesInput)(u);if(1===c.length){var d=c[0].split("x"),l=(0,n.A)(d,2),f=l[0],p=l[1];return t.width=parseInt(f,10),t.height=parseInt(p,10),!0}return!1}(e,t,{index:a})&&((0,o.logError)(s("Banner bids require a width and height")),1)):((0,o.logError)(s("Video bid does not have required vastUrl or renderer property")),!1):((0,o.logError)(s("Native bid missing some required properties.")),!1):((0,o.logError)(s("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1)):((0,o.logWarn)("Some adapter tried to add an undefined bid for ".concat(e,".")),!1):((0,o.logWarn)("No adUnitCode was supplied to addBidResponse."),!1)}function bn(e){return I(e.metrics).renameWith(function(n){return["adapter.client.".concat(n),"adapters.client.".concat(e.bidderCode,".").concat(n)]})}var yn={fetch:window.fetch.bind(window),makeRequest:function(e,n){return new Request(e,n)},timeout:function(e,n){var t=new AbortController,r=setTimeout(function(){t.abort(),(0,o.logError)("Request timeout after ".concat(e,"ms"),n),r=null},e);return{signal:t.signal,done:function(){r&&clearTimeout(r)}}}},wn="GET",An="Content-Type";function In(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.request,r=n.done,i=function(n,t){var r,i,o;null==e||null!=(null===(r=t)||void 0===r?void 0:r.signal)||l.$W.getConfig("disableAjaxTimeout")||(o=yn.timeout(e,n),t=Object.assign({signal:o.signal},t));var a=yn.fetch(n,t);return null!=(null===(i=o)||void 0===i?void 0:i.done)&&(a=a.finally(o.done)),a};return null==t&&null==r||(i=function(e){return function(n,i){var o=new URL(null==(null==n?void 0:n.url)?n:n.url,document.location).origin,a=e(n,i);return t&&t(o),r&&(a=a.finally(function(){return r(o)})),a}}(i)),i}function En(e,n){var t=e.status,r=e.statusText,i=void 0===r?"":r,a=e.headers,s=e.url,u=0;function c(e){if(0===u)try{var t;u=(new DOMParser).parseFromString(n,null==a||null===(t=a.get(An))||void 0===t||null===(t=t.split(";"))||void 0===t?void 0:t[0])}catch(n){u=null,e&&e(n)}return u}return{readyState:XMLHttpRequest.DONE,status:t,statusText:i,responseText:n,response:n,responseType:"",responseURL:s,get responseXML(){return c(o.logError)},getResponseHeader:function(e){return null!=a&&a.has(e)?a.get(e):null},toJSON:function(){return Object.assign({responseXML:c()},this)},timedOut:!1}}function Sn(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=In(arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,{request:e.request,done:e.done});return function(e,r,i){!function(e,t){var r="object"===(0,s.A)(t)&&null!=t?t:{success:"function"==typeof t?t:function(){return null},error:function(e,n){return(0,o.logError)("Network error",e,n)}},i=r.success,a=r.error;e.then(function(e){return e.text().then(function(n){return[e,n]})}).then(function(e){var t=(0,n.A)(e,2),r=t[0],o=t[1],s=En(r,o);r.ok||304===r.status?i(o,s):a(r.statusText,s)},function(e){return a("",Object.assign(En({status:0},""),{reason:e,timedOut:"AbortError"===(null==e?void 0:e.name)}))})}(t(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.method||(n?"POST":wn);if(r===wn&&n){var i=(0,o.parseUrl)(e,t);Object.assign(i.search,n),e=(0,o.buildUrl)(i)}var a=new Headers(t.customHeaders);a.set(An,t.contentType||"text/plain");var s={method:r,headers:a};return r!==wn&&n&&(s.body=n),t.withCredentials&&(s.credentials="include"),isSecureContext&&(["browsingTopics","adAuctionHeaders"].forEach(function(e){t[e]&&(s[e]=!0)}),null!=t.suppressTopicsEnrollmentWarning&&(s.suppressTopicsEnrollmentWarning=t.suppressTopicsEnrollmentWarning)),t.keepalive&&(s.keepalive=!0),yn.makeRequest(e,s)}(e,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})),r)}}var Cn=Sn(),Tn=In(),On={};function kn(e,n,t){var r=function(e,n){var t=On[e]=On[e]||{bidders:{}};return n?t.bidders[n]=t.bidders[n]||{}:t}(e,t);return r[n]=(r[n]||0)+1,r[n]}function xn(e){return kn(e,"auctionsCounter")}function Dn(e){var n;return(null===(n=On)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.requestsCounter)||0}function Rn(e,n){var t;return(null===(t=On)||void 0===t||null===(t=t[e])||void 0===t||null===(t=t.bidders)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.requestsCounter)||0}function jn(e,n){var t;return(null===(t=On)||void 0===t||null===(t=t[e])||void 0===t||null===(t=t.bidders)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.winsCounter)||0}function _n(e){var n;return(null===(n=On)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.auctionsCounter)||0}function Pn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return e;if(/\w+:\/\//.exec(e))return e;var t=n.location.protocol;try{t=n.top.location.protocol}catch(e){}return/^\/\//.exec(e)?t+e:"".concat(t,"//").concat(e)}function Un(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.noLeadingWww,r=void 0!==t&&t,i=n.noPort,o=void 0!==i&&i;try{e=new URL(Pn(e))}catch(e){return}return e=o?e.hostname:e.host,r&&e.startsWith("www.")&&(e=e.substring(4)),e}function Bn(e){try{var n=e.querySelector("link[rel='canonical']");if(null!==n)return n.href}catch(e){}return null}var qn,Nn=function(e){var n,t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return i.top!==i?e:function(){var o=Bn(i.document),a=i.location.href;return n===o&&a===t||(n=o,t=a,r=e()),r}}((qn=window,function(){var e,n,t,r,i=[],a=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(qn),s=l.$W.getConfig("maxNestedIframes"),u=!1,c=0,d=!1,f=!1,p=!1;do{var g=e,v=f,m=void 0,h=!1,b=null;f=!1,e=e?e.parent:qn;try{m=e.location.href||null}catch(e){h=!0}if(h)if(v){var y=g.context;try{n=b=y.sourceUrl,p=!0,d=!0,e===qn.top&&(u=!0),y.canonicalUrl&&(t=y.canonicalUrl)}catch(e){}}else{(0,o.logWarn)("Trying to access cross domain iframe. Continuing without referrer and location");try{var w=g.document.referrer;w&&(b=w,e===qn.top&&(u=!0))}catch(e){}!b&&a&&a[c-1]&&(b=a[c-1],e===qn.top&&(p=!0)),b&&!d&&(n=b)}else{if(m&&(n=b=m,d=!1,e===qn.top)){u=!0;var A=Bn(e.document);A&&(t=A)}e.context&&e.context.sourceUrl&&(f=!0)}i.push(b),c++}while(e!==qn.top&&c<s);i.reverse();try{r=qn.top.document.referrer}catch(e){}var I=u||p?n:null,E=l.$W.getConfig("pageUrl")||t||null,S=l.$W.getConfig("pageUrl")||I||Pn(E,qn);return I&&I.indexOf("?")>-1&&-1===S.indexOf("?")&&(S="".concat(S).concat(I.substring(I.indexOf("?")))),{reachedTop:u,isAmp:d,numIframes:c-1,stack:i,topmostLocation:n||null,location:I,canonicalUrl:E,page:S,domain:Un(S)||null,ref:r||null,legacy:{reachedTop:u,isAmp:d,numIframes:c-1,stack:i,referer:n||null,canonicalUrl:E}}}));function Mn(e){return Mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mn(e)}function Wn(e,n){return Wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Wn(e,n)}function Fn(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Wn(e,n)}function Ln(e,n,t){return n=Mn(n),function(e,n){if(n&&("object"==(0,s.A)(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zn()?Reflect.construct(n,t||[],Mn(e).constructor):n.apply(e,t))}function zn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(zn=function(){return!!e})()}function Gn(e,n,t){$n(e,n),n.set(e,t)}function $n(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jn(e,n){return e.get(Vn(e,n))}function Hn(e,n,t){return e.set(Vn(e,n),t),t}function Vn(e,n,t){if("function"==typeof e?e===n:e.has(n))return arguments.length<3?n:t;throw new TypeError("Private element is not present on this object")}var Kn=Object.freeze({}),Yn=new WeakMap,Qn=new WeakMap,Xn=new WeakMap,Zn=new WeakMap,et=new WeakMap,nt=new WeakMap,tt=new WeakSet,rt=function(){return(0,ge.A)(function n(){var t;(0,pe.A)(this,n),$n(this,t=tt),t.add(this),Gn(this,Yn,void 0),Gn(this,Qn,void 0),Gn(this,Xn,void 0),Gn(this,Zn,void 0),Gn(this,et,!0),Gn(this,nt,void 0),(0,e.A)(this,"generatedTime",void 0),(0,e.A)(this,"hashFields",void 0),this.reset()},[{key:"reset",value:function(){Hn(Xn,this,(0,k.v6)()),Hn(Yn,this,!1),Hn(Qn,this,null),Hn(Zn,this,!1),this.generatedTime=null}},{key:"enable",value:function(){Hn(Yn,this,!0)}},{key:"enabled",get:function(){return Jn(Yn,this)}},{key:"ready",get:function(){return Jn(Zn,this)}},{key:"promise",get:function(){return Jn(Zn,this)?k.U9.resolve(Jn(Qn,this)):(Jn(Yn,this)||Vn(tt,this,it).call(this,null),Jn(Xn,this).promise)}},{key:"setConsentData",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.timestamp)();this.generatedTime=n,Hn(et,this,!0),Vn(tt,this,it).call(this,e)}},{key:"getConsentData",value:function(){return Jn(Qn,this)}},{key:"hash",get:function(){var e=this;return Jn(et,this)&&(Hn(nt,this,(0,o.cyrb53Hash)(JSON.stringify(Jn(Qn,this)&&this.hashFields?this.hashFields.map(function(n){return Jn(Qn,e)[n]}):Jn(Qn,this)))),Hn(et,this,!1)),Jn(nt,this)}}])}();function it(e){Hn(Zn,this,!0),Hn(Qn,this,e),Jn(Xn,this).resolve(e)}var ot,at,st,ut=function(e){function n(){return(0,pe.A)(this,n),Ln(this,n,arguments)}return Fn(n,e),(0,ge.A)(n,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}])}(rt),ct=function(n){function t(){var n;(0,pe.A)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Ln(this,t,[].concat(i)),(0,e.A)(n,"hashFields",["gdprApplies","consentString"]),n}return Fn(t,n),(0,ge.A)(t,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:(0,o.isStr)(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}])}(rt),dt=function(n){function t(){var n;(0,pe.A)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Ln(this,t,[].concat(i)),(0,e.A)(n,"hashFields",["applicableSections","gppString"]),n}return Fn(t,n),(0,ge.A)(t,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}])}(rt),lt=new ct,ft=new ut,pt=new dt,gt=function(){function e(){return!!l.$W.getConfig("coppa")}return{getCoppa:e,getConsentData:e,getConsentMeta:e,reset:function(){},get promise(){return k.U9.resolve(e())},get hash(){return e()?"1":"0"}}}(),vt=(ot={},at={},st={},{register:function(e,n,t){t&&((ot[n]=ot[n]||{})[e]=t,at.hasOwnProperty(n)?at[n]!==t&&(at[n]=st):at[n]=t)},get:function(e){var n={modules:ot[e]||{}};return at.hasOwnProperty(e)&&at[e]!==st&&(n.gvlid=at[e]),n}}),mt={gdpr:lt,usp:ft,gpp:pt,coppa:gt},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt;return e=Object.entries(e),Object.assign({get promise(){return k.U9.all(e.map(function(e){var t=(0,n.A)(e,2),r=t[0];return t[1].promise.then(function(e){return[r,e]})})).then(function(e){return Object.fromEntries(e)})},get hash(){return(0,o.cyrb53Hash)(e.map(function(e){var t=(0,n.A)(e,2);return t[0],t[1].hash}).join(":"))}},Object.fromEntries(["getConsentData","getConsentMeta","reset"].map(function(t){return[t,(r=t,function(){return Object.fromEntries(e.map(function(e){var t=(0,n.A)(e,2);return[t[0],t[1][r]()]}))})];var r})))}();function bt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var yt=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map(function(e){return"user.".concat(e)}).concat("device.ext.cdep"),wt=["user.eids","user.ext.eids"],At=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"],It=["device.ip"],Et=["device.ipv6"];function St(e){return Object.assign({get:function(){},run:function(e,n,t,r,i){var o=t&&t[r];if(function(e){return null!=e&&("object"!==(0,s.A)(e)||Object.keys(e).length>0)}(o)&&i()){var a=this.get(o);void 0===a?delete t[r]:t[r]=a}}},e)}function Ct(e){return e.forEach(function(e){e.paths=e.paths.map(function(e){var n=e.split("."),t=n.pop();return[n.length>0?n.join("."):null,t]})}),function(t,r){for(var i=[],o=arguments.length,s=new Array(o>2?o-2:0),u=2;u<o;u++)s[u-2]=arguments[u];var c=Tt.apply(void 0,[t].concat(s));return e.forEach(function(e){if(!1!==t[e.name]){var o,s=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return bt(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?bt(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}(e.paths);try{for(s.s();!(o=s.n()).done;){var u=(0,n.A)(o.value,2),d=u[0],l=u[1],f=null==d?r:(0,a.A)(r,d);if(i.push(e.run(r,d,f,l,c.bind(null,e))),!1===t[e.name])return}}catch(e){s.e(e)}finally{s.f()}}}),i.filter(function(e){return null!=e})}}function Tt(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return function(n){return e.hasOwnProperty(n.name)||(e[n.name]=!!n.applies.apply(n,t)),e[n.name]}}function Ot(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;return function(t){return!n(e,t)}}var kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,n=Ct(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je;return[{name:ae,paths:yt,applies:Ot(ae,e)},{name:oe,paths:wt,applies:Ot(oe,e)},{name:se,paths:At,applies:Ot(se,e),get:function(e){return Math.round(100*(e+Number.EPSILON))/100}},{name:se,paths:It,applies:Ot(se,e),get:function(e){return function(e){if(!e)return null;var n=e.split(".").map(Number);if(4!=n.length)return null;for(var t=[],r=0;r<4;r++){var i=Math.max(0,Math.min(8,24-8*r));t.push(255<<8-i&255)}return n.map(function(e,n){return e&t[n]}).join(".")}(e)}},{name:se,paths:Et,applies:Ot(se,e),get:function(e){return function(e){if(!e)return null;var n=e.split(":").map(function(e){return parseInt(e,16)});for(n=n.map(function(e){return isNaN(e)?0:e});n.length<8;)n.push(0);if(8!=n.length)return null;for(var t=[],r=0;r<8;r++){var i=Math.max(0,Math.min(16,64-16*r));t.push(65535<<16-i&65535)}return n.map(function(e,n){return e&t[n]}).map(function(e){return e.toString(16)}).join(":")}(e)}},{name:ue,paths:["source.tid"],applies:Ot(ue,e)}].map(St)}(e)),t=Ct(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je;return[{name:oe,paths:["userId","userIdAsEids"],applies:Ot(oe,e)},{name:ue,paths:["ortb2Imp.ext.tid"],applies:Ot(ue,e)}].map(St)}(e));return function(e){var r={};return{ortb2:function(t){return n(r,t,e),t},bidRequest:function(n){return t(r,n,e),n}}}}();$e(ue,"enableTIDs config",function(){if(!l.$W.getConfig("enableTIDs"))return{allow:!1,reason:"TIDs are disabled"}});var xt=1,Dt=2,Rt=1,jt=500;function _t(e){return(null!=e?e:[]).reduce(function(e,n){var t,r,i=n.event,o=n.method,a=n.url,s=e[i]=null!==(t=e[i])&&void 0!==t?t:{};return(s[o]=null!==(r=s[o])&&void 0!==r?r:[]).push(a),e},{})}function Pt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Ut(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}var Bt="pbsBidAdapter",qt="client",Nt="server",Mt={isAllowed:Je,redact:kt},Wt={},Ft=Wt.bidderRegistry={},Lt=Wt.aliasRegistry={},zt=[];l.$W.getConfig("s2sConfig",function(e){e&&e.s2sConfig&&(zt=(0,o.isArray)(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])});var Gt={},$t=We(function(e){return Wt.resolveAlias(e)});function Jt(e){var n;return null!==(n=e.configName)&&void 0!==n?n:e.name}function Ht(n){return $t(ye,Bt,(0,e.A)({},"configName",Jt(n)))}var Vt=Ce("sync",function(e){var n=e.bidderCode,t=e.auctionId,r=e.bidderRequestId,i=e.adUnits,a=e.src,s=e.metrics;return i.reduce(function(e,i){var u=i.bids.filter(function(e){return e.bidder===n});return null==n&&0===u.length&&null!=i.s2sBid&&u.push({bidder:null}),e.push(u.reduce(function(e,u){var c,d,l=null==(u=Object.assign({},u,{ortb2Imp:(0,o.mergeDeep)({},i.ortb2Imp,u.ortb2Imp)},(0,o.getDefinedParams)(i,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?i.mediaTypes:u.mediaTypes;return(0,o.isValidMediaTypes)(l)?u=Object.assign({},u,{mediaTypes:l}):(0,o.logError)("mediaTypes is not correctly configured for adunit ".concat(i.code)),"client"===a&&function(e,n){kn(e,"requestsCounter",n)}(i.code,n),e.push(Object.assign({},u,{adUnitCode:i.code,transactionId:i.transactionId,adUnitId:i.adUnitId,sizes:(null==l||null===(c=l.banner)||void 0===c?void 0:c.sizes)||(null==l||null===(d=l.video)||void 0===d?void 0:d.playerSize)||[],bidId:u.bid_id||(0,o.getUniqueIdentifierStr)(),bidderRequestId:r,auctionId:t,src:a,metrics:s,auctionsCount:_n(i.code),bidRequestsCount:Dn(i.code),bidderRequestsCount:Rn(i.code,u.bidder),bidderWinsCount:jn(i.code,u.bidder),deferBilling:!!i.deferBilling})),e},[])),e},[]).reduce(o.flatten,[]).filter(function(e){return""!==e})},"getBids"),Kt=Ce("sync",function(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders;if(null==n)return e;var r=(void 0===t?Qt:t)(n);return e.filter(function(e){if(!r.has(e.bidder))return!1;if(null==e.s2sConfigName)return!0;var t=Jt(n);return(Array.isArray(e.s2sConfigName)?e.s2sConfigName:[e.s2sConfigName]).includes(t)})},"filterBidsForAdUnit"),Yt=Ce("sync",function(e,n){return e},"setupAdUnitMediaTypes");function Qt(e){(0,o.isArray)(e)||(e=[e]);var n=new Set([null]);return e.filter(function(e){return e&&e.enabled}).flatMap(function(e){return e.bidders}).forEach(function(e){return n.add(e)}),n}var Xt,Zt=Ce("sync",function(n,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders,i=(void 0===r?Qt:r)(t);return(0,o.getBidderCodes)(n).reduce(function(e,n){return e[i.has(n)?Nt:qt].push(n),e},(0,e.A)((0,e.A)({},qt,[]),Nt,[]))},"partitionBidders");function er(e,n){var t=Ft[e],r=(null==t?void 0:t.getSpec)&&t.getSpec();if(r&&r[n]&&"function"==typeof r[n])return[r,r[n]]}function nr(e,n,t,r){try{(0,o.logInfo)("Invoking ".concat(e,".").concat(n));for(var i=arguments.length,a=new Array(i>4?i-4:0),s=4;s<i;s++)a[s-4]=arguments[s];l.$W.runWithBidder(e,r.bind.apply(r,[t].concat(a)))}catch(t){(0,o.logWarn)("Error calling ".concat(n," of ").concat(e))}}function tr(e,n,t){if((null==t?void 0:t.source)!==d.RW.SRC){var i=er(e,n);null!=i&&nr.apply(void 0,[e,n].concat((0,r.A)(i),[t]))}}Wt.makeBidRequests=Ce("sync",function(e,n,t,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=arguments.length>6?arguments[6]:void 0;u=I(u),ee(d.qY.BEFORE_REQUEST_BIDS,e),function(e){e.forEach(function(e){var n,t=e.nativeParams||(null==e||null===(n=e.mediaTypes)||void 0===n?void 0:n.native);t&&(e.nativeParams=function(e){if(e&&e.type&&(n=e.type,!(!n||!Object.keys(vi).includes(n))||((0,o.logError)("".concat(n," nativeParam is not supported")),!1))&&(e=vi[e.type]),!e||!e.ortb||function(e){var n=e.assets;if(!Array.isArray(n)||0===n.length)return(0,o.logError)("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",n),!1;var t=n.map(function(e){return e.id});return n.length!==new Set(t).size||t.some(function(e){return e!==parseInt(e,10)})?((0,o.logError)("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?((0,o.logError)("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):n.every(function(e){return function(e){if(!(0,o.isPlainObject)(e))return(0,o.logError)("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!(0,o.isNumber)(e.img.w)&&!(0,o.isNumber)(e.img.wmin))return(0,o.logError)("for img asset there must be 'w' or 'wmin' property"),!1;if(!(0,o.isNumber)(e.img.h)&&!(0,o.isNumber)(e.img.hmin))return(0,o.logError)("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!(0,o.isNumber)(e.title.len))return(0,o.logError)("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!(0,o.isNumber)(e.data.type))return(0,o.logError)("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&(0,o.isNumber)(e.video.minduration)&&(0,o.isNumber)(e.video.maxduration)))return(0,o.logError)("video asset is not properly configured"),!1;return!0}(e)})}(e.ortb))return e;var n}(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||function(e){if(e||(0,o.isPlainObject)(e)){var n={ver:"1.2",assets:[]};for(var t in e)if(!d._B.includes(t))if(d.x5.hasOwnProperty(t))if("privacyLink"!==t){var r=e[t],i=0;r.required&&(0,o.isBoolean)(r.required)&&(i=Number(r.required));var a={id:n.assets.length,required:i};if(t in d.h0)a.data={type:d.jO[d.h0[t]]},r.len&&(a.data.len=r.len);else if("icon"===t||"image"===t){if(a.img={type:"icon"===t?d.oA.ICON:d.oA.MAIN},r.aspect_ratios)if((0,o.isArray)(r.aspect_ratios))if(r.aspect_ratios.length){var s=r.aspect_ratios[0],u=s.min_width,c=s.min_height;(0,o.isInteger)(u)&&(0,o.isInteger)(c)?(a.img.wmin=u,a.img.hmin=c):(0,o.logError)("image.aspect_ratios min_width or min_height are invalid: ",u,c);var l=r.aspect_ratios.filter(function(e){return e.ratio_width&&e.ratio_height}).map(function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)});l.length>0&&(a.img.ext={aspectratios:l})}else(0,o.logError)("image.aspect_ratios was passed, but it's empty:",r.aspect_ratios);else(0,o.logError)("image.aspect_ratios was passed, but it's not a an array:",r.aspect_ratios);r.sizes&&(2===r.sizes.length&&(0,o.isInteger)(r.sizes[0])&&(0,o.isInteger)(r.sizes[1])?(a.img.w=r.sizes[0],a.img.h=r.sizes[1],delete a.img.hmin,delete a.img.wmin):(0,o.logError)("image.sizes was passed, but its value is not an array of integers:",r.sizes))}else"title"===t?a.title={len:r.len||140}:"ext"===t&&(a.ext=r,delete a.required);n.assets.push(a)}else n.privacy=1;else(0,o.logError)("Unrecognized native asset code: ".concat(t,". Asset will be ignored."));return n}(0,o.logError)("Native assets object is empty or not an object: ",e)}(e.nativeParams))})}(e),e.map(function(e){return e.code}).filter(o.uniques).forEach(xn),e.forEach(function(e){(0,o.isPlainObject)(e.mediaTypes)||(e.mediaTypes={}),e.bids=e.bids.filter(function(e){return!e.bidder||Mt.isAllowed(ie,$t(we,e.bidder))}),kn(e.code,"requestsCounter")}),e=Yt(e,a);var c=Zt(e,zt),f=c[qt],p=c[Nt];l.$W.getConfig("bidderSequence")===l.Ov&&(f=(0,o.shuffle)(f));var g=Nn(),v=[],m=s.global||{},h=s.bidder||{};function b(e,n){var i,a,s,u=Mt.redact(null!=n?n:$t(we,e.bidderCode)),c=(0,o.mergeDeep)({source:{tid:t}},m,h[e.bidderCode]);s=null===(a=(i=c).user)||void 0===a?void 0:a.eids,Array.isArray(s)&&s.length&&(i.user.ext=i.user.ext||{},i.user.ext.eids=[].concat((0,r.A)(i.user.ext.eids||[]),(0,r.A)(s)),delete i.user.eids);var d=Object.freeze(u.ortb2(c));return e.ortb2=d,e.bids=e.bids.map(function(e){return e.ortb2=d,u.bidRequest(e)}),e}zt.forEach(function(r){var i=Ht(r);if(r&&r.enabled&&Mt.isAllowed(ie,i)){var a=function(e,n){var t=(0,o.deepClone)(e),r=!1;return t.forEach(function(e){var t=e.bids.filter(function(e){var t;return e.module===Bt&&(null===(t=e.params)||void 0===t?void 0:t.configName)===Jt(n)});1===t.length?(e.s2sBid=t[0],r=!0,e.ortb2Imp=(0,o.mergeDeep)({},e.s2sBid.ortb2Imp,e.ortb2Imp)):t.length>1&&(0,o.logWarn)('Multiple "module" bids for the same s2s configuration; all will be ignored',t),e.bids=Kt(e.bids,n).map(function(e){return e.bid_id=(0,o.getUniqueIdentifierStr)(),e})}),{adUnits:t=t.filter(function(e){return!(n.filterBidderlessCalls&&1===e.bids.length&&null==e.bids[0].bidder||0===e.bids.length&&null==e.s2sBid)}),hasModuleBids:r}}(e,r),s=a.adUnits,c=a.hasModuleBids,l=(0,o.generateUUID)();(0===p.length&&c?[null]:p).forEach(function(e){var a=(0,o.getUniqueIdentifierStr)(),c=u.fork(),f=b({bidderCode:e,auctionId:t,bidderRequestId:a,uniquePbsTid:l,bids:Vt({bidderCode:e,auctionId:t,bidderRequestId:a,adUnits:(0,o.deepClone)(s),src:d.RW.SRC,metrics:c}),auctionStart:n,timeout:r.timeout,src:d.RW.SRC,refererInfo:g,metrics:c},i);0!==f.bids.length&&v.push(f)}),s.forEach(function(e){var n=e.bids.filter(function(e){return v.find(function(n){return n.bids.find(function(n){return n.bidId===e.bid_id})})});e.bids=n}),v.forEach(function(e){void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=s.filter(function(e){return e.bids.length>0||null!=e.s2sBid}))})}});var y=function(e){var n=(0,o.deepClone)(e);return n.forEach(function(e){e.bids=Kt(e.bids,null)}),n.filter(function(e){return 0!==e.bids.length})}(e);return f.forEach(function(e){var r=(0,o.getUniqueIdentifierStr)(),s=u.fork(),c=b({bidderCode:e,auctionId:t,bidderRequestId:r,bids:Vt({bidderCode:e,auctionId:t,bidderRequestId:r,adUnits:(0,o.deepClone)(y),labels:a,src:"client",metrics:s}),auctionStart:n,timeout:i,refererInfo:g,metrics:s}),d=Ft[e];d||(0,o.logError)("Trying to make a request for bidder that does not exist: ".concat(e)),d&&c.bids&&0!==c.bids.length&&v.push(c)}),v.forEach(function(e){lt.getConsentData()&&(e.gdprConsent=lt.getConsentData()),ft.getConsentData()&&(e.uspConsent=ft.getConsentData()),pt.getConsentData()&&(e.gppConsent=pt.getConsentData())}),v},"makeBidRequests"),Wt.callBids=function(e,t,r,i,a,s,u){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(t.length){var f=t.reduce(function(e,n){return e[Number(void 0!==n.src&&n.src===d.RW.SRC)].push(n),e},[[],[]]),p=(0,n.A)(f,2),g=p[0],v=p[1],m=[];v.forEach(function(e){for(var n=-1,t=0;t<m.length;++t)if(e.uniquePbsTid===m[t].uniquePbsTid){n=t;break}n<=-1&&m.push(e)});var h=0;zt.forEach(function(e){if(e&&m[h]&&Qt(e).has(m[h].bidderCode)){var n=Sn(s,a?{request:a.request.bind(null,"s2s"),done:a.done}:void 0),t=e.bidders,l=Ft[e.adapter],f=m[h].uniquePbsTid,p=m[h].adUnitsS2SCopy,g=v.filter(function(e){return e.uniquePbsTid===f});if(l){var b={ad_units:p,s2sConfig:e,ortb2Fragments:c,requestBidsTimeout:s};if(b.ad_units.length){var y=g.map(function(e){return e.start=(0,o.timestamp)(),function(n){n||u(e.bidderRequestId),i.apply(e,arguments)}}),w=(0,o.getBidderCodes)(b.ad_units).filter(function(e){return t.includes(e)});(0,o.logMessage)("CALLING S2S HEADER BIDDERS ==== ".concat(w.length>0?w.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),g.forEach(function(e){ee(d.qY.BID_REQUESTED,Ut(Ut({},e),{},{tid:e.auctionId}))}),l.callBids(b,v,r,function(e){return y.forEach(function(n){return n(e)})},n)}}else(0,o.logError)("missing "+e.adapter);h++}}),g.forEach(function(e){e.start=(0,o.timestamp)();var n=Ft[e.bidderCode];l.$W.runWithBidder(e.bidderCode,function(){(0,o.logMessage)("CALLING BIDDER"),ee(d.qY.BID_REQUESTED,e)});var t=Sn(s,a?{request:a.request.bind(null,e.bidderCode),done:a.done}:void 0),c=i.bind(e);try{l.$W.runWithBidder(e.bidderCode,n.callBids.bind(n,e,r,c,t,function(){return u(e.bidderRequestId)},l.$W.callbackWithBidder(e.bidderCode)))}catch(n){(0,o.logError)("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:n,bidRequest:e}),c()}})}else(0,o.logWarn)("callBids executed with no bidRequests.  Were they filtered by labels or sizing?")},Wt.videoAdapters=[],Wt.registerBidAdapter=function(e,n){var t,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).supportedMediaTypes,i=void 0===r?[]:r;e&&n?"function"==typeof e.callBids?(Ft[n]=e,vt.register(we,n,null===(t=e.getSpec)||void 0===t?void 0:t.call(e).gvlid),i.includes("video")&&Wt.videoAdapters.push(n),i.includes("native")&&pi.push(n)):(0,o.logError)("Bidder adaptor error for bidder code: "+n+"bidder must implement a callBids() function"):(0,o.logError)("bidAdapter or bidderCode not specified")},Wt.aliasBidAdapter=function(e,n,t){if(void 0===Ft[n]){var r=Ft[e];if(void 0===r){var i=[];zt.forEach(function(t){if(t.bidders&&t.bidders.length){var r=t&&t.bidders;t&&r.includes(n)?Lt[n]=e:i.push(e)}}),i.forEach(function(e){(0,o.logError)('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")})}else try{var a,s=function(e){var n=[];return Wt.videoAdapters.includes(e)&&n.push("video"),pi.includes(e)&&n.push("native"),n}(e);if(r.constructor.prototype!=Object.prototype)(a=new r.constructor).setBidderCode(n);else{var u=(t||{}).useBaseGvlid,c=void 0!==u&&u,d=r.getSpec(),l=c?d.gvlid:null==t?void 0:t.gvlid;null==l&&null!=d.gvlid&&(0,o.logWarn)("Alias '".concat(n,"' will NOT re-use the GVL ID of the original adapter ('").concat(d.code,"', gvlid: ").concat(d.gvlid,"). Functionality that requires TCF consent may not work as expected."));var f=t&&t.skipPbsAliasing;a=fn(Object.assign({},d,{code:n,gvlid:l,skipPbsAliasing:f})),Lt[n]=e}Wt.registerBidAdapter(a,n,{supportedMediaTypes:s})}catch(n){(0,o.logError)(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else(0,o.logMessage)('alias name "'+n+'" has been already specified.')},Wt.resolveAlias=function(e){for(var n,t=e;Lt[t]&&(!n||!n.has(t));)t=Lt[t],(n=n||new Set).add(t);return t},Wt.registerAnalyticsAdapter=function(e){var n=e.adapter,t=e.code,r=e.gvlid;n&&t?"function"==typeof n.enableAnalytics?(n.code=t,Gt[t]={adapter:n,gvlid:r},vt.register(Ie,t,r)):(0,o.logError)('Prebid Error: Analytics adaptor error for analytics "'.concat(t,'"\n        analytics adapter must implement an enableAnalytics() function')):(0,o.logError)("Prebid Error: analyticsAdapter or analyticsCode not specified")},Wt.enableAnalytics=function(n){(0,o.isArray)(n)||(n=[n]),n.forEach(function(n){var t=Gt[n.provider];t&&t.adapter?Mt.isAllowed("reportAnalytics",$t(Ie,n.provider,(0,e.A)({},"_config",n)))&&t.adapter.enableAnalytics(n):(0,o.logError)("Prebid Error: no analytics adapter found in registry for '".concat(n.provider,"'."))})},Wt.getBidAdapter=function(e){return Ft[e]},Wt.getAnalyticsAdapter=function(e){return Gt[e]},Wt.callTimedOutBidders=function(e,n,t){n=n.map(function(n){return n.params=(0,o.getUserConfiguredParams)(e,n.adUnitCode,n.bidder),n.timeout=t,n}),n=(0,o.groupBy)(n,"bidder"),Object.keys(n).forEach(function(e){tr(e,"onTimeout",n[e])})},Wt.callBidWonBidder=function(e,n,t){n.params=(0,o.getUserConfiguredParams)(t,n.adUnitCode,n.bidder),function(e,n){kn(e,"winsCounter",n)}(n.adUnitCode,n.bidder),tr(e,"onBidWon",n)},Wt.triggerBilling=(Xt=new WeakSet,function(e){var n;Xt.has(e)||(Xt.add(e),((null===(n=_t(e.eventtrackers)[Rt])||void 0===n?void 0:n[xt])||[]).forEach(function(e){return o.internal.triggerPixel(e)}),tr(e.bidder,"onBidBillable",e))}),Wt.callSetTargetingBidder=function(e,n){tr(e,"onSetTargeting",n)},Wt.callBidViewableBidder=function(e,n){tr(e,"onBidViewable",n)},Wt.callBidderError=function(e,n,t){tr(e,"onBidderError",{error:n,bidderRequest:t})},Wt.callAdRenderSucceededBidder=function(e,n){tr(e,"onAdRenderSucceeded",n)},Wt.callDataDeletionRequest=Ce("sync",function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a="onDataDeletionRequest";Object.keys(Ft).filter(function(e){return!Lt.hasOwnProperty(e)}).forEach(function(e){var n=er(e,a);if(null!=n){var i=L.getBidsRequested().filter(function(n){return function(e){for(var n=new Set;Lt.hasOwnProperty(e)&&!n.has(e);)n.add(e),e=Lt[e];return e}(n.bidderCode)===e});nr.apply(void 0,[e,a].concat((0,r.A)(n),[i],t))}}),Object.entries(Gt).forEach(function(e){var r,i=(0,n.A)(e,2),s=i[0],u=i[1],c=null==u||null===(r=u.adapter)||void 0===r?void 0:r[a];if("function"==typeof c)try{c.apply(u.adapter,t)}catch(e){(0,o.logError)("error calling ".concat(a," of ").concat(s),e)}})});const rr=Wt;var ir=We(function(e){return rr.resolveAlias(e)}),or=new WeakMap,ar=["debugging","outstream","aaxBlockmeter","adagio","adloox","akamaidap","arcspan","airgrid","browsi","brandmetrics","clean.io","humansecurity","confiant","contxtful","hadron","mediafilter","medianet","azerionedge","a1Media","geoedge","qortex","dynamicAdBoost","51Degrees","symitridap","wurfl","nodalsAi","anonymised","optable","justtag","tncId","ftrackId","id5"];function sr(e,n,t,r,i,a){if(Je(ce,ir(n,t)))if(t&&e){if(ar.includes(t)){i||(i=document);var s=d(i,e);if(s)return r&&"function"==typeof r&&(s.loaded?r():s.callbacks.push(r)),s.tag;var u=or.get(i)||{},c={loaded:!1,tag:null,callbacks:[]};return u[e]=c,or.set(i,u),r&&"function"==typeof r&&c.callbacks.push(r),(0,o.logWarn)("module ".concat(t," is loading external JavaScript")),function(n,t,r,i){r||(r=document);var a=r.createElement("script");a.type="text/javascript",a.async=!0;var s=d(r,e);return s&&(s.tag=a),a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,t())}:a.onload=function(){t()},a.src=n,i&&(0,o.setScriptAttributes)(a,i),(0,o.insertElement)(a,r),a}(e,function(){c.loaded=!0;try{for(var e=0;e<c.callbacks.length;e++)c.callbacks[e]()}catch(e){(0,o.logError)("Error executing callback","adloader.js:loadExternalScript",e)}},i,a)}(0,o.logError)("".concat(t," not whitelisted for loading external JavaScript"))}else(0,o.logError)("cannot load external script without url and moduleCode");function d(e,n){var t=or.get(e);return t&&t[n]?t[n]:null}}var ur=(0,i.m)(),cr="outstream";function dr(e){var n=this,t=e.url,r=e.config,i=e.id,a=e.callback,s=e.loaded,u=e.adUnitCode,c=e.renderNow;this.url=t,this.config=r,this.handlers={},this.id=i,this.renderNow=c,this.adUnitCode=u,this.loaded=s,this.cmd=[],this.push=function(e){"function"==typeof e?n.loaded?e.call():n.cmd.push(e):(0,o.logError)("Commands given to Renderer.push must be wrapped in a function")},this.callback=a||function(){n.loaded=!0,n.process()},this.render=function(){var e=this,n=arguments,r=function(){e._render?e._render.apply(e,n):(0,o.logWarn)("No render function was provided, please use .setRender on the renderer")};!function(e){var n,t=ur.adUnits.find(function(n){return n.code===e});if(!t)return!1;var r=null==t?void 0:t.renderer,i=!!(r&&r.url&&r.render),o=null==t||null===(n=t.mediaTypes)||void 0===n||null===(n=n.video)||void 0===n?void 0:n.renderer,a=!!(o&&o.url&&o.render);return!!(i&&!0!==r.backupOnly||a&&!0!==o.backupOnly)}(u)?c?r():(this.cmd.unshift(r),sr(t,ye,cr,this.callback,this.documentContext)):((0,o.logWarn)("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(u)),r())}.bind(this)}dr.install=function(e){return new dr({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode,renderNow:e.renderNow})},dr.prototype.getConfig=function(){return this.config},dr.prototype.setRender=function(e){this._render=e},dr.prototype.setEventHandlers=function(e){this.handlers=e},dr.prototype.handleVideoEvent=function(e){var n=e.id,t=e.eventName;"function"==typeof this.handlers[t]&&this.handlers[t](),(0,o.logMessage)("Prebid Renderer event for id ".concat(n," type ").concat(t))},dr.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){(0,o.logError)("Error processing Renderer command on ad unit '".concat(this.adUnitCode,"':"),e)}};var lr,fr="native",pr="video",gr="banner",vr="adpod",mr=[fr,pr,gr],hr=Ce("sync",function(e){return'(()=>{"use strict";window.render=function({ad:e,adUrl:t,width:n,height:i,instl:d},{mkFrame:r},s){if(!e&&!t)throw{reason:"noAd",message:"Missing ad markup or URL"};{if(null==i){const e=s.document?.body;[e,e?.parentElement].filter((e=>null!=e?.style)).forEach((e=>e.style.height="100%"))}const h=s.document,o={width:n??"100%",height:i??"100%"};if(t&&!e?o.src=t:o.srcdoc=e,h.body.appendChild(r(h,o)),d&&s.frameElement){const e=s.frameElement.style;e.width=n?`${n}px`:"100vw",e.height=i?`${i}px`:"100vh"}}}})();'}),br=(lr={},function(e){var n=hr(e);return lr.hasOwnProperty(n)||(lr[n]=new k.U9(function(e){var t=(0,o.createInvisibleIframe)();t.srcdoc="<script>".concat(n,"<\/script>"),t.onload=function(){return e(t.contentWindow.render)},document.body.appendChild(t)})),lr[n]});function yr(e,n){return e===n?0:e<n?-1:1}function wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(n,t){return yr(e(n),e(t))}}function Ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr;return function(n,t){return-e(n,t)||0}}function Ir(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t){for(var r=0,i=n;r<i.length;r++){var o=(0,i[r])(e,t);if(0!==o)return o}return 0}}function Er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr;return function(n,t){return e(t,n)<0?t:n}}function Sr(){return Er(Ar(arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr))}var Cr=wr(function(e){return e.cpm}),Tr=wr(function(e){return e.responseTimestamp}),Or=Sr(Ir(Cr,Ar(wr(function(e){return e.timeToRespond})))),kr=Sr(Ir(Cr,Ar(Tr))),xr=(Sr(Ir(Cr,Tr)),[]),Dr="targetingControls.allowTargetingKeys",Rr="targetingControls.addTargetingKeys",jr='Only one of "'.concat(Dr,'" or "').concat(Rr,'" can be set'),_r=Object.keys(d.xS).map(function(e){return d.xS[e]}),Pr={isActualBid:function(e){return e.getStatusCode()===d.XQ.GOOD},isBidNotExpired:function(e){return e.responseTimestamp+1e3*function(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:B)}(e)>(0,o.timestamp)()},isUnusedBid:function(e){return e&&(e.status&&![d.tl.RENDERED].includes(e.status)||!e.status)}};function Ur(e){return!Object.values(Pr).some(function(n){return!n(e)})}var Br=Ce("sync",function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.sortByHighestCpm;if(!i){var s=[],u=l.$W.getConfig("sendBidsControl.dealPrioritization"),c=(0,o.groupBy)(e,"adUnitCode");return Object.keys(c).forEach(function(e){var i=[],d=(0,o.groupBy)(c[e],"bidderCode");Object.keys(d).forEach(function(e){i.push(d[e].reduce(n))}),t?(i=u?i.sort(qr(!0)):i.sort(function(e,n){return n.cpm-e.cpm}),s.push.apply(s,(0,r.A)(i.slice(0,t)))):(i=i.sort(a),s.push.apply(s,(0,r.A)(i)))}),s}return e});function qr(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n,t){return void 0!==n.adserverTargeting.hb_deal&&void 0===t.adserverTargeting.hb_deal?-1:void 0===n.adserverTargeting.hb_deal&&void 0!==t.adserverTargeting.hb_deal?1:e?t.cpm-n.cpm:t.adserverTargeting.hb_pb-n.adserverTargeting.hb_pb}}function Nr(e,n){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return window.googletag.pubads().getSlots()})().reduce(function(e,t){var r=(0,o.isFn)(n)&&n(t);return Object.keys(e).filter((0,o.isFn)(r)?r:(0,o.isAdUnitCodeMatchingSlot)(t)).forEach(function(n){return e[n].push(t)}),e},Object.fromEntries(e.map(function(e){return[e,[]]})))}var Mr=function(t){var i={},s={};function u(e){return"string"==typeof e?[e]:(0,o.isArray)(e)?e:t.getAdUnitCodes()||[]}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.getBidsReceived().reduce(function(e,n){var t,r=l.$W.getConfig("useBidCache"),i=l.$W.getConfig("bidCacheFilterFunction"),o=s[n.adUnitCode]===n.auctionId,a=!(r&&!o&&"function"==typeof i&&!i(n));return(r||o)&&a&&(null==n||null===(t=n.video)||void 0===t?void 0:t.context)!==vr&&Ur(n)&&(n.latestTargetedAuctionId=s[n.adUnitCode],e.push(n)),e},[]);return Br(r,e,void 0,void 0,void 0,n)}function f(n,t){var o=i.getWinningBids(t,n),a=p();return o=o.map(function(n){return(0,e.A)({},n.adUnitCode,Object.keys(n.adserverTargeting).filter(function(e){return void 0===n.sendStandardTargeting||n.sendStandardTargeting||-1===a.indexOf(e)}).reduce(function(t,i){var o=[n.adserverTargeting[i]],a=(0,e.A)({},i.substring(0,20),o);if(i===d.xS.DEAL){var s="".concat(i,"_").concat(n.bidderCode).substring(0,20),u=(0,e.A)({},s,o);return[].concat((0,r.A)(t),[a,u])}return[].concat((0,r.A)(t),[a])},[]))}),o}function p(){return t.getStandardBidderAdServerTargeting().map(function(e){return e.key}).concat(_r).filter(o.uniques)}return i.setLatestAuctionForAdUnit=function(e,n){s[e]=n},i.resetPresetTargeting=function(e,n){if((0,o.isGptPubadsDefined)()){var t=u(e);Object.values(Nr(t,n)).forEach(function(e){e.forEach(function(e){!function(e){xr.forEach(function(n){e.getTargeting(n)&&e.clearTargeting(n)})}(e)})})}},i.resetPresetTargetingAST=function(e){u(e).forEach(function(e){var n=window.apntag.getTag(e);if(n&&n.keywords){var t=Object.keys(n.keywords),r={};t.forEach(function(e){xr.includes(e.toLowerCase())||(r[e]=n.keywords[e])}),window.apntag.modifyTag(e,{keywords:r})}})},i.getAllTargeting=function(n,i,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Or,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.sortByHighestCpm;a||(a=c(s,g));var v=u(n),m=l.$W.getConfig("enableSendAllBids"),h=l.$W.getConfig("sendBidsControl.bidLimit"),b=m&&(i||h)||0,y=function(e,n){var t=[],r={},i=l.$W.getConfig("targetingControls.alwaysIncludeDeals");return n.forEach(function(n){var a,s=e.includes(n.adUnitCode),u=!0===be.get(n.bidderCode,"allowZeroCpmBids")?n.cpm>=0:n.cpm>0,c=i&&n.dealId;s&&(c||u)&&(t.push(n),Object.keys(n.adserverTargeting).filter((a=p(),a=a.concat(gi),function(e){return-1===a.indexOf(e)})).forEach(function(e){var t=e.substring(0,20),i=r[n.adUnitCode]||{},a=[n.adserverTargeting[e]];i[t]?i[t]=i[t].concat(a).filter(o.uniques):i[t]=a,r[n.adUnitCode]=i}))}),{filteredBids:t,customKeysByUnit:r}}(v,a),w=y.customKeysByUnit,A=y.filteredBids,I=function(n,i,a){var s,u,c=!1!==l.$W.getConfig("targetingControls.allBidsCustomTargeting"),p=f(n,a).concat((s=n,u=l.$W.getConfig("targetingControls.alwaysIncludeDeals"),function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=_r.concat(gi),o=l.$W.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),a=o?o.map(function(e){return d.xS[e]}):i;return n.reduce(function(n,o){if(t||r&&o.dealId){var s=function(n,t){return t.reduce(function(t,r){return n.adserverTargeting[r]&&t.push((0,e.A)({},"".concat(r,"_").concat(n.bidderCode).substring(0,20),[n.adserverTargeting[r]])),t},[])}(o,i.filter(function(e){return void 0!==o.adserverTargeting[e]&&(r||-1!==a.indexOf(e))}));s&&n.push((0,e.A)({},o.adUnitCode,s))}return n},[])}(s,l.$W.getConfig("enableSendAllBids"),u))).concat(function(n){function r(e){return null==e?void 0:e[d.iD.ADSERVER_TARGETING]}return t.getAdUnits().filter(function(e){return n.includes(e.code)&&r(e)}).reduce(function(n,t){var i=function(n){var t=r(n);return Object.keys(t).map(function(n){return(0,o.isStr)(t[n])&&(t[n]=t[n].split(",").map(function(e){return e.trim()})),(0,o.isArray)(t[n])||(t[n]=[t[n]]),(0,e.A)({},n,t[n])})}(t);return i&&n.push((0,e.A)({},t.code,i)),n},[])}(a));return c&&p.push.apply(p,(0,r.A)(function(n,t){return n.reduce(function(n,r){var i=Object.assign({},r),o=t[i.adUnitCode],a=[];return o&&Object.keys(o).forEach(function(n){n&&o[n]&&a.push((0,e.A)({},n,o[n]))}),n.push((0,e.A)({},i.adUnitCode,a)),n},[])}(n,i))),p.forEach(function(e){!function(e){Object.keys(e).forEach(function(n){e[n].forEach(function(e){var n=Object.keys(e);-1===xr.indexOf(n[0])&&(xr=n.concat(xr))})})}(e)}),p}(Br(A,s,b,void 0,g),w,v),E=Object.keys(Object.assign({},d.Zh,d.x5)),S=l.$W.getConfig(Dr),C=l.$W.getConfig(Rr);if(null!=C&&null!=S)throw new Error(jr);S=null!=C?E.concat(C):S||E,Array.isArray(S)&&S.length>0&&(I=function(e,n){var t=Object.assign({},d.xS,d.x5),r=Object.keys(t),i={};(0,o.logInfo)("allowTargetingKeys - allowed keys [ ".concat(n.map(function(e){return t[e]}).join(", ")," ]")),e.map(function(e){var o=Object.keys(e)[0],a=e[o].filter(function(e){var o=Object.keys(e)[0],a=0===r.filter(function(e){return 0===o.indexOf(t[e])}).length||n.find(function(e){var n=t[e];return 0===o.indexOf(n)});return i[o]=!a,a});e[o]=a});var a=Object.keys(i).filter(function(e){return i[e]});return(0,o.logInfo)("allowTargetingKeys - removed keys [ ".concat(a.join(", ")," ]")),e.filter(function(e){return e[Object.keys(e)[0]].length>0})}(I,S)),I=function(n){var t=n.map(function(n){return(0,e.A)({},Object.keys(n)[0],n[Object.keys(n)[0]].map(function(n){return(0,e.A)({},Object.keys(n)[0],n[Object.keys(n)[0]].join(","))}).reduce(function(e,n){return Object.assign(n,e)},{}))});return t=t.reduce(function(e,n){var t=Object.keys(n)[0];return e[t]=Object.assign({},e[t],n[t]),e},{}),t}(I);var T=l.$W.getConfig("targetingControls.auctionKeyMaxChars");return T&&((0,o.logInfo)("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(T," characters.  Running checks on auction keys...")),I=function(e,n){var t=(0,o.deepClone)(e),r=Object.keys(t).map(function(e){return{adUnitCode:e,adserverTargeting:t[e]}}).sort(qr());return r.reduce(function(e,r,i,a){var s,u=(s=r.adserverTargeting,Object.keys(s).reduce(function(e,n){return e+"".concat(n,"%3d").concat(encodeURIComponent(s[n]),"%26")},""));i+1===a.length&&(u=u.slice(0,-3));var c=r.adUnitCode,d=u.length;return d<=n?(n-=d,(0,o.logInfo)("AdUnit '".concat(c,"' auction keys comprised of ").concat(d," characters.  Deducted from running threshold; new limit is ").concat(n),t[c]),e[c]=t[c]):(0,o.logWarn)("The following keys for adUnitCode '".concat(c,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(d,", the current allotted amount was ").concat(n,".\n"),t[c]),i+1===a.length&&0===Object.keys(e).length&&(0,o.logError)("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e},{})}(I,T)),v.forEach(function(e){I[e]||(I[e]={})}),I},l.$W.getConfig("targetingControls",function(e){null!=(0,a.A)(e,Dr)&&null!=(0,a.A)(e,Rr)&&(0,o.logError)(jr)}),i.setTargetingForGPT=Ce("sync",function(e,r){var a=i.getAllTargeting(e),s=Object.fromEntries(xr.map(function(e){return[e,null]}));Object.entries(Nr(Object.keys(a),r)).forEach(function(e){var t=(0,n.A)(e,2),r=t[0],i=t[1];i.length>1&&(0,o.logWarn)("Multiple slots found matching: ".concat(r,". Targeting will be set on all matching slots, which can lead to duplicate impressions if more than one are requested from GAM. To resolve this, ensure the arguments to setTargetingForGPTAsync resolve to a single slot by explicitly matching the desired slotElementID.")),i.forEach(function(e){Object.keys(a[r]).forEach(function(e){var n=a[r][e];"string"==typeof n&&-1!==n.indexOf(",")&&(n=n.split(",")),a[r][e]=n}),(0,o.logMessage)("Attempting to set targeting-map for slot: ".concat(e.getSlotElementId()," with targeting-map:"),a[r]),e.updateTargetingFromMap(Object.assign({},s,a[r]))})}),Object.keys(a).forEach(function(e){Object.keys(a[e]).forEach(function(n){"hb_adid"===n&&t.setStatusForBids(a[e][n],d.tl.BID_TARGETING_SET)})}),i.targetingDone(a),ee(d.qY.SET_TARGETING,a)},"setTargetingForGPT"),i.targetingDone=Ce("sync",function(e){return e},"targetingDone"),i.getWinningBids=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Or,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.sortByHighestCpm,i=n||c(t,r),a=u(e);return i.filter(function(e){return a.includes(e.adUnitCode)}).filter(function(e){return!0===be.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0}).map(function(e){return e.adUnitCode}).filter(o.uniques).map(function(e){return i.filter(function(n){return n.adUnitCode===e?n:null}).reduce(Or)})},i.setTargetingForAst=function(e){var n=i.getAllTargeting(e);try{i.resetPresetTargetingAST(e)}catch(e){(0,o.logError)("unable to reset targeting for AST"+e)}Object.keys(n).forEach(function(e){return Object.keys(n[e]).forEach(function(t){if((0,o.logMessage)("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),(0,o.isStr)(n[e][t])||(0,o.isArray)(n[e][t])){var r={};t.search(/pt[0-9]/)<0?r[t.toUpperCase()]=n[e][t]:r[t]=n[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}})})},i.isApntagDefined=function(){if(window.apntag&&(0,o.isFn)(window.apntag.setKeywords))return!0},i}(L),Wr=d.qY.AD_RENDER_FAILED,Fr=d.qY.AD_RENDER_SUCCEEDED,Lr=d.qY.STALE_RENDER,zr=d.qY.BID_WON,Gr=d.qY.EXPIRED_RENDER,$r=d.as.EXCEPTION,Jr=Ce("sync",function(e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.U9.resolve()).then(function(n){return null!=n?n:L.findBidByAdId(e)}).catch(function(){})}),Hr=Ce("sync",function(e){var n;((null===(n=_t(e.eventtrackers)[jt])||void 0===n?void 0:n[xt])||[]).forEach(function(e){return(0,o.triggerPixel)(e)}),ee(zr,e),L.addWinningBid(e)});function Vr(e){var n=e.reason,t=e.message,r=e.bid,i=e.id,a={reason:n,message:t};r&&(a.bid=r,a.adId=r.adId),i&&(a.adId=i),(0,o.logError)("Error rendering ad (id: ".concat(i,"): ").concat(t)),ee(Wr,a)}function Kr(e){var n=e.doc,t=e.bid,r=e.id,i={doc:n};t&&(i.bid=t),r&&(i.adId=r),rr.callAdRenderSucceededBidder(t.adapterCode||t.bidder,t),ee(Fr,i)}function Yr(e,n){switch(e.event){case d.qY.AD_RENDER_FAILED:Vr({bid:n,id:n.adId,reason:e.info.reason,message:e.info.message});break;case d.qY.AD_RENDER_SUCCEEDED:Kr({doc:null,bid:n,id:n.adId});break;default:(0,o.logError)("Received event request for unsupported event: '".concat(e.event,"' (adId: '").concat(n.adId,"')"))}}function Qr(e,n,t){var r=t.resizeFn,i=t.fireTrackers,o=void 0===i?bi:i;"resizeNativeHeight"===e.action?r(e.width,e.height):o(e,n)}var Xr=(0,e.A)({},d.nl.EVENT,Yr);Xr[d.nl.NATIVE]=Qr;var Zr=Ce("sync",function(e,n){var t=e.ad,r=e.adUrl,i=e.cpm,a=e.originalCpm,s=e.width,u=e.height,c=e.instl,d={AUCTION_PRICE:a||i,CLICKTHROUGH:(null==n?void 0:n.clickUrl)||""};return{ad:(0,o.replaceMacros)(t,d),adUrl:(0,o.replaceMacros)(r,d),width:s,height:u,instl:c}}),ei=Ce("sync",function(e){var n=e.renderFn,t=e.resizeFn,r=e.bidResponse,i=e.options,a=e.doc,s=e.isMainDocument,u=void 0===s?a===document&&!(0,o.inIframe)():s,c=r.mediaType===pr;if(u||c)Vr({reason:d.as.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:c?"Cannot render video ad without a renderer":"renderAd was prevented from writing to the main document.",bid:r,id:r.adId});else{var l=Zr(r,i);n(Object.assign({adId:r.adId},l));var f=l.width,p=l.height;null!=(null!=f?f:p)&&t(f,p)}});function ni(e){var n=e.renderFn,t=e.resizeFn,r=e.adId,i=e.options,a=e.bidResponse,s=e.doc;oi(a,function(){if(null!=a){var e,u;if(a.status===d.tl.RENDERED&&((0,o.logWarn)("Ad id ".concat(r," has been rendered before")),ee(Lr,a),null!==(e=l.$W.getConfig("auctionOptions"))&&void 0!==e&&e.suppressStaleRender))return;if(!Pr.isBidNotExpired(a)&&((0,o.logWarn)("Ad id ".concat(r," has been expired")),ee(Gr,a),null!==(u=l.$W.getConfig("auctionOptions"))&&void 0!==u&&u.suppressExpiredRender))return;try{ei({renderFn:n,resizeFn:t,bidResponse:a,options:i,doc:s})}catch(e){Vr({reason:d.as.EXCEPTION,message:e.message,id:r,bid:a})}}else Vr({reason:d.as.CANNOT_FIND_AD,message:"Cannot find ad '".concat(r,"'"),id:r})})}function ti(e){var n=I(e.metrics);n.checkpoint("bidRender"),n.timeBetween("bidWon","bidRender","render.deferred"),n.timeBetween("auctionEnd","bidRender","render.pending"),n.timeBetween("requestBids","bidRender","render.e2e"),e.status=d.tl.RENDERED}ei.before(function(e,n){var t,r=n.bidResponse,i=n.doc;(t=r.renderer)&&(t.url||t.renderNow)?(function(e,n,t){var r=null;e.config&&e.config.documentResolver&&(r=e.config.documentResolver(n,document,t)),r||(r=document),e.documentContext=r,e.render(n,e.documentContext)}(r.renderer,r,i),Kr({doc:i,bid:r,id:r.adId}),e.bail()):e(n)},100);var ri=new WeakMap,ii=new WeakSet;function oi(e,n){null!=e?(ri.set(e,n),e.deferRendering||si(e),ai(e)):n()}function ai(e){ii.has(e)||(ii.add(e),Hr(e))}function si(e){var n=ri.get(e);n&&(n(),ti(e),ri.delete(e))}function ui(){if(!window.frames[d.IY])if(document.body){var e=(0,o.createInvisibleIframe)();e.name=d.IY,document.body.appendChild(e)}else window.requestAnimationFrame(ui)}function ci(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return di(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?di(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}function di(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function li(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function fi(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?li(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):li(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}var pi=[],gi=Object.keys(d.x5).map(function(e){return d.x5[e]}),vi={image:{ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},mi=Ci(d.h0),hi=Ci(d.jO);function bi(e,n){var t=n.native.ortb||Ei(n.native);return"click"===e.action?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fetchURL,r=void 0===t?o.triggerPixel:t;if(n){var i,a=(e.assets||[]).filter(function(e){return e.link}).reduce(function(e,n){return e[n.id]=n.link,e},{}),s=(null===(i=e.link)||void 0===i?void 0:i.clicktrackers)||[],u=a[n],c=s;u&&(c=u.clicktrackers||[]),c.forEach(function(e){return r(e)})}else{var d;((null===(d=e.link)||void 0===d?void 0:d.clicktrackers)||[]).forEach(function(e){return r(e)})}}(t,null==e?void 0:e.assetId):function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.runMarkup,r=void 0===t?function(e){return(0,o.insertHtmlIntoIframe)(e)}:t,i=n.fetchURL,a=void 0===i?o.triggerPixel:i,s=_t(e.eventtrackers||[])[Rt]||{},u=s[xt],c=void 0===u?[]:u,d=s[Dt],l=void 0===d?[]:d;e.imptrackers&&(c=c.concat(e.imptrackers)),c.forEach(function(e){return a(e)}),l=l.map(function(e){return'<script async src="'.concat(e,'"><\/script>')}),e.jstracker&&(l=l.concat([e.jstracker])),l.length&&r(l.join("\n"))}(t),e.action}function yi(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];return Object.entries(e).filter(function(e){var r=(0,n.A)(e,2),o=r[0];return r[1]&&(!1===i&&"ext"===o||null==t||t.includes(o))}).forEach(function(e){var a=(0,n.A)(e,2),s=a[0],u=a[1];!1===i&&"ext"===s?o.push.apply(o,(0,r.A)(yi(u,t,!0))):(i||d.x5.hasOwnProperty(s))&&o.push({key:s,value:Ii(u)})}),o}function wi(e,n,t){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,i=void 0===r?L.index:r,a={message:"assetResponse",adId:e.adId},s=Zr(n).native;return s?(a.native=Object.assign({},s),a.renderer=hr(n),a.rendererVersion=3,null!=t&&(s.assets=s.assets.filter(function(e){var n=e.key;return t.includes(n)}))):s=function(e,n,t){var r,i=fi(fi({},(0,o.getDefinedParams)(e.native,["rendererUrl","adTemplate"])),{},{assets:yi(e.native,t),nativeKeys:d.x5});return e.native.ortb?i.ortb=e.native.ortb:null!==(r=n.mediaTypes)&&void 0!==r&&null!==(r=r.native)&&void 0!==r&&r.ortb&&(i.ortb=Si(e.native,n.nativeOrtbRequest)),i}(n,i.getAdUnit(n),t),Object.assign(a,s)}var Ai=Object.fromEntries(Object.entries(d.x5).map(function(e){var t=(0,n.A)(e,2),r=t[0];return[t[1],r]}));function Ii(e){return(null==e?void 0:e.url)||e}function Ei(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach(function(e){var r=(0,n.A)(e,2),i=r[0],o=r[1];switch(i){case"clickUrl":t.link.url=o;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(o)?o:[o];break;case"impressionTrackers":(Array.isArray(o)?o:[o]).forEach(function(e){t.eventtrackers.push({event:Rt,method:xt,url:e})});break;case"javascriptTrackers":t.jstracker=Array.isArray(o)?o.join(""):o;break;case"privacyLink":t.privacy=o}}),t}function Si(e,n){var t=fi(fi({},Ei(e)),{},{assets:[]});function r(e,r){var i=n.assets.find(e);null!=i&&(r(i=(0,o.deepClone)(i)),t.assets.push(i))}return Object.keys(e).filter(function(n){return!!e[n]}).forEach(function(n){var t=Ii(e[n]);switch(n){case"title":r(function(e){return null!=e.title},function(e){e.title={text:t}});break;case"image":case"icon":var i="image"===n?d.oA.MAIN:d.oA.ICON;r(function(e){return null!=e.img&&e.img.type===i},function(e){e.img={url:t}});break;default:n in d.h0&&r(function(e){return null!=e.data&&e.data.type===d.jO[d.h0[n]]},function(e){e.data={value:t}})}}),t}function Ci(e){var n={};for(var t in e)n[e[t]]=t;return n}var Ti=new Map;function Oi(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,t=void 0===n?L.index:n,r=ki(e),i=t.getAuction(e),o={type:"xml",value:r,ttlseconds:Number(e.ttl)+15};return l.$W.getConfig("cache.vasttrack")&&(o.bidder=e.bidder,o.bidid=e.requestId,o.aid=e.auctionId),null!=i&&(o.timestamp=i.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(o.key=e.customCacheKey),o}function ki(e){return e.vastXml?e.vastXml:(n=e.vastUrl,r=(t=(t=e.vastImpUrl)&&(Array.isArray(t)?t:[t]))?t.map(function(e){return"<Impression><![CDATA[".concat(e,"]]></Impression>")}).join(""):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(n,"]]></VASTAdTagURI>\n        ").concat(r,"\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>"));var n,t,r}function xi(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sn,r={puts:e.map(Oi)};t(l.$W.getConfig("cache.timeout"))(l.$W.getConfig("cache.url"),function(e){return{success:function(n){var t;try{t=JSON.parse(n).responses}catch(n){return void e(n,[])}t?e(null,t):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(n,t){e(new Error("Error storing video ad in the cache: ".concat(n,": ").concat(JSON.stringify(t))),[])}}}(n),JSON.stringify(r),{contentType:"text/plain",withCredentials:!0})}var Di,Ri,ji,_i=function(e){var n=ki(e),t=URL.createObjectURL(new Blob([n],{type:"text/xml"}));Pi(e,t),Ti.set(e.videoCacheKey,t)},Pi=function(e,n,t){e.videoCacheKey=t||(0,o.generateUUID)(),e.vastUrl||(e.vastUrl=n)},Ui={store:xi};function Bi(e){var n=e.map(function(e){return e.bidResponse});Ui.store(n,function(t,r){var i;t?(i=t,(0,o.logError)("Failed to save to the video cache: ".concat(i,". Video bids will be discarded:"),n)):e.length!==r.length?(0,o.logError)("expected ".concat(e.length," cache IDs, got ").concat(r.length," instead")):r.forEach(function(n,t){var r,i=e[t],a=i.auctionInstance,s=i.bidResponse,u=i.afterBidAdded;""===n.uuid?(0,o.logWarn)("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(Pi(s,(r=n.uuid,"".concat(l.$W.getConfig("cache.url"),"?uuid=").concat(r)),n.uuid),eo(a,s),u())})})}l.$W.getConfig("cache",function(e){var n=e.cache;Di="number"==typeof n.batchSize&&n.batchSize>0?n.batchSize:1,Ri="number"==typeof n.batchTimeout&&n.batchTimeout>0?n.batchTimeout:0,n.useLocal&&!ji&&(ji=L.onExpiry(function(e){e.getBidsReceived().forEach(function(e){var n=Ti.get(e.videoCacheKey);n&&n.startsWith("blob")&&URL.revokeObjectURL(n),Ti.delete(e.videoCacheKey)})}))});var qi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi,t=[[]],r=!1,i=function(e){return e()};return function(o,a,s){var u=Ri>0?e:i;t[t.length-1].length>=Di&&t.push([]),t[t.length-1].push({auctionInstance:o,bidResponse:a,afterBidAdded:s}),r||(r=!0,u(function(){t.forEach(n),t=[[]],r=!1},Ri))}}();function Ni(e,n,t){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.index,s=void 0===a?L.index:a,u=i.bs,c=void 0===u?be:u;t=t||s.getBidRequest(n);var d=null==n?void 0:n.adapterCode,l=(null==n?void 0:n.bidderCode)||(null===(r=t)||void 0===r?void 0:r.bidder),f=c.get(null==n?void 0:n.adapterCode,"adjustAlternateBids"),p=c.getOwn(l,"bidCpmAdjustment")||c.get(f?d:l,"bidCpmAdjustment");if(p&&"function"==typeof p)try{return p(e,Object.assign({},n),t)}catch(e){(0,o.logError)("Error during bid adjustment",e)}return e}var Mi=rn.syncUsers,Wi="started",Fi="inProgress",Li="completed";Q(d.qY.BID_ADJUSTMENT,function(e){!function(e){var n=Ni(e.cpm,e);n>=0&&(e.cpm=n)}(e)});var zi=4,Gi={},$i={},Ji=[],Hi=(0,i.m)(),Vi=Ce("sync",function(e){}),Ki=function(e){return _e(e,function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return t.push(function(){}),e.apply(this,t)})}(Ce("async",function(e,n,t){!function(e){var n=l.$W.getConfig("maxBid");return!n||!e.cpm||n>=Number(e.cpm)}(n)?t(d.Tf.PRICE_TOO_HIGH):this.dispatch.call(null,e,n)},"addBidResponse")),Yi=Ce("sync",function(e){return e},"responsesReady"),Qi=Ce("sync",function(e){this.dispatch.call(this.context,e)},"addBidderRequests"),Xi=Ce("async",function(e,n){n&&n()},"bidsBackCallback");function Zi(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===t?L.index:t,a=0,c=!1,f=new Set,p={};function g(){a--,c&&0===a&&e()}function v(e,n,t){return p[n.requestId]=!0,function(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===t?L.index:t,i=r.getBidderRequest(e),a=r.getAdUnit(e),s=i&&i.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||(0,o.timestamp)(),requestTimestamp:e.requestTimestamp||s,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:n}),null!=(null==a?void 0:a.ttlBuffer)&&(e.ttlBuffer=a.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(n,e),a++,t(g)}function m(e,t){v(e,t,function(e){var a=function(e){var n,t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,i=void 0===r?L.index:r;ee(d.qY.BID_ADJUSTMENT,e);var o=i.getAdUnit(e);e.instl=1===(null==o||null===(n=o.ortb2Imp)||void 0===n?void 0:n.instl);var a=(null===(t=i.getBidRequest(e))||void 0===t?void 0:t.renderer)||o.renderer,c=e.mediaType,f=i.getMediaTypes(e),p=f&&f[c],g=p&&p.renderer,v=null;!g||!g.render||!0===g.backupOnly&&e.renderer?!a||!a.render||!0===a.backupOnly&&e.renderer||(v=a):v=g,v&&(e.renderer=dr.install({url:v.url,config:v.options,renderNow:null==v.url}),e.renderer.setRender(v.render));var m=to(e.mediaType,f,l.$W.getConfig("mediaTypePriceGranularity")),h=(0,u.j)(e.cpm,"object"===(0,s.A)(m)?m:l.$W.getConfig("customPriceBucket"),l.$W.getConfig("currency.granularityMultiplier"));return e.pbLg=h.low,e.pbMg=h.med,e.pbHg=h.high,e.pbAg=h.auto,e.pbDg=h.dense,e.pbCg=h.custom,e}(t);ee(d.qY.BID_ACCEPTED,a),a.mediaType===pr?function(e,n,t){var r,i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,a=!0,s=null===(r=(void 0===i?L.index:i).getMediaTypes({requestId:n.originalRequestId||n.requestId,adUnitId:n.adUnitId}))||void 0===r?void 0:r.video,u=s&&(null==s?void 0:s.context),c=s&&(null==s?void 0:s.useCacheKey),d=l.$W.getConfig("cache")||{},f=d.useLocal,p=d.url,g=d.ignoreBidderCacheKey;f?_i(n):p&&(c||u!==on)&&(!n.videoCacheKey||g?(a=!1,no(e,n,t,s)):n.vastUrl||((0,o.logError)("videoCacheKey specified but not required vastUrl for video bid"),a=!1)),a&&(eo(e,n),t())}(n,a,e):(function(e){return e.native&&"object"===(0,s.A)(e.native)}(a)&&function(e,n){var t,i=null==n?void 0:n.nativeOrtbRequest,o=null===(t=e.native)||void 0===t?void 0:t.ortb;if(i&&o){var a=function(e,n){var t,i={},o=(null==n?void 0:n.assets)||[];i.clickUrl=null===(t=e.link)||void 0===t?void 0:t.url,i.privacyLink=e.privacy;var a,s=ci((null==e?void 0:e.assets)||[]);try{var u=function(){var e=a.value,n=o.find(function(n){return e.id===n.id});if(e.title)i.title=e.title.text;else if(e.img){var t;i[(null==n||null===(t=n.img)||void 0===t?void 0:t.type)===d.oA.MAIN?"image":"icon"]={url:e.img.url,width:e.img.w,height:e.img.h}}else if(e.data){var r;i[mi[hi[null==n||null===(r=n.data)||void 0===r?void 0:r.type]]]=e.data.value}};for(s.s();!(a=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}i.impressionTrackers=[];var c,l=[];e.imptrackers&&(c=i.impressionTrackers).push.apply(c,(0,r.A)(e.imptrackers));var f,p=ci((null==e?void 0:e.eventtrackers)||[]);try{for(p.s();!(f=p.n()).done;){var g=f.value;g.event===Rt&&g.method===xt&&i.impressionTrackers.push(g.url),g.event===Rt&&g.method===Dt&&l.push(g.url)}}catch(e){p.e(e)}finally{p.f()}return l=l.map(function(e){return'<script async src="'.concat(e,'"><\/script>')}),null!=e&&e.jstracker&&l.push(e.jstracker),l.length&&(i.javascriptTrackers=l.join("\n")),i}(o,i);Object.assign(e.native,a)}["rendererUrl","adTemplate"].forEach(function(t){var r,i=null==n||null===(r=n.nativeParams)||void 0===r?void 0:r[t];i&&(e.native[t]=Ii(i))})}(a,i.getAdUnit(a)),eo(n,a),e())})}function h(e,t,r){return v(e,t,function(e){t.rejectionReason=r,(0,o.logWarn)("Bid from ".concat(t.bidder||"unknown bidder"," was rejected: ").concat(r),t),ee(d.qY.BID_REJECTED,t),n.addBidRejected(t),e()})}function b(){var t=n.getBidRequests(),r=l.$W.getConfig("auctionOptions");if(f.add(this),r&&!(0,o.isEmpty)(r)){var i=r.secondaryBidders;i&&!t.every(function(e){return i.includes(e.bidderCode)})&&(t=t.filter(function(e){return!i.includes(e.bidderCode)}))}c=t.every(function(e){return f.has(e)}),this.bids.forEach(function(e){p[e.bidId]||(n.addNoBid(e),ee(d.qY.NO_BID,e))}),c&&0===a&&e()}return{addBidResponse:function(){function e(e,n){var t;Ki.call({dispatch:m},e,n,(t=!1,function(r){t||(h(e,n,r),t=!0)}))}return e.reject=h,e}(),adapterDone:function(){var e=this;Yi(k.U9.resolve()).finally(function(){return b.call(e)})}}}function eo(e,n){var t,r,i;t=n,i=!0===be.get(t.bidderCode,"allowZeroCpmBids")?t.cpm>=0:t.cpm>0,t.bidderCode&&(i||t.dealId)&&(r=function(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===t?L.index:t;if(!n)return{};var i=r.getBidRequest(n),o={};return fo(o,lo(n.mediaType,e),n,i),e&&be.getOwn(e,d.iD.ADSERVER_TARGETING)&&(fo(o,be.ownSettingsFor(e),n,i),n.sendStandardTargeting=be.get(e,"sendStandardTargeting")),n.native&&(o=Object.assign({},o,function(e){var n,t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,i=void 0===r?L.index:r,o={},a=i.getAdUnit(e),s=null==(null==a||null===(n=a.nativeParams)||void 0===n?void 0:n.ortb)&&!1!==(null==a||null===(t=a.nativeParams)||void 0===t?void 0:t.sendTargetingKeys),u=function(e){var n,t={};return null!=e&&null!==(n=e.nativeParams)&&void 0!==n&&n.ext&&Object.keys(e.nativeParams.ext).forEach(function(e){t[e]="hb_native_".concat(e)}),fi(fi({},d.x5),t)}(a),c=fi(fi({},e.native),e.native.ext);return delete c.ext,Object.keys(c).forEach(function(n){var t,r,i,c=u[n],d=Ii(e.native[n])||Ii(null==e||null===(t=e.native)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t[n]);if("adTemplate"!==n&&c&&d){var l,f=null==a||null===(r=a.nativeParams)||void 0===r||null===(r=r[n])||void 0===r?void 0:r.sendId;"boolean"!=typeof f&&(f=null==a||null===(l=a.nativeParams)||void 0===l||null===(l=l.ext)||void 0===l||null===(l=l[n])||void 0===l?void 0:l.sendId),f&&(d="".concat(c,":").concat(e.adId));var p,g=null==a||null===(i=a.nativeParams)||void 0===i||null===(i=i[n])||void 0===i?void 0:i.sendTargetingKeys;"boolean"!=typeof g&&(g=null==a||null===(p=a.nativeParams)||void 0===p||null===(p=p.ext)||void 0===p||null===(p=p[n])||void 0===p?void 0:p.sendTargetingKeys),("boolean"==typeof g?g:s)&&(o[c]=d)}}),o}(n))),o}(t.bidderCode,t)),t.adserverTargeting=Object.assign(t.adserverTargeting||{},r),I(n.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(n),ee(d.qY.BID_RESPONSE,n)}var no=Ce("async",function(e,n,t,r){qi(e,n,t)},"callPrebidCache");function to(e,n,t){if(e&&t){if(e===pr){var r,i,o=null!==(r=null==n||null===(i=n[pr])||void 0===i?void 0:i.context)&&void 0!==r?r:"instream";if(t["".concat(pr,"-").concat(o)])return t["".concat(pr,"-").concat(o)]}return t[e]}}var ro=function(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,t=void 0===n?L.index:n,r=to(e.mediaType,t.getMediaTypes(e),l.$W.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&r?"string"==typeof r?r:"custom":l.$W.getConfig("priceGranularity")},io=function(e){return function(n){var t=e||ro(n);return t===d.UE.AUTO?n.pbAg:t===d.UE.DENSE?n.pbDg:t===d.UE.LOW?n.pbLg:t===d.UE.MEDIUM?n.pbMg:t===d.UE.HIGH?n.pbHg:t===d.UE.CUSTOM?n.pbCg:void 0}},oo=function(){return function(e){return e.creativeId?e.creativeId:""}},ao=function(){return function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:""}},so=function(){return function(e){var n,t;return e.meta&&(e.meta.networkId||e.meta.networkName)?(null==e||null===(n=e.meta)||void 0===n?void 0:n.networkName)||(null==e||null===(t=e.meta)||void 0===t?void 0:t.networkId):""}},uo=function(){return function(e){var n,t=null==e||null===(n=e.meta)||void 0===n?void 0:n.primaryCatId;return Array.isArray(t)?t[0]||"":t||""}};function co(e,n){return{key:e,val:"function"==typeof n?function(e,t){return n(e,t)}:function(e){return e[n]}}}function lo(e,n){var t=Object.assign({},be.settingsFor(null));if(t[d.iD.ADSERVER_TARGETING]||(t[d.iD.ADSERVER_TARGETING]=[co(d.xS.BIDDER,"bidderCode"),co(d.xS.AD_ID,"adId"),co(d.xS.PRICE_BUCKET,io()),co(d.xS.SIZE,"size"),co(d.xS.DEAL,"dealId"),co(d.xS.SOURCE,"source"),co(d.xS.FORMAT,"mediaType"),co(d.xS.ADOMAIN,ao()),co(d.xS.ACAT,uo()),co(d.xS.DSP,so()),co(d.xS.CRID,oo())]),"video"===e){var r=t[d.iD.ADSERVER_TARGETING].slice();if(t[d.iD.ADSERVER_TARGETING]=r,[d.xS.UUID,d.xS.CACHE_ID].forEach(function(e){void 0===r.find(function(n){return n.key===e})&&r.push(co(e,"videoCacheKey"))}),l.$W.getConfig("cache.url")&&(!n||!1!==be.get(n,"sendStandardTargeting"))){var i=(0,o.parseUrl)(l.$W.getConfig("cache.url"));void 0===r.find(function(e){return e.key===d.xS.CACHE_HOST})&&r.push(co(d.xS.CACHE_HOST,function(e){var n;return(null==e||null===(n=e.adserverTargeting)||void 0===n?void 0:n[d.xS.CACHE_HOST])||i.hostname}))}}return t}function fo(e,n,t,r){var i=n[d.iD.ADSERVER_TARGETING];return t.size=t.getSize(),(i||[]).forEach(function(i){var a=i.key,s=i.val;if(e[a]&&(0,o.logWarn)("The key: "+a+" is being overwritten"),(0,o.isFn)(s))try{s=s(t,r)}catch(e){(0,o.logError)("bidmanager","ERROR",e)}(void 0===n.suppressEmptyKeys||!0!==n.suppressEmptyKeys)&&a!==d.xS.DEAL&&a!==d.xS.ACAT&&a!==d.xS.DSP&&a!==d.xS.CRID||!(0,o.isEmptyStr)(s)&&null!=s?e[a]=s:(0,o.logInfo)("suppressing empty key '"+a+"' from adserver targeting")}),e}function po(e,n){return e[n.adUnitCode]||(e[n.adUnitCode]={bids:[]}),e[n.adUnitCode].bids.push(n),e}var go=t(410);function vo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function mo(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):vo(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}var ho=d.nl.REQUEST,bo=d.nl.RESPONSE,yo=d.nl.NATIVE,wo=d.nl.EVENT,Ao=(0,e.A)((0,e.A)({},ho,function(e,n,t){ni({renderFn:function(n){e(Object.assign({message:bo,renderer:hr(t),rendererVersion:3},n))},resizeFn:Io(n.adId,t),options:n.options,adId:n.adId,bidResponse:t})}),wo,function(e,n,t){if(null!=t){if(t.status===d.tl.RENDERED)return Yr(n,t);(0,o.logWarn)("Received x-origin event request without corresponding render request for ad '".concat(t.adId,"'"))}else(0,o.logError)("Cannot find ad '".concat(n.adId,"' for x-origin event request"))});function Io(e,n){return function(t,r){!function(e){var n=e.instl,t=e.adId,r=e.adUnitCode,i=e.width,a=e.height;function s(e){return e?e+"px":"100%"}function u(e){var n=function(e,n){return(0,o.isGptPubadsDefined)()?function(e){var n=window.googletag.pubads().getSlots().find(function(n){return n.getTargetingKeys().find(function(t){return n.getTargeting(t).includes(e)})});return n?n.getSlotElementId():null}(e):(0,o.isApnGetTagDefined)()?function(e){var n=window.apntag.getTag(e);return n&&n.targetId}(n):n}(t,r),i=document.getElementById(n);return i&&i.querySelector(e)}n||["div","iframe"].forEach(function(e){var n=u(e+':not([style*="display: none"])');if(n){var t=n.style;t.width=s(i),t.height=s(a)}else(0,o.logError)("Unable to locate matching page element for adUnitCode ".concat(r,".  Can't resize it to ad's dimensions.  Please review setup."))})}(mo(mo({},n),{},{width:t,height:r,adId:e}))}}Object.assign(Ao,(0,e.A)({},yo,function(e,n,t){if(null!=t)switch(n.action){case"assetRequest":oi(t,function(){return e(function(e,n){var t=e.assets.map(function(e){return Ai[e]});return wi(e,n,t)}(n,t))});break;case"allAssetRequest":oi(t,function(){return e(function(e,n){return wi(e,n,null)}(n,t))});break;default:Qr(n,t,{resizeFn:Io(n.adId,t)}),ai(t)}else(0,o.logError)("Cannot find ad for x-origin event request: '".concat(n.adId,"'"))}));var Eo="__vslypbjs_debugging__";function So(){return(0,i.m)().installedModules.includes("debugging")}function Co(e){return new k.U9(function(n){sr(e,ye,"debugging",n)})}function To(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.alreadyInstalled,t=void 0===n?So:n,r=e.script,a=void 0===r?Co:r,s=null;return function(){return null==s&&(s=new k.U9(function(e,n){setTimeout(function(){if(t())e();else{var r="https://cdn.jsdelivr.net/npm/prebid.js@9.53.4/dist/debugging-standalone.js";(0,o.logMessage)('Debugging module not installed, loading it from "'.concat(r,'"...')),(0,i.m)()._installDebugging=!0,a(r).then(function(){(0,i.m)()._installDebugging({DEBUG_KEY:Eo,hook:Ce,config:l.$W,createBid:fe,logger:(0,o.prefixLog)("DEBUG:")})}).then(e,n)}})})),s}}var Oo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.load,t=void 0===n?To():n,r=e.hook,i=void 0===r?ke("requestBids"):r,o=null,a=!1;function s(e){for(var n=this,t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return(o||k.U9.resolve()).then(function(){return e.apply(n,r)})}function u(){i.getHooks({hook:s}).remove(),a=!1}return{enable:function(){a||(o=t(),i.before(s,99),a=!0)},disable:u,reset:function(){o=null,u()}}}();Oo.reset,l.$W.getConfig("debugging",function(e){var n=e.debugging;null!=n&&n.enabled?Oo.enable():Oo.disable()});var ko=en("fpdEnrichment"),xo=(0,o.memoize)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!ko.cookiesAreEnabled())return e;var n,t,r=e.split(".");if(2===r.length)return e;var i=-2,a="_rdc".concat(Date.now()),s="writeable";do{n=r.slice(i).join(".");var u=new Date((0,o.timestamp)()+1e4).toUTCString();ko.setCookie(a,s,u,"Lax",n,void 0),ko.getCookie(a,void 0)===s?(t=!1,ko.setCookie(a,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,n,void 0)):(i+=-1,t=Math.abs(i)<=r.length)}while(t);return n}),Do=["architecture","bitness","model","platformVersion","fullVersionList"],Ro=["brands","mobile","platform"],jo=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,t=n&&Ro.some(function(e){return void 0!==n[e]})?Object.freeze(Po(1,n)):null;return function(){return t}}(),_o=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,t={},r=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do;if(!r.has(e)){var i=Array.from(e);i.sort(),r.set(e,i.join("|"))}var a=r.get(e);if(!t.hasOwnProperty(a))try{t[a]=n.getHighEntropyValues(e).then(function(e){return(0,o.isEmpty)(e)?null:Object.freeze(Po(2,e))}).catch(function(){return null})}catch(e){t[a]=k.U9.resolve(null)}return t[a]}}();function Po(e,n){function t(e,n){var t={brand:e};return(0,o.isStr)(n)&&!(0,o.isEmptyStr)(n)&&(t.version=n.split(".")),t}var r={source:e};return n.platform&&(r.platform=t(n.platform,n.platformVersion)),(n.fullVersionList||n.brands)&&(r.browsers=(n.fullVersionList||n.brands).map(function(e){return t(e.brand,e.version)})),void 0!==n.mobile&&(r.mobile=n.mobile?1:0),["model","bitness","architecture"].forEach(function(e){var t=n[e];(0,o.isStr)(t)&&(r[e]=t)}),r}var Uo=["dooh","app","site"];function Bo(e){return function(n){return Uo.reduce(function(t,r){return qo(n,r)&&(null!=t?((0,o.logWarn)("".concat(e," specifies both '").concat(t,"' and '").concat(r,"'; dropping the latter.")),delete n[r]):t=r),t},null),n}}function qo(e,n){return null!=e[n]&&Object.keys(e[n]).length>0}function No(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var Mo={getRefererInfo:Nn,findRootDomain:xo,getWindowTop:o.getWindowTop,getWindowSelf:o.getWindowSelf,getHighEntropySUA:_o,getLowEntropySUA:jo,getDocument:o.getDocument},Wo=Bo("FPD"),Fo=Ce("sync",function(e){var t,r=[e,(t=l.$W.getConfig("firstPartyData.uaHints"),Array.isArray(t)&&0!==t.length?Mo.getHighEntropySUA(t):k.U9.resolve(Mo.getLowEntropySUA())).catch(function(){return null}),k.U9.resolve("cookieDeprecationLabel"in navigator&&Je(ne,ir(ye,"cdep"))&&navigator.cookieDeprecationLabel.getValue()).catch(function(){return null})];return k.U9.all(r).then(function(e){var t=(0,n.A)(e,3),r=t[0],i=t[1],s=t[2],u=Mo.getRefererInfo();if(Object.entries(Go).forEach(function(e){var t=(0,n.A)(e,2),i=t[0],a=(0,t[1])(r,u);a&&Object.keys(a).length>0&&(r[i]=(0,o.mergeDeep)({},a,r[i]))}),i&&(0,go.J)(r,"device.sua",Object.assign({},i,r.device.sua)),s){var c={cdep:s};(0,go.J)(r,"device.ext",Object.assign({},c,r.device.ext))}var d=Mo.getDocument().documentElement.lang;if(d&&((0,go.J)(r,"site.ext.data.documentLang",d),!(0,a.A)(r,"site.content.language"))){var l=d.split("-")[0];(0,go.J)(r,"site.content.language",l)}r=Wo(r);var f,p=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return No(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?No(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}(Uo);try{for(p.s();!(f=p.n()).done;){var g=f.value;if(qo(r,g)){r[g]=(0,o.mergeDeep)({},$o(0,u),r[g]);break}}}catch(e){p.e(e)}finally{p.f()}return r})});function Lo(e){try{return e(Mo.getWindowTop())}catch(n){return e(Mo.getWindowSelf())}}function zo(e){return(0,o.getDefinedParams)(e,Object.keys(e))}var Go={site:function(e,n){if(!Uo.filter(function(e){return"site"!==e}).some(qo.bind(null,e)))return zo({page:n.page,ref:n.ref})},device:function(){return Lo(function(e){var n,t=(0,o.getWinDimensions)().screen.width,r=(0,o.getWinDimensions)().screen.height,i=function(){var e=(0,o.getWinDimensions)();try{var n=e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight||0;return{width:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth||0,height:n}}catch(e){return{}}}(),a=i.width,s=i.height,u={w:t,h:r,dnt:(0,o.getDNT)()?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift(),ext:{vpw:a,vph:s}};return null!==(n=e.navigator)&&void 0!==n&&n.webdriver&&(0,go.J)(u,"ext.webdriver",!0),u})},regs:function(){var e={};Lo(function(e){return e.navigator.globalPrivacyControl})&&(0,go.J)(e,"ext.gpc","1");var n=l.$W.getConfig("coppa");return"boolean"==typeof n&&(e.coppa=n?1:0),e}};function $o(e,n){var t,r,i=Un(n.page,{noLeadingWww:!0}),o=null===(t=Lo(function(e){return e.document.querySelector("meta[name='keywords']")}))||void 0===t||null===(t=t.content)||void 0===t||null===(r=t.replace)||void 0===r?void 0:r.call(t,/\s/g,"");return zo({domain:i,keywords:o,publisher:zo({domain:Mo.findRootDomain(i)})})}var Jo=new Map([["format",function(e){return Array.isArray(e)&&e.length>0&&e.every(function(e){return"object"===(0,s.A)(e)})}],["w",o.isInteger],["h",o.isInteger],["btype",o.isArrayOfNums],["battr",o.isArrayOfNums],["pos",o.isInteger],["mimes",function(e){return Array.isArray(e)&&e.length>0&&e.every(function(e){return"string"==typeof e})}],["topframe",function(e){return[1,0].includes(e)}],["expdir",o.isArrayOfNums],["api",o.isArrayOfNums],["id",o.isStr],["vcm",function(e){return[1,0].includes(e)}]]);function Ho(e,n){return function(){if(document.prerendering&&e()){var t=this,r=Array.from(arguments);return new Promise(function(e){document.addEventListener("prerenderingchange",function(){(0,o.logInfo)("Auctions were suspended while page was prerendering"),e(n.apply(t,r))},{once:!0})})}return Promise.resolve(n.apply(this,arguments))}}var Vo=(0,i.m)(),Ko=rn.triggerUserSyncs,Yo=d.qY.ADD_AD_UNITS,Qo=d.qY.REQUEST_BIDS,Xo=d.qY.SET_TARGETING,Zo={bidWon:function(e){if(L.getBidsRequested().map(function(e){return e.bids.map(function(e){return e.adUnitCode})}).reduce(o.flatten).filter(o.uniques).includes(e))return!0;(0,o.logError)('The "'+e+'" placement is not defined.')}};function ea(e,n){var t=[];return(0,o.isArray)(e)&&(n?e.length===n:e.length>0)&&(e.every(function(e){return(0,o.isArrayOfNums)(e,2)})?t=e:(0,o.isArrayOfNums)(e,2)&&t.push(e)),t}function na(t,i){var s=(0,a.A)(t,"ortb2Imp.".concat(i)),u=(0,a.A)(t,"mediaTypes.".concat(i));if(s||u){var c=(0,e.A)((0,e.A)({},pr,an),gr,Jo)[i];c&&(0,r.A)(c).forEach(function(e){var r=(0,n.A)(e,2),s=r[0],u=(r[1],(0,a.A)(t,"mediaTypes.".concat(i,".").concat(s))),c=(0,a.A)(t,"ortb2Imp.".concat(i,".").concat(s));null==u&&null==c||(null==u?(0,go.J)(t,"mediaTypes.".concat(i,".").concat(s),c):null==c?(0,go.J)(t,"ortb2Imp.".concat(i,".").concat(s),u):((0,o.logWarn)("adUnit ".concat(t.code,": specifies conflicting ortb2Imp.").concat(i,".").concat(s," and mediaTypes.").concat(i,".").concat(s,", the latter will be ignored"),t),(0,go.J)(t,"mediaTypes.".concat(i,".").concat(s),c)))})}}function ta(e){var n,t,r,i,a,s,u=(0,o.deepClone)(e),c=u.mediaTypes.banner,d=null==c.sizes?null:ea(c.sizes),l=null!==(n=null===(t=e.ortb2Imp)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.format)&&void 0!==n?n:null==c?void 0:c.format;if(null!=l){(0,go.J)(u,"ortb2Imp.banner.format",l),c.format=l;try{s=l.filter(function(n){var t=n.w,r=n.h,i=n.wratio,a=n.hratio;return null!=(null!=t?t:r)&&null!=(null!=i?i:a)?((0,o.logWarn)("Ad unit banner.format specifies both w/h and wratio/hratio",e),!1):null!=t&&null!=r||null!=i&&null!=a}).map(function(e){var n=e.w,t=e.h,r=e.wratio,i=e.hratio;return[null!=n?n:r,null!=t?t:i]})}catch(n){(0,o.logError)("Invalid format definition on ad unit ".concat(e.code),l)}null==s||null==d||(0,o.deepEqual)(d,s)||(0,o.logWarn)("Ad unit ".concat(e.code," has conflicting sizes and format definitions"),e)}var f=null!==(r=null!=s?s:d)&&void 0!==r?r:[],p=null!==(i=null===(a=e.ortb2Imp)||void 0===a||null===(a=a.banner)||void 0===a?void 0:a.expdir)&&void 0!==i?i:c.expdir;return null!=p&&(c.expdir=p,(0,go.J)(u,"ortb2Imp.banner.expdir",p)),f.length>0?(c.sizes=f,u.sizes=f):((0,o.logError)("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete u.mediaTypes.banner),na(u,"banner"),u}function ra(e){var t=(0,o.deepClone)(e),r=t.mediaTypes.video;if(r.playerSize){var i="number"==typeof r.playerSize[0]?2:1,a=ea(r.playerSize,i);a.length>0?(2===i&&(0,o.logInfo)("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),r.playerSize=a,t.sizes=a):((0,o.logError)("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return function(e){var t,r=null==e||null===(t=e.mediaTypes)||void 0===t?void 0:t.video;(0,o.isPlainObject)(r)?null!=r&&Object.entries(r).forEach(function(t){var i=(0,n.A)(t,2),a=i[0],s=i[1];an.has(a)&&(an.get(a)(s)||(delete r[a],(0,o.logWarn)('Invalid prop in adUnit "'.concat(e.code,'": Invalid value for mediaTypes.video.').concat(a," ORTB property. The property has been removed."))))}):(0,o.logWarn)("validateOrtbVideoFields: videoParams must be an object.")}(t),na(t,"video"),t}function ia(e){function n(n){return(0,o.logError)('Error in adUnit "'.concat(e.code,'": ').concat(n,". Removing native request from ad unit"),e),delete r.mediaTypes.native,r}function t(e){for(var n=0,t=["sendTargetingKeys","types"];n<t.length;n++){var r=t[n];if(i.hasOwnProperty(r)){var o=e(r);if(o)return o}}}var r=(0,o.deepClone)(e),i=r.mediaTypes.native;if(i.ortb){var a;if(null!==(a=i.ortb.assets)&&void 0!==a&&a.some(function(e){return!(0,o.isNumber)(e.id)||e.id<0||e.id%1!=0}))return n("native asset ID must be a nonnegative integer");if(t(function(e){return n('ORTB native requests cannot specify "'.concat(e,'"'))}))return r;var s=Object.keys(d.x5).filter(function(e){return d.x5[e].includes("hb_native_")}),u=Object.keys(i).filter(function(e){return s.includes(e)});u.length>0&&((0,o.logError)("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(u," keys from request.")),u.forEach(function(e){return delete r.mediaTypes.native[e]}))}else t(function(e){return"mediaTypes.native.".concat(e," is deprecated, consider using native ORTB instead")});return i.image&&i.image.sizes&&!Array.isArray(i.image.sizes)&&((0,o.logError)("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete r.mediaTypes.native.image.sizes),i.image&&i.image.aspect_ratios&&!Array.isArray(i.image.aspect_ratios)&&((0,o.logError)("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete r.mediaTypes.native.image.aspect_ratios),i.icon&&i.icon.sizes&&!Array.isArray(i.icon.sizes)&&((0,o.logError)("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete r.mediaTypes.native.icon.sizes),r}function oa(e,n){var t,r=null==e||null===(t=e.mediaTypes)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.pos;if(!(0,o.isNumber)(r)||isNaN(r)||!isFinite(r)){var i="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");(0,o.logWarn)(i),delete e.mediaTypes[n].pos}return e}function aa(e){var n=function(n){return"adUnit.code '".concat(e.code,"' ").concat(n)},t=e.mediaTypes,r=e.bids;return null==r||(0,o.isArray)(r)?null==r&&null==e.ortb2Imp?((0,o.logError)(n("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):t&&0!==Object.keys(t).length?(null==e.ortb2Imp||null!=r&&0!==r.length||(e.bids=[{bidder:null}],(0,o.logMessage)(n("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):((0,o.logError)(n("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):((0,o.logError)(n("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}!function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var n=Oo,t=null;try{t=e.getItem(Eo)}catch(e){}null!==t&&n.enable()}}(),Vo.bidderSettings=Vo.bidderSettings||{},Vo.libLoaded=!0,Vo.version="v9.53.4",(0,o.logInfo)("Prebid.js v9.53.4 loaded"),Vo.installedModules=Vo.installedModules||[],Vo.adUnits=Vo.adUnits||[],Vo.triggerUserSyncs=Ko;var sa={validateAdUnit:aa,validateBannerMediaType:ta,validateSizes:ea};Object.assign(sa,{validateNativeMediaType:ia}),Object.assign(sa,{validateVideoMediaType:ra});var ua,ca=Ce("sync",function(e){var n=[];return e.forEach(function(e){if(null!=(e=aa(e))){var t,r,i,o=e.mediaTypes;o.banner&&(t=ta(e),o.banner.hasOwnProperty("pos")&&(t=oa(t,"banner"))),o.video&&(r=ra(t||e),o.video.hasOwnProperty("pos")&&(r=oa(r,"video"))),o.native&&(i=ia(r||t||e));var a=Object.assign({},t,r,i);n.push(a)}}),n},"checkAdUnitSetup");function da(n){var t=L[n]().filter(function(e){return L.getAdUnitCodes().includes(e.adUnitCode)}),r=L.getLastAuctionId();return t.map(function(e){return e.adUnitCode}).filter(o.uniques).map(function(e){return t.filter(function(n){return n.auctionId===r&&n.adUnitCode===e})}).filter(function(e){return e&&e[0]&&e[0].adUnitCode}).map(function(n){return(0,e.A)({},n[0].adUnitCode,{bids:n})}).reduce(function(e,n){return Object.assign(e,n)},{})}Vo.getAdserverTargetingForAdUnitCodeStr=function(e){if((0,o.logInfo)("Invoking vslypbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var n=Vo.getAdserverTargetingForAdUnitCode(e);return(0,o.transformAdServerTargetingObj)(n)}(0,o.logMessage)("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},Vo.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var n=L.getAllBidsForAdUnitCode(e).filter(Ur);return n.length?n.reduce(Or):{}}(0,o.logMessage)("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},Vo.getAdserverTargetingForAdUnitCode=function(e){return Vo.getAdserverTargeting(e)[e]},Vo.getAdserverTargeting=function(e){return(0,o.logInfo)("Invoking vslypbjs.getAdserverTargeting",arguments),Mr.getAllTargeting(e)},Vo.getConsentMetadata=function(){return(0,o.logInfo)("Invoking vslypbjs.getConsentMetadata"),ht.getConsentMeta()},Vo.getNoBids=function(){return(0,o.logInfo)("Invoking vslypbjs.getNoBids",arguments),da("getNoBids")},Vo.getNoBidsForAdUnitCode=function(e){return{bids:L.getNoBids().filter(function(n){return n.adUnitCode===e})}},Vo.getBidResponses=function(){return(0,o.logInfo)("Invoking vslypbjs.getBidResponses",arguments),da("getBidsReceived")},Vo.getBidResponsesForAdUnitCode=function(e){return{bids:L.getBidsReceived().filter(function(n){return n.adUnitCode===e})}},Vo.setTargetingForGPTAsync=function(e,n){(0,o.logInfo)("Invoking vslypbjs.setTargetingForGPTAsync",arguments),(0,o.isGptPubadsDefined)()?Mr.setTargetingForGPT(e,n):(0,o.logError)("window.googletag is not defined on the page")},Vo.setTargetingForAst=function(e){(0,o.logInfo)("Invoking vslypbjs.setTargetingForAn",arguments),Mr.isApntagDefined()?(Mr.setTargetingForAst(e),ee(Xo,Mr.getAllTargeting())):(0,o.logError)("window.apntag is not defined on the page")},Vo.renderAd=Ce("async",function(e,n,t){(0,o.logInfo)("Invoking vslypbjs.renderAd",arguments),(0,o.logMessage)("Calling renderAd with adId :"+n),function(e,n,t){var r;function i(e,t){Vr(Object.assign({id:n,bid:r},{reason:e,message:t}))}function a(n,t){var r,i=null===(r=e.defaultView)||void 0===r?void 0:r.frameElement;i&&(n&&(i.width=n,i.style.width&&(i.style.width="".concat(n,"px"))),t&&(i.height=t,i.style.height&&(i.style.height="".concat(t,"px"))))}var s,u=(s={resizeFn:a},function(e,n,t){Xr.hasOwnProperty(e)&&Xr[e](n,t,s)});function c(n){n.ad?(e.write(n.ad),e.close(),Kr({doc:e,bid:r,id:r.adId})):br(r).then(function(t){return t(n,{sendMessage:function(e,n){return u(e,n,r)},mkFrame:o.createIframe},e.defaultView)}).then(function(){return Kr({doc:e,bid:r,id:r.adId})},function(e){i((null==e?void 0:e.reason)||d.as.EXCEPTION,null==e?void 0:e.message),(null==e?void 0:e.stack)&&(0,o.logError)(e)});var t=document.createComment("Creative ".concat(r.creativeId," served by ").concat(r.bidder," Prebid.js Header Bidding"));(0,o.insertElement)(t,e,"html")}try{n&&e?Jr(n).then(function(i){r=i,ni({renderFn:c,resizeFn:a,adId:n,options:{clickUrl:null==t?void 0:t.clickThrough},bidResponse:i,doc:e})}):i(d.as.MISSING_DOC_OR_ADID,"missing ".concat(n?"doc":"adId"))}catch(e){i($r,e.message)}}(e,n,t)}),Vo.removeAdUnit=function(e){(0,o.logInfo)("Invoking vslypbjs.removeAdUnit",arguments),e?((0,o.isArray)(e)?e:[e]).forEach(function(e){for(var n=Vo.adUnits.length-1;n>=0;n--)Vo.adUnits[n].code===e&&Vo.adUnits.splice(n,1)}):Vo.adUnits=[]},Vo.requestBids=(ua=Ce("async",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,r=e.timeout,i=e.adUnits,a=e.adUnitCodes,s=e.labels,u=e.auctionId,c=e.ttlBuffer,d=e.ortb2,f=e.metrics,p=e.defer;ee(Qo);var g=r||l.$W.getConfig("bidderTimeout");(0,o.logInfo)("Invoking vslypbjs.requestBids",arguments),null==a||Array.isArray(a)||(a=[a]),a&&a.length?i=i.filter(function(e){return a.includes(e.code)}):a=i&&i.map(function(e){return e.code}),a=a.filter(o.uniques);var v={global:(0,o.mergeDeep)({},l.$W.getAnyConfig("ortb2")||{},d||{}),bidder:Object.fromEntries(Object.entries(l.$W.getBidderConfig()).map(function(e){var t=(0,n.A)(e,2),r=t[0],i=t[1];return[r,(0,o.deepClone)(i.ortb2)]}).filter(function(e){var t=(0,n.A)(e,2);return t[0],null!=t[1]}))};return Fo(k.U9.resolve(v.global)).then(function(e){return v.global=e,la({bidsBackHandler:t,timeout:g,adUnits:i,adUnitCodes:a,labels:s,auctionId:u,ttlBuffer:c,ortb2Fragments:v,metrics:f,defer:p})})},"requestBids"),_e(ua,Ho(function(){return!l.$W.getConfig("allowPrerendering")},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.adUnits||Vo.adUnits;return e.adUnits=(0,o.isArray)(n)?n.slice():[n],e.metrics=S(),e.metrics.checkpoint("requestBids"),e.defer=(0,k.v6)({promiseFactory:function(e){return new Promise(e)}}),ua.call(this,e),e.defer.promise})));var la=Ce("async",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.bidsBackHandler,t=e.timeout,r=e.adUnits,i=e.ttlBuffer,a=e.adUnitCodes,s=e.labels,u=e.auctionId,c=e.ortb2Fragments,d=e.metrics,f=e.defer,p=Qt(l.$W.getConfig("s2sConfig")||[]);function g(e,t,r){if("function"==typeof n)try{n(e,t,r)}catch(e){(0,o.logError)("Error executing bidsBackHandler",null,e)}f.resolve({bids:e,timedOut:t,auctionId:r})}(function(e){e.forEach(function(e){var n,t,r;null!=(r=null==(n=e)||null===(t=n.mediaTypes)||void 0===t?void 0:t.video)&&null==r.plcmt&&(r.context===on||[2,3,4].includes(r.placement)?r.plcmt=4:r.context!==on&&[2,6].includes(r.playbackmethod)&&(r.plcmt=2))})})(r),r=I(d).measureTime("requestBids.validate",function(){return ca(r)});var v={};if(r.forEach(function(e){var n,t=Object.keys(e.mediaTypes||{banner:"banner"}),r=e.bids.map(function(e){return e.bidder}),a=rr.bidderRegistry,s=r.filter(function(e){return!p.has(e)});e.adUnitId=(0,o.generateUUID)();var u=null===(n=e.ortb2Imp)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.tid;u&&(v.hasOwnProperty(e.code)?(0,o.logWarn)("Multiple distinct ortb2Imp.ext.tid were provided for twin ad units '".concat(e.code,"'")):v[e.code]=u),null==i||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=i),s.forEach(function(n){var r=a[n],i=r&&r.getSpec&&r.getSpec(),s=i&&i.supportedMediaTypes||["banner"];t.some(function(e){return s.includes(e)})||((0,o.logWarn)((0,o.unsupportedBidderMessage)(e,n)),e.bids=e.bids.filter(function(e){return e.bidder!==n}))})}),r&&0!==r.length){r.forEach(function(e){var n,t=(null===(n=e.ortb2Imp)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.tid)||v[e.code]||(0,o.generateUUID)();v.hasOwnProperty(e.code)||(v[e.code]=t),e.transactionId=t,(0,go.J)(e,"ortb2Imp.ext.tid",t)});var m=L.createAuction({adUnits:r,adUnitCodes:a,callback:g,cbTimeout:t,labels:s,auctionId:u,ortb2Fragments:c,metrics:d}),h=r.length;h>15&&(0,o.logInfo)("Current auction ".concat(m.getAuctionId()," contains ").concat(h," adUnits."),r),a.forEach(function(e){return Mr.setLatestAuctionForAdUnit(e,m.getAuctionId())}),m.callBids()}else(0,o.logMessage)("No adUnits configured. No bids requested."),g()},"startAuction");Vo.requestBids.before(function(e,n){function t(e){for(var n;n=e.shift();)n()}t(Qe),t(fa),e.call(this,n)},49),Vo.addAdUnits=function(e){(0,o.logInfo)("Invoking vslypbjs.addAdUnits",arguments),Vo.adUnits.push.apply(Vo.adUnits,(0,o.isArray)(e)?e:[e]),ee(Yo)},Vo.onEvent=function(e,n,t){(0,o.logInfo)("Invoking vslypbjs.onEvent",arguments),(0,o.isFn)(n)?!t||Zo[e].call(null,t)?Q(e,n,t):(0,o.logError)('The id provided is not valid for event "'+e+'" and no handler was set.'):(0,o.logError)('The event handler provided is not a function and was not set on event "'+e+'".')},Vo.offEvent=function(e,n,t){(0,o.logInfo)("Invoking vslypbjs.offEvent",arguments),t&&!Zo[e].call(null,t)||X(e,n,t)},Vo.getEvents=function(){return(0,o.logInfo)("Invoking vslypbjs.getEvents"),Z()},Vo.registerBidAdapter=function(e,n,t){(0,o.logInfo)("Invoking vslypbjs.registerBidAdapter",arguments);try{var r=t?fn(t):e();rr.registerBidAdapter(r,n)}catch(e){(0,o.logError)("Error registering bidder adapter : "+e.message)}},Vo.registerAnalyticsAdapter=function(e){(0,o.logInfo)("Invoking vslypbjs.registerAnalyticsAdapter",arguments);try{rr.registerAnalyticsAdapter(e)}catch(e){(0,o.logError)("Error registering analytics adapter : "+e.message)}},Vo.createBid=function(e){return(0,o.logInfo)("Invoking vslypbjs.createBid",arguments),fe(e)};var fa=[],pa=Ce("async",function(e){e&&!(0,o.isEmpty)(e)?((0,o.logInfo)("Invoking vslypbjs.enableAnalytics for: ",e),rr.enableAnalytics(e)):(0,o.logError)("vslypbjs.enableAnalytics should be called with option {}")},"enableAnalyticsCb");function ga(e){if("function"==typeof e)try{e.call()}catch(e){(0,o.logError)("Error processing command :",e.message,e.stack)}else(0,o.logError)("Commands written into vslypbjs.cmd.push must be wrapped in a function")}function va(e){e.forEach(function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){(0,o.logError)("Error processing command :","prebid.js",e)}})}Vo.enableAnalytics=function(e){fa.push(pa.bind(this,e))},Vo.aliasBidder=function(e,n,t){(0,o.logInfo)("Invoking vslypbjs.aliasBidder",arguments),e&&n?rr.aliasBidAdapter(e,n,t):(0,o.logError)("bidderCode and alias must be passed as arguments","vslypbjs.aliasBidder")},Vo.aliasRegistry=rr.aliasRegistry,l.$W.getConfig("aliasRegistry",function(e){"private"===e.aliasRegistry&&delete Vo.aliasRegistry}),Vo.getAllWinningBids=function(){return L.getAllWinningBids()},Vo.getAllPrebidWinningBids=function(){return(0,o.logWarn)("getAllPrebidWinningBids may be removed or renamed in a future version. This function returns bids that have won in prebid and have had targeting set but have not (yet?) won in the ad server. It excludes bids that have been rendered."),L.getBidsReceived().filter(function(e){return e.status===d.tl.BID_TARGETING_SET})},Vo.getHighestCpmBids=function(e){return Mr.getWinningBids(e)},Vo.clearAllAuctions=function(){L.clearAllAuctions()},Vo.markWinningBidAsUsed=function(e){var n,t=e.adId,r=e.adUnitCode,i=e.analytics,a=void 0!==i&&i,s=e.events,u=void 0!==s&&s;r&&null==t?n=Mr.getWinningBids(r):t?n=L.getBidsReceived().filter(function(e){return e.adId===t}):(0,o.logWarn)("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),n.length>0&&(a||u?Hr(n[0]):L.addWinningBid(n[0]),ti(n[0]))},Vo.getConfig=l.$W.getAnyConfig,Vo.readConfig=l.$W.readAnyConfig,Vo.mergeConfig=l.$W.mergeConfig,Vo.mergeBidderConfig=l.$W.mergeBidderConfig,Vo.setConfig=l.$W.setConfig,Vo.setBidderConfig=l.$W.setBidderConfig,Vo.que.push(function(){window.addEventListener("message",function(e){!function(e){var n=e.message?"message":"data",t={};try{t=JSON.parse(e[n])}catch(e){return}t&&t.adId&&t.message&&Ao.hasOwnProperty(t.message)&&Jr(t.adId,t.message===d.nl.REQUEST).then(function(n){var r,i;Ao[t.message]((r=t.adId,i=function(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw(0,o.logError)(e),new Error(e)}:e.ports.length>0?function(n){e.ports[0].postMessage(JSON.stringify(n))}:function(n){e.source.postMessage(JSON.stringify(n),e.origin)}}(e),function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];return i.apply(void 0,[Object.assign({},e,{adId:r})].concat(t))}),t,n)})}(e)},!1)}),Vo.processQueue=Ho(function(){return(0,i.m)().delayPrerendering},function(){Vo.que.push=Vo.cmd.push=ga,ui(),Ce.ready(),va(Vo.que),va(Vo.cmd)}),Vo.triggerBilling=function(e){var n=e.adId,t=e.adUnitCode;L.getAllWinningBids().filter(function(e){return e.adId===n||null==n&&e.adUnitCode===t}).forEach(function(e){rr.triggerBilling(e),si(e)})};var ma="hb_pb_cat_dur",ha="hb_cache_id",ba=50,ya=5,wa=function(){var e={};function n(n){var t,r,i;e[n]={},e[n].bidStorage=new Set,e[n].queueDispatcher=(t=ba,i=1,function(e,n,o,a){var s=this,u=function(){Ia.call(s,e,n,o)};clearTimeout(r),a?i=1:i===ya?(i=1,u()):(i++,r=setTimeout(u,t))}),e[n].initialCacheKey=(0,o.generateUUID)()}return{addBid:function(t){e[t.auctionId]||n(t.auctionId),e[t.auctionId].bidStorage.add(t)},removeBid:function(n){e[n.auctionId].bidStorage.delete(n)},getBids:function(n){return e[n.auctionId]&&e[n.auctionId].bidStorage.values()},getQueueDispatcher:function(n){return e[n.auctionId]&&e[n.auctionId].queueDispatcher},setupInitialCacheKey:function(n){e[n.auctionId]||(e[n.auctionId]={},e[n.auctionId].initialCacheKey=(0,o.generateUUID)())},getInitialCacheKey:function(n){return e[n.auctionId]&&e[n.auctionId].initialCacheKey}}}();function Aa(e,n){var t,r=wa.getInitialCacheKey(e),i=(0,a.A)(e,"video.durationBucket"),o=function(e){var n;if(l.$W.getConfig("adpod.prioritizeDeals")&&(0,a.A)(e,"video.dealTier")){var t=l.$W.getConfig("adpod.dealTier.".concat(e.bidderCode,".prefix"));n=t?t+(0,a.A)(e,"video.dealTier"):(0,a.A)(e,"video.dealTier")}else{var r=ro(e);n=io(r)(e)}return n}(e);if(n){var s=(0,a.A)(e,"meta.adServerCatId");t="".concat(o,"_").concat(s,"_").concat(i,"s")}else t="".concat(o,"_").concat(i,"s");e.adserverTargeting||(e.adserverTargeting={}),e.adserverTargeting[ma]=t,e.adserverTargeting[ha]=r,e.videoCacheKey=r,e.customCacheKey="".concat(t,"_").concat(r)}function Ia(e,n,t){!function(e){for(var n=0;n<e.length;n++)wa.removeBid(e[n])}(n),xi(n,function(r,i){if(r)(0,o.logWarn)("Failed to save to the video cache: ".concat(r,". Video bid(s) must be discarded."));else for(var a=0;a<i.length;a++)""!==i[a].uuid?eo(e,n[a]):(0,o.logInfo)("Detected a bid was not cached because the custom key was already registered.  Attempted to use key: ".concat(n[a].customCacheKey,". Bid was: "),n[a]),t()})}function Ea(e,n){return e.adserverTargeting[d.xS.PRICE_BUCKET]/e.video.durationBucket<n.adserverTargeting[d.xS.PRICE_BUCKET]/n.video.durationBucket?1:e.adserverTargeting[d.xS.PRICE_BUCKET]/e.video.durationBucket>n.adserverTargeting[d.xS.PRICE_BUCKET]/n.video.durationBucket?-1:0}l.$W.getConfig("adpod",function(e){return function(e){void 0!==e.bidQueueTimeDelay&&("number"==typeof e.bidQueueTimeDelay&&e.bidQueueTimeDelay>0?ba=e.bidQueueTimeDelay:(0,o.logWarn)("Detected invalid value for adpod.bidQueueTimeDelay in setConfig; must be a positive number.  Using default: ".concat(ba))),void 0!==e.bidQueueSizeLimit&&("number"==typeof e.bidQueueSizeLimit&&e.bidQueueSizeLimit>0?ya=e.bidQueueSizeLimit:(0,o.logWarn)("Detected invalid value for adpod.bidQueueSizeLimit in setConfig; must be a positive number.  Using default: ".concat(ya)))}(e.adpod)}),xe(ke("callPrebidCache"),function(e,n,t,r,i){if(i&&i.context===vr){var s=l.$W.getConfig("adpod.brandCategoryExclusion");!(0,a.A)(t,"meta.adServerCatId")&&s?((0,o.logWarn)("Detected a bid without meta.adServerCatId while setConfig({adpod.brandCategoryExclusion}) was enabled.  This bid has been rejected:",t),r()):!1===l.$W.getConfig("adpod.deferCaching")?(wa.addBid(t),Aa(t,s),function(e,n,t){var r=wa.getBids(n);if(r){var i=Array.from(r),a=wa.getQueueDispatcher(n),s=!(e.getAuctionStatus()===Fi);a(e,i,t,s)}else(0,o.logWarn)("Attempted to cache a bid from an unknown auction. Bid:",n)}(n,t,r)):(wa.setupInitialCacheKey(t),Aa(t,s),eo(n,t),r())}else e.call(this,n,t,r,i)}),xe(ca,function(e,n){var t=n.filter(function(e){var n=(0,a.A)(e,"mediaTypes"),t=(0,a.A)(n,"video");if(t&&t.context===vr){if(Object.keys(n).length>1)return(0,o.logWarn)("Detected more than one mediaType in adUnitCode: ".concat(e.code," while attempting to define an 'adpod' video adUnit.  'adpod' adUnits cannot be mixed with other mediaTypes.  This adUnit will be removed from the auction.")),!1;var r="Detected missing or incorrectly setup fields for an adpod adUnit.  Please review the following fields of adUnitCode: ".concat(e.code,".  This adUnit will be removed from the auction."),i=!!(t.playerSize&&((0,o.isArrayOfNums)(t.playerSize,2)||(0,o.isArray)(t.playerSize)&&t.playerSize.every(function(e){return(0,o.isArrayOfNums)(e,2)}))||t.sizeConfig),s=!!(t.adPodDurationSec&&(0,o.isNumber)(t.adPodDurationSec)&&t.adPodDurationSec>0),u=!!(t.durationRangeSec&&(0,o.isArrayOfNums)(t.durationRangeSec)&&t.durationRangeSec.every(function(e){return e>0}));if(!i||!s||!u)return r+=i?"":"\nmediaTypes.video.playerSize",r+=s?"":"\nmediaTypes.video.adPodDurationSec",r+=u?"":"\nmediaTypes.video.durationRangeSec",(0,o.logWarn)(r),!1}return!0});n=t,e.call(this,n)}),xe(sn,function(e,n,t,i,s){if(s===vr){var u=!0;if(l.$W.getConfig("adpod.brandCategoryExclusion")&&!(0,a.A)(n,"meta.primaryCatId")&&(u=!1),(0,a.A)(n,"video"))if((0,a.A)(n,"video.context")&&n.video.context===vr||(u=!1),!(0,a.A)(n,"video.durationSeconds")||n.video.durationSeconds<=0)u=!1;else{var c=function(e,n){var t=(0,a.A)(n,"video.durationSeconds"),i=e.durationRangeSec;if(i.sort(function(e,n){return e-n}),e.requireExactDuration){if(!(i||[]).find(function(e){return e===t}))return(0,o.logWarn)("Detected a bid with a duration value not part of the list of accepted ranges specified in adUnit.mediaTypes.video.durationRangeSec.  Exact match durations must be used for this adUnit. Rejecting bid: ",n),!1;n.video.durationBucket=t}else{var s=Math.max.apply(Math,(0,r.A)(i));if(!(t<=s+2))return(0,o.logWarn)("Detected a bid with a duration value outside the accepted ranges specified in adUnit.mediaTypes.video.durationRangeSec.  Rejecting bid: ",n),!1;var u=(i||[]).find(function(e){return e+2>=t});n.video.durationBucket=u}return!0}(i,n);c||(u=!1)}l.$W.getConfig("cache.url")||!n.vastXml||n.vastUrl||((0,o.logError)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),u=!1),e.bail(u)}else e.call(this,n,t,i,s)});var Sa={TARGETING_KEY_PB_CAT_DUR:ma,TARGETING_KEY_CACHE_ID:ha,getTargeting:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.codes,i=t.callback;if(i){var s=function(e){return L.getAdUnits().filter(function(e){return(0,a.A)(e,"mediaTypes.video.context")===vr}).filter(function(n){return!(e.length>0)||-1!=e.indexOf(n.code)})}(r=r||[]),u=L.getBidsReceived(),c=l.$W.getConfig("adpod.brandCategoryExclusion"),d=l.$W.getConfig("adpod.deferCaching"),f="boolean"!=typeof d||d,p=function(e,n){var t=n.map(function(e){return e.code});return e.filter(function(e){return-1!=t.indexOf(e.adUnitCode)&&e.video&&e.video.context===vr})}(u,s);if(p=c||f?function(n){var t=n.map(function(n){return Object.assign({},n,(0,e.A)({},ma,n.adserverTargeting[ma]))});t=(0,o.groupBy)(t,ma);var r=[];return Object.keys(t).forEach(function(e){var n;t[e].sort((n="responseTimestamp",function(e,t){return e[n]<t[n]?1:e[n]>t[n]?-1:0})),r.push(t[e][0])}),r}(p):p,l.$W.getConfig("adpod.prioritizeDeals")){var g=p.reduce(function(e,n){var t=(0,a.A)(n,"video.dealTier"),r=l.$W.getConfig("adpod.dealTier.".concat(n.bidderCode,".minDealTier"));return r&&t?t>=r?e[1].push(n):e[0].push(n):t?e[1].push(n):e[0].push(n),e},[[],[]]),v=(0,n.A)(g,2),m=v[0],h=v[1];h.sort(Ea),m.sort(Ea),p=h.concat(m)}else p.sort(Ea);var b={};if(!1===f)s.forEach(function(n){var t=[],r=(0,a.A)(n,"mediaTypes.video.adPodDurationSec");p.filter(function(e){return e.adUnitCode===n.code}).forEach(function(n,i,o){n.video.durationBucket<=r&&(t.push((0,e.A)({},ma,n.adserverTargeting[ma])),r-=n.video.durationBucket),i===o.length-1&&t.length>0&&t.push((0,e.A)({},ha,n.adserverTargeting[ha]))}),b[n.code]=t}),i(null,b);else{var y=[];s.forEach(function(e){var n=(0,a.A)(e,"mediaTypes.video.adPodDurationSec");p.filter(function(n){return n.adUnitCode===e.code}).forEach(function(e){e.video.durationBucket<=n&&(y.push(e),n-=e.video.durationBucket)})}),function(e,n){xi(e,function(t,r){if(t)n(t,null);else{for(var i=[],o=0;o<r.length;o++)""!==r[o]&&i.push(e[o]);n(null,i)}})}(y,function(n,t){if(n)i(n,null);else{var r=(0,o.groupBy)(t,"adUnitCode");Object.keys(r).forEach(function(n){var t=[];r[n].forEach(function(n,r,i){t.push((0,e.A)({},ma,n.adserverTargeting[ma])),r===i.length-1&&t.length>0&&t.push((0,e.A)({},ha,n.adserverTargeting[ha]))}),b[n]=t}),i(null,b)}})}return b}(0,o.logError)("No callback function was defined in the getTargeting call.  Aborting getTargeting().")}};Object.freeze(Sa),Re("adpod",function(){(0,o.isPlainObject)(arguments.length<=0?void 0:arguments[0])?function(e,n){for(var t in n)e[t]=n[t]}(arguments.length<=0?void 0:arguments[0],Sa):(0,o.logError)("Adpod module needs plain object to share methods with submodule")}),(0,i.E)("adpod");var Ca=en("categoryTranslation"),Ta="iabToFwMappingkey",Oa="iabToFwMappingkeyPub",ka=Ce("async",function(e){"freewheel"===e&&Da("https://cdn.jsdelivr.net/gh/prebid/category-mapping-file@1/freewheel-mapping.json",Ta)},"registerAdserver");Oe.then(function(){return ka()});var xa=O("categoryTranslation",function(e,n,t,r){if(!t)return e.call(this,n,t,r);if(!l.$W.getConfig("adpod.brandCategoryExclusion"))return e.call(this,n,t,r);var i=l.$W.getConfig("brandCategoryTranslation.translationFile")?Oa:Ta;if(t.meta&&!t.meta.adServerCatId){var a=Ca.getDataFromLocalStorage(i);if(a){try{a=JSON.parse(a)}catch(e){(0,o.logError)("Failed to parse translation mapping file")}t.meta.primaryCatId&&a.mapping&&a.mapping[t.meta.primaryCatId]?t.meta.adServerCatId=a.mapping[t.meta.primaryCatId].id:t.meta.adServerCatId=void 0}else(0,o.logError)("Translation mapping data not found in local storage")}e.call(this,n,t,r)});function Da(e,n){xe(Ki,xa,50);var t=Ca.getDataFromLocalStorage(n);try{(!(t=t?JSON.parse(t):void 0)||(0,o.timestamp)()>t.lastUpdated+864e5)&&Cn(e,{success:function(e){try{(e=JSON.parse(e)).lastUpdated=(0,o.timestamp)(),Ca.setDataInLocalStorage(n,JSON.stringify(e))}catch(e){(0,o.logError)("Failed to parse translation mapping file")}},error:function(){(0,o.logError)("Failed to load brand category translation file.")}})}catch(e){(0,o.logError)("Failed to parse translation mapping file")}}l.$W.getConfig("brandCategoryTranslation",function(e){return function(e){e.translationFile&&Da(e.translationFile,Oa)}(e.brandCategoryTranslation)}),(0,i.E)("categoryTranslation");var Ra=new Map;function ja(e){var t=new Map,i={};return Object.entries(e).forEach(function(e){var r,o=(0,n.A)(e,2),a=o[0],s=(0,o[1])();if(s){var u;i[a]=s.idObj[a];var c=null===(u=s.submodule.eids)||void 0===u?void 0:u[a];"function"==typeof c&&(r=c,c=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return r.apply(void 0,n.concat([s.config]))}),t.set(a,c)}}),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ra,i={};function a(e){var n,t,o=JSON.stringify([null===(n=e.source)||void 0===n?void 0:n.toLowerCase()].concat((0,r.A)(Object.keys(e).filter(function(e){return!["uids","source"].includes(e)}).sort().map(function(n){return e[n]}))));i.hasOwnProperty(o)?(t=i[o].uids).push.apply(t,(0,r.A)(e.uids)):i[o]=e}return Object.entries(e).forEach(function(e){var r=(0,n.A)(e,2),i=r[0],s=r[1];s=Array.isArray(s)?s:[s];var u,c=t.get(i);if("pubProvidedId"===i)u=(0,o.deepClone)(s);else if("function"==typeof c)try{u=(0,o.deepClone)(c(s)),Array.isArray(u)||(u=[u]),u.forEach(function(e){return e.uids=e.uids.filter(function(e){var n=e.id;return(0,o.isStr)(n)})}),u=u.filter(function(e){var n=e.uids;return(null==n?void 0:n.length)>0})}catch(e){(0,o.logError)('Could not generate EID for "'.concat(i,'"'),e)}else u=s.map(function(e){return function(e,n,t){if(t&&e){var r={};r.source=(0,o.isFn)(t.getSource)?t.getSource(e):t.source;var i=(0,o.isFn)(t.getValue)?t.getValue(e):e;if((0,o.isStr)(i)){var a={id:i,atype:t.atype};if((0,o.isFn)(t.getUidExt)){var s=t.getUidExt(e);s&&(a.ext=s)}if(r.uids=[a],t.inserter||(0,o.isFn)(t.getInserter)){var u=(0,o.isFn)(t.getInserter)?t.getInserter(e):t.inserter;null!=u&&(r.inserter=u)}if(t.matcher||(0,o.isFn)(t.getMatcher)){var c=(0,o.isFn)(t.getMatcher)?t.getMatcher(e):t.matcher;null!=c&&(r.matcher=c)}if(null!=t.mm&&(r.mm=t.mm),(0,o.isFn)(t.getEidExt)){var d=t.getEidExt(e);d&&(r.ext=d)}return r}}return null}(e,0,c)});Array.isArray(u)&&u.filter(function(e){return null!=e}).forEach(a)}),Object.values(i)}(i,t)}var _a=Ce("sync",function(){});function Pa(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var Ua,Ba,qa,Na,Ma,Wa,Fa="User ID",La=Ye,za=Ke,Ga="_pbjs_id_optout",$a=en("userId"),Ja={isAllowed:Je},Ha=[],Va=[],Ka={},Ya=[],Qa=function(){return null==Wa&&(Wa=S()),Wa};function Xa(e){return Qa().fork().renameWith(function(n){return["userId.mod.".concat(n),"userId.mods.".concat(e,".").concat(n)]})}function Za(e,n){n=n||e.storageMgr;var t="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,r=e.config.storage.name;return function(e,i,o){n.setCookie(r+(e||""),i,o,"Lax",t)}}function es(e,n){var t=e.config.storage;try{var r=new Date(Date.now()+864e5*t.expires).toUTCString(),i=(0,o.isPlainObject)(n)?JSON.stringify(n):n;e.enabledStorageTypes.forEach(function(n){switch(n){case La:!function(e,n,t){var r=e.config.storage,i=Za(e);i(null,n,t),i("_cst",Is(),t),"number"==typeof r.refreshInSeconds&&i("_last",(new Date).toUTCString(),t)}(e,i,r);break;case za:!function(e,n,t){var r=e.config.storage,i=e.storageMgr;i.setDataInLocalStorage("".concat(r.name,"_exp"),t),i.setDataInLocalStorage("".concat(r.name,"_cst"),Is()),i.setDataInLocalStorage(r.name,encodeURIComponent(n)),"number"==typeof r.refreshInSeconds&&i.setDataInLocalStorage("".concat(r.name,"_last"),(new Date).toUTCString())}(e,i,r)}})}catch(e){(0,o.logError)(e)}}function ns(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.config.storage,i=t?"".concat(r.name,"_").concat(t):r.name;try{e.enabledStorageTypes.find(function(t){switch(t){case La:n=function(e,n){return e.storageMgr.getCookie(n)}(e,i);break;case za:n=function(e,n){var t=e.storageMgr,r=e.config.storage,i=t.getDataFromLocalStorage("".concat(r.name,"_exp"));return""===i?t.getDataFromLocalStorage(n):i&&new Date(i).getTime()-Date.now()>0?decodeURIComponent(t.getDataFromLocalStorage(n)):void 0}(e,i)}return!!n}),"string"==typeof n&&"{"===n.trim().charAt(0)&&(n=JSON.parse(n))}catch(e){(0,o.logError)(e)}return n}function ts(e,n,t){n=Qa().fork().startTiming("userId.callbacks.total").stopBefore(n);var r=(0,o.delayExecution)(function(){clearTimeout(void 0),n()},e.length);e.forEach(function(e){var n=Xa(e.submodule.name).startTiming("callback").stopBefore(r);try{e.callback(function(r){r?(e.config.storage&&es(e,r),e.idObj=e.submodule.decode(r,e.config),t.refresh(),Es(t)):(0,o.logInfo)("".concat(Fa,": ").concat(e.submodule.name," - request id responded with an empty value")),n()},ns.bind(null,e))}catch(t){(0,o.logError)("Error in userID module '".concat(e.submodule.name,"':"),t),n()}e.callback=void 0})}function rs(e){return Object.fromEntries(Object.entries(e).map(function(e){var t,r=(0,n.A)(e,2),i=r[0];return[i,null===(t=(0,r[1])())||void 0===t||null===(t=t.idObj)||void 0===t?void 0:t[i]]}).filter(function(e){var t=(0,n.A)(e,2);return t[0],null!=t[1]}))}function is(e,t,r){var i={};return e.forEach(function(e){var o=r(e),a=function(e){var n;if(e.primaryIds)return e.primaryIds;var t=Object.keys(null!==(n=e.eids)&&void 0!==n?n:{});if(t.length>1)throw new Error("ID submodule ".concat(e.name," can provide multiple IDs, but does not specify 'primaryIds'"));return t}(o);t(e).forEach(function(t){var r,s,u,c=i[t]=null!==(r=i[t])&&void 0!==r?r:[],d=null!==(s=null===(u=Ka[t])||void 0===u?void 0:u.indexOf(o.name))&&void 0!==s?s:a.includes(t)?0:-1,l=c.findIndex(function(e){return(0,n.A)(e,1)[0]<d});c.splice(-1===l?c.length:l,0,[d,e])})}),Object.fromEntries(Object.entries(i).map(function(e){var t=(0,n.A)(e,2);return[t[0],t[1].map(function(e){var t=(0,n.A)(e,2);return t[0],t[1]})]}))}function os(){var e={submodules:[],global:{},bidder:{},combined:{},refresh:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=new Set(t.map(function(e){return e.submodule}));e.submodules=e.submodules.filter(function(e){return!r.has(e.submodule)}).concat(t),function(){var t=is(e.submodules,function(e){var n;return Object.keys(null!==(n=e.idObj)&&void 0!==n?n:{})},function(e){return e.submodule}),r={},i={};function a(e,n,t){return function(){var r,i=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return Pa(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pa(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}(t);try{for(i.s();!(r=i.n()).done;){var a,s,u=r.value,c=u.allowed,d=u.bidders,l=u.module;if(Ja.isAllowed(re,ir(Ae,null==l||null===(a=l.config)||void 0===a?void 0:a.name,{init:!1}))&&null!=(null===(s=l.idObj)||void 0===s?void 0:s[e])){if(c)return l;if(n){var f=function(e){return e.map(function(e){return e.module.submodule.name}).join(", ")};return(0,o.logWarn)("userID modules ".concat(f(t)," provide the same ID ('").concat(e,"'); ").concat(l.submodule.name," is the preferred source, but it's configured only for some bidders, unlike ").concat(f(t.filter(function(e){return null==e.bidders})),'. Other bidders will not see the "').concat(e,'" ID.')),null}if(null==d)return null}}}catch(e){i.e(e)}finally{i.f()}return null}}Object.entries(t).forEach(function(e){var t=(0,n.A)(e,2),o=t[0],s=t[1],u=!0,c=new Set;s=s.map(function(e){var n=null;return Array.isArray(e.config.bidders)&&e.config.bidders.length>0?(n=e.config.bidders).forEach(function(e){return c.add(e)}):u=!1,{module:e,bidders:n}}),u||(r[o]=a(o,!0,s.map(function(e){var n=e.bidders;return{allowed:null==n,bidders:n,module:e.module}}))),c.forEach(function(e){var n;i[e]=null!==(n=i[e])&&void 0!==n?n:{},i[e][o]=a(o,!1,s.map(function(n){var t=n.bidders,r=n.module;return{allowed:null==t?void 0:t.includes(e),bidders:t,module:r}}))})});var s=Object.values(i).concat([r]).reduce(function(e,n){return Object.assign(e,n)},{});Object.assign(e,{global:r,bidder:i,combined:s})}()}};return e}function as(e){var t=e.adUnits,r=e.ortb2Fragments;if(function(e){var t,r,i=e.global,o=e.bidder,a=Ua,s=a.global,u=a.bidder,c=ja(s);c.length>0&&(0,go.J)(i,"user.ext.eids",(null!==(t=null===(r=i.user)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.eids)&&void 0!==t?t:[]).concat(c)),Object.entries(u).forEach(function(e){var t,r,i=(0,n.A)(e,2),a=i[0],s=ja(i[1]);s.length>0&&(0,go.J)(o,"".concat(a,".user.ext.eids"),(null!==(t=null===(r=o[a])||void 0===r||null===(r=r.user)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.eids)&&void 0!==t?t:[]).concat(s))})}(r=null!=r?r:{global:{},bidder:{}}),t&&Array.isArray(t)&&t.length){var i=rs(Ua.global);t.forEach(function(e){e.bids&&Array.isArray(e.bids)&&e.bids.forEach(function(e){var n,t=Object.assign({},i,rs(null!==(n=Ua.bidder[e.bidder])&&void 0!==n?n:{}));Object.keys(t).length>0&&(e.userId=t)})})}}var ss,us={};function cs(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gs()||[],t=Na&&n.find(function(e){return e.source===Na});if(t&&"string"==typeof(null==t||null===(e=t.uids)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.id)){var r=t.uids[0].id.replace(/[\W_]/g,"");if(r.length>=32&&r.length<=150)return r;(0,o.logWarn)("User ID - Googletag Publisher Provided ID for ".concat(Na," is not between 32 and 150 characters - ").concat(r))}}var ds=T("userId",function(e,n){var t=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.mkDelay,o=void 0===i?k.cb:i,a=r.getIds,s=void 0===a?As:a;k.U9.race([s().catch(function(){return null}),o(qa)]).then(function(){as(n),Qa().join(I(n.metrics),{propagate:!1,includeGroups:!0}),e.call(t,n)})});function ls(e,n){n.forEach(function(e){e.bids.forEach(function(n){return Object.defineProperty(n,"userIdAsEids",{configurable:!0,get:function(){var n;return null===(n=e.ortb2.user)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.eids}})})}),e(n)}function fs(e,n){var t,r,i={},a=null!==(t=null===(r=n.getFPD())||void 0===r||null===(r=r.global)||void 0===r||null===(r=r.user)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.eids)&&void 0!==t?t:[];n.getAdUnits().flatMap(function(e){return e.bids}).forEach(function(e){var t=function(e){return null==e?a:(i.hasOwnProperty(e)||(i[e]=(0,o.mergeDeep)({eids:[]},{eids:a},{eids:null!==(t=null===(r=n.getFPD())||void 0===r||null===(r=r.bidder)||void 0===r||null===(r=r[e])||void 0===r||null===(r=r.user)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.eids)&&void 0!==t?t:[]}).eids),i[e]);var t,r}(e.bidder);t.length>0&&(e.userIdAsEids=t)}),e(n)}function ps(){return rs(Ua.combined)}function gs(){return ja(Ua.combined)}function vs(e){return gs().filter(function(n){return n.source===e})[0]}function ms(e,n,t){return ys().then(function(){var r={};if((0,o.isFn)(t)){(0,o.logInfo)("".concat(Fa," - Getting encrypted signal from custom function : ").concat(t.name," & source : ").concat(e," "));var i=t(e);r[e]=i?hs(i):null}else{var a=vs(e);(0,o.logInfo)("".concat(Fa," - Getting encrypted signal for eids :").concat(JSON.stringify(a))),(0,o.isEmpty)(a)||(r[a.source]=!0===n?hs(a):a.uids[0].id)}return(0,o.logInfo)("".concat(Fa," - Fetching encrypted eids: ").concat(r[e])),r[e]})}function hs(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t="";return 1===n&&(t="object"===(0,s.A)(e)?window.btoa(JSON.stringify(e)):window.btoa(e)),"".concat(n,"||").concat(t)}function bs(){if((0,o.isGptPubadsDefined)()){window.googletag.secureSignalProviders=window.googletag.secureSignalProviders||[];var e=l.$W.getConfig("userSync.encryptedSignalSources");if(e){var n=e.registerDelay||0;setTimeout(function(){e.sources&&e.sources.forEach(function(e){var n=e.source,t=e.encrypt,r=e.customFunc;n.forEach(function(e){window.googletag.secureSignalProviders.push({id:e,collectorFunction:function(){return ms(e,t,r)}})})})},n)}else(0,o.logWarn)("".concat(Fa," - ESP : encryptedSignalSources config not defined under userSync Object"))}}function ys(e){return ss(e).then(function(){return ps()},function(e){return e===us?Promise.resolve().then(As):((0,o.logError)("Error initializing userId",e),k.U9.reject(e))})}function ws(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).submoduleNames,n=arguments.length>1?arguments[1]:void 0;return ys({refresh:!0,submoduleNames:e}).then(function(e){return n&&(0,o.isFn)(n)&&n(),e})}function As(){return ys()}function Is(){for(var e=Number(ht.hash),n=[];e>0;)n.push(String.fromCharCode(255&e)),e>>>=8;return btoa(n.join())}function Es(e){var n=ja(e.combined);if(n.length&&Na){var t=cs(n);t&&((0,o.isGptPubadsDefined)()?window.googletag.pubads().setPublisherProvidedId(t):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.googletag.pubads().setPublisherProvidedId(t)})))}}function Ss(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Qa().fork().measureTime("userId.init.modules",function(){if(!n.length)return[];if(n.forEach(function(e){return Os(e)}),n=n.filter(function(e){return(!e.config.storage||function(e){return!!e.enabledStorageTypes.length}(e))&&Ja.isAllowed(re,ir(Ae,e.config.name))}),!n.length)return(0,o.logWarn)("".concat(Fa," - no ID module configured")),[];var r=n.reduce(function(e,n){return Xa(n.submodule.name).measureTime("init",function(){try{(function(e,n){var t=ht.getConsentData();if(e.config.storage){var r,i=ns(e),a=!1;if("number"==typeof e.config.storage.refreshInSeconds){var s=new Date(ns(e,"last"));a=s&&Date.now()-s.getTime()>1e3*e.config.storage.refreshInSeconds}if(!i||a||n||function(e){var n=ns(e,"cst");return!n||n!==Is()}(e)){var u=Object.assign({enabledStorageTypes:e.enabledStorageTypes},e.config);r=e.submodule.getId(u,t,i)}else"function"==typeof e.submodule.extendId&&(r=e.submodule.extendId(e.config,t,i));(0,o.isPlainObject)(r)&&(r.id&&(es(e,r.id),i=r.id),"function"==typeof r.callback&&(e.callback=r.callback)),i&&(e.idObj=e.submodule.decode(i,e.config))}else if(e.config.value)e.idObj=e.config.value;else{var c=e.submodule.getId(e.config,t);(0,o.isPlainObject)(c)&&("function"==typeof c.callback&&(e.callback=c.callback),c.id&&(e.idObj=e.submodule.decode(c.id,e.config)))}})(n,t),e.push(n)}catch(e){(0,o.logError)("Error in userID module '".concat(n.submodule.name,"':"),e)}return e})},[]);return e.refresh(r),Es(e),r})}function Cs(e){var n;return(null==e||null===(n=e.storage)||void 0===n||null===(n=n.type)||void 0===n?void 0:n.trim().split(/\s*&\s*/))||[]}var Ts=new Set([za,La]);function Os(e){if(!e.enabledStorageTypes){var n=Cs(e.config);e.enabledStorageTypes=n.filter(function(n){switch(n){case za:return function(e){return!(!e.storageMgr.localStorageIsEnabled()||$a.getDataFromLocalStorage(Ga)&&((0,o.logInfo)("".concat(Fa," - opt-out localStorage found, storage disabled")),1))}(e);case La:return function(e){return!(!e.storageMgr.cookiesAreEnabled()||$a.getCookie(Ga)&&((0,o.logInfo)("".concat(Fa," - opt-out cookie found, storage disabled")),1))}(e)}return!1})}}function ks(e){Ra.clear(),Object.entries(is(e,function(e){return Object.keys(e.eids||{})},function(e){return e})).forEach(function(e){var t=(0,n.A)(e,2),r=t[0],i=t[1];return Ra.set(r,i[0].eids[r])})}function xs(){ks(Ya);var e=function(e){function n(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];o.logWarn.apply(void 0,["Invalid userSync.userId config: ".concat(e)].concat(t))}return Array.isArray(e)?e.filter(function(e){if(null==e||!e.name)return n('must specify "name"',e);if(e.storage){if(!e.storage.name||!e.storage.type)return n('must specify "storage.name" and "storage.type"',e);if(!function(e){return Cs(e).every(function(e){return Ts.has(e)})}(e))return n('invalid "storage.type"',e);["expires","refreshInSeconds"].forEach(function(t){var r=e.storage[t];null!=r&&"number"!=typeof r&&(r=Number(r),isNaN(r)?(n("storage.".concat(t," must be a number and will be ignored"),e),delete e.storage[t]):e.storage[t]=r)})}return!0}):(null!=e&&n("must be an array",e),[])}(Va);if(e.length){var n=Ya.filter(function(e){return!(Ha||[]).find(function(n){return n.name===e.name})});Ha.splice(0,Ha.length),n.map(function(n){var t=(e||[]).find(function(e){return e.name&&(e.name.toLowerCase()===n.name.toLowerCase()||n.aliasName&&e.name.toLowerCase()===n.aliasName.toLowerCase())});return t&&n.name!==t.name&&(t.name=n.name),t?{submodule:n,config:t,callback:void 0,idObj:void 0,storageMgr:Ze({moduleType:Ae,moduleName:t.name})}:null}).filter(function(e){return null!==e}).forEach(function(e){return Ha.push(e)}),Ha.length&&(la.getHooks({hook:ds}).length||(la.before(ds,100),rr.callDataDeletionRequest.before(Ds),_a.after(function(e){return e(cs())})),(0,o.logInfo)("".concat(Fa," - usersync config updated for ").concat(Ha.length," submodules: "),Ha.map(function(e){return e.submodule.name})))}}function Ds(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];(0,o.logInfo)("UserID: received data deletion request; deleting all stored IDs..."),Ha.forEach(function(e){if("function"==typeof e.submodule.onDataDeletionRequest)try{var n;(n=e.submodule).onDataDeletionRequest.apply(n,[e.config,e.idObj].concat(t))}catch(n){(0,o.logError)("Error calling onDataDeletionRequest for ID submodule ".concat(e.submodule.name),n)}!function(e){Os(e),e.enabledStorageTypes.forEach(function(n){switch(n){case La:!function(e){var n=Za(e,$a),t=new Date(Date.now()-864e5).toUTCString();["","_last","_cst"].forEach(function(e){try{n(e,"",t)}catch(e){(0,o.logError)(e)}})}(e);break;case za:!function(e){["","_last","_exp","_cst"].forEach(function(n){try{$a.removeDataFromLocalStorage(e.config.storage.name+n)}catch(e){(0,o.logError)(e)}})}(e)}})}(e)}),e.apply(this,t)}function Rs(e){return function(){return Promise.resolve(e.apply(this,arguments))}}function js(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}(function(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).mkDelay,t=void 0===n?k.cb:n;Na=void 0,Ha=[],Va=[],Ua=os(),ss=function(){var e,n,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mkDelay,r=void 0===t?k.cb:t,i=(0,k.v6)(),a=(0,k.v6)(),s=!1;function u(t){return n=Qa().fork(),null!=e&&e.reject(us),e=(0,k.v6)(),k.U9.race([t,e.promise]).finally(n.startTiming("userId.total"))}var c=Ua,l=Ha;function f(e){return function(){if(c===Ua&&l===Ha)return e.apply(void 0,arguments)}}function p(){return ht.promise.finally(n.startTiming("userId.init.consent"))}var g=u(k.U9.all([Oe,i.promise]).then(p).then(f(function(){Ss(c,l)})).then(function(){return a.promise.finally(n.startTiming("userId.callbacks.pending"))}).then(f(function(){var e=c.submodules.filter(function(e){return(0,o.isFn)(e.callback)});if(e.length)return new k.U9(function(n){return ts(e,n,c)})})));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refresh,t=void 0!==n&&n,o=e.submoduleNames,v=void 0===o?null:o,m=e.ready;return void 0!==m&&m&&!s&&(s=!0,i.resolve(),qa>0?a.resolve():Q(d.qY.AUCTION_END,function e(){X(d.qY.AUCTION_END,e),r(Ba).then(a.resolve)})),t&&s&&(g=u(g.catch(function(){return null}).then(p).then(f(function(){var e=Ss(c,l.filter(function(e){return null==v||v.includes(e.submodule.name)}),!0).filter(function(e){return null!=e.callback});if(e.length)return new k.U9(function(n){return ts(e,n,c)})})))),g}}({mkDelay:t}),null!=Ma&&Ma(),Ya=[],Ma=e.getConfig("userSync",function(e){var n=e.userSync;n&&(Na=n.ppid,n.userIds&&(Va=n.userIds,Ba=(0,o.isNumber)(n.syncDelay)?n.syncDelay:nn.syncDelay,qa=(0,o.isNumber)(n.auctionDelay)?n.auctionDelay:nn.auctionDelay,xs(),function(e,n){if(e){var t={},i=new Map(n.map(function(e){return e.aliasName?[e.aliasName,e.name]:[]}));Object.keys(e).forEach(function(n){var a=(0,o.isArray)(e[n])?(0,r.A)(e[n]).reverse():[];t[n]=a.map(function(e){return i.has(e)?i.get(e):e})}),Ka=t}else Ka={};Ua.refresh(),ks(n)}(n.idPriority,Ya),ss({ready:!0})))}),rr.makeBidRequests.after(ls),Vi.before(fs),(0,i.m)().getUserIds=ps,(0,i.m)().getUserIdsAsEids=gs,(0,i.m)().getEncryptedEidsForSource=Rs(ms),(0,i.m)().registerSignalSources=bs,(0,i.m)().refreshUserIds=Rs(ws),(0,i.m)().getUserIdsAsync=Rs(As),(0,i.m)().getUserIdsAsEidBySource=vs})(l.$W),Re("userId",function(e){e.findRootDomain=xo,(Ya||[]).find(function(n){return n.name===e.name})||(Ya.push(e),vt.register(Ae,e.name,e.gvlid),xs(),ss({refresh:!0,submoduleNames:[e.name]}))},{postInstallAllowed:!0}),(0,i.E)("userId");var _s="allowActivities",Ps="".concat(_s," config");!function(e){var t=new Map,r=new Map,i=new Map;function o(e){return Object.fromEntries(Object.entries(e).filter(function(e){return!(0,n.A)(e,1)[0].startsWith("_")}))}l.$W.getConfig(_s,function(a){i.clear(),Array.from(t.values()).flatMap(function(e){return Array.from(e.values())}).forEach(function(e){return e()}),t.clear(),Array.from(r.values()).forEach(function(e){return e()}),r.clear(),Object.entries(a[_s]).forEach(function(a){var s=(0,n.A)(a,2),u=s[0],c=s[1];!1===c.default&&function(n){r.has(n)||r.set(n,e(n,Ps,function(){return{allow:!1,reason:"activity denied by default"}},Number.POSITIVE_INFINITY))}(u);var d=new Map;i.set(u,d),(c.rules||[]).forEach(function(e){var n=null==e.priority?1:e.priority;d.has(n)||d.set(n,[]),d.get(n).push(e)}),Array.from(d.keys()).forEach(function(n){return function(n,r){t.has(n)||t.set(n,new Map);var a=t.get(n);a.has(r)||a.set(r,e(n,Ps,function(e){var t,a=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return js(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?js(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}(i.get(n).get(r));try{for(a.s();!(t=a.n()).done;){var s=t.value;if(!s.condition||s.condition(o(e)))return{allow:s.allow,reason:s}}}catch(e){a.e(e)}finally{a.f()}},r))}(u,n)})})})}($e),(0,i.E)("allowActivities"),je("userId",{name:"pubProvidedId",gvlid:Kn,decode:function(e){var n=e?{pubProvidedId:e}:void 0;return(0,o.logInfo)("PubProvidedId: Decoded value "+JSON.stringify(n)),n},getId:function(e){var n=e&&e.params||{},t=[];return(0,o.isArray)(n.eids)&&(t=t.concat(n.eids)),"function"==typeof n.eidsFunction&&(t=t.concat(n.eidsFunction())),{id:t}}}),(0,i.E)("pubProvidedIdSystem");var Us=Ze({moduleType:Ae,moduleName:"sharedId"}),Bs="cookie",qs="html5",Ns="_pubcid_optout",Ms="PublisherCommonId";function Ws(e,n){if(n===Bs)return Us.getCookie(e);if(n===qs&&Us.hasLocalStorage()){var t=Us.getDataFromLocalStorage("".concat(e,"_exp"));if(!t)return Us.getDataFromLocalStorage(e);if(new Date(t).getTime()-Date.now()>0)return Us.getDataFromLocalStorage(e)}}function Fs(e,n){return function(t,r){n?Ls(n,e,function(){t(r()||e)})():t(e)}}function Ls(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0;if(e){var r=(0,o.parseUrl)(e);r.search.id=encodeURIComponent("pubcid:"+n);var i=(0,o.buildUrl)(r);return function(){(0,o.triggerPixel)(i,t)}}}function zs(){return!!(Us.cookiesAreEnabled()&&Ws(Ns,Bs)||Us.hasLocalStorage()&&Ws(Ns,qs))}var Gs={name:"sharedId",aliasName:"pubCommonId",gvlid:Kn,decode:function(e,n){if(!zs())return(0,o.logInfo)(" Decoded value PubCommonId "+e),{pubcid:e};(0,o.logInfo)("PubCommonId decode: Has opted-out")},getId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;if(zs())(0,o.logInfo)("PubCommonId: Has opted-out");else{if(null==n||!n.coppa){var r=e.params,i=void 0===r?{}:r,a=i.create,u=void 0===a||a,c=i.pixelUrl,d=t;if(!d){try{"object"===(0,s.A)(window[Ms])&&(d=window[Ms].getId())}catch(e){}d||(d=u&&(0,o.hasDeviceAccess)()?(0,o.generateUUID)():void 0)}return{id:d,callback:Fs(d,c)}}(0,o.logInfo)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId")}},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;if(zs())return(0,o.logInfo)("PubCommonId: Has opted-out"),{id:void 0};if(null!=n&&n.coppa)(0,o.logInfo)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");else{var r=e.params,i=void 0===r?{}:r,a=i.extend,s=void 0!==a&&a,u=i.pixelUrl;if(s)return u?{callback:Ls(u,t)}:{id:t}}},domainOverride:function(e){return function(){for(var n,t,r=document.domain.split("."),i="_gd".concat(Date.now(),"_").concat("sharedId"),o=0;o<r.length;o++){var a=r.slice(o).join(".");if(e.setCookie(i,"1",void 0,void 0,a),t=e.getCookie(i),e.setCookie(i,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,a),"1"!==t)return n;n=a}}}(Us),eids:{pubcid:function(e,n){var t,r={source:"pubcid.org",uids:e.map(function(e){return{id:e,atype:1}})};return null!=(null==n||null===(t=n.params)||void 0===t?void 0:t.inserter)&&(r.inserter=n.params.inserter),r}}};je("userId",Gs),(0,i.E)("sharedIdSystem");var $s="criteo",Js=Ze({moduleType:Ae,moduleName:$s}),Hs="cto_bidid",Vs="cto_bundle",Ks="html5",Ys="cookie",Qs=new Date(0).toString(),Xs=new Date((0,o.timestamp)()+33696e6).toString();function Zs(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=(0,o.parseUrl)(e,{noDecodeWholeURL:!0});return n?"".concat(t.hostname):"".concat(t.protocol,"://").concat(t.hostname).concat(t.port?":"+t.port:"","/")}function eu(e,n){var t,r;return(null==e||null===(t=e.storage)||void 0===t?void 0:t.type)===Ks?Js.getDataFromLocalStorage(n):(null==e||null===(r=e.storage)||void 0===r?void 0:r.type)===Ys?Js.getCookie(n):Js.getCookie(n)||Js.getDataFromLocalStorage(n)}function nu(e,n,t,r){var i,o;n&&t&&((null==e||null===(i=e.storage)||void 0===i?void 0:i.type)===Ks?Js.setDataInLocalStorage(n,t):((null==e||null===(o=e.storage)||void 0===o?void 0:o.type)===Ys||Js.setDataInLocalStorage(n,t),tu(n,t,Xs,r,!0)))}function tu(e,n,t,r,i){for(var o=r.split("."),a=0;a<o.length;++a){var s=o.slice(o.length-a-1,o.length).join(".");try{if(Js.setCookie(e,n,t,null,"."+s),i){var u=Js.getCookie(e);if(u&&u===n)break}}catch(e){}}}je("userId",{name:$s,gvlid:91,decode:function(e){return e},getId:function(e){var n=function(e){return{bundle:eu(e,Vs),dnaBundle:eu(e,"cto_dna_bundle"),bidId:eu(e,Hs)}}(e);return{id:n.bidId?{criteoId:n.bidId}:void 0,callback:function(t){return function(e,n,t){var r,i,a,s,u=(void 0===(null==e||null===(r=e.storage)||void 0===r?void 0:r.type)||(null==e||null===(i=e.storage)||void 0===i?void 0:i.type)===Ys)&&Js.cookiesAreEnabled(),c=(void 0===(null==e||null===(a=e.storage)||void 0===a?void 0:a.type)||(null==e||null===(s=e.storage)||void 0===s?void 0:s.type)===Ks)&&Js.localStorageIsEnabled(),d=Zs(Nn().page),l=Zs(document.location.href,!0),f="undefined"!=typeof criteo_pubtag,p=function(e,n,t,r,i,o,a){var s="https://gum.criteo.com/sid/json?origin=prebid"+"".concat(e?"&topUrl="+encodeURIComponent(e):"")+"".concat(n?"&domain="+encodeURIComponent(n):"")+"".concat(t?"&bundle="+encodeURIComponent(t):"")+"".concat(r?"&info="+encodeURIComponent(r):"")+"".concat(i?"&cw=1":"")+"".concat(a?"&pbt=1":"")+"".concat(o?"&lsw=1":""),u=ft.getConsentData();u&&(s+="&us_privacy=".concat(encodeURIComponent(u)));var c=lt.getConsentData();c&&(s+="".concat(c.consentString?"&gdprString="+encodeURIComponent(c.consentString):""),s+="&gdpr=".concat(!0===c.gdprApplies?1:0));var d=pt.getConsentData();return d&&(s+="".concat(d.gppString?"&gpp="+encodeURIComponent(d.gppString):""),s+="".concat(d.applicableSections?"&gpp_sid="+encodeURIComponent(d.applicableSections):"")),s}(d,l,n.bundle,n.dnaBundle,u,c,f),g={success:function(n){var r,i=JSON.parse(n);if(i.pixels&&i.pixels.forEach(function(n){return function(e,n,t){t.writeBundleInStorage&&t.bundlePropertyName&&t.storageKeyName?Cn(t.pixelUrl,{success:function(r){if(r){var i=JSON.parse(r);i&&i[t.bundlePropertyName]&&nu(e,t.storageKeyName,i[t.bundlePropertyName],n)}},error:function(e){(0,o.logError)("criteoIdSystem: unable to sync user id",e)}},void 0,{method:"GET",withCredentials:!0}):(0,o.triggerPixel)(t.pixelUrl)}(e,l,n)}),i.acwsUrl?("string"==typeof i.acwsUrl?[i.acwsUrl]:i.acwsUrl).forEach(function(e){return(0,o.triggerPixel)(e)}):i.bundle&&nu(e,Vs,i.bundle,l),i.bidId){nu(e,Hs,i.bidId,l);var a={criteoId:i.bidId};t(a)}else tu(r=Hs,"",Qs,l,!0),Js.removeDataFromLocalStorage(r),t()},error:function(e){(0,o.logError)("criteoIdSystem: unable to sync user id",e),t()}};Cn(p,g,void 0,{method:"GET",contentType:"application/json",withCredentials:!0})}(e,n,t)}}},eids:{criteoId:{source:"criteo.com",atype:1}}}),(0,i.E)("criteoIdSystem");var ru=t(848),iu=t(756),ou=t.n(iu);function au(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function su(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?au(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):au(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function uu(e,n,t){if("function"==typeof e?e===n:e.has(n))return arguments.length<3?n:t;throw new TypeError("Private element is not present on this object")}var cu="id5id",du="User ID - ID5 submodule: ",lu="id5-sync.com",fu=Ze({moduleType:Ae,moduleName:"id5Id"}),pu={id5id:{getValue:function(e){return e.uid},source:lu,atype:1,getUidExt:function(e){if(e.ext)return e.ext}},euid:{getValue:function(e){return e.uid},getSource:function(e){return e.source},atype:3,getUidExt:function(e){if(e.ext)return e.ext}},trueLinkId:{getValue:function(e){return e.uid},getSource:function(e){return"true-link-id5-sync.com"},atype:1,getUidExt:function(e){if(e.ext)return e.ext}}},gu={name:"id5Id",gvlid:131,decode:function(e,t){if(e&&void 0!==e.ids){var r={},i={};return Object.entries(e.ids).forEach(function(e){var t,o=(0,n.A)(e,2),a=o[0],s=o[1].eid,u=null==s||null===(t=s.uids)||void 0===t?void 0:t[0];r[a]={uid:null==u?void 0:u.id,ext:null==u?void 0:u.ext},i[a]=function(){return s}}),this.eids=i,r}var s,u,c={};if(e&&"string"==typeof e.universal_uid){s=e.universal_uid,c=e.ext||c,u=e.publisherTrueLinkId,this.eids=pu;var d={id5id:{uid:s,ext:c}};switch((0,o.isPlainObject)(c.euid)&&(d.euid={uid:c.euid.uids[0].id,source:c.euid.source,ext:{provider:lu}}),u&&(d.trueLinkId={uid:u}),(0,a.A)(e,"ab_testing.result")){case"control":(0,o.logInfo)(du+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),(0,go.J)(d,"id5id.ext.abTestingControlGroup",!0);break;case"error":(0,o.logError)(du+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":(0,o.logInfo)(du+"A/B Testing - user is NOT in the Control Group"),(0,go.J)(d,"id5id.ext.abTestingControlGroup",!1)}return(0,o.logInfo)(du+"Decoded ID",d),d}},getId:function(e,n,t){if(function(e){if(!e||!e.params||!e.params.partner)return(0,o.logError)(du+"partner required to be defined"),!1;var n=e.params.partner;if("string"==typeof n||n instanceof String){var t=parseInt(n);if(isNaN(t)||t<0)return(0,o.logError)(du+"partner required to be a number or a String parsable to a positive integer"),!1;e.params.partner=t}else if("number"!=typeof n)return(0,o.logError)(du+"partner required to be a number or a String parsable to a positive integer"),!1;return e.storage&&e.storage.type&&e.storage.name?(e.storage.name!==cu&&(0,o.logWarn)(du+"storage name recommended to be '".concat(cu,"'.")),!0):((0,o.logError)(du+"storage required to be set"),!1)}(e)){if(Pu(null==n?void 0:n.gdpr))return{callback:function(r){new mu(e,null==n?void 0:n.gdpr,t,null==n?void 0:n.usp,null==n?void 0:n.gpp).execute().then(function(e){r(e)}).catch(function(e){(0,o.logError)(du+"getId fetch encountered an error",e),r()})}};(0,o.logInfo)(du+"Skipping ID5 local storage write because no consent given.")}},extendId:function(e,n,t){return Pu(null==n?void 0:n.gdpr)?((0,o.logInfo)(du+"using cached ID",t),t&&(t.nbPage=_u(t)),t):((0,o.logInfo)(du+"No consent given for ID5 local storage writing, skipping nb increment."),t)},primaryIds:["id5id","trueLinkId"],eids:pu,_reset:function(){this.eids=pu}},vu=new WeakSet,mu=function(){return(0,ge.A)(function e(n,t,r,i,o){var a,s;(0,pe.A)(this,e),function(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(a=this,s=vu),s.add(a),this.submoduleConfig=n,this.gdprConsentData=t,this.cacheIdObj=r,this.usPrivacyData=i,this.gppData=o},[{key:"execute",value:(e=(0,ru.A)(ou().mark(function e(){var n,t;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=uu(vu,this,Eu).call(this),!uu(vu,this,hu).call(this)){e.next=4;break}return e.prev=1,e.next=2,uu(vu,this,bu).call(this,n);case 2:return e.abrupt("return",e.sent);case 3:return e.prev=3,t=e.catch(1),(0,o.logError)(du+"Error while performing ID5 external module flow. Continuing with regular flow.",t),e.abrupt("return",uu(vu,this,Au).call(this,n));case 4:return e.abrupt("return",uu(vu,this,Au).call(this,n));case 5:case"end":return e.stop()}},e,this,[[1,3]])})),function(){return e.apply(this,arguments)})}]);var e}();function hu(){return"string"==typeof this.submoduleConfig.params.externalModuleUrl}function bu(e){return yu.apply(this,arguments)}function yu(){return(yu=(0,ru.A)(ou().mark(function e(n){var t;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,Ru(this.submoduleConfig.params.externalModuleUrl);case 1:return e.next=2,n;case 2:return t=e.sent,e.abrupt("return",uu(vu,this,wu).call(this).fetchId5Id(t,this.submoduleConfig.params,Nn(),this.gdprConsentData,this.usPrivacyData,this.gppData));case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function wu(){return window.id5Prebid&&window.id5Prebid.integration}function Au(e){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,ru.A)(ou().mark(function e(n){var t,r,i;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,n;case 1:return t=e.sent,e.next=2,uu(vu,this,Cu).call(this,t.extensionsCall);case 2:return r=e.sent,e.next=3,uu(vu,this,Ou).call(this,t.fetchCall,r);case 3:return i=e.sent,e.abrupt("return",uu(vu,this,Du).call(this,i));case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Eu(){return Su.apply(this,arguments)}function Su(){return(Su=(0,ru.A)(ou().mark(function e(){var n,t,r;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.submoduleConfig.params.configUrl||"https://id5-sync.com/api/config/prebid",e.next=1,Tn(n,{method:"POST",body:JSON.stringify(su(su({},this.submoduleConfig),{},{bounce:!0})),credentials:"include"});case 1:if((t=e.sent).ok){e.next=2;break}throw new Error("Error while calling config endpoint: ",t);case 2:return e.next=3,t.json();case 3:return r=e.sent,(0,o.logInfo)(du+"config response received from the server",r),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Cu(e){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,ru.A)(ou().mark(function e(n){var t,r,i,a,s;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=1;break}return e.abrupt("return",void 0);case 1:return t=n.url,r=n.method||"GET",i="GET"===r?void 0:JSON.stringify(n.body||{}),e.next=2,Tn(t,{method:r,body:i});case 2:if((a=e.sent).ok){e.next=3;break}throw new Error("Error while calling extensions endpoint: ",a);case 3:return e.next=4,a.json();case 4:return s=e.sent,(0,o.logInfo)(du+"extensions response received from the server",s),e.abrupt("return",s);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ou(e,n){return ku.apply(this,arguments)}function ku(){return(ku=(0,ru.A)(ou().mark(function e(n,t){var r,i,a,s,u;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.url,i=n.overrides||{},a=JSON.stringify(su(su(su({},uu(vu,this,xu).call(this)),i),{},{extensions:t})),e.next=1,Tn(r,{method:"POST",body:a,credentials:"include"});case 1:if((s=e.sent).ok){e.next=2;break}throw new Error("Error while calling fetch endpoint: ",s);case 2:return e.next=3,s.json();case 3:return u=e.sent,(0,o.logInfo)(du+"fetch response received from the server",u),e.abrupt("return",u);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function xu(){var e=this.submoduleConfig.params,n=this.gdprConsentData&&"boolean"==typeof this.gdprConsentData.gdprApplies&&this.gdprConsentData.gdprApplies?1:0,t=Nn(),r=this.cacheIdObj?this.cacheIdObj.signature:void 0,i=_u(this.cacheIdObj),a=window.id5Bootstrap?window.id5Bootstrap.getTrueLinkInfo():{booted:!1},s={partner:e.partner,gdpr:n,nbPage:i,o:"pbjs",tml:t.topmostLocation,ref:t.ref,cu:t.canonicalUrl,top:t.reachedTop?1:0,u:t.stack[0]||window.location.href,v:"9.53.4",storage:this.submoduleConfig.storage,localStorage:fu.localStorageIsEnabled()?1:0,true_link:a};!n||void 0===this.gdprConsentData.consentString||(0,o.isEmpty)(this.gdprConsentData.consentString)||(0,o.isEmptyStr)(this.gdprConsentData.consentString)||(s.gdpr_consent=this.gdprConsentData.consentString),void 0===this.usPrivacyData||(0,o.isEmpty)(this.usPrivacyData)||(0,o.isEmptyStr)(this.usPrivacyData)||(s.us_privacy=this.usPrivacyData),this.gppData&&(s.gpp_string=this.gppData.gppString,s.gpp_sid=this.gppData.applicableSections),void 0===r||(0,o.isEmptyStr)(r)||(s.s=r),void 0===e.pd||(0,o.isEmptyStr)(e.pd)||(s.pd=e.pd),void 0===e.provider||(0,o.isEmptyStr)(e.provider)||(s.provider=e.provider);var u=e.abTesting||{enabled:!1};return u.enabled&&(s.ab_testing={enabled:!0,control_group_pct:u.controlGroupPct}),s}function Du(e){try{e.privacy&&window.id5Bootstrap&&window.id5Bootstrap.setPrivacy&&window.id5Bootstrap.setPrivacy(e.privacy)}catch(e){(0,o.logError)(du+"Error while writing privacy info into local storage.",e)}return e}function Ru(e){return ju.apply(this,arguments)}function ju(){return(ju=(0,ru.A)(ou().mark(function e(n){return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new k.U9(function(e,t){if(window.id5Prebid)e();else try{sr(n,Ae,"id5",e)}catch(e){t(e)}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _u(e){return e&&void 0!==e.nbPage?e.nbPage+1:1}function Pu(e){var n=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,t=(0,a.A)(e,"vendorData.purpose.consents.1"),r=(0,a.A)(e,"vendorData.vendor.consents.".concat(131..toString()));return!!(!n||t&&r)}je("userId",gu),(0,i.E)("id5IdSystem");var Uu="utiqId",Bu="Utiq module",qu=Ze({moduleType:Ae,moduleName:Uu});function Nu(){var e,n=JSON.parse(qu.getDataFromLocalStorage("utiqPass")),t=qu.getDataFromLocalStorage("netid_utiq_adtechpass");return t?((0,o.logInfo)("".concat(Bu,": Local storage netid_utiq_adtechpass: ").concat(t)),{utiq:t}):(n&&n.connectId&&Array.isArray(n.connectId.idGraph)&&n.connectId.idGraph.length>0&&(e=n.connectId.idGraph[0],(0,o.logInfo)("".concat(Bu,": Local storage utiqPass: ").concat(JSON.stringify(n))),(0,o.logInfo)("".concat(Bu,": Graph of utiqPass: ").concat(JSON.stringify(e)))),{utiq:e&&e.atid?e.atid:null})}function Mu(e){return!!("object"===(0,s.A)(e)&&null!==e&&e.advertising_token&&e.identity_expires&&e.refresh_from&&e.refresh_token&&e.refresh_expires)}function Wu(e){return"UID2 shared library - ".concat(e)}function Fu(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];e.apply(void 0,[Wu(t[0])].concat((0,r.A)(t.slice(1))))}je("userId",{name:Uu,decode:function(e){return(0,o.logInfo)("".concat(Bu,": Decoded ID value ").concat(JSON.stringify(e))),e.utiq?e:null},getId:function(e){var n=Nu();if(n.utiq)return(0,o.logInfo)("".concat(Bu,": Local storage ID value ").concat(JSON.stringify(n))),{id:{utiq:n.utiq}};e||(e={}),e.params||(e.params={}),void 0!==e.params.maxDelayTime&&null!==e.params.maxDelayTime||(e.params.maxDelayTime=1e3);var t=0,r=function(n){var i=Nu();if(i.utiq){var a={utiq:i.utiq};(0,o.logInfo)("".concat(Bu,": Returning ID value data of ").concat(JSON.stringify(a))),n(a)}else t>e.params.maxDelayTime?((0,o.logInfo)("".concat(Bu,": No utiq value set after ").concat(e.params.maxDelayTime," max allowed delay time")),n(null)):(t+=50,setTimeout(function(){r(n)},50))};return{callback:r}},eids:{utiq:{source:"utiq.com",atype:1,getValue:function(e){return e}}}}),(0,i.E)("utiqIdSystem");var Lu,zu=function(){return(0,ge.A)(function e(n,t,r,i){(0,pe.A)(this,e),this._baseUrl=n.baseUrl,this._clientVersion=t,this._logInfo=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Fu.apply(void 0,[r].concat(n))},this._logWarn=i},[{key:"createArrayBuffer",value:function(e){for(var n=new Uint8Array(e.length),t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}},{key:"hasStatusResponse",value:function(e){return"object"===(0,s.A)(e)&&e&&e.status}},{key:"isValidRefreshResponse",value:function(e){return this.hasStatusResponse(e)&&("optout"===e.status||"expired_token"===e.status||"success"===e.status&&e.body&&Mu(e.body))}},{key:"ResponseToRefreshResult",value:function(e){return this.isValidRefreshResponse(e)?"success"===e.status?{status:e.status,identity:e.body}:e:Wu("Response didn't contain a valid status")}},{key:"callRefreshApi",value:function(e){var n,t,i=this,o=this._baseUrl+"/v2/token/refresh",a=new Promise(function(e,r){n=e,t=r});return this._logInfo("Sending refresh request",e),Cn(o,{success:function(o){try{if(e.refresh_response_key){i._logInfo("Decrypting refresh API response");var a=i.createArrayBuffer(atob(o));window.crypto.subtle.importKey("raw",i.createArrayBuffer(atob(e.refresh_response_key)),{name:"AES-GCM"},!1,["decrypt"]).then(function(e){i._logInfo("Imported decryption key"),window.crypto.subtle.decrypt({name:"AES-GCM",iv:a.slice(0,12),tagLength:128},e,a.slice(12)).then(function(e){var o=String.fromCharCode.apply(String,(0,r.A)(new Uint8Array(e)));i._logInfo("Decrypted to:",o);var a=JSON.parse(o),s=i.ResponseToRefreshResult(a);"string"==typeof s?t(Wu(s)):n(s)},function(e){return i._logWarn(Wu("Call to UID2 API failed"),e)})},function(e){return i._logWarn(Wu("Call to UID2 API failed"),e)})}else{i._logInfo("No response decryption key available, assuming unencrypted JSON");var s=JSON.parse(o),u=i.ResponseToRefreshResult(s);"string"==typeof u?t(Wu(u)):n(u)}}catch(e){t(Wu(o))}},error:function(e,r){try{i._logInfo("Error status, assuming unencrypted JSON");var o=JSON.parse(r.responseText),a=i.ResponseToRefreshResult(o);"string"==typeof a?t(Wu(a)):n(a)}catch(n){t(Wu(e))}}},e.refresh_token,{method:"POST",customHeaders:{"X-UID2-Client-Version":this._clientVersion}}),a}}])}(),Gu=function(){return(0,ge.A)(function e(n,t,r,i){(0,pe.A)(this,e),this._storage=n,this._preferLocalStorage=t,this._storageName=r,this._logInfo=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Fu.apply(void 0,[i].concat(n))}},[{key:"readCookie",value:function(e){return this._storage.cookiesAreEnabled()?this._storage.getCookie(e):null}},{key:"readLocalStorage",value:function(e){return this._storage.localStorageIsEnabled()?this._storage.getDataFromLocalStorage(e):null}},{key:"readModuleCookie",value:function(){return this.parseIfContainsBraces(this.readCookie(this._storageName))}},{key:"writeModuleCookie",value:function(e){this._storage.setCookie(this._storageName,JSON.stringify(e),Date.now()+864e5)}},{key:"readModuleStorage",value:function(){return this.parseIfContainsBraces(this.readLocalStorage(this._storageName))}},{key:"writeModuleStorage",value:function(e){this._storage.setDataInLocalStorage(this._storageName,JSON.stringify(e))}},{key:"readProvidedCookie",value:function(e){return JSON.parse(this.readCookie(e))}},{key:"parseIfContainsBraces",value:function(e){return null!=e&&e.includes("{")?JSON.parse(e):e}},{key:"storeValue",value:function(e){this._preferLocalStorage?this.writeModuleStorage(e):this.writeModuleCookie(e)}},{key:"getStoredValueWithFallback",value:function(){var e=this._preferLocalStorage?"local storage":"cookie",n=(this._preferLocalStorage?this.readModuleStorage:this.readModuleCookie).bind(this),t=(this._preferLocalStorage?this.writeModuleStorage:this.writeModuleCookie).bind(this),r=(this._preferLocalStorage?this.readModuleCookie:this.readModuleStorage).bind(this),i=n();if(i){if("string"==typeof i){var o=r();if(o&&"object"===(0,s.A)(o))return this._logInfo("".concat(e," contained a basic token, but found a refreshable token fallback. Copying the fallback value to ").concat(e,".")),t(o),o}}else{var a=r();if(a)return this._logInfo("".concat(e," was empty, but found a fallback value.")),"object"===(0,s.A)(a)&&(this._logInfo("Copying the fallback value to ".concat(e,".")),t(a)),a}return i}}])}();function $u(e,n,t,r,i,o){return i("UID2 base url provided: ",e),new zu({baseUrl:e},t,i,o).callRefreshApi(n).then(function(e){i("Refresh endpoint responded with:",e);var t={originalToken:n,latestToken:e.identity},o=r.getStoredValueWithFallback();return null!=o&&o.originalIdentity&&(t.originalIdentity=o.originalIdentity),r.storeValue(t),t})}Lu={isCSTGOptionsValid:function(e,n){if("object"!==(0,s.A)(e)||null===e)return n('CSTG is not being used, but is included in the Prebid.js bundle. You can reduce the bundle size by passing "--disable UID2_CSTG" to the Prebid.js build.'),!1;var t=e;if(!t.serverPublicKey&&!t.subscriptionId)return n("CSTG has been enabled but its parameters have not been set."),!1;if("string"!=typeof t.serverPublicKey)return n("CSTG opts.serverPublicKey must be a string"),!1;var r=/^(UID2|EUID)-X-[A-Z]-.+/;return r.test(t.serverPublicKey)?"string"!=typeof t.subscriptionId?(n("CSTG opts.subscriptionId must be a string"),!1):0!==t.subscriptionId.length||(n("CSTG opts.subscriptionId is empty"),!1):(n("CSTG opts.serverPublicKey must match the regular expression ".concat(r)),!1)},getValidIdentity:function(e,n){if(e.emailHash)return Ju.isBase64Hash(e.emailHash)?{email_hash:e.emailHash}:void n("CSTG opts.emailHash is invalid");if(e.phoneHash)return Ju.isBase64Hash(e.phoneHash)?{phone_hash:e.phoneHash}:void n("CSTG opts.phoneHash is invalid");if(e.email){var t=Ju.normalizeEmail(e.email);return void 0===t?void n("CSTG opts.email is invalid"):{email:t}}return e.phone?Ju.isNormalizedPhone(e.phone)?{phone:e.phone}:void n("CSTG opts.phone is invalid"):void 0},isStoredTokenInvalid:function(e,n,t,r){if(n){if("optout"===n.latestToken)return!0;var i=Object.values(e)[0];if(!this.isStoredTokenFromSameIdentity(n,i))return t("CSTG supplied new identity - ignoring stored value.",n.originalIdentity,e),!0}return!1},generateTokenAndStore:function(e,n,t,r,i,o){var a=this;return(0,ru.A)(ou().mark(function s(){var u,c,d;return ou().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i("UID2 cstg opts provided: ",JSON.stringify(n)),u=new Hu({baseUrl:e,cstg:n},i,o),s.next=1,u.generateToken(t);case 1:return c=s.sent,i("CSTG endpoint responded with:",c),d={originalIdentity:a.encodeOriginalIdentity(t),latestToken:c.identity},r.storeValue(d),s.abrupt("return",d);case 2:case"end":return s.stop()}},s)}))()},isStoredTokenFromSameIdentity:function(e,n){return!!e.originalIdentity&&(0,o.cyrb53Hash)(n,e.originalIdentity.salt)===e.originalIdentity.identity},encodeOriginalIdentity:function(e){var n=Object.values(e)[0],t=Math.floor(Math.random()*Math.pow(2,32));return{identity:(0,o.cyrb53Hash)(n,t),salt:t}}};var Ju=function(){return(0,ge.A)(function e(){(0,pe.A)(this,e)},null,[{key:"isBase64Hash",value:function(e){if(!e||44!==e.length)return!1;try{return btoa(atob(e))===e}catch(e){return!1}}},{key:"isNormalizedPhone",value:function(e){return/^\+[0-9]{10,15}$/.test(e)}},{key:"normalizeEmail",value:function(e){if(e&&e.length){var n=e.trim().toLowerCase();if(!(n.indexOf(" ")>0)){var t=this.splitEmailIntoAddressAndDomain(n);if(t){var r=t.address,i=t.domain,o=this.isGmail(i),a=this.normalizeAddressPart(r,o,o);return a?"".concat(a,"@").concat(i):void 0}}}}},{key:"splitEmailIntoAddressAndDomain",value:function(e){var n=e.split("@");if(2===n.length&&!n.some(function(e){return""===e}))return{address:n[0],domain:n[1]}}},{key:"isGmail",value:function(e){return e===this.GMAIL_DOMAIN}},{key:"dropExtension",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.EMAIL_EXTENSION_SYMBOL;return e.split(n)[0]}},{key:"normalizeAddressPart",value:function(e,n,t){var r=e;return n&&(r=r.replaceAll(this.EMAIL_DOT,"")),t&&(r=this.dropExtension(r)),r}}])}();(0,e.A)(Ju,"EMAIL_EXTENSION_SYMBOL","+"),(0,e.A)(Ju,"EMAIL_DOT","."),(0,e.A)(Ju,"GMAIL_DOMAIN","gmail.com");var Hu=function(){return(0,ge.A)(function e(n,t,r){(0,pe.A)(this,e),this._baseUrl=n.baseUrl,this._serverPublicKey=n.cstg.serverPublicKey,this._subscriptionId=n.cstg.subscriptionId,this._logInfo=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Fu.apply(void 0,[t].concat(n))},this._logWarn=r},[{key:"hasStatusResponse",value:function(e){return"object"===(0,s.A)(e)&&e&&e.status}},{key:"isCstgApiSuccessResponse",value:function(e){return this.hasStatusResponse(e)&&"success"===e.status&&Mu(e.body)}},{key:"isCstgApiOptoutResponse",value:function(e){return this.hasStatusResponse(e)&&"optout"===e.status}},{key:"isCstgApiClientErrorResponse",value:function(e){return this.hasStatusResponse(e)&&"client_error"===e.status&&"string"==typeof e.message}},{key:"isCstgApiForbiddenResponse",value:function(e){return this.hasStatusResponse(e)&&"invalid_http_origin"===e.status&&"string"==typeof e.message}},{key:"stripPublicKeyPrefix",value:function(e){return e.substring(9)}},{key:"generateCstgRequest",value:(t=(0,ru.A)(ou().mark(function e(n){var t,r;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("email_hash"in n)&&!("phone_hash"in n)){e.next=1;break}return e.abrupt("return",n);case 1:if(!("email"in n)){e.next=3;break}return e.next=2,Ku.hash(n.email);case 2:return t=e.sent,e.abrupt("return",{email_hash:t});case 3:if(!("phone"in n)){e.next=5;break}return e.next=4,Ku.hash(n.phone);case 4:return r=e.sent,e.abrupt("return",{phone_hash:r});case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"generateToken",value:(n=(0,ru.A)(ou().mark(function e(n){var t,r,i,o,a,s,u,c,d;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.generateCstgRequest(n);case 1:return t=e.sent,this._logInfo("Building CSTG request for",t),e.next=2,Vu.build(this.stripPublicKeyPrefix(this._serverPublicKey));case 2:return r=e.sent,i=new TextEncoder,o=Date.now(),e.next=3,r.encrypt(i.encode(JSON.stringify(t)),i.encode(JSON.stringify([o])));case 3:return a=e.sent,s=a.iv,u=a.ciphertext,e.next=4,Ku.exportPublicKey(r.clientPublicKey);case 4:return c=e.sent,d={payload:Ku.bytesToBase64(new Uint8Array(u)),iv:Ku.bytesToBase64(new Uint8Array(s)),public_key:Ku.bytesToBase64(new Uint8Array(c)),timestamp:o,subscription_id:this._subscriptionId},e.abrupt("return",this.callCstgApi(d,r));case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"callCstgApi",value:(e=(0,ru.A)(ou().mark(function e(n,t){var r,i,o,a,s=this;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._baseUrl+"/v2/token/client-generate",a=new Promise(function(e,n){i=e,o=n}),this._logInfo("Sending CSTG request",n),Cn(r,{success:function(){var e=(0,ru.A)(ou().mark(function e(n,r){var a,u,c,d,l;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Ku.base64ToBytes(n),e.next=1,t.decrypt(a.slice(0,12),a.slice(12));case 1:u=e.sent,c=(new TextDecoder).decode(u),d=JSON.parse(c),s.isCstgApiSuccessResponse(d)?i({status:"success",identity:d.body}):s.isCstgApiOptoutResponse(d)?i({status:"optout",identity:"optout"}):o(Wu("API error: Response body was invalid for HTTP status 200: ".concat(c))),e.next=3;break;case 2:e.prev=2,l=e.catch(0),o(Wu(l));case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(n,t){return e.apply(this,arguments)}}(),error:function(e,n){try{if(400===n.status){var t=JSON.parse(n.responseText);s.isCstgApiClientErrorResponse(t)?o(Wu("Client error: ".concat(t.message))):o(Wu("UID2 API error: Response body was invalid for HTTP status 400: ".concat(n.responseText)))}else if(403===n.status){var r=JSON.parse(n.responseText);s.isCstgApiForbiddenResponse(n)?o(Wu("Forbidden: ".concat(r.message))):o(Wu("UID2 API error: Response body was invalid for HTTP status 403: ".concat(n.responseText)))}else o(Wu("UID2 API error: Unexpected HTTP status ".concat(n.status,": ").concat(e)))}catch(n){o(Wu(e))}}},JSON.stringify(n),{method:"POST"}),e.abrupt("return",a);case 1:case"end":return e.stop()}},e,this)})),function(n,t){return e.apply(this,arguments)})}]);var e,n,t}(),Vu=function(){function e(n,t){(0,pe.A)(this,e),this._clientPublicKey=n,this._sharedKey=t}return(0,ge.A)(e,[{key:"encrypt",value:(r=(0,ru.A)(ou().mark(function e(n,t){var r,i;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.crypto.getRandomValues(new Uint8Array(12)),e.next=1,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r,additionalData:t},this._sharedKey,n);case 1:return i=e.sent,e.abrupt("return",{iv:r,ciphertext:i});case 2:case"end":return e.stop()}},e,this)})),function(e,n){return r.apply(this,arguments)})},{key:"decrypt",value:(t=(0,ru.A)(ou().mark(function e(n,t){return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},this._sharedKey,t));case 1:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"clientPublicKey",get:function(){return this._clientPublicKey}}],[{key:"build",value:(n=(0,ru.A)(ou().mark(function n(t){var r,i,o;return ou().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,Ku.generateKeyPair(e._namedCurve);case 1:return r=n.sent,n.next=2,Ku.importPublicKey(t,this._namedCurve);case 2:return i=n.sent,n.next=3,Ku.deriveKey(i,r.privateKey);case 3:return o=n.sent,n.abrupt("return",new e(r.publicKey,o));case 4:case"end":return n.stop()}},n,this)})),function(e){return n.apply(this,arguments)})}]);var n,t,r}();(0,e.A)(Vu,"_namedCurve","P-256");var Ku=function(){return(0,ge.A)(function e(){(0,pe.A)(this,e)},null,[{key:"base64ToBytes",value:function(e){var n=atob(e);return Uint8Array.from(n,function(e){return e.codePointAt(0)})}},{key:"bytesToBase64",value:function(e){var n=Array.from(e,function(e){return String.fromCodePoint(e)}).join("");return btoa(n)}},{key:"generateKeyPair",value:(t=(0,ru.A)(ou().mark(function e(n){var t;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:"ECDH",namedCurve:n},e.abrupt("return",window.crypto.subtle.generateKey(t,!1,["deriveKey"]));case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"importPublicKey",value:(n=(0,ru.A)(ou().mark(function e(n,t){var r;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={name:"ECDH",namedCurve:t},e.abrupt("return",window.crypto.subtle.importKey("spki",this.base64ToBytes(n),r,!1,[]));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"exportPublicKey",value:function(e){return window.crypto.subtle.exportKey("spki",e)}},{key:"deriveKey",value:(e=(0,ru.A)(ou().mark(function e(n,t){return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.deriveKey({name:"ECDH",public:n},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]));case 1:case"end":return e.stop()}},e)})),function(n,t){return e.apply(this,arguments)})},{key:"hash",value:function(){var e=(0,ru.A)(ou().mark(function e(n){var t;return ou().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,window.crypto.subtle.digest("SHA-256",(new TextEncoder).encode(n));case 1:return t=e.sent,e.abrupt("return",this.bytesToBase64(new Uint8Array(t)));case 2:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}()}]);var e,n,t}();function Yu(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var Qu="uid2",Xu="PrebidJS-".concat("9.53.4","-UID2Module-").concat("1.1"),Zu="UID2: ";function ec(e,n){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];e.apply(void 0,[n+" "].concat(r))}}var nc=ec(o.logInfo,Zu),tc=ec(o.logWarn,Zu),rc=Ze({moduleType:Ae,moduleName:Qu}),ic={name:Qu,decode:function(e){var n=function(e){return"string"==typeof e?(nc("Found server-only token. Refresh is unavailable for this token."),{uid2:{id:e}}):"optout"===e.latestToken?(nc("Found optout token.  Refresh is unavailable for this token."),{uid2:{optout:!0}}):Date.now()<e.latestToken.identity_expires?{uid2:{id:e.latestToken.advertising_token}}:null}(e);return nc("UID2 decode returned",n),n},getId:function(n,t){var r,i,a,s,u,c,d,l,f;if(!0!==(null==t||null===(r=t.gdpr)||void 0===r?void 0:r.gdprApplies)){var p,g,v,m={apiBaseUrl:null!==(i=null==n||null===(a=n.params)||void 0===a?void 0:a.uid2ApiBase)&&void 0!==i?i:"https://prod.uidapi.com",paramToken:null==n||null===(s=n.params)||void 0===s?void 0:s.uid2Token,serverCookieName:null!==(u=null==n||null===(c=n.params)||void 0===c?void 0:c.uid2Cookie)&&void 0!==u?u:null==n||null===(d=n.params)||void 0===d?void 0:d.uid2ServerCookie,storage:null!==(l=null==n||null===(f=n.params)||void 0===f?void 0:f.storage)&&void 0!==l?l:"localStorage",clientId:Xu,internalStorage:"__uid2_advertising_token"};m.cstg=function(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yu(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Yu(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}({serverPublicKey:null==n||null===(p=n.params)||void 0===p?void 0:p.serverPublicKey,subscriptionId:null==n||null===(g=n.params)||void 0===g?void 0:g.subscriptionId},function(n){for(var t=0,r=["emailHash","phoneHash","email","phone"];t<r.length;t++){var i=r[t];if(n.hasOwnProperty(i))return(0,e.A)({},i,n[i])}return{}}(null!==(v=null==n?void 0:n.params)&&void 0!==v?v:{})),nc("UID2 configuration loaded and mapped.",m);var h=function(e,n,t,r){var i,a,s=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Fu.apply(void 0,[t].concat(n))},u=null,c="cookie"!==e.storage,d=new Gu(n,c,e.internalStorage,s);s("Module is using ".concat(c?"local storage":"cookies"," for internal storage."));var l=Lu&&Lu.isCSTGOptionsValid(e.cstg,r);l?(s("Module is using client-side token generation."),u=null):e.paramToken?(u=e.paramToken,s("Read token from params",u)):e.serverCookieName&&(u=d.readProvidedCookie(e.serverCookieName),s("Read token from server-supplied cookie",u));var f,p,g=d.getStoredValueWithFallback();if(s("Loaded module-stored tokens:",g),g&&"string"==typeof g){if(!u&&!l)return s("Returning legacy cookie value."),{id:g};s("Discarding superseded legacy cookie."),g=null}if(u&&g&&(null===(f=g.originalToken)||void 0===f?void 0:f.advertising_token)!==u.advertising_token&&(s("Server supplied new token - ignoring stored value.",null===(p=g.originalToken)||void 0===p?void 0:p.advertising_token,u.advertising_token),g=null),l){var v=Lu.getValidIdentity(e.cstg,r);if(v&&(g&&Lu.isStoredTokenInvalid(v,g,s,r)&&(g=null),!g||Date.now()>g.latestToken.refresh_expires)){var m=Lu.generateTokenAndStore(e.apiBaseUrl,e.cstg,v,d,s,r);return s("Generate token using CSTG"),{callback:function(e){m.then(function(n){s("Token generation responded, passing the new token on.",n),e(n)}).catch(function(e){(0,o.logError)("error generating token: ",e)})}}}}var h=!(null!==(i=g)&&void 0!==i&&i.latestToken)||u&&u.identity_expires>g.latestToken.identity_expires,b=h?u:g.latestToken;if(s("UID2 module selected latest token",h,b),!b||Date.now()>b.refresh_expires)return s("Newest available token is expired and not refreshable."),{id:null};if(Date.now()>b.identity_expires){var y=$u(e.apiBaseUrl,b,e.clientId,d,s,r);return s("Token is expired but can be refreshed, attempting refresh."),{callback:function(e){y.then(function(n){s("Refresh reponded, passing the updated token on.",n),e(n)}).catch(function(e){(0,o.logError)("error refreshing token: ",e)})}}}Date.now()>b.refresh_from&&(s("Refreshing token in background with low priority."),$u(e.apiBaseUrl,b,e.clientId,d,s,r).catch(function(e){(0,o.logError)("error refreshing token in background: ",e)}));var w,A={originalToken:null!=u?u:null===(a=g)||void 0===a?void 0:a.originalToken,latestToken:b};return l&&(A.originalIdentity=null===(w=g)||void 0===w?void 0:w.originalIdentity),d.storeValue(A),{id:A}}(m,rc,nc,tc);return nc("UID2 getId returned",h),h}tc("UID2 is not intended for use where GDPR applies. The UID2 module will not run.")},eids:{uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}}}};je("userId",ic),(0,i.E)("uid2IdSystem");var oc="identityLink",ac=Ze({moduleType:Ae,moduleName:oc}),sc="_lr_env",uc={name:oc,gvlid:97,decode:function(e){return{idl_env:e}},getId:function(e,n){var t=e&&e.params||{};if(t&&"string"==typeof t.pid){var r=null!=n?n:{},i=r.gdpr,a=r.gpp,s=i&&"boolean"==typeof i.gdprApplies&&i.gdprApplies?1:0,u=s?i.consentString:"";if(!s||u&&""!==u){var c=!(!a||!a.gppString)&&a.gppString,d=!!(a&&a.gppString&&a.applicableSections.length>0&&-1!==a.applicableSections[0])&&a.applicableSections[0],l=c&&d,f="https://api.rlcdn.com/api/identity/envelope?pid=".concat(t.pid).concat(s?"&ct=4&cv="+u:"").concat(l?"&gpp="+c+"&gpp_sid="+d:"");return{callback:function(e){if(window.ats&&window.ats.retrieveEnvelope)o.logInfo("identityLink: ATS exists!"),window.ats.retrieveEnvelope(function(n){n?(o.logInfo("identityLink: An envelope can be retrieved from ATS!"),dc(!0),e(JSON.parse(n).envelope)):cc(f,e,t)});else{var n=function(){var e=ac.getCookie(sc)||ac.getDataFromLocalStorage(sc);if(e)try{return window.atob(e)}catch(n){try{return window.atob(e.replace(/-/g,"+").replace(/_/g,"/"))}catch(e){return void o.logError("identityLink: invalid envelope format")}}}();n?(o.logInfo("identityLink: LiveRamp envelope successfully retrieved from storage!"),e(JSON.parse(n).envelope)):cc(f,e,t)}}}}o.logInfo("identityLink: Consent string is required to call envelope API.")}else o.logError("identityLink: requires partner id to be defined")},eids:{idl_env:{source:"liveramp.com",atype:3}}};function cc(e,n,t){var r,i={success:function(e){var t;if(e)try{t=JSON.parse(e)}catch(e){o.logInfo(e)}n(t&&t.envelope?t.envelope:"")},error:function(e){o.logInfo("identityLink: identityLink: ID fetch encountered an error",e),n()}};t.notUse3P||ac.getCookie("_lr_retry_request")?n():((r=new Date).setTime(r.getTime()+36e5),ac.setCookie("_lr_retry_request","true",r.toUTCString()),o.logInfo("identityLink: A 3P retrieval is attempted!"),dc(!1),Cn(e,i,void 0,{method:"GET",withCredentials:!0}))}function dc(e){var n=new Date;n.setTime(n.getTime()+2592e6),ac.setCookie("_lr_env_src_ats",e,n.toUTCString())}je("userId",uc),(0,i.E)("identityLinkIdSystem");var lc="teadsId",fc="_tfpvi",pc=Ze({moduleType:Ae,moduleName:lc}),gc={name:lc,gvlid:132,decode:function(e){return{teadsId:e}},getId:function(e,n){return{callback:function(t){var r=function(e,n){var t=function(e){var n,t=null==e||null===(n=e.params)||void 0===n?void 0:n.pubId,r="PUB_";return(0,o.isNumber)(t)?r+t.toString():(0,o.isStr)(t)&&parseInt(t)?r+t:""}(e),r=function(){var e=pc.cookiesAreEnabled(null)?pc.getCookie(fc,null):null;return(0,o.isStr)(e)?e:""}(),i=function(e){var n=null==e?void 0:e.gdprApplies;return!0===n?12:!1===n?0:22}(null==n?void 0:n.gdpr),a=function(e){var n=null==e?void 0:e.consentString;return(0,o.isStr)(n)?n:""}(null==n?void 0:n.gdpr),s=function(e){return(0,o.isStr)(e)?e:""}(null==n?void 0:n.usp),u=function(e){switch(e){case 0:return 0;case 22:return 220;case 12:return 120;default:return-1}}(i),c={analytics_tag_id:t,tfpvi:r,gdpr_consent:a,gdpr_status:i,gdpr_reason:u,ccpa_consent:s,sv:"prebid-v1"},d=new URLSearchParams;for(var l in c)d.append(l,c[l]);return"https://at.teads.tv/fpc?"+d.toString()}(e,n);Cn(r,{success:function(e,n){if(n&&200===n.status)if((0,o.isStr)(e)&&!(0,o.isEmpty)(e)){var r=new Date((0,o.timestamp)()+31536e6).toUTCString();pc.setCookie(fc,e,r),t(e)}else pc.setCookie(fc,"","Thu, 01 Jan 1970 00:00:01 GMT"),t();else(0,o.logInfo)("".concat(lc,": Server error while fetching ID")),t()},error:function(e){(0,o.logError)("".concat(lc,": ID fetch encountered an error"),e),t()}},void 0,{method:"GET"})}}},eids:{teadsId:{source:"teads.com",atype:1}}};je("userId",gc),(0,i.E)("teadsIdSystem");var vc="__qca",mc="11",hc=["1","10"],bc=["1"],yc=["1"],wc=lt.getConsentData(),Ac=ft.getConsentData(),Ic="quantcastId",Ec=Ze({moduleType:Ae,moduleName:Ic});function Sc(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:392;if(!window._qevents&&e&&""!=e){var t,r,i=Ec.getCookie(vc),a="0",s=Cc.findRootDomain(),u=new Date,c="";if(!i){var d=u.getTime(),l=new Date(d+864e5*n).toGMTString(),f=Math.round(2147483647*Math.random());i="B0-".concat(f,"-").concat(d),a="1",Ec.setCookie(vc,i,l,"/",s,null)}t="&fpan=".concat(a,"&fpa=").concat(i),r="&gdpr=0",wc&&"boolean"==typeof wc.gdprApplies&&wc.gdprApplies&&(r="gdpr=1&gdpr_consent=".concat(wc.consentString)),Ac&&"string"==typeof Ac&&(c="&us_privacy=".concat(Ac));var p="https://pixel.quantserve.com/pixel?d="+s+"&client_id="+e+"&a=p-KceJUEvXN48CE"+c+r+t;(0,o.triggerPixel)(p)}}var Cc={name:Ic,gvlid:mc,decode:function(e){return e},getId:function(e){var n,t,r=Ec.getCookie(vc);if(gt.getCoppa()||(n=Ac)&&"string"==typeof n&&4==n.length&&"Y"==n.charAt(1)&&"Y"==n.charAt(2)||(t=wc)&&"boolean"==typeof t.gdprApplies&&t.gdprApplies&&(!t.vendorData||!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hc,t=e.gdprApplies,r=e.purpose,i=e.vendor,o=i&&i.consents&&i.consents[mc],a=i&&i.legitimateInterests&&i.legitimateInterests[mc],s=e.publisher?e.publisher.restrictions:{};return!t||n.map(function(e){var n=!!r.consents&&r.consents[e],t=!!r.legitimateInterests&&r.legitimateInterests[e],i=s&&s[e]?s[e][mc]:null;return!(0===i||(!o||!n||2===i||-1==bc.indexOf(e)&&1!==i)&&(1===i||!a||!t||-1!=yc.indexOf(e)||-1!=bc.indexOf(e)&&2!==i))}).reduce(function(e,n){return e&&n},!0)}(t.vendorData))){var i=new Date(0).toUTCString(),a=Cc.findRootDomain();return(0,o.logInfo)("QuantcastId: Necessary consent not present for Id, exiting QuantcastId"),void Ec.setCookie(vc,"",i,"/",a,null)}var s=e&&e.params||{},u=e&&e.storage||{},c=s.clientId||"",d=u.expires||392;return"complete"===document.readyState?Sc(c,d):window.addEventListener("load",function(){Sc(c,d)}),{id:r?{quantcastId:r}:void 0}},eids:{quantcastId:{source:"quantcast.com",atype:1}}};je("userId",Cc),(0,i.E)("quantcastIdSystem");var Tc="pairId",Oc="pairId",kc=Ze({moduleType:Ae,moduleName:Tc});function xc(e){return kc.localStorageIsEnabled()?kc.getDataFromLocalStorage(e):null}function Dc(e){return kc.cookiesAreEnabled()?kc.getCookie(e):null}je("userId",{name:Tc,gvlid:755,decode:function(e){return e&&Array.isArray(e)?{pairId:e}:void 0},getId:function(e){var n=xc(Oc)||Dc(Oc),t=[];if(n&&"string"==typeof n)try{t=t.concat(JSON.parse(atob(n)))}catch(e){(0,o.logInfo)(e)}var r=e&&e.params||{};if(r&&r.liveramp){var i=r.liveramp.storageKey||"_lr_pairId",a=xc(i)||Dc(i);if(a)try{var u=atob(a);if(u){var c=JSON.parse(u);c&&"object"===(0,s.A)(c)&&c.envelope?t=t.concat(c.envelope):(0,o.logInfo)("Pairid: Parsed object is not valid or does not contain envelope")}else(0,o.logInfo)("Pairid: Decoded value is empty")}catch(e){(0,o.logInfo)("Pairid: Error parsing JSON: ",e)}else(0,o.logInfo)("Pairid: liverampValue for pairId from storage is empty or null")}if(0!=t.length)return{id:t};(0,o.logInfo)("PairId not found.")},eids:{pairId:{source:"google.com",atype:571187}}}),(0,i.E)("pairIdSystem");var Rc,jc=["request","imp","bidResponse","response"],_c=["default","pbs"],Pc=jc[0],Uc=jc[1],Bc=jc[2],qc=jc[3],Nc=_c[0],Mc=_c[1],Wc=new Set(jc),Fc=(Rc={},{registerOrtbProcessor:function(e){var n=e.type,t=e.name,r=e.fn,i=e.priority,o=void 0===i?0:i,a=e.dialects,s=void 0===a?[Nc]:a;if(!Wc.has(n))throw new Error("ORTB processor type must be one of: ".concat(jc.join(", ")));s.forEach(function(e){Rc.hasOwnProperty(e)||(Rc[e]={}),Rc[e].hasOwnProperty(n)||(Rc[e][n]={}),Rc[e][n][t]={priority:o,fn:r}})},getProcessors:function(e){return Rc[e]||{}}}),Lc=Fc.registerOrtbProcessor,zc=Fc.getProcessors;function Gc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function $c(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gc(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Gc(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function Jc(t){var i=t.apiName,o=t.apiVersion,a=t.apiArgs,s=void 0===a?["command","callback","parameter","version"]:a,u=t.callbackArgs,c=void 0===u?["returnValue","success"]:u,d=t.mode,l=void 0===d?0:d,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,p={},g="".concat(i,"Call"),v="".concat(i,"Return");function m(e){var n,t="string"==typeof e.data&&e.data.includes(v)?JSON.parse(e.data):e.data;if(null!=t&&null!==(n=t[v])&&void 0!==n&&n.callId){var i=t[v];p.hasOwnProperty(i.callId)&&p[i.callId].apply(p,(0,r.A)(c.map(function(e){return i[e]})))}}var h,b=function(){for(var e,n=f,t=!1;null!=n;){try{if("function"==typeof n[i]){e=n,t=!0;break}}catch(e){}try{if(n.frames["".concat(i,"Locator")]){e=n;break}}catch(e){}if(n===f.top)break;n=n.parent}return[e,t]}(),y=(0,n.A)(b,2),w=y[0],A=y[1];if(w)return A?h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new k.U9(function(t,o){var a=w[i].apply(w,(0,r.A)(I($c($c({},e),{},{callback:e.callback||2===l?E(e.callback,t,o):void 0})).map(function(e){var t=(0,n.A)(e,2);return t[0],t[1]})));(1===l||null==e.callback&&0===l)&&t(a)})}:(f.addEventListener("message",m,!1),h=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new k.U9(function(i,o){var a=Math.random().toString(),s=(0,e.A)({},g,$c($c({},Object.fromEntries(I(t).filter(function(e){return"callback"!==(0,n.A)(e,1)[0]}))),{},{callId:a}));p[a]=E(null==t?void 0:t.callback,i,o,(r||null==(null==t?void 0:t.callback))&&function(){delete p[a]}),w.postMessage(s,"*"),1===l&&i()})}),Object.assign(h,{isDirect:A,close:function(){!A&&f.removeEventListener("message",m)}});function I(e){return e=Object.assign({version:o},e),s.map(function(n){return[n,e[n]]})}function E(e,n,t,r){var i="function"==typeof e;return function(o,a){r&&r(),1!==l&&(null==a||a?n:t)(i?void 0:o),i&&e.apply(this,arguments)}}}var Hc,Vc,Kc={iab:function(e){return new Promise(function(n,t){var r=Jc({apiName:"__tcfapi",apiVersion:2,apiArgs:["command","version","callback","parameter"]});r||t(new Error("TCF2 CMP not found.")),r.isDirect?(0,o.logInfo)("Detected CMP API is directly accessible, calling it now..."):(0,o.logInfo)("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),r({command:"addEventListener",callback:function(r,i){if((0,o.logInfo)("Received a response from CMP",r),i){try{e(Yc(r))}catch(e){}if(!1===r.gdprApplies||"tcloaded"===r.eventStatus||"useractioncomplete"===r.eventStatus)try{lt.setConsentData(Yc(r)),n()}catch(e){t(e)}}else t(Error("CMP unable to register callback function.  Please check CMP setup."))}})})}};function Yc(e){if(n=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:Hc,t=e&&e.tcString,"boolean"==typeof n&&(!0!==n||t&&(0,o.isStr)(t)))return Qc(e);throw Object.assign(new Error("CMP returned unexpected value during lookup process."),{args:[e]});var n,t}function Qc(e){var n={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:Hc};return e&&e.addtlConsent&&(0,o.isStr)(e.addtlConsent)&&(n.addtlConsent=e.addtlConsent),n.apiVersion=2,n}var Xc=function(){var n,t,a,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=u.namespace,d=u.displayName,l=u.consentDataHandler,f=u.parseConsentData,p=u.getNullConsent,g=u.cmpHandlers,v=u.DEFAULT_CMP,m=void 0===v?"iab":v,h=u.DEFAULT_CONSENT_TIMEOUT,b=void 0===h?1e4:h;function y(e){return"consentManagement.".concat(c," ").concat(e)}function w(n,t){return n(Object.assign((0,e.A)({},"".concat(c,"Consent"),l.getConsentData()),t))}function A(){return t().then(function(e){return{error:e.error,consentData:l.getConsentData()}})}function I(){var e,a;null==n&&(e=c,a=new WeakSet,n=T(e,function(e,n){var i=this;return t().then(function(t){var s=t.consentData,u=t.error;!u||s&&a.has(u)||(a.add(u),o.logWarn.apply(void 0,[u.message].concat((0,r.A)(u.args||[])))),e.call(i,n)}).catch(function(t){o.logError.apply(void 0,["".concat(null==t?void 0:t.message," Canceling auction as per consentManagement config.")].concat((0,r.A)((null==t?void 0:t.args)||[]))),e.stopTiming(),"function"==typeof n.bidsBackHandler?n.bidsBackHandler():(0,o.logError)("Error executing bidsBackHandler")})}),(0,i.m)().requestBids.before(n,50),Fe.before(w),(0,o.logInfo)("".concat(d," consentManagement module has been activated...")))}return function(e){var r,u,v;if(!(e=null===(r=e)||void 0===r?void 0:r[c])||"object"!==(0,s.A)(e))return(0,o.logWarn)(y("config not defined, exiting consent manager module")),null!=n&&((0,i.m)().requestBids.getHooks({hook:n}).remove(),Fe.getHooks({hook:w}).remove(),n=null),{};(0,o.isStr)(e.cmpApi)?u=e.cmpApi:(u=m,(0,o.logInfo)(y("config did not specify cmp.  Using system default setting (".concat(m,").")))),(0,o.isNumber)(e.timeout)?v=e.timeout:(v=b,(0,o.logInfo)(y("config did not specify timeout.  Using system default setting (".concat(b,")."))));var h,E=(0,o.isNumber)(e.actionTimeout)?e.actionTimeout:null;"static"===u?(0,o.isPlainObject)(e.consentData)?(a=e.consentData,v=null,h=function(){return new k.U9(function(e){return e(l.setConsentData(f(a)))})}):(0,o.logError)(y("config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")):g.hasOwnProperty(u)?h=g[u]:(l.setConsentData(null),(0,o.logWarn)("".concat(d," CMP framework (").concat(u,") is not a supported framework.  Aborting consentManagement module and resuming auction.")),h=function(){return k.U9.resolve()});var S;return t=function(){return null==S&&(S=function(e){var n,t=e.name,r=e.consentDataHandler,i=e.setupCmp,o=e.cmpTimeout,a=e.actionTimeout,s=e.getNullConsent;return r.enable(),new Promise(function(e,u){var c,d=!1;function l(i){null!=n&&clearTimeout(n),n=null!=i?setTimeout(function(){var n,i=null!==(n=r.getConsentData())&&void 0!==n?n:d?c:s(),o="timeout waiting for ".concat(d?"user action on CMP":"CMP to load");r.setConsentData(i),e({consentData:i,error:new Error("".concat(t," ").concat(o))})},i):null}i(function(e){c=e,d||(d=!0,null!=a&&l(a))}).then(function(){return e({consentData:r.getConsentData()})},u),null!=o&&l(o)}).finally(function(){n&&clearTimeout(n)}).catch(function(e){throw r.setConsentData(null),e})}({name:d,consentDataHandler:l,setupCmp:h,cmpTimeout:v,actionTimeout:E,getNullConsent:p}).catch(function(e){throw S=null,e})),S},I(),{cmpHandler:u,cmpTimeout:v,actionTimeout:E,staticConsentData:a,loadConsentData:A,requestBidsHook:n}}}({namespace:"gdpr",displayName:"TCF",consentDataHandler:lt,cmpHandlers:Kc,parseConsentData:Yc,getNullConsent:function(){return Qc(null)}});l.$W.getConfig("consentManagement",function(e){return function(e){var n,t,r,i,o,a;return null!=(null===(n=e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))||void 0===n||null===(n=n.consentData)||void 0===n?void 0:n.getTCData)&&(e.consentData=e.consentData.getTCData),Hc=!0===(null===(t=e)||void 0===t?void 0:t.defaultGdprScope),Vc=!(null===(r=e)||void 0===r||!r.dsaPlatform),null===(i=(o=Xc({gdpr:e})).loadConsentData)||void 0===i||null===(i=i.call(o))||void 0===i||null===(a=i.catch)||void 0===a?void 0:a.call(i,function(){return null})}(e.consentManagement)}),Fo.before(function(e,n){return e(n.then(function(e){var n=lt.getConsentData();return n&&("boolean"==typeof n.gdprApplies&&(0,go.J)(e,"regs.ext.gdpr",n.gdprApplies?1:0),(0,go.J)(e,"user.ext.consent",n.consentString)),Vc&&(0,go.J)(e,"regs.ext.dsa.dsarequired",3),e}))}),Lc({type:Pc,name:"gdprAddtlConsent",fn:function(e,n){var t,r=null===(t=n.gdprConsent)||void 0===t?void 0:t.addtlConsent;r&&"string"==typeof r&&(0,go.J)(e,"user.ext.ConsentedProvidersSettings.consented_providers",r)}}),(0,i.E)("consentManagementTcf");var Zc,ed,nd="iab",td=nd,rd=50,id=!1,od={iab:function(e){var n,t=e.onSuccess,r=e.onError,i=(n={},{consentDataCallback:function(e,i){i&&e.uspString&&(n.usPrivacy=e.uspString),n.usPrivacy?ud(n,{onSuccess:t,onError:r}):r("Unable to get USP consent string.")}}),a=Jc({apiName:"__uspapi",apiVersion:1,apiArgs:["command","version","callback"]});if(!a)return r("USP CMP not found.");a.isDirect?(0,o.logInfo)("Detected USP CMP is directly accessible, calling it now..."):(0,o.logInfo)("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),a({command:"getUSPData",callback:i.consentDataCallback}),a({command:"registerDeletion",callback:function(e,n){return(null==n||n)&&rr.callDataDeletionRequest(e)}}).catch(function(e){(0,o.logError)("Error invoking CMP `registerDeletion`:",e)})},static:function(e){var n=e.onSuccess,t=e.onError;ud(Zc,{onSuccess:n,onError:t})}};function ad(e){var n=null,t=!1;function r(r,i){if(null!=n&&clearTimeout(n),t=!0,ft.setConsentData(r),null!=e){for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];e.apply(void 0,[i].concat(a))}}if(od[td]){var i={onSuccess:r,onError:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];r.apply(void 0,[null,"".concat(e," Resuming auction without consent data as per consentManagement config.")].concat(t))}};od[td](i),t||(0===rd?ud(void 0,i):n=setTimeout(i.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),rd))}else r(null,"USP framework (".concat(td,") is not a supported framework. Aborting consentManagement module and resuming auction."))}var sd=T("usp",function(e,n){var t=this;id||cd(),ad(function(r){if(null!=r){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];o.logWarn.apply(void 0,[r].concat(a))}e.call(t,n)})});function ud(e,n){var t=n.onSuccess,r=n.onError;e&&e.usPrivacy?(function(e){e&&e.usPrivacy&&(ed=e.usPrivacy)}(e),t(ed)):r("USPAPI returned unexpected value during lookup process.",e)}function cd(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];id||((0,o.logInfo)("USPAPI consentManagement module has been activated".concat(e?"":" using default values (api: '".concat(td,"', timeout: ").concat(rd,"ms)"))),id=!0,ft.enable()),ad()}l.$W.getConfig("consentManagement",function(e){return function(e){(e=e&&e.usp)&&"object"===(0,s.A)(e)||(0,o.logWarn)("consentManagement.usp config not defined, using defaults"),e&&(0,o.isStr)(e.cmpApi)?td=e.cmpApi:(td=nd,(0,o.logInfo)("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat(nd,")."))),e&&(0,o.isNumber)(e.timeout)?rd=e.timeout:(rd=50,(0,o.logInfo)("consentManagement.usp config did not specify timeout. Using system default setting (".concat(50,")."))),"static"===td&&((0,o.isPlainObject)(e.consentData)&&(0,o.isPlainObject)(e.consentData.getUSPData)?(e.consentData.getUSPData.uspString&&(Zc={usPrivacy:e.consentData.getUSPData.uspString}),rd=0):(0,o.logError)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),cd(!0)}(e.consentManagement)}),ke("requestBids").before(sd,50),Fo.before(function(e,n){return e(n.then(function(e){var n=ft.getConsentData();return n&&(0,go.J)(e,"regs.ext.us_privacy",n),e}))}),(0,i.E)("consentManagementUsp");var dd=[],ld=T("fpd",function(e,n){var t=this;(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.global,t=void 0===n?{}:n,r=e.bidder,i=void 0===r?{}:r,a=l.$W.getConfig("firstPartyData")||{},s=k.U9.resolve({global:t,bidder:i});return dd.sort(function(e,n){return(e.queue||1)-(n.queue||1)}).forEach(function(e){s=s.then(function(n){var t=n.global,r=n.bidder;return k.U9.resolve(e.processFpd(a,{global:t,bidder:r})).catch(function(n){return(0,o.logError)("Error in FPD module ".concat(e.name),n),{}}).then(function(e){return{global:e.global||t,bidder:e.bidder||r}})})}),s})(n.ortb2Fragments).then(function(r){Object.assign(n.ortb2Fragments,r),e.call(t,n)})});function fd(){var e=[];return{submit:function(n,t,r){var i=[t,setTimeout(function(){e.splice(e.indexOf(i),1),r()},n)];e.push(i)},resume:function(){for(;e.length;){var t=e.shift(),r=(0,n.A)(t,2),i=r[0],o=r[1];clearTimeout(o),i()}}}}Re("firstPartyData",function(e){dd.push(e)}),ke("startAuction").before(ld,10),(0,i.E)("fpdModule");var pd,gd,vd=[],md={},hd=!1,bd=!0,yd="USD",wd=!1,Ad={},Id={},Ed=(0,k.v6)(),Sd=fd(),Cd=0;function Td(e){gd?((0,o.logWarn)(e),(0,o.logWarn)("Currency failed loading rates, falling back to currency.defaultRates")):(0,o.logError)(e)}function Od(){bd?(bd=!1,hd=!1,Cn(pd,{success:function(e){try{Ad=JSON.parse(e),(0,o.logInfo)("currencyRates set to "+JSON.stringify(Ad)),md={},hd=!0,Rd(),Sd.resume()}catch(n){Td("Failed to parse currencyRates response: "+e)}},error:function(){Td.apply(void 0,arguments),hd=!0,Rd(),Sd.resume(),bd=!0}})):Rd()}function kd(e,n){e(n.then(function(){return Ed.promise}))}l.$W.getConfig("currency",function(e){return function(e){if(pd="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$",null!==e.rates&&"object"===(0,s.A)(e.rates)&&(Ad.conversions=e.rates,hd=!0,bd=!1),null!==e.defaultRates&&"object"===(0,s.A)(e.defaultRates)&&(gd=e.defaultRates,Ad.conversions=gd,hd=!0),"string"==typeof e.adServerCurrency){Cd=e.auctionDelay,(0,o.logInfo)("enabling currency support",arguments),yd=e.adServerCurrency,e.conversionRateFile&&((0,o.logInfo)("currency using override conversionRateFile:",e.conversionRateFile),pd=e.conversionRateFile);var n=pd.indexOf("$$TODAY$$");if(-1!==n){var t=new Date,r="".concat(t.getMonth()+1),a="".concat(t.getDate());r.length<2&&(r="0".concat(r)),a.length<2&&(a="0".concat(a));var u="".concat(t.getFullYear()).concat(r).concat(a);pd="".concat(pd.substring(0,n)).concat(u).concat(pd.substring(n+9,pd.length))}md={},wd||(wd=!0,(0,i.m)().convertCurrency=function(e,n,t){return parseFloat(e)*jd(n,t)},ke("addBidResponse").before(xd,100),ke("responsesReady").before(kd),Fo.before(Pd),ke("requestBids").before(Ud,50),Q(d.qY.AUCTION_TIMEOUT,Dd),Q(d.qY.AUCTION_INIT,Od),Od())}else Cd=0,(0,o.logInfo)("disabling currency support"),wd&&(ke("addBidResponse").getHooks({hook:xd}).remove(),ke("responsesReady").getHooks({hook:kd}).remove(),Fo.getHooks({hook:Pd}).remove(),ke("requestBids").getHooks({hook:Ud}).remove(),X(d.qY.AUCTION_TIMEOUT,Dd),X(d.qY.AUCTION_INIT,Od),delete(0,i.m)().convertCurrency,yd="USD",md={},wd=!1,hd=!1,bd=!0,Ad={},Id={},Ed=(0,k.v6)());"object"===(0,s.A)(e.bidderCurrencyDefault)&&(Id=e.bidderCurrencyDefault)}(e.currency)});var xd=O("currency",function(e,n,t,r){if(!t)return e.call(this,n,t,r);var i=t.bidderCode||t.bidder;if(Id[i]){var a=Id[i];t.currency&&a!==t.currency?(0,o.logWarn)("Currency default '".concat(i,": ").concat(a,"' ignored. adapter specified '").concat(t.currency,"'")):t.currency=a}if(t.currency||((0,o.logWarn)('Currency not specified on bid.  Defaulted to "USD"'),t.currency="USD"),t.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*jd(this.currency,e)).toFixed(3)},t.currency===yd)return e.call(this,n,t,r);vd.push([e,this,n,t,r]),wd&&!hd||Rd()});function Dd(e){var t=e.auctionId;vd=vd.filter(function(e){var r=(0,n.A)(e,5),i=(r[0],r[1],r[2],r[3]),o=r[4];if(i.auctionId!==t)return!0;o(d.Tf.CANNOT_CONVERT_CURRENCY)})}function Rd(){for(;vd.length>0;){var e=vd.shift(),t=(0,n.A)(e,5),r=t[0],i=t[1],a=t[2],s=t[3],u=t[4];if(void 0!==s&&"currency"in s&&"cpm"in s){var c=s.currency;try{var l=jd(c);1!==l&&(s.cpm=(parseFloat(s.cpm)*l).toFixed(4),s.currency=yd)}catch(e){(0,o.logWarn)("getCurrencyConversion threw error: ",e),u(d.Tf.CANNOT_CONVERT_CURRENCY);continue}}r.call(i,a,s,u)}Ed.resolve()}function jd(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yd,r=null,i="".concat(e,"->").concat(t);if(i in md)r=md[i],(0,o.logMessage)("Using conversionCache value "+r+" for "+i);else if(!1===wd){if("USD"!==e)throw new Error("Prebid currency support has not been enabled and fromCurrency is not USD");r=1}else if(e===t)r=1;else if(e in Ad.conversions){if(!(t in(n=Ad.conversions[e])))throw new Error("Specified adServerCurrency in config '"+t+"' not found in the currency rates file");r=n[t],(0,o.logInfo)("getCurrencyConversion using direct "+e+" to "+t+" conversionRate "+r)}else if(t in Ad.conversions){if(!(e in(n=Ad.conversions[t])))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");r=_d(1/n[e],4),(0,o.logInfo)("getCurrencyConversion using reciprocal "+e+" to "+t+" conversionRate "+r)}else{var a=Object.keys(Ad.conversions)[0];if(!(e in Ad.conversions[a]))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var s=1/Ad.conversions[a][e];if(!(t in Ad.conversions[a]))throw new Error("Specified adServerCurrency in config '"+t+"' not found in the currency rates file");r=_d(s*Ad.conversions[a][t],4),(0,o.logInfo)("getCurrencyConversion using intermediate "+e+" thru "+a+" to "+t+" conversionRate "+r)}return i in md||((0,o.logMessage)("Adding conversionCache value "+r+" for "+i),md[i]=r),r}function _d(e,n){for(var t=1,r=0;r<n;r++)t+="0";return Math.round(e*t)/t}function Pd(e,n){return e(n.then(function(e){return(0,go.J)(e,"ext.prebid.adServerCurrency",yd),e}))}Lc({type:Pc,name:"currency",fn:function(e,n,t){wd&&(e.cur=e.cur||[t.currency||yd])}});var Ud=T("currency",function(e,n){var t,r=(t=this,function(){return e.call(t,n)});!hd&&Cd>0?Sd.submit(Cd,r,function(){(0,o.logWarn)("".concat("currency",": Fetch attempt did not return in time for auction ").concat(n.auctionId)),r()}):r()});(0,i.E)("currency");var Bd="Invalid schain object found: ",qd=" should be a string",Nd=" should be an Integer",Md=" should be an object",Wd={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},Fd=[];function Ld(e){return function(n){return(0,o.compareCodeAndSlot)(n,e)}}function zd(e,n,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n===t)return e;var o=e;try{o=(0,i.m)().convertCurrency(e,n,t)}catch(e){if(!r)throw e}return o}(0,o._each)(Wd,function(e){return Fd.push(e)}),rr.makeBidRequests.after(function(e,n){var t=l.$W.getConfig("schain"),r=l.$W.getBidderConfig();n.forEach(function(e){var n=e.bidderCode,i=function(e){return r[e]&&r[e].schain||t}(n);e.bids.forEach(function(e){var t=function(e,n){var t=Wd.STRICT;if(function(e){return!(void 0===e||!(0,o.isPlainObject)(e)&&((0,o.logError)(Bd+"the following schain config will not be used as schain is not an object.",e),1))}(e)){if((0,o.isStr)(e.validation)&&-1!=Fd.indexOf(e.validation)&&(t=e.validation),t===Wd.OFF)return e.config;if(function(e,n){var t="Detected something wrong within an schain config:",r="";function i(e){r+="\n"+e}function a(){!0===n?(0,o.logError)(t,e,r):(0,o.logWarn)(t,e,r)}if(!(0,o.isPlainObject)(e)&&(i("schain.config"+Md),a(),n))return!1;if((0,o.isNumber)(e.complete)&&(0,o.isInteger)(e.complete)||i("schain.config.complete"+Nd),(0,o.isStr)(e.ver)||i("schain.config.ver"+qd),e.hasOwnProperty("ext")&&((0,o.isPlainObject)(e.ext)||i("schain.config.ext"+Md)),(0,o.isArray)(e.nodes))e.nodes.forEach(function(e,n){(0,o.isStr)(e.asi)||i("schain.config.nodes[".concat(n,"].asi")+qd),(0,o.isStr)(e.sid)||i("schain.config.nodes[".concat(n,"].sid")+qd),(0,o.isNumber)(e.hp)&&(0,o.isInteger)(e.hp)||i("schain.config.nodes[".concat(n,"].hp")+Nd),e.hasOwnProperty("rid")&&((0,o.isStr)(e.rid)||i("schain.config.nodes[".concat(n,"].rid")+qd)),e.hasOwnProperty("name")&&((0,o.isStr)(e.name)||i("schain.config.nodes[".concat(n,"].name")+qd)),e.hasOwnProperty("domain")&&((0,o.isStr)(e.domain)||i("schain.config.nodes[".concat(n,"].domain")+qd)),e.hasOwnProperty("ext")&&((0,o.isPlainObject)(e.ext)||i("schain.config.nodes[".concat(n,"].ext")+Md))});else if(i("schain.config.nodes should be an Array"),a(),n)return!1;return!(r.length>0&&(a(),n))}(e.config,!(t!==Wd.STRICT)))return e.config;(0,o.logError)(Bd+"due to the 'strict' validation setting, this schain config will not be passed to bidder '".concat(n,"'.  See above error for details."))}return null}(i,n);t&&(e.schain=(0,o.deepClone)(t))})}),e(n)}),Lc({type:Pc,name:"sourceExtSchain",fn:function(e,n,t){if(!(0,a.A)(e,"source.ext.schain")){var r=(0,a.A)(t,"bidRequests.0.schain");r&&(0,go.J)(e,"source.ext.schain",r)}}}),(0,i.E)("schain");var Gd=["modelGroups"];function $d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Jd(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$d(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):$d(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}var Hd,Vd="Price Floors",Kd=Sn(1e4),Yd=Symbol(),Qd=[Yd,"gptSlot","adUnitCode","size","domain","mediaType"],Xd=!1,Zd=!1,el={},nl=fd(),tl={};function rl(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===t?L.index:t;return(null==e?void 0:e.adUnitCode)||r.getAdUnit(n).code}var il=(0,e.A)((0,e.A)((0,e.A)((0,e.A)((0,e.A)((0,e.A)({},Yd,function(){return"*"}),"size",function(e,n){return(0,o.parseGPTSingleSizeArray)(n.size)||"*"}),"mediaType",function(e,n){return n.mediaType||"banner"}),"gptSlot",function(e,n){return function(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,t=(void 0===n?L.index:n).getAdUnit({adUnitId:e});return"gam"===(0,a.A)(t,"ortb2Imp.ext.data.adserver.name")&&t.ortb2Imp.ext.data.adserver.adslot}((e||n).adUnitId)||(t=rl(e,n),r=function(e){var n;return(0,o.isGptPubadsDefined)()&&(n=window.googletag.pubads().getSlots().find(Ld(e))),n}(t),r?{gptSlot:r.getAdUnitPath(),divId:r.getSlotElementId()}:{}).gptSlot;var t,r}),"domain",function(){return null==Hd&&(Hd=(0,o.parseUrl)(Nn().topmostLocation,{noDecodeWholeURL:!0}).hostname),Hd}),"adUnitCode",function(e,n){return rl(e,n)});function ol(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e,n,t){return e.length?e.reduce(function(e,r){var i=il[r](n,t)||"*";return e.push("*"===i?["*"]:[i.toLowerCase(),"*"]),e},[]):[]}((0,a.A)(e,"schema.fields")||[],n,r);if(!i.length)return{matchingFloor:void 0};var o=i.map(function(e){return e[0]}).join("-"),s=(0,a.A)(e,"matchingInputs.".concat(o));if(s)return Jd({},s);var u,c,d=(u=i,c=(0,a.A)(e,"schema.delimiter")||"|",u.reduce(function(e,n){var t=[];return e.map(function(e){n.map(function(n){t.push(e+c+n)})}),t}).sort(function(e,n){return e.split("*").length-n.split("*").length})),l=(d||[]).find(function(n){return e.values.hasOwnProperty(n)}),f={floorMin:e.floorMin||0,floorRuleValue:e.values[l],matchingData:d[0],matchingRule:l===(null===(t=e.meta)||void 0===t?void 0:t.defaultRule)?void 0:l},p=(0,a.A)(n,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof p&&(f.floorMin=p),f.matchingFloor=Math.max(f.floorMin,f.floorRuleValue),(0,go.J)(e,"matchingInputs.".concat(o),Jd({},f)),f}function al(e,n,t){return parseFloat(Ni(e,Jd(Jd({},n),{},{cpm:e}),t))}var sl={banner:function(e){return(0,a.A)(e,"mediaTypes.banner.sizes")||[]},video:function(e){return(0,a.A)(e,"mediaTypes.video.playerSize")||[]},native:function(e){return(0,a.A)(e,"mediaTypes.native.image.sizes")?[(0,a.A)(e,"mediaTypes.native.image.sizes")]:[]}};function ul(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currency:"USD",mediaType:"*",size:"*"},t=this,r=tl[t.auctionId];if(!r||r.skipped)return{};e=function(e,n){var t=Object.keys(e.mediaTypes||{});return"*"===n.mediaType&&1===t.length&&(n.mediaType=t[0]),"*"===n.size&&-1!==t.indexOf(n.mediaType)&&sl[n.mediaType]&&1===sl[n.mediaType](e).length&&(n.size=sl[n.mediaType](e)[0]),n}(t,e);var a,s,u,c,d=ol(r.data,Jd({},t),{mediaType:e.mediaType,size:e.size}),l=e.currency||r.data.currency;if(d.matchingFloor&&l!==r.data.currency)try{d.matchingFloor=(0,i.m)().convertCurrency(d.matchingFloor,r.data.currency,l)}catch(e){(0,o.logWarn)("".concat(Vd,": Unable to get currency conversion for getFloor for bidder ").concat(t.bidder,". You must have currency module enabled with defaultRates in your currency config")),l=r.data.currency}if(r.enforcement.bidAdjustment&&d.matchingFloor){var f=be.get(t.bidder,"inverseBidAdjustment");if(f){var p=Object.fromEntries(Object.entries(e).filter(function(e){var t=(0,n.A)(e,2),r=t[0];return"*"!==t[1]&&["mediaType","size"].includes(r)}));d.matchingFloor=f(d.matchingFloor,t,p)}else{var g=al(d.matchingFloor,null,t);d.matchingFloor=g?(s=g,(a=d.matchingFloor)*(u=Math.pow(10,10))/(s*u)*(a*u)/u):d.matchingFloor}}return null===d.floorRuleValue?null:d.matchingFloor?{floor:(c=d.matchingFloor,Math.ceil((parseFloat(c)*Math.pow(10,4)).toFixed(1))/Math.pow(10,4)),currency:l}:{}}function cl(e,n){var t=(0,o.deepClone)(e);return t.schema.delimiter=e.schema.delimiter||"|",t.values=function(e,n){var t=e.schema.fields,r=e.schema.delimiter,i=n&&-1===t.indexOf("adUnitCode")&&t.unshift("adUnitCode");return Object.keys(e.values).reduce(function(t,o){return t[(i?"".concat(n).concat(r).concat(o):o).toLowerCase()]=e.values[o],t},{})}(t,n),t.currency=t.currency||"USD",t}function dl(e){e.hasExited||(e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||(0,o.generateUUID)(),tl[e.reqBidsConfigObj.auctionId]=function(e,n){var t=(0,o.deepClone)(el);if(2===(0,a.A)(t,"data.floorsSchemaVersion")){var r=t.data,i=r.modelGroups,s=function(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}(r,Gd);t.data=Object.assign(s,function(e,n){for(var t=Math.floor(Math.random()*n+1),r=0;r<e.length;r++)if((t-=e[r].modelWeight)<=0)return e[r]}(i,s.modelWeightSum))}var u=0===Object.keys((0,a.A)(t,"data.values")||{}).length;if(t.data=u?function(e){var n=e.find(function(e){var n;return null!=(null===(n=e.floors)||void 0===n?void 0:n.schema)});return e.reduce(function(e,t){var r,i;if(null!=(null===(r=t.floors)||void 0===r?void 0:r.schema)&&!(0,o.deepEqual)(t.floors.schema,null==n||null===(i=n.floors)||void 0===i?void 0:i.schema))return(0,o.logError)("".concat(Vd,": adUnit '").concat(t.code,"' declares a different schema from one previously declared by adUnit '").concat(n.code,"'. Floor config for '").concat(t.code,"' will be ignored.")),e;var a=Object.assign({},null==n?void 0:n.floors,{values:void 0},t.floors);if(pl(a))if(e.values){var s=cl(a,t.code).values;Object.assign(e.values,s)}else(e=cl(a,t.code)).location="adUnit";else null!=t.floors&&(0,o.logWarn)("adUnit '".concat(t.code,"' provides an invalid `floor` definition, it will be ignored for floor calculations"),t);return e},{})}(e):cl(t.data),0===Object.keys((0,a.A)(t,"data.values")||{}).length)t.skipped=!0,t.skippedReason="not_found";else{var c,d=(0,o.getParameterByName)("pbjs_skipRate")||(null!==(c=(0,a.A)(t,"data.skipRate"))&&void 0!==c?c:t.skipRate),l=100*Math.random()<parseFloat(d);t.skipped=l,l&&(t.skippedReason="random")}return t.hasOwnProperty("floorMin")&&(t.data.floorMin=t.floorMin),function(e,n,t){var r=function(e){var n,t,r=e.data,i=e.enforcement;return(null==r||null===(n=r.noFloorSignalBidders)||void 0===n?void 0:n.length)>0?r.noFloorSignalBidders:(null==i||null===(t=i.noFloorSignalBidders)||void 0===t?void 0:t.length)>0?i.noFloorSignalBidders:[]}(n);e.forEach(function(e){e.bids.forEach(function(e){var i,s=r.some(function(n){return n===e.bidder});n.skipped||s?(s&&(0,o.logInfo)("noFloorSignal to ".concat(e.bidder)),delete e.getFloor):e.getFloor=ul,e.auctionId=t,e.floorData={noFloorSignaled:s,skipped:n.skipped,skipRate:null!==(i=(0,a.A)(n,"data.skipRate"))&&void 0!==i?i:n.skipRate,skippedReason:n.skippedReason,floorMin:n.floorMin,modelVersion:(0,a.A)(n,"data.modelVersion"),modelWeight:(0,a.A)(n,"data.modelWeight"),modelTimestamp:(0,a.A)(n,"data.modelTimestamp"),location:(0,a.A)(n,"data.location","noData"),floorProvider:n.floorProvider,fetchStatus:el.fetchStatus}})})}(e,t,n),t}(e.reqBidsConfigObj.adUnits||(0,i.m)().adUnits,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0)}function ll(e){return e=function(e){if((0,o.isNumber)(e.default)){var n,t,r="*",i=((null===(n=e.schema)||void 0===n?void 0:n.fields)||[]).length;i?r=Array(i).fill("*").join((null===(t=e.schema)||void 0===t?void 0:t.delimiter)||"|"):(0,go.J)(e,"schema.fields",[Yd]),e.values=e.values||{},null==e.values[r]&&(e.values[r]=e.default,e.meta={defaultRule:r})}return e}(e),!!function(e){if(Array.isArray(e)&&e.length>0){if(e.every(function(e){return Qd.includes(e)}))return!0;(0,o.logError)("".concat(Vd,": Fields received do not match allowed fields"))}return!1}((0,a.A)(e,"schema.fields"))&&(n=e,t=e.schema.fields.length,r=e.schema.delimiter||"|","object"===(0,s.A)(n.values)&&(n.values=Object.keys(n.values).reduce(function(e,i){return function(e,n,t,r){return"string"==typeof e&&e.split(r).length===t&&("number"==typeof n||null===n)}(i,n.values[i],t,r)&&(e[i]=n.values[i]),e},{}),Object.keys(n.values).length>0));var n,t,r}var fl={1:function(e){return ll(e)},2:function(e){return!(!Array.isArray(e.modelGroups)||0===e.modelGroups.length)&&(e.modelWeightSum=0,e.modelGroups.every(function(n){return!("number"!=typeof n.modelWeight||!ll(n)||(e.modelWeightSum+=n.modelWeight,0))}))}};function pl(e){return"object"===(0,s.A)(e)&&(e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof fl[e.floorsSchemaVersion]?((0,o.logError)("".concat(Vd,": Unknown floorsSchemaVersion: "),e.floorsSchemaVersion),!1):fl[e.floorsSchemaVersion](e))}function gl(e,n){if(e&&"object"===(0,s.A)(e)&&pl(e))return(0,o.logInfo)("".concat(Vd,": A ").concat(n," set the auction floor data set to "),e),Jd(Jd({},e),{},{location:n});(0,o.logError)("".concat(Vd,": The floors data did not contain correct values"),e)}var vl=T("priceFloors",function(e,n){var t={reqBidsConfigObj:n,context:this,nextFn:e,hasExited:!1,timer:null};el.auctionDelay>0&&Xd?nl.submit(el.auctionDelay,function(){return dl(t)},function(){(0,o.logWarn)("".concat(Vd,": Fetch attempt did not return in time for auction")),el.fetchStatus="timeout",dl(t)}):dl(t)});function ml(e){var n;Xd=!1,el.fetchStatus="success";try{n=JSON.parse(e)}catch(t){n=e}var t=gl(n,"fetch");t&&(el.data=t,el.skipRate=(0,o.isNumber)(t.skipRate)?t.skipRate:el.skipRate,el.floorProvider=t.floorProvider||el.floorProvider),nl.resume()}function hl(e){Xd=!1,el.fetchStatus="error",(0,o.logError)("".concat(Vd,": Fetch errored with: "),e),nl.resume()}var bl=O("priceFloors",function(e,n,t,r){var s=tl[t.auctionId];if(!s||!t||s.skipped)return e.call(this,n,t,r);var u,c=L.index.getBidRequest(t),l=ol(s.data,c,Jd(Jd({},t),{},{size:[t.width,t.height]}));if(!l.matchingFloor)return 0!==l.matchingFloor&&(0,o.logWarn)("".concat(Vd,": unable to determine a matching price floor for bidResponse"),t),e.call(this,n,t,r);var f,p=s.data.currency.toUpperCase(),g=t.currency||"USD";if(p===g.toUpperCase())u=t.cpm;else if(t.originalCurrency&&p===t.originalCurrency.toUpperCase())u=t.originalCpm;else try{u=(0,i.m)().convertCurrency(t.cpm,g.toUpperCase(),p)}catch(i){return(0,o.logError)("".concat(Vd,": Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ").concat(t)),e.call(this,n,t,r)}return function(e,n,t,r){t.floorData={floorValue:n.matchingFloor,floorRule:n.matchingRule,floorRuleValue:n.floorRuleValue,floorCurrency:e.data.currency,cpmAfterAdjustments:r,enforcements:Jd({},e.enforcement),matchedFields:{}},e.data.schema.fields.forEach(function(r,i){var o=n.matchingData.split(e.data.schema.delimiter)[i];t.floorData.matchedFields[r]=o})}(s,l,t,u=al(u,t,c)),function(e,n,t){var r=!1!==(0,a.A)(e,"enforcement.enforceJS"),i=!0===(0,a.A)(e,"enforcement.floorDeals")||!t.dealId,o=t.floorData.cpmAfterAdjustments<n.matchingFloor;return r&&o&&i}(s,l,t)?(r(d.Tf.FLOOR_NOT_MET),void(0,o.logWarn)("".concat(Vd,": ").concat(t.bidderCode,"'s Bid Response for ").concat(n," was rejected due to floor not met (adjusted cpm: ").concat(null==t||null===(f=t.floorData)||void 0===f?void 0:f.cpmAfterAdjustments,", floor: ").concat(null==l?void 0:l.matchingFloor,")"),t)):e.call(this,n,t,r)});function yl(e,n,t){var r=n.currency,i=void 0===r?l.$W.getConfig("currency.adServerCurrency")||"USD":r,a=n.mediaType,s=void 0===a?"*":a,u=n.size,c=void 0===u?"*":u;if("function"==typeof e.getFloor){var d;try{d=e.getFloor({currency:i,mediaType:s,size:c})||{}}catch(n){return void(0,o.logWarn)("Cannot compute floor for bid",e)}d.floor=parseFloat(d.floor),null!=d.currency&&d.floor&&!isNaN(d.floor)&&t(d.floor,d.currency)}}l.$W.getConfig("floors",function(e){return function(e){var n;el=(0,o.pick)(e,["floorMin","enabled",function(e){return!1!==e},"auctionDelay",function(e){return e||0},"floorProvider",function(n){return(0,a.A)(e,"data.floorProvider",n)},"endpoint",function(e){return e||{}},"skipRate",function(){return isNaN((0,a.A)(e,"data.skipRate"))?e.skipRate||0:e.data.skipRate},"enforcement",function(e){return(0,o.pick)(e||{},["enforceJS",function(e){return!1!==e},"enforcePBS",function(e){return!0===e},"floorDeals",function(e){return!0===e},"bidAdjustment",function(e){return!1!==e},"noFloorSignalBidders",function(e){return e||[]}])},"additionalSchemaFields",function(e){return"object"===(0,s.A)(e)&&Object.keys(e).length>0?(n=e,void Object.keys(n).forEach(function(e){-1===Qd.indexOf(e)&&"function"==typeof n[e]&&(Qd.push(e),il[e]=n[e])})):void 0;var n},"data",function(e){return e&&gl(e,"setConfig")||void 0}]),el.enabled?((n=el.endpoint).url&&!Xd?"GET"!==(n.method||"GET")?(0,o.logError)("".concat(Vd,": 'GET' is the only request method supported at this time!")):(Kd(n.url,{success:ml,error:hl},null,{method:"GET"}),Xd=!0):Xd&&(0,o.logWarn)("".concat(Vd,": A fetch is already occurring. Skipping.")),Zd||(Q(d.qY.AUCTION_END,function(e){setTimeout(function(){return delete tl[e.auctionId]},3e3)}),(0,i.m)().requestBids.before(vl,50),ke("addBidResponse").before(bl,(0,o.debugTurnedOn)()?4:50),Zd=!0)):((0,o.logInfo)("".concat(Vd,": Turning off module")),el={},tl={},ke("addBidResponse").getHooks({hook:bl}).remove(),(0,i.m)().requestBids.getHooks({hook:vl}).remove(),Zd=!1)}(e.floors)}),Lc({type:Uc,name:"bidfloor",fn:function(e,n,t){yl(n,{currency:t.currency,mediaType:t.mediaType||"*",size:"*"},function(n,t){Object.assign(e,{bidfloor:n,bidfloorcur:t})})}}),Lc({type:Uc,name:"extBidfloor",fn:function(e,n,t){var r;function i(n,t){n===e.bidfloor&&t===e.bidfloorcur||((0,go.J)(this,"ext.bidfloor",n),(0,go.J)(this,"ext.bidfloorcur",t))}Object.values(mr).filter(function(n){return null!=e[n]}).forEach(function(r){yl(n,{currency:e.bidfloorcur||(null==t?void 0:t.currency),mediaType:r},i.bind(e[r]))}),((null===(r=e[gr])||void 0===r?void 0:r.format)||[]).filter(function(e){var n=e.w,t=e.h;return null!=n&&null!=t}).forEach(function(r){yl(n,{currency:e.bidfloorcur||(null==t?void 0:t.currency),mediaType:gr,size:[r.w,r.h]},i.bind(r))})},priority:-10}),Lc({type:Uc,name:"extPrebidFloors",fn:function(e,n,t){if(null!=e.bidfloor){var r,i,o,a,s=t.reqContext.floorMin||{},u=s.floorMinCur,c=s.floorMin;null==u&&(u=e.bidfloorcur);var d=(null===(r=e.ext)||void 0===r||null===(r=r.prebid)||void 0===r||null===(r=r.floors)||void 0===r?void 0:r.floorMinCur)||(null===(i=e.ext)||void 0===i||null===(i=i.prebid)||void 0===i?void 0:i.floorMinCur)||u,l=(null===(o=e.ext)||void 0===o||null===(o=o.prebid)||void 0===o||null===(o=o.floors)||void 0===o?void 0:o.floorMin)||(null===(a=e.ext)||void 0===a||null===(a=a.prebid)||void 0===a?void 0:a.floorMin),f=zd(e.bidfloor,e.bidfloorcur,u),p=!(!l||!d)&&zd(l,d,u),g=p&&p<f?p:f;(0,go.J)(e,"ext.prebid.floors.floorMin",g),(null==c||c>g)&&(c=g),t.reqContext.floorMin={floorMin:c,floorMinCur:u}}},dialects:[Mc],priority:-1}),Lc({type:Pc,name:"extPrebidFloors",fn:function(e,n,t){var r;Zd&&(0,go.J)(e,"ext.prebid.floors.enabled",(null===(r=e.ext)||void 0===r||null===(r=r.prebid)||void 0===r||null===(r=r.floors)||void 0===r?void 0:r.enabled)||!1),null!=t&&t.floorMin&&(0,o.mergeDeep)(e,{ext:{prebid:{floors:t.floorMin}}})},dialects:[Mc]}),(0,i.E)("priceFloors");var wl=new WeakMap,Al={1:gr,2:pr,4:fr},Il=(0,e.A)((0,e.A)((0,e.A)({},Pc,{fpd:{priority:99,fn:function(e,n){(0,o.mergeDeep)(e,n.ortb2)}},onlyOneClient:{priority:-99,fn:Bo("ORTB request")},props:{fn:function(e,n){Object.assign(e,{id:e.id||(0,o.generateUUID)(),test:e.test||0});var t=parseInt(n.timeout,10);isNaN(t)||(e.tmax=t)}}}),Uc,{fpd:{priority:99,fn:function(e,n){(0,o.mergeDeep)(e,n.ortb2Imp)}},id:{fn:function(e,n){e.id=n.bidId}},banner:{fn:function(e,n,t){var r;if(!t.mediaType||t.mediaType===gr){var i=null==n||null===(r=n.mediaTypes)||void 0===r?void 0:r.banner;if(i){var a,s={topframe:!0===(0,o.inIframe)()?0:1};i.sizes&&null==(null===(a=n.ortb2Imp)||void 0===a||null===(a=a.banner)||void 0===a?void 0:a.format)&&(s.format=(0,o.sizesToSizeTuples)(i.sizes).map(o.sizeTupleToRtbSize)),i.hasOwnProperty("pos")&&(s.pos=i.pos),e.banner=(0,o.mergeDeep)(s,e.banner)}}}},pbadslot:{fn:function(e){var n,t,r=null===(n=e.ext)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.pbadslot;r&&"string"==typeof r||null===(t=e.ext)||void 0===t||null===(t=t.data)||void 0===t||delete t.pbadslot}},secure:{fn:function(e,n){var t;e.secure=null!==(t=e.secure)&&void 0!==t?t:1}}}),Bc,{mediaType:{priority:99,fn:function(e,n,t){if(!e.mediaType){var r=t.mediaType;if(!r&&!Al.hasOwnProperty(n.mtype))throw new Error("Cannot determine mediaType for response");e.mediaType=r||Al[n.mtype]}}},banner:{fn:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).createPixel,n=void 0===e?function(e){return(0,o.createTrackPixelHtml)(decodeURIComponent(e),o.encodeMacroURI)}:e;return function(e,t){e.mediaType===gr&&(t.adm&&t.nurl?e.ad=n(t.nurl)+t.adm:t.adm?e.ad=t.adm:t.nurl&&(e.adUrl=t.nurl))}}()},props:{fn:function(e,t,r){var i,o,a,s;Object.entries({requestId:null===(i=r.bidRequest)||void 0===i?void 0:i.bidId,seatBidId:t.id,cpm:t.price,currency:r.ortbResponse.cur||r.currency,width:t.w,height:t.h,wratio:t.wratio,hratio:t.hratio,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||r.ttl,netRevenue:r.netRevenue}).filter(function(e){var t=(0,n.A)(e,2);return t[0],void 0!==t[1]}).forEach(function(t){var r=(0,n.A)(t,2),i=r[0],o=r[1];return e[i]=o}),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain),null!==(o=t.ext)&&void 0!==o&&o.dsa&&(e.meta.dsa=t.ext.dsa),t.cat&&(e.meta.primaryCatId=t.cat[0],e.meta.secondaryCatIds=t.cat.slice(1)),t.attr&&(e.meta.attr=t.attr),null!==(a=t.ext)&&void 0!==a&&a.eventtrackers&&(e.eventtrackers=(null!==(s=e.eventtrackers)&&void 0!==s?s:[]).concat(t.ext.eventtrackers))}}});function El(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=n.shift(),i=n.length>1?El.apply(void 0,n):n[0];return Object.fromEntries(jc.map(function(e){return[e,Object.assign({},r[e],i[e])]}))}function Sl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=void 0===t?{}:t,i=e.processors,a=void 0===i?Tl:i,s=e.overrides,u=void 0===s?{}:s,c=e.imp,d=e.request,l=e.bidResponse,f=e.response,p=new WeakMap;function g(e,t,r,i){var o;return function(){return null==o&&(o=function(){var o=r.bind(this,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!wl.has(e)){var r=Object.entries(e);r.sort(function(e,n){return(e=e[1].priority||0)===(n=n[1].priority||0)?0:e>n?-1:1}),wl.set(e,r.map(function(e){var t=(0,n.A)(e,2);return[t[0],t[1].fn]}))}var i=wl.get(e).filter(function(e){var r=(0,n.A)(e,1)[0];return!t.hasOwnProperty(r)||t[r]}).map(function(e){var r=(0,n.A)(e,2),i=r[0],o=r[1];return t.hasOwnProperty(i)?t[i].bind(this,o):o});return function(){var e=this,n=Array.from(arguments);i.forEach(function(t){t.apply(e,n)})}}(a()[e]||{},u[e]||{}));return t&&(o=t.bind(this,o)),function(){try{return o.apply(this,arguments)}catch(e){i.call.apply(i,[this,e].concat(Array.prototype.slice.call(arguments)))}}}()),o.apply(this,arguments)}}var v=g(Uc,c,function(e,n,t){var r={};return e(r,n,t),r},function(e,n,t){(0,o.logError)("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:n,context:t})}),m=g(Pc,d,function(e,n,t,r){var i={imp:n};return e(i,t,r),i},function(e,n,t,r){throw(0,o.logError)("Error while converting to ORTB request",{error:e,imps:n,bidderRequest:t,context:r}),e}),h=g(Bc,l,function(e,n,t){var r={};return e(r,n,t),r},function(e,n,t){(0,o.logError)("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:n,context:t})}),b=g(qc,f,function(e,n,t,r){var i={bids:n};return e(i,t,r),i},function(e,n,t,r){throw(0,o.logError)("Error while converting from ORTB response",{error:e,bidResponses:n,ortbResponse:t,context:r}),e});return{toORTB:function(e){var n=e.bidderRequest,t=e.bidRequests,i=e.context,a=void 0===i?{}:i;t=t||n.bids;var s={req:Object.assign({bidRequests:t},r,a),imp:{}};s.req.impContext=s.imp;var u=t.map(function(e){var t=Object.assign({bidderRequest:n,reqContext:s.req},r,a),i=v(e,t);if(null!=i){if(i.hasOwnProperty("id"))return Object.assign(t,{bidRequest:e,imp:i}),s.imp[i.id]=t,i;(0,o.logError)("Converted ORTB imp does not specify an id, ignoring bid request",e,i)}}).filter(Boolean),c=m(u,n,s.req);return s.req.bidderRequest=n,null!=c&&p.set(c,s),c},fromORTB:function(e){var n=e.request,t=e.response,r=p.get(n);if(null==r)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:n},t)}var a=Object.fromEntries((n.imp||[]).map(function(e){return[e.id,e]})),s=(t.seatbid||[]).flatMap(function(e){return(e.bid||[]).map(function(n){if(a.hasOwnProperty(n.impid)&&r.imp.hasOwnProperty(n.impid))return h(n,i(r.imp[n.impid],{imp:a[n.impid],seatbid:e,ortbResponse:t}));(0,o.logError)("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",n)})}).filter(Boolean);return b(s,t,i(r.req))}}}Il[Uc].native={fn:function(e,n,t){if(!t.mediaType||t.mediaType===fr){var r,i=n.nativeOrtbRequest;i&&(null!==(r=(i=Object.assign({},t.nativeRequest,i)).assets)&&void 0!==r&&r.length?e.native=(0,o.mergeDeep)({},{request:JSON.stringify(i),ver:i.ver},e.native):(0,o.logWarn)("mediaTypes.native is set, but no assets were specified. Native request skipped.",n))}}},Il[Bc].native={fn:function(e,n){if(e.mediaType===fr){var t;if(t="string"==typeof n.adm?JSON.parse(n.adm):n.adm,!(0,o.isPlainObject)(t)||!Array.isArray(t.assets))throw new Error("ORTB native response contained no assets");e.native={ortb:t}}}},Il[Uc].video={fn:function(e,t,r){var i;if(!r.mediaType||r.mediaType===pr){var a=null==t||null===(i=t.mediaTypes)||void 0===i?void 0:i.video;if(!(0,o.isEmpty)(a)){var s=Object.fromEntries(Object.entries(a).filter(function(e){var t=(0,n.A)(e,1)[0];return an.has(t)}));if(a.playerSize){var u=(0,o.sizesToSizeTuples)(a.playerSize).map(o.sizeTupleToRtbSize);u.length>1&&(0,o.logWarn)("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(s,u[0])}e.video=(0,o.mergeDeep)(s,e.video)}}}},Il[Bc].video={fn:function(e,n,t){if(e.mediaType===pr){var r,i;if(null!=t&&null!==(r=t.imp)&&void 0!==r&&null!==(r=r.video)&&void 0!==r&&r.w&&null!=t&&null!==(i=t.imp)&&void 0!==i&&null!==(i=i.video)&&void 0!==i&&i.h){var o=[t.imp.video.w,t.imp.video.h];e.playerWidth=o[0],e.playerHeight=o[1]}n.adm&&(e.vastXml=n.adm),n.nurl&&(e.vastUrl=n.nurl)}}};var Cl,Tl=(0,o.memoize)(function(){return El(Il,zc(Nc))}),Ol=(null===(Cl=window.sparteoCrossfire)||void 0===Cl?void 0:Cl.started)||!1,kl=Sl({context:{netRevenue:!0,ttl:60},request:function(e,n,t,r){var i,o,a=e(n,t,r);null!=t&&null!==(i=t.ortb2)&&void 0!==i&&i.site&&null!=t&&null!==(o=t.ortb2)&&void 0!==o&&o.app&&(a.site=t.ortb2.site,delete a.app);var s=!!a.site,u=!!a.app,c=s?"site":u?"app":null;if(c){var d,l;(0,go.J)(a,"".concat(c,".publisher.ext.params.pbjsVersion"),"9.53.4");var f=null==t||null===(d=t.bids)||void 0===d||null===(d=d[0])||void 0===d||null===(d=d.params)||void 0===d?void 0:d.networkId;f&&(0,go.J)(a,"".concat(c,".publisher.ext.params.networkId"),f);var p=null==t||null===(l=t.bids)||void 0===l||null===(l=l[0])||void 0===l||null===(l=l.params)||void 0===l?void 0:l.publisherId;p&&(0,go.J)(a,"".concat(c,".publisher.ext.params.publisherId"),p)}return a},imp:function(e,n,t){var r=e(n,t);return(0,go.J)(r,"ext.sparteo.params",n.params),r.ext.sparteo.params.adUnitCode=n.adUnitCode,r},bidResponse:function(e,n,t){var r;t.mediaType=(0,a.A)(n,"ext.prebid.type");var i,s=e(n,t);"video"==t.mediaType&&(s.nurl=n.nurl,s.vastUrl=null!==(i=(0,a.A)(n,"ext.prebid.cache.vastXml.url"))&&void 0!==i?i:null);var u=null!==(r=(0,a.A)(n,"ext.prebid.renderer"))&&void 0!==r?r:null;return u&&u.url&&(s.renderer=function(e){var n=dr.install({url:e.url,loaded:!1,config:e});try{n.setRender(xl)}catch(e){(0,o.logWarn)("Sparteo Bid Adapter: Prebid Error calling setRender on renderer",e)}return n}(u)),s}});function xl(e){var n;if(document.getElementById(e.adUnitCode)){var t=null!==(n=e.renderer.getConfig())&&void 0!==n?n:{};e.renderer.push(function(){var n;window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:{ad:{video:{content:e.vastXml,player_width:e.width,player_height:e.height}}},sizes:[e.width,e.height],rendererOptions:null!==(n=t.options)&&void 0!==n?n:{}})})}else(0,o.logError)("Sparteo Bid Adapter: Video renderer did not started. bidResponse.adUnitCode is probably not a DOM element : ".concat(e.adUnitCode))}function Dl(e){var n;return null==e||!e.gdprApplies||!0===(null==e||null===(n=e.vendorData)||void 0===n||null===(n=n.purpose)||void 0===n||null===(n=n.consents)||void 0===n?void 0:n[1])}dn({code:"sparteo",gvlid:1028,supportedMediaTypes:[gr,pr],isBidRequestValid:function(e){var n=(0,a.A)(e,"mediaTypes.banner"),t=(0,a.A)(e,"mediaTypes.video");if(!e.params)return(0,o.logError)("The bid params are missing"),!1;if(!e.params.networkId&&!e.params.publisherId)return(0,o.logError)("The networkId is required"),!1;if(!n&&!t)return(0,o.logError)("The placement must be of banner or video type"),!1;if(n){var r=n.sizes;if(!r||0==(0,o.parseSizesInput)(r).length)return(0,o.logError)("mediaTypes.banner.sizes must be set for banner placement at the right format."),!1}return!t||0!=(0,o.parseSizesInput)(t.playerSize).length||((0,o.logError)("mediaTypes.video.playerSize must be set for video placement at the right format."),!1)},buildRequests:function(e,n){var t=kl.toORTB({bidRequests:e,bidderRequest:n}),r=function(e,n){var t,r,i,a,s,u,c=null!==(t=null==e||null===(r=e.site)||void 0===r||null===(r=r.publisher)||void 0===r||null===(r=r.ext)||void 0===r||null===(r=r.params)||void 0===r?void 0:r.networkId)&&void 0!==t?t:null==e||null===(i=e.app)||void 0===i||null===(i=i.publisher)||void 0===i||null===(i=i.ext)||void 0===i||null===(i=i.params)||void 0===i?void 0:i.networkId;if(null!=e&&e.site){var d,l;if(!(a=null===(d=e.site)||void 0===d?void 0:d.domain)&&null!==(l=e.site)&&void 0!==l&&l.page)try{a=new URL(e.site.page).hostname}catch(e){}a?a=a.trim().split("/")[0].split(":")[0].replace(/^www\./,""):((0,o.logWarn)("Domain not found. Missing the site.domain or the site.page field"),a="unknown")}else if(null!=e&&e.app){var f,p,g;s=(s=(null===(f=e.app)||void 0===f?void 0:f.domain)||"")?s.trim().split("/")[0].split(":")[0].replace(/^www\./,""):"unknown";var v=null!==(p=null===(g=e.app)||void 0===g?void 0:g.bundle)&&void 0!==p?p:"",m=String(v).trim();m&&"null"!==m.toLowerCase()?u=m:((0,o.logWarn)("Bundle not found. Missing the app.bundle field."),u="unknown")}var h={NETWORK_ID:null!=c?c:"",BUNDLE_QUERY:null!=e&&e.app&&u?"&bundle=".concat(encodeURIComponent(u)):"",SITE_DOMAIN_QUERY:a?"&site_domain=".concat(encodeURIComponent(a)):"",APP_DOMAIN_QUERY:s?"&app_domain=".concat(encodeURIComponent(s)):""};return n.replace(/\$\{(NETWORK_ID|SITE_DOMAIN_QUERY|APP_DOMAIN_QUERY|BUNDLE_QUERY)\}/g,function(e,n){var t;return String(null!==(t=h[n])&&void 0!==t?t:"")})}(t,e[0].params.endpoint?e[0].params.endpoint:"https://bid.sparteo.com/auction?network_id=${NETWORK_ID}${SITE_DOMAIN_QUERY}${APP_DOMAIN_QUERY}${BUNDLE_QUERY}");return{method:"POST",url:r,data:t}},interpretResponse:function(e,n){return kl.fromORTB({response:e.body,request:n.data}).bids},getUserSyncs:function(e,n,t,r){var i,o="";if(!(Ol||null!==(i=window.sparteoCrossfire)&&void 0!==i&&i.started)&&(t&&(o+="&gdpr="+(t.gdprApplies?1:0),o+="&gdpr_consent="+encodeURIComponent(t.consentString||"")),r&&r.consentString&&(o+="&usp_consent=".concat(r.consentString)),e.iframeEnabled))return Ol=!0,window.sparteoCrossfire={started:!0},[{type:"iframe",url:"https://sync.sparteo.com/sync/iframe.html?from=prebidjs"+o}]},onTimeout:function(e){},onBidWon:function(e){e&&e.nurl&&(0,o.triggerPixel)(e.nurl,null)},onSetTargeting:function(e){}}),(0,i.E)("sparteoBidAdapter");var Rl=Object.freeze([].concat((0,r.A)(["device.sua","source.schain","regs.gdpr","regs.us_privacy","regs.gpp","regs.gpp_sid","user.consent","user.eids"].map(function(e){return function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,n){return"".concat(e,".ext.").concat(n)},i=[(t=e.split(".")).slice(0,t.length-1).join("."),t[t.length-1]],o=(0,n.A)(i,2),s=o[0],u=o[1];return r=r(s,u),function(e){var n=(0,a.A)(e,s);if(null!=(null==n?void 0:n[u]))return(0,go.J)(e,r,n[u]),function(){return delete n[u]}}}(e)})),(0,r.A)(["app","content","site","user"].map(function(e){return function(n){var t,i=null===(t=n[e])||void 0===t?void 0:t.kwarray;if(null!=i){var o=(n[e].keywords||"").split(",");return Array.isArray(i)&&o.push.apply(o,(0,r.A)(i)),n[e].keywords=o.join(","),function(){return delete n[e].kwarray}}}}))));function jl(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rl;return function(t){return n.forEach(function(n){try{var r=n(t);"function"==typeof r&&e&&r()}catch(e){(0,o.logError)("Error translating request to ORTB 2.5",e)}}),t}}function _l(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return Pl(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pl(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}function Pl(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function Ul(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Bl(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ul(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Ul(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}jl();var ql="criteo",Nl=Ze({bidderCode:ql}),Ml="Criteo: ",Wl=jl(),Fl="cto_optout",Ll="cto_bundle",zl=Sl({context:{netRevenue:!0,ttl:60},imp:function(e,n,t){var r,i=e(n,t),o=n.params;if(i.tagid=n.adUnitCode,(0,go.J)(i,"ext",Bl(Bl(Bl({},n.params.ext),i.ext),{},{rwdd:i.rwdd,floors:Ql(n),bidder:{publishersubid:null==o?void 0:o.publisherSubId,zoneid:null==o?void 0:o.zoneId,uid:null==o?void 0:o.uid}})),delete i.rwdd,!t.fledgeEnabled&&null!==(r=i.ext.igs)&&void 0!==r&&r.ae&&delete i.ext.igs.ae,Yl(n)){var a,s=n.params.video;void 0!==s&&(0,go.J)(i,"video",Bl(Bl({},i.video),{},{skip:i.video.skip||s.skip||0,placement:i.video.placement||s.placement,minduration:i.video.minduration||s.minduration,playbackmethod:i.video.playbackmethod||s.playbackmethod,startdelay:i.video.startdelay||s.startdelay||0})),(0,go.J)(i,"video.ext",{context:n.mediaTypes.video.context,playersizes:Vl(null==n||null===(a=n.mediaTypes)||void 0===a||null===(a=a.video)||void 0===a?void 0:a.playerSize,Kl),plcmt:n.mediaTypes.video.plcmt,poddur:n.mediaTypes.video.adPodDurationSec,rqddurs:n.mediaTypes.video.durationRangeSec})}if(i.native&&void 0!==i.native.request){var u=JSON.parse(i.native.request);u.assets&&(1!==u.assets.length||Object.keys(u.assets[0]).length)||delete u.assets,(0,go.J)(i,"native.request_native",u),delete i.native.request}return i},request:function(e,n,t,r){var i=e(n,t,r);return void 0!==r.publisherId&&(void 0!==i.app?(0,go.J)(i,"app.publisher.id",r.publisherId):(0,go.J)(i,"site.publisher.id",r.publisherId)),t&&t.gdprConsent&&(0,go.J)(i,"regs.ext.gdprversion",t.gdprConsent.apiVersion),i=Wl(i)},bidResponse:function(e,n,t){var r,i,o,a;t.mediaType=null==n||null===(r=n.ext)||void 0===r?void 0:r.mediatype,t.mediaType===fr&&void 0!==n.adm_native&&(n.adm=n.adm_native,delete n.adm_native);var s,u,c=e(n,t),d=t.bidRequest;(c.currency=null==n||null===(i=n.ext)||void 0===i?void 0:i.cur,void 0!==(null==n||null===(o=n.ext)||void 0===o?void 0:o.meta)&&(0,go.J)(c,"meta",Bl(Bl({},c.meta),n.ext.meta)),void 0!==(null==n||null===(a=n.ext)||void 0===a||null===(a=a.paf)||void 0===a?void 0:a.content_id)&&(0,go.J)(c,"meta.paf.content_id",n.ext.paf.content_id),c.mediaType===pr)&&(c.vastUrl=null===(s=n.ext)||void 0===s?void 0:s.displayurl,(null==d||null===(u=d.mediaTypes)||void 0===u||null===(u=u.video)||void 0===u?void 0:u.context)===on&&(c.renderer=function(e){var n,t;if(void 0!==(null===(n=e.ext)||void 0===n?void 0:n.videoPlayerConfig)&&void 0!==(null===(t=e.ext)||void 0===t?void 0:t.videoPlayerType)){var r=dr.install({url:"https://static.criteo.net/js/ld/publishertag.renderer.js",config:{documentResolver:function(e,n,t){return null!=t?t:n}}});return r.setRender(function(n,t){var r,i={slotid:e.id,vastUrl:null===(r=e.ext)||void 0===r?void 0:r.displayurl,vastXml:e.adm,documentContext:t},o=e.ext.videoPlayerConfig;window.CriteoOutStream[e.ext.videoPlayerType].play(i,o)}),r}}(n)));return c},response:function(e,n,t,r){var i,o=e(n,t,r),a=null==t||null===(i=t.ext)||void 0===i||null===(i=i.paf)||void 0===i?void 0:i.transmission;return o.bids.forEach(function(e){var n;void 0!==a&&void 0!==(null==e||null===(n=e.meta)||void 0===n||null===(n=n.paf)||void 0===n?void 0:n.content_id)?(0,go.J)(e,"meta.paf.transmission",a):delete e.meta.paf}),o}}),Gl={code:ql,gvlid:91,supportedMediaTypes:[gr,pr,fr],getUserSyncs:function(e,n,t,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.gppString,s=void 0===a?"":a,u=i.applicableSections,c=void 0===u?[]:u,d=Nn(),l="criteoPrebidAdapter";if(e.iframeEnabled&&Dl(t)){var f=[];if(f.push("origin=".concat(l)),f.push("topUrl=".concat(d.domain)),t&&(t.gdprApplies&&f.push("gdpr=".concat(1==t.gdprApplies?1:0)),t.consentString&&f.push("gdpr_consent=".concat(t.consentString))),r&&f.push("us_privacy=".concat(r)),f.push("gpp=".concat(s)),Array.isArray(c)){var p,g=_l(c);try{for(g.s();!(p=g.n()).done;){var v=p.value;f.push("gpp_sid=".concat(v))}}catch(e){g.e(e)}finally{g.f()}}var m=Math.random().toString(),h={bundle:$l(Ll),cw:Nl.cookiesAreEnabled(),lsw:Nl.localStorageIsEnabled(),optoutCookie:$l(Fl),origin:l,requestId:m,tld:d.domain,topUrl:d.domain,version:"9.53.4".replace(/\./g,"_")};window.addEventListener("message",function e(n){if(n.data&&"https://gum.criteo.com"==n.origin&&n.data.requestId===m){this.removeEventListener("message",e),n.stopImmediatePropagation();var t,r,i=n.data;i.optout?(Hl(Ll),Jl(Fl,!0,43200,d.domain)):(i.bundle&&Jl(Ll,i.bundle,9360,d.domain),null==i||null===(t=i.callbacks)||void 0===t||null===(r=t.forEach)||void 0===r||r.call(t,o.triggerPixel))}},!0);var b=JSON.stringify(h).replace(/"/g,"%22");return[{type:"iframe",url:"https://gum.criteo.com/syncframe?".concat(f.join("&"),"#").concat(b)}]}if(e.pixelEnabled&&Dl(t)){var y=[];if(y.push("profile=207"),t&&(!0===t.gdprApplies&&y.push("gdprapplies=true"),t.consentString&&y.push("gdpr=".concat(t.consentString))),r&&y.push("ccpa=".concat(r)),y.push("gpp=".concat(s)),Array.isArray(c)){var w,A=_l(c);try{for(A.s();!(w=A.n()).done;){var I=w.value;y.push("gpp_sid=".concat(I))}}catch(e){A.e(e)}finally{A.f()}}return[{type:"image",url:"https://ssp-sync.criteo.com/user-sync/redirect?".concat(y.join("&"))}]}return[]},isBidRequestValid:function(e){return!(!e||!e.params||!e.params.zoneId&&!e.params.networkId||Yl(e)&&!function(e){var n=!0;return["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach(function(t){var r,i,a,s,u,c;"placement"===t?void 0===(null==e||null===(r=e.mediaTypes)||void 0===r||null===(r=r.video)||void 0===r?void 0:r[t])&&void 0===(null==e||null===(i=e.params)||void 0===i||null===(i=i.video)||void 0===i?void 0:i[t])&&void 0===(null==e||null===(a=e.mediaTypes)||void 0===a||null===(a=a.video)||void 0===a?void 0:a.plcmt)&&void 0===(null==e||null===(s=e.params)||void 0===s||null===(s=s.video)||void 0===s?void 0:s.plcmt)&&(n=!1,(0,o.logError)("Criteo Bid Adapter: mediaTypes.video."+t+" or mediaTypes.video.plcmt is required")):void 0===(null==e||null===(u=e.mediaTypes)||void 0===u||null===(u=u.video)||void 0===u?void 0:u[t])&&void 0===(null==e||null===(c=e.params)||void 0===c||null===(c=c.video)||void 0===c?void 0:c[t])&&(n=!1,(0,o.logError)("Criteo Bid Adapter: mediaTypes.video."+t+" is required"))}),n}(e))},buildRequests:function(e,n){e.forEach(function(e){var n;(function(e){var n;return void 0!==(null==e||null===(n=e.mediaTypes)||void 0===n?void 0:n.native)})(e)&&(function(e){return!(e.nativeParams&&(e.nativeParams.image&&(!0!==e.nativeParams.image.sendId||!0===e.nativeParams.image.sendTargetingKeys)||e.nativeParams.icon&&(!0!==e.nativeParams.icon.sendId||!0===e.nativeParams.icon.sendTargetingKeys)||e.nativeParams.clickUrl&&(!0!==e.nativeParams.clickUrl.sendId||!0===e.nativeParams.clickUrl.sendTargetingKeys)||e.nativeParams.displayUrl&&(!0!==e.nativeParams.displayUrl.sendId||!0===e.nativeParams.displayUrl.sendTargetingKeys)||e.nativeParams.privacyLink&&(!0!==e.nativeParams.privacyLink.sendId||!0===e.nativeParams.privacyLink.sendTargetingKeys)||e.nativeParams.privacyIcon&&(!0!==e.nativeParams.privacyIcon.sendId||!0===e.nativeParams.privacyIcon.sendTargetingKeys)))}(e)||(0,o.logWarn)(Ml+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)"),null==(null==e||null===(n=e.nativeOrtbRequest)||void 0===n?void 0:n.assets)&&((0,o.logWarn)(Ml+"native asset requirements are missing"),(0,go.J)(e,"nativeOrtbRequest.assets",[{}])))});var t=function(e,n){var t,r,i,a,s,u=(0,o.parseUrl)(null==n||null===(t=n.refererInfo)||void 0===t?void 0:t.topmostLocation).search;return{url:(null==n||null===(r=n.refererInfo)||void 0===r?void 0:r.page)||"",debug:"1"===u.pbt_debug,noLog:"1"===u.pbt_nolog,fledgeEnabled:null===(i=n.paapi)||void 0===i?void 0:i.enabled,amp:e.some(function(e){return"amp"===e.params.integrationMode}),networkId:null===(a=e.find(function(e){var n;return null===(n=e.params)||void 0===n?void 0:n.networkId}))||void 0===a?void 0:a.params.networkId,publisherId:null===(s=e.find(function(e){var n;return null===(n=e.params)||void 0===n?void 0:n.pubid}))||void 0===s?void 0:s.params.pubid}}(e,n),r=function(e){var n="https://grid-bidder.criteo.com/openrtb_2_5/pbjs/auction/request";n+="?profileId=207",n+="&av="+String(37),n+="&wv="+encodeURIComponent("9.53.4"),n+="&cb="+String(Math.floor(99999999999*Math.random())),Nl.localStorageIsEnabled()?n+="&lsavail=1":n+="&lsavail=0",e.amp&&(n+="&im=1"),e.debug&&(n+="&debug=1"),e.noLog&&(n+="&nolog=1");var t=$l(Ll);return t&&(n+="&bundle=".concat(t)),$l(Fl)&&(n+="&optout=1"),e.networkId&&(n+="&networkId="+e.networkId),n}(t),i=zl.toORTB({bidderRequest:n,bidRequests:e,context:t});if(i)return{method:"POST",url:r,data:i,bidRequests:e}},interpretResponse:function(e,n){var t;if(void 0===(null==e?void 0:e.body))return[];var r=zl.fromORTB({response:e.body,request:n.data}).bids||[],i=null===(t=e.body)||void 0===t||null===(t=t.ext)||void 0===t||null===(t=t.igi)||void 0===t?void 0:t.filter(function(e){return(0,o.isArray)(null==e?void 0:e.igs)}).flatMap(function(e){return e.igs});return null!=i&&i.length?{bids:r,paapi:i}:r},onDataDeletionRequest:function(e){var n=$l(Ll);n&&(Hl(Ll),Cn("https://privacy.criteo.com/api/privacy/datadeletionrequest",null,JSON.stringify({publisherUserId:n}),{contentType:"application/json",method:"POST"}))}};function $l(e){var n=Nl.getCookie(e),t=Nl.getDataFromLocalStorage(e);return n||t||void 0}function Jl(e,n,t,r){var i=new Date;i.setTime(i.getTime()+60*t*60*1e3);for(var o="expires=".concat(i.toUTCString()),a=r.split("."),s=0;s<a.length;++s){var u=a.slice(a.length-s-1,a.length).join(".");try{Nl.setCookie(e,n,o,null,"."+u);var c=Nl.getCookie(e);if(c&&c===n)break}catch(e){}}Nl.setDataInLocalStorage(e,n)}function Hl(e){Nl.setCookie(e,"",0),Nl.removeDataFromLocalStorage(e)}function Vl(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return null==e?[]:Array.isArray(e[0])?e.map(function(e){return n(e)}):[n(e)]}function Kl(e){return e[0]+"x"+e[1]}function Yl(e){var n;return void 0!==(null==e||null===(n=e.mediaTypes)||void 0===n?void 0:n.video)}function Ql(e){try{var n,t,r,i,a,s={},u=function(e){if(e.getFloor)return e.getFloor;if(e.params.bidFloor&&e.params.bidFloorCur)try{var n=parseFloat(e.params.bidFloor);return function(){return{currency:e.params.bidFloorCur,floor:n}}}catch(e){}}(e);if(u)return null!==(n=e.mediaTypes)&&void 0!==n&&n.banner&&(s.banner={},Vl(null==e||null===(i=e.mediaTypes)||void 0===i||null===(i=i.banner)||void 0===i?void 0:i.sizes).forEach(function(n){return s.banner[Kl(n).toString()]=u.call(e,{size:n,mediaType:gr})})),null!==(t=e.mediaTypes)&&void 0!==t&&t.video&&(s.video={},Vl(null==e||null===(a=e.mediaTypes)||void 0===a||null===(a=a.video)||void 0===a?void 0:a.playerSize).forEach(function(n){return s.video[Kl(n).toString()]=u.call(e,{size:n,mediaType:pr})})),null!==(r=e.mediaTypes)&&void 0!==r&&r.native&&(s.native={},s.native["*"]=u.call(e,{size:"*",mediaType:fr})),s}catch(e){(0,o.logError)("Could not parse floors from Prebid: "+e)}}dn(Gl),(0,i.E)("criteoBidAdapter");const Xl={appnexuspsp:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ib.adnxs.com/openrtb2/prebid",noP1Consent:"https://ib.adnxs-simple.com/openrtb2/prebid"},syncEndpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/cookie_sync",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/cookie_sync"},maxTimeout:1e3},rubicon:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction",noP1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid-server.rubiconproject.com/cookie_sync",noP1Consent:"https://prebid-server.rubiconproject.com/cookie_sync"},maxTimeout:500},openwrap:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ow.pubmatic.com/openrtb2/auction?source=pbjs",noP1Consent:"https://ow.pubmatic.com/openrtb2/auction?source=pbjs"},maxTimeout:500}};var Zl=(0,e.A)((0,e.A)((0,e.A)({},gr,"banner"),fr,"native"),pr,"video");function ef(e,n){var t=n.params;t&&(0,go.J)(e,"ext.prebid.bidder.".concat(n.bidder),t)}var nf=(0,e.A)((0,e.A)((0,e.A)((0,e.A)({},Pc,{extPrebid:{fn:function(e,n){var t;(0,go.J)(e,"ext.prebid",(0,o.mergeDeep)({auctiontimestamp:n.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null===(t=e.ext)||void 0===t?void 0:t.prebid)),l.$W.getConfig("debug")&&(e.ext.prebid.debug=!0)}},extPrebidChannel:{fn:function(e){var n;(0,go.J)(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:(0,i.m)().version},null===(n=e.ext)||void 0===n||null===(n=n.prebid)||void 0===n?void 0:n.channel))}},extPrebidAliases:{fn:function(e,n,t){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).am,i=void 0===r?rr:r;if(i.aliasRegistry[n.bidderCode]){var o=i.bidderRegistry[n.bidderCode];if(!o||!o.getSpec().skipPbsAliasing){var a;(0,go.J)(e,"ext.prebid.aliases.".concat(n.bidderCode),i.aliasRegistry[n.bidderCode]);var s=l.$W.getConfig("gvlMapping.".concat(n.bidderCode))||(null==o||null===(a=o.getSpec)||void 0===a?void 0:a.call(o).gvlid);s&&(0,go.J)(e,"ext.prebid.aliasgvlids.".concat(n.bidderCode),s)}}}}}),Uc,{params:{fn:ef},adUnitCode:{fn:function(e,n){var t=n.adUnitCode;t&&(0,go.J)(e,"ext.prebid.adunitcode",t)}}}),Bc,{mediaType:{fn:function(e,n,t){var r,i=t.mediaType;i||(i=Al.hasOwnProperty(n.mtype)?Al[n.mtype]:null===(r=n.ext)||void 0===r||null===(r=r.prebid)||void 0===r?void 0:r.type,Zl.hasOwnProperty(i)||(i=gr)),e.mediaType=i},priority:99},videoCache:{fn:function(e,n){if(e.mediaType===pr){var t,r,i=null!==(t=null==n||null===(r=n.ext)||void 0===r||null===(r=r.prebid)||void 0===r||null===(r=r.cache)||void 0===r?void 0:r.vastXml)&&void 0!==t?t:{},o=i.cacheId,a=i.url;if(!o||!a){var s,u,c=null!==(s=null==n||null===(u=n.ext)||void 0===u||null===(u=u.prebid)||void 0===u?void 0:u.targeting)&&void 0!==s?s:{},d=c.hb_uuid,l=c.hb_cache_host,f=c.hb_cache_path;d&&l&&f&&(o=d,a="https://".concat(l).concat(f,"?uuid=").concat(d))}o&&a&&Object.assign(e,{videoCacheKey:o,vastUrl:a})}},priority:-10},bidderCode:{fn:function(e,n,t){var r,i;e.bidderCode=t.seatbid.seat,e.adapterCode=(null==n||null===(r=n.ext)||void 0===r||null===(r=r.prebid)||void 0===r||null===(r=r.meta)||void 0===r?void 0:r.adaptercode)||(null===(i=t.bidRequest)||void 0===i?void 0:i.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,n){var t,r=null==n||null===(t=n.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.bidid;(0,o.isStr)(r)&&(e.pbsBidId=r)}},adserverTargeting:{fn:function(e,n){var t,r=null==n||null===(t=n.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.targeting;(0,o.isPlainObject)(r)&&(e.adserverTargeting=r)}},extPrebidMeta:{fn:function(e,n){var t;e.meta=(0,o.mergeDeep)({},null==n||null===(t=n.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.meta,e.meta)}},pbsWinTrackers:{fn:function(e,t){var r;e.eventtrackers=e.eventtrackers||[],[[t.burl,Rt],[null==t||null===(r=t.ext)||void 0===r||null===(r=r.prebid)||void 0===r||null===(r=r.events)||void 0===r?void 0:r.win,jt]].filter(function(t){var r=(0,n.A)(t,2),i=r[0],o=r[1];return i&&null==e.eventtrackers.find(function(e){var n=e.method,t=e.event,r=e.url;return t===o&&n===xt&&r===i})}).forEach(function(t){var r=(0,n.A)(t,2),i=r[0],o=r[1];e.eventtrackers.push({method:xt,event:o,url:i})})}}}),qc,{serverSideStats:{fn:function(e,t,r){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach(function(e){var i=(0,n.A)(e,2),o=i[0],s=i[1],u=(0,a.A)(t,"ext.".concat(o,".").concat(r.bidderRequest.bidderCode));u&&(r.bidderRequest[s]=u,r.bidRequests.forEach(function(e){return e[s]=u}))})}}}),tf=(0,o.memoize)(function(){return El(Tl(),nf,zc(Mc))});function rf({global:e,bidder:n}){return Object.fromEntries(Object.entries(n).map(([n,t])=>[n,of(t,(0,o.mergeDeep)({},e,t))]))}function of(e,n){return Object.fromEntries(Object.entries(e).map(([e,t])=>{const r=n[e];return Array.isArray(t)?!(0,o.deepEqual)(t,r)&&Array.isArray(r)&&(t=r):null!=t&&"object"==typeof t&&(t=of(t,r)),[e,t]}))}function af(e,n){return null==e||0===Object.keys(e.bidder||{}).length?e:(e=function({global:e,bidder:n},t){const r=function({eids:e,conflicts:n=new Set}){const t=[],r=[],i={};return e.forEach(e=>{(!1===e.bidders?t:r).push(e)}),r.forEach(({eid:e,bidders:r})=>{n.has(e.source)?r.forEach(n=>{(i[n]=i[n]||[]).push(e)}):t.push({eid:e,bidders:r})}),{global:t.map(({eid:e})=>e),permissions:t.filter(({bidders:e})=>!1!==e).map(({eid:e,bidders:n})=>({source:e.source,bidders:n})),bidder:i}}(function({global:e,bidder:n}){const t=[],r={},i=new Set;function s(e){let n=t.find(n=>(0,o.deepEqual)(n.eid,e));return null==n&&(n={eid:e,bidders:new Set},t.push(n)),null==r[e.source]?r[e.source]=n.eid:n.eid===e&&i.add(e.source),n}return wt.forEach(n=>{((0,a.A)(e,n)||[]).forEach(e=>{s(e).bidders=!1})}),Object.entries(n).forEach(([e,n])=>{wt.forEach(t=>{((0,a.A)(n,t)||[]).forEach(n=>{const t=s(n);!1!==t.bidders&&t.bidders.add(e)})})}),{eids:t.map(({eid:e,bidders:n})=>({eid:e,bidders:n&&Array.from(n)})),conflicts:i}}({global:e,bidder:n}));function i(e){delete e?.user?.eids,delete e?.user?.ext?.eids}return e=(0,o.deepClone)(e),n=(0,o.deepClone)(n),i(e),Object.values(n).forEach(i),r.global.length&&(0,go.J)(e,"user.ext.eids",r.global),t?.length&&r.permissions.forEach(e=>e.bidders=e.bidders.filter(e=>t.includes(e))),r.permissions.length&&(0,go.J)(e,"ext.prebid.data.eidpermissions",r.permissions),Object.entries(r.bidder).forEach(([e,t])=>{t.length&&(0,go.J)(n[e],"user.ext.eids",t)}),{global:e,bidder:n}}(e,n),{...e,bidder:rf(e)})}const sf=new Set(["bidderCode","bidderRequestId","uniquePbsTid","bids","timeout"]),uf=(()=>{const e=Er(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return[e.cpm,e.currency]},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zd;return function(r,i){return null==e&&(e=i),t(r,i,e,n)}}();return wr(function(t){return n.apply(null,e(t))})}(e=>[e.bidfloor,e.bidfloorcur]));return function(n){let t;for(const r of n){if(null==r?.bidfloorcur||null==r?.bidfloor)return null;t=null==t?r:e(t,r)}return t}})(),cf=Sl({processors:tf,context:{netRevenue:!0},imp(e,n,t){Object.assign(t,n.pbsData);const r=e(n,t);if((n.bids||[]).forEach(e=>{e.ortb2Imp&&Object.keys(e.ortb2Imp).length>0&&(0,go.J)(r,`ext.prebid.imp.${e.bidder}`,e.ortb2Imp)}),Object.values(Zl).some(e=>r[e]))return r.banner&&r.banner.format[0]?.w&&(r.w=r.banner.format[0]?.w,r.h=r.banner.format[0]?.h),r.secure=n.ortb2Imp?.secure??1,r},request(e,n,t,r){if(n.length){let{s2sBidRequest:i}=r;const o=e(n,t,r);return o.tmax=Math.floor(i.s2sConfig.timeout??Math.min(.75*i.requestBidsTimeout,i.s2sConfig.maxTimeout??gf.maxTimeout)),o.ext.tmaxmax=o.ext.tmaxmax||i.requestBidsTimeout,[o.app,o.dooh,o.site].forEach(e=>{e&&!e.publisher?.id&&(0,go.J)(e,"publisher.id",i.s2sConfig.accountId)}),r.transmitTids||(0,go.J)(o,"ext.prebid.createtids",!1),o}(0,o.logError)("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},bidResponse(e,n,t){let r=t.actualBidRequests.get(t.seatbid.seat);null==r&&(r=t.actualBidRequests.get(null)),r&&Object.assign(t,{bidRequest:r,bidderRequest:t.actualBidderRequests.find(e=>e.bidderCode===r.bidder)});const i=e(n,t);return i.requestBidder=r?.bidder,i.native?.ortb&&(i.native.ortb?.assets?.forEach(e=>{e.id||(e.id=0)}),i.adm=i.native.ortb),i.requestTimestamp=t.requestTimestamp,{bid:Object.assign(fe(d.XQ.GOOD,{src:d.RW.SRC,bidId:r?r.bidId||r.bid_Id:null,transactionId:t.adUnit.transactionId,adUnitId:t.adUnit.adUnitId,auctionId:t.bidderRequest.auctionId}),i,{deferRendering:!!t.adUnit.deferBilling,deferBilling:!!t.adUnit.deferBilling}),adUnit:t.adUnit.code}},overrides:{[Uc]:{id(e,n,t,r){n.id=r.impId},params(e,n,t,r){const i=r.s2sBidRequest.s2sConfig.adapterOptions;for(const e of r.actualBidRequests.values())ef(n,e),i&&i[e.bidder]&&Object.assign(n.ext.prebid.bidder[e.bidder],i[e.bidder])},bidfloor(e,n,t,r){const i=uf(function*(){for(const n of r.actualBidRequests.values()){const t={};e(t,n,r),yield t}}());null!=i&&Object.assign(n,i)},extBidfloor(e,n,t,r){function i(e,n){null!=n&&((0,go.J)(e,"ext.bidfloor",n.bidfloor),(0,go.J)(e,"ext.bidfloorcur",n.bidfloorcur))}const a=Array.from(r.actualBidRequests.values()).map(t=>{const i=(0,o.deepClone)(n);return e(i,t,r),i});Object.values(mr).forEach(e=>{i(n[e],uf(a.map(n=>n[e]?.ext)))}),(n[gr]?.format||[]).forEach((e,n)=>{i(e,uf(a.map(e=>e[gr].format[n]?.ext)))})}},[Pc]:{fpd(e,n,t,r){r.transmitTids&&(0,go.J)(n,"source.tid",t.auctionId),(0,o.mergeDeep)(n,r.s2sBidRequest.ortb2Fragments?.global),r.s2sBidRequest.s2sConfig.extPrebid&&"object"==typeof r.s2sBidRequest.s2sConfig.extPrebid&&(0,go.J)(n,"ext.prebid",(0,o.mergeDeep)(n.ext?.prebid||{},r.s2sBidRequest.s2sConfig.extPrebid)),r.getRedactor().ortb2(n);const i=Object.entries(r.s2sBidRequest.ortb2Fragments?.bidder||{}).filter(([e])=>{const n=r.s2sBidRequest.s2sConfig.bidders;return r.s2sBidRequest.s2sConfig.allowUnknownBidderCodes||n&&n.includes(e)}).map(([e,n])=>({bidders:[e],config:{ortb2:r.getRedactor(e).ortb2(n)}}));i.length&&(0,go.J)(n,"ext.prebid.bidderconfig",i),(0,go.J)(n,"ext.crossfire.showIds",!0),(0,go.J)(n,"ext.crossfire.src","viously"),conf?.advertising?.viously_seller_id&&(0,go.J)(n,"ext.crossfire.orgId",conf.advertising.viously_seller_id)},extPrebidAliases(e,n,t,r){r.actualBidderRequests.forEach(t=>e(n,t,r))},sourceExtSchain(e,n,t,r){let i,o=n?.ext?.prebid?.schains||[];const a=new Set(o.flatMap(e=>e.bidders));o=Object.values(o.concat(r.actualBidderRequests.filter(e=>!a.has(e.bidderCode)).map(e=>({bidders:[e.bidderCode],schain:e?.bids?.[0]?.schain}))).filter(({bidders:e,schain:n})=>e?.length>0&&n).reduce((e,{bidders:n,schain:t})=>{const r=JSON.stringify(t);return e.hasOwnProperty(r)||(e[r]={bidders:new Set,schain:t}),n.forEach(n=>e[r].bidders.add(n)),(null==i||e[r].bidders.size>i.bidders.size)&&(i=e[r]),e},{})).map(({bidders:e,schain:n})=>({bidders:Array.from(e),schain:n})),null!=i&&(0,go.J)(n,"source.ext.schain",i.schain),o.length&&(0,go.J)(n,"ext.prebid.schains",o)}},[qc]:{serverSideStats(e,n,t,r){r.actualBidderRequests.forEach(i=>e(n,t,{...r,bidderRequest:i,bidRequests:i.bids}))},paapiConfigs(e,n,t,r){const i=Object.values(r.impContext).flatMap(e=>(e.paapiConfigs||[]).map(n=>{const t=e.actualBidderRequests.find(e=>e.bidderCode===n.bidder),r=e.actualBidRequests.get(n.bidder);return{adUnitCode:e.adUnit.code,ortb2:t?.ortb2,ortb2Imp:r?.ortb2Imp,bidder:n.bidder,config:n.config}}));i.length>0&&(n.paapi=i)}}}}),df=l.$W.getConfig,lf=d.RW.SRC;let ff,pf=0;const gf={bidders:Object.freeze([]),syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{},ortbNative:{eventtrackers:[{event:1,methods:[1,2]}]},maxTimeout:1500,filterBidderlessCalls:!1};function vf(e,n,t,r,i){if(ff.length===pf)return;pf++;let a={};const s=df("userSync.filterSettings");if(s){const{all:n,iframe:t,image:r}=(0,o.deepClone)(s),i=t||n,u=r||n;i&&(a=Object.assign({iframe:i},a),a.iframe.bidders=e),u&&(a=Object.assign({image:u},a),a.image.bidders=e)}const u={uuid:(0,o.generateUUID)(),bidders:e,account:i.accountId,filterSettings:a};let c=i.userSyncLimit;(0,o.isNumber)(c)&&c>0&&(u.limit=c),n&&(u.gdpr=n.gdprApplies?1:0,!1!==n.gdprApplies&&(u.gdpr_consent=n.consentString)),t&&(u.us_privacy=t),r&&(u.gpp_sid=r.applicableSections.join(),u.gpp=r.gppString),"boolean"==typeof i.coopSync&&(u.coopSync=i.coopSync);const d=JSON.stringify(u);Cn(hf(i.syncEndpoint,n),n=>{try{mf((n=JSON.parse(n)).bidder_status.sort((n,t)=>e.indexOf(n.bidder)<e.indexOf(t.bidder)?-1:1),i)}catch(e){(0,o.logError)(e)}},d,{contentType:"text/plain",withCredentials:!0})}function mf(e,n){if(0===e.length)return;const t=e.shift();t.no_cookie?function(e,n,t,r,i){i.syncUrlModifier&&"function"==typeof i.syncUrlModifier[t]&&(n=i.syncUrlModifier[t](e,n,t)),function(e,n,t,r,i){n?"image"===e||"redirect"===e?((0,o.logMessage)(`Invoking image pixel user sync for bidder: "${t}"`),(0,o.triggerPixel)(n,r,i)):"iframe"===e?((0,o.logMessage)(`Invoking iframe user sync for bidder: "${t}"`),(0,o.insertUserSyncIframe)(n,r,i)):((0,o.logError)(`User sync type "${e}" not supported for bidder: "${t}"`),r()):((0,o.logError)(`No sync url for bidder "${t}": ${n}`),r())}(e,n,t,r,i.syncTimeout)}(t.usersync.type,t.usersync.url,t.bidder,mf.bind(null,e,n),n):mf(e,n)}function hf(e,n){const t=Dl(n),r=t?e.p1Consent:e.noP1Consent;return r||(0,o.logWarn)("Missing matching consent URL when gdpr="+t),r}function bf(e){let n,t,r;return Array.isArray(e)&&e.length>0&&(n=e[0].gdprConsent,t=e[0].uspConsent,r=e[0].gppConsent),{gdprConsent:n,uspConsent:t,gppConsent:r}}l.$W.setDefaults({s2sConfig:gf}),df("s2sConfig",({s2sConfig:e})=>{var n;(n=function(e){if(!e)return;e=Array.isArray(e)?e:[e];const n=new Set;return e.filter(e=>{var t;if(t=e,["endpoint","syncEndpoint"].forEach(e=>{if((0,o.isStr)(t[e])){let n=t[e];t[e]={p1Consent:n,noP1Consent:n}}!(0,o.isPlainObject)(t[e])||t[e].p1Consent&&t[e].noP1Consent||["p1Consent","noP1Consent"].forEach(n=>{t[e][n]||(0,o.logWarn)(`s2sConfig.${e}.${n} not defined.  PBS request will be skipped in some P1 scenarios.`)})}),function(e){if(e.defaultVendor){let n=e.defaultVendor,t=Object.keys(e);if(!Xl[n])return(0,o.logError)("Incorrect or unavailable prebid server default vendor option: "+n),!1;Object.keys(Xl[n]).forEach(r=>{gf[r]!==e[r]&&t.includes(r)||(e[r]=Xl[n][r])})}else null==e.adapter&&(e.adapter="prebidServer");return!0}(e)&&function(e){for(const n of["accountId","endpoint"])if(null==e[n])return(0,o.logError)(n+" missing in server to server config"),!1;return!0}(e)&&e.enabled)return Array.isArray(e.bidders)&&(e.bidders=e.bidders.filter(e=>!n.has(e)&&(n.add(e),!0))),!0;(0,o.logWarn)("prebidServer: s2s config is disabled",e)})}(n=e)).length&&(ff=n)});const yf=Ce("async",function(e,n,t,{onResponse:r,onError:i,onBid:a,onFledge:s}){let{gdprConsent:u}=bf(n);const c=(0,o.deepClone)(e.ad_units),f=c.map(e=>e.bids.map(e=>e.bidder).filter(o.uniques)).reduce(o.flatten,[]).filter(o.uniques),p=e.metrics.measureTime("buildRequests",()=>function(e,n,t,r){const i=(0,o.timestamp)(),a=new Set,s=[],u=Ht(e.s2sConfig),c=(()=>{const e=kt(u),n={};return t=>null==t?e:(n.hasOwnProperty(t)||(n[t]=kt(ir(we,t))),n[t])})();(t=t.map(e=>c().bidRequest(e))).forEach(r=>{const i=new Map;r.mediaTypes.banner&&(r.mediaTypes.banner.sizes=r.mediaTypes.banner.sizes.filter(e=>e[0]>10&&e[1]>10)),"https://pbsgo.services.sparteo.io/openrtb2/auction"===e?.s2sConfig?.endpoint?.p1Consent&&delete r?.ortb2Imp?.metric,t.bids=r.bids.map(e=>c(e.bidder).bidRequest(e)),r.bids.forEach(e=>{null!=e.mediaTypes&&(0,o.logWarn)(`Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ${r.code}, bidder: ${e.bidder}`),i.set(e.bidder,(0,o.getBidRequest)(e.bid_id,n))});let u=(0,o.getUniqueIdentifierStr)();for(;a.has(u);)u=(0,o.getUniqueIdentifierStr)();a.add(u),s.push({...r,adUnitCode:r.code,pbsData:{impId:u,actualBidRequests:i,adUnit:r}})});const d={...Object.fromEntries(Object.entries(n[0]).filter(([e])=>!sf.has(e))),paapi:{enabled:n.some(e=>e.paapi?.enabled)}};return cf.toORTB({bidderRequest:d,bidRequests:s,context:{currency:l.$W.getConfig("currency.adServerCurrency")||"USD",ttl:e.s2sConfig.defaultTtl||60,requestTimestamp:i,s2sBidRequest:{...e,ortb2Fragments:af(e.ortb2Fragments,r)},requestedBidders:r,actualBidderRequests:n,nativeRequest:e.s2sConfig.ortbNative,getRedactor:c,transmitTids:Je(ue,u)}})}(e,n,c,f)),g={endpointUrl:hf(e.s2sConfig.endpoint,u),requestJson:p&&JSON.stringify(p),customHeaders:e?.s2sConfig?.customHeaders??{}};if(ee(d.qY.BEFORE_PBS_HTTP,g),(0,o.logInfo)("BidRequest: "+g),p&&g.requestJson&&g.endpointUrl){const n=(n,u)=>{const l=e.metrics.startTiming("net");t(u,{success:function(n){let t;l();try{t=JSON.parse(n),ee(d.qY.AUCTION_END,{response:t,s2s:!0,adUnits:c});const{bids:r,paapi:i}=e.metrics.measureTime("interpretResponse",()=>function(e,n){return cf.fromORTB({response:e,request:n})}(t,p));r.forEach(a),i&&i.forEach(s)}catch(e){(0,o.logError)(e)}!t||t.status&&t.status.includes("Error")?((0,o.logError)("error parsing response: ",t?t.status:"not valid JSON"),r(!1,f)):r(!0,f,t)},error:function(){l(),i.apply(this,arguments)}},n,{contentType:"text/plain",withCredentials:!0,browsingTopics:Je(ae,Ht(e.s2sConfig)),customHeaders:g.customHeaders})},u=e.s2sConfig.endpointCompression&&!g.customHeaders["Content-Encoding"],l="TRUE"===(0,o.getParameterByName)(d.M).toUpperCase()||(0,o.debugTurnedOn)();u&&l&&(0,o.logWarn)("Skipping GZIP compression for PBS as debug mode is enabled"),u&&!l&&(0,o.isGzipCompressionSupported)()?(0,o.compressDataWithGZip)(g.requestJson).then(e=>{const t=new URL(g.endpointUrl);t.searchParams.set("gzip","1"),n(e,t.href)}):n(g.requestJson,g.endpointUrl)}else(0,o.logError)("PBS request not made.  Check endpoints.")},"processPBSRequest");function wf(e,n){return e?.extPrebid?.returnallbidstatus?n?.ext?.seatnonbid:void 0}function Af(e){return e?.ext?.prebid?.analytics?.tags}rr.registerBidAdapter(new function(){const e=new de("prebidServer");return e.callBids=function(e,n,t,r,i){const a=e.metrics=I(n?.[0]?.metrics).newMetrics().renameWith(n=>[`adapter.s2s.${n}`,`adapters.s2s.${e.s2sConfig.defaultVendor}.${n}`]);r=a.startTiming("total").stopBefore(r),n.forEach(e=>I(e.metrics).join(a,{continuePropagation:!1}));let{gdprConsent:s,uspConsent:u,gppConsent:c}=bf(n);if(Array.isArray(ff)){if(e.s2sConfig&&e.s2sConfig.syncEndpoint&&hf(e.s2sConfig.syncEndpoint,s)){const n=(e.s2sConfig.extPrebid&&e.s2sConfig.extPrebid.aliases)??{};vf(e.s2sConfig.bidders.map(e=>rr.aliasRegistry[e]||n[e]||e).filter((e,n,t)=>t.indexOf(e)===n),s,u,c,e.s2sConfig)}yf(e,n,i,{onResponse:function(t,i,o){t&&n.forEach(e=>ee(d.qY.BIDDER_DONE,e));const{seatNonBidData:f,atagData:p}=function(e,n){return{atagData:Af(n),seatNonBidData:wf(e,n)}}(e.s2sConfig,o);if(f&&ee(d.qY.SEAT_NON_BID,{seatnonbid:o.ext.seatnonbid,auctionId:n[0].auctionId,requestedBidders:i,response:o,adapterMetrics:a}),f||p){const e={seatnonbid:f,atag:p,auctionId:n[0].auctionId,requestedBidders:i,response:o,adapterMetrics:a};ee(d.qY.PBS_ANALYTICS,e)}r(!1),function(e,n,t,r){e.forEach(e=>{let i=rr.getBidAdapter(e);i&&i.registerSyncs&&l.$W.runWithBidder(e,i.registerSyncs.bind(i,[],n,t,r))})}(i,s,u,c)},onError(t,i){const{p1Consent:a="",noP1Consent:s=""}=e?.s2sConfig?.endpoint||{};a===s?(0,o.logError)(`Prebid server call failed: '${t}'. Endpoint: "${a}"}`,i):(0,o.logError)(`Prebid server call failed: '${t}'. Endpoints: p1Consent "${a}", noP1Consent "${s}"}`,i),n.forEach(e=>ee(d.qY.BIDDER_ERROR,{error:i,bidderRequest:e})),r(i.timedOut)},onBid:function({adUnit:n,bid:r}){const i=r.metrics=e.metrics.fork().renameWith();i.checkpoint("addBidResponse"),null!=r.requestId&&null!=r.requestBidder||e.s2sConfig.allowUnknownBidderCodes?i.measureTime("addBidResponse.validate",()=>hn(n,r))?t(n,r):t.reject(n,r,d.Tf.INVALID):((0,o.logWarn)(`PBS adapter received bid from unknown bidder (${r.bidder}), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid.`),t.reject(n,r,d.Tf.BIDDER_DISALLOWED))},onFledge:e=>{l.$W.runWithBidder(e.bidder,()=>{mn({auctionId:n[0].auctionId,...e},{config:e.config})})}})}},Object.assign(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:lf})},"prebidServer");var If=new Map;la.before(function(e,n){If.clear(),e(n)});var Ef=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.w,r=n.h,i=function(e){var n;return If.has(e)?n=If.get(e):(n=e.getBoundingClientRect(),If.set(e,n)),n}(e),o=i.width,a=i.height,s=i.left,u=i.top,c=i.right,d=i.bottom;return(0===o||0===a)&&t&&r&&(o=t,a=r,c=s+t,d=u+r),{width:o,height:a,left:s,top:u,right:c,bottom:d,x:i.x,y:i.y}}(e,{w:n.w,h:n.h}),r=(0,o.getWinDimensions)(),i=r.innerHeight,a=function(e){for(var n={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},t=1;t<e.length;++t){if(n.left=Math.max(n.left,e[t].left),n.right=Math.min(n.right,e[t].right),n.left>=n.right)return null;if(n.top=Math.max(n.top,e[t].top),n.bottom=Math.min(n.bottom,e[t].bottom),n.top>=n.bottom)return null}return n.width=n.right-n.left,n.height=n.bottom-n.top,n}([{left:0,top:0,right:r.innerWidth,bottom:i},t]);return null!==a?a.width*a.height/(t.width*t.height)*100:0};function Sf(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Cf(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sf(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Sf(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}var Tf=/^[a-zA-Z0-9_-]{22}$/,Of="instream",kf=["mimes","minduration","maxduration","placement","plcmt","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],xf={uniqueSiteIds:[]};function Df(e){return"".concat(e.params.siteId,":").concat(e.params.productId)}function Rf(e){return"".concat(e.bidId)}function jf(e){var n,t=e.bidRequests,r=e.gdprConsent,i=void 0===r?{}:r,s=e.uspConsent,u=e.gppConsent,c=void 0===u?{}:u,d=e.pageUrl,f=e.referer,p=e.ttxSettings,g=e.bidderRequest,v={},m=t[0],h=m.params,b=h.siteId,y=h.test,w=l.$W.getConfig("coppa");return v.imp=[],t.forEach(function(e){var n,t,r;v.imp.push((n=e,t=(0,a.A)(n,"ortb2Imp.ext.gpid"),r={id:n.bidId,ext:Cf({ttx:{prod:(0,a.A)(n,"params.productId")}},t?{gpid:t}:{})},(0,a.A)(n,"mediaTypes.banner")&&(r.banner=Cf({},function(e){var n,t,r=(0,a.A)(e,"mediaTypes.banner",{}),i=(t=e.adUnitCode,document.getElementById(t)||document.getElementById(function(e){if((0,o.isGptPubadsDefined)())for(var n=googletag.pubads().getSlots(),t=Ld(e),r=0;r<n.length;r++)if(t(n[r])){var i=n[r].getSlotElementId();return(0,o.logInfo)("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(i)),i}return(0,o.logWarn)("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(t))),s=function(e){return(0,o.isArray)(e)&&2===e.length&&!(0,o.isArray)(e[0])?[Pf(e)]:e.map(Pf)}(r.sizes);n="function"==typeof e.getFloor?s.map(function(n){var t,r=qf(e,n,gr);return r&&(t={ext:{ttx:{bidfloors:[r]}}}),Object.assign({},n,t)}):s;var u,c=function(e){return e.reduce(function(e,n){return n.h*n.w<e.h*e.w?n:e})}(s),d=(u=function(e){return!function(){try{return(0,o.getWindowSelf)()!==(0,o.getWindowTop)()}catch(e){return!0}}()&&null!==e}(i)?function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.w,i=t.h;return"visible"===n.document.visibilityState?Ef(e,{w:r,h:i}):0}(i,(0,o.getWindowTop)(),c):"nm",{ttx:{viewability:{amount:isNaN(u)?u:Math.round(u)}}});return{format:n,ext:d}}(n))),(0,a.A)(n,"mediaTypes.video")&&(r.video=function(e){var n,t=(0,a.A)(e,"mediaTypes.video",{}),r=(0,a.A)(e,"params.video",{}),i=Cf(Cf({},t),r),s={},u=Pf(i.playerSize[0]),c=u.w,d=u.h;s.w=c,s.h=d,kf.forEach(function(e){i.hasOwnProperty(e)&&(s[e]=i[e])});var l=Bf(e);if(null!==(n=s.plcmt)&&void 0!==n||(s.plcmt=s.placement?((0,o.logWarn)("[33Across Adapter] The ORTB field `placement` is deprecated, please use `plcmt` instead"),s.placement):2),l===Of&&(s.startdelay=s.startdelay||0),"function"==typeof e.getFloor){var f=qf(e,{w:s.w,h:s.h},pr);f&&Object.assign(s,{ext:{ttx:{bidfloors:[f]}}})}return s}(n)),r))}),v.site={id:b},v.device=function(){var e,n,t,r,i,a,s,u,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=(0,o.getWindowSelf)(),l={ext:{ttx:Cf(Cf({},(n=(0,o.getWinDimensions)(),t=n.innerWidth,r=n.innerHeight,i=n.screen,a=[Math.max(i.width,i.height),Math.min(i.width,i.height)],s=a[0],u=a[1],r>t?{w:u,h:s}:{w:s,h:u})),{},{pxr:d.devicePixelRatio,vp:(e=function(){var e=(0,o.getWindowSelf)();try{for(;e.parent!==e&&e.parent.document;)e=e.parent}catch(e){}return e}().document.documentElement,{w:e.clientWidth,h:e.clientHeight}),ah:d.screen.availHeight,mtp:d.navigator.maxTouchPoints})}};return c.sua&&(l.sua=(0,o.pick)(c.sua,["browsers","platform","model","mobile"])),l}(null===(n=m.ortb2)||void 0===n?void 0:n.device),d&&(v.site.page=d),f&&(v.site.ref=f),v.id=null==g?void 0:g.bidderRequestId,i.consentString&&(v.user=_f(v.user,{consent:i.consentString})),Array.isArray(m.userIdAsEids)&&m.userIdAsEids.length>0&&(v.user=_f(v.user,{eids:m.userIdAsEids})),v.regs=_f(v.regs,{gdpr:Number(i.gdprApplies)}),s&&(v.regs=_f(v.regs,{us_privacy:s})),c.gppString&&Object.assign(v.regs,{gpp:c.gppString,gpp_sid:c.applicableSections}),void 0!==w&&(v.regs.coppa=Number(!!w)),v.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"9.53.4"}]}},m.schain&&(v.source=_f(v.source,{schain:m.schain})),1===y&&(v.test=1),{method:"POST",url:p&&p.url||"".concat("https://ssc.33across.com/api/v1/hb","?guid=").concat(b),data:JSON.stringify(v),options:{contentType:"text/plain",withCredentials:!0}}}function _f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return(0,o.mergeDeep)({},e,{ext:n})}function Pf(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function Uf(e){return(0,o.mergeDeep)({},e,{params:{productId:Bf(e)}})}function Bf(e){var n=e.params,t=e.mediaTypes,r=t.banner,i=t.video;return i&&!r&&"instream"===i.context?Of:"inview"===n.productId?n.productId:"siab"}function qf(e,n,t){var r=e.getFloor({currency:"USD",mediaType:t,size:[n.w,n.h]});if(!isNaN(null==r?void 0:r.floor)&&"USD"===(null==r?void 0:r.currency))return r.floor}function Nf(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}dn({NON_MEASURABLE:"nm",code:"33across",aliases:["33across_mgni"],supportedMediaTypes:[gr,pr],gvlid:58,isBidRequestValid:function(e){return function(e){return!!e.params&&!!function(e){return null!==((0,a.A)(e,"params.siteId","")||"").trim().match(Tf)}(e)}(e)&&function(e){var n=(0,a.A)(e,"mediaTypes.banner");return void 0===n||!!Array.isArray(n.sizes)}(e)&&function(e){var n=(0,a.A)(e,"mediaTypes.video"),t=(0,a.A)(e,"params.video",{});if(void 0===n)return!0;if(!Array.isArray(n.playerSize))return!1;if(!n.context)return!1;var r=Cf(Cf({},n),t);return!(!Array.isArray(r.mimes)||0===r.mimes.length)&&(!(!Array.isArray(r.protocols)||0===r.protocols.length)&&(![r.placement,r.plcmt].some(function(e){return void 0!==e&&"number"!=typeof e})&&("instream"!==n.context||void 0===r.startdelay||"number"==typeof r.startdelay)))}(e)},buildRequests:function(e,n){var t=function(e,n){var t,r,i=Object.assign({},l.$W.getConfig("ttxSettings")),a=Object.assign({consentString:void 0,gdprApplies:!1},n&&n.gdprConsent);return xf.uniqueSiteIds=e.map(function(e){return e.params.siteId}).filter(o.uniques),{ttxSettings:i,gdprConsent:a,uspConsent:null==n?void 0:n.uspConsent,gppConsent:null==n?void 0:n.gppConsent,pageUrl:null==n||null===(t=n.refererInfo)||void 0===t?void 0:t.page,referer:null==n||null===(r=n.refererInfo)||void 0===r?void 0:r.ref}}(e,n),r=t.ttxSettings,i=t.gdprConsent,a=t.uspConsent,s=t.gppConsent,u=t.pageUrl,c=t.referer,d=function(e,n){return function(e,n){var t={};return e.forEach(function(e){var r=n(e);t[r]=t[r]||[],t[r].push(e)}),t}(n.map(Uf),!0===(e&&e.enableSRAMode)?Df:Rf)}(r,e),f=[];for(var p in d)f.push(jf({bidRequests:d[p],gdprConsent:i,uspConsent:a,gppConsent:s,pageUrl:u,referer:c,ttxSettings:r,bidderRequest:n}));return f},interpretResponse:function(e,n){var t=e.body,r=t.seatbid,i=t.cur,s=void 0===i?"USD":i;return(0,o.isArray)(r)?r.filter(function(e){return(0,o.isArray)(e.bid)&&e.bid.length>0}).reduce(function(e,n){return e.concat(n.bid.map(function(e){return function(e,n){var t=e.adomain&&e.adomain.length,r={requestId:e.impid,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:(0,a.A)(e,"ext.ttx.mediaType",gr),currency:n,netRevenue:!0};return t&&(r.meta={advertiserDomains:e.adomain}),r.mediaType===pr&&("xml"===(0,a.A)(e,"ext.ttx.vastType","xml")?r.vastXml=r.ad:r.vastUrl=r.ad),r}(e,s)}))},[]):[]},getUserSyncs:function(e,n,t,r,i){var o=e.iframeEnabled?xf.uniqueSiteIds.map(function(e){return function(e){var n=e.siteId,t=void 0===n?"zzz000000000003zzz":n,r=e.gdprConsent,i=void 0===r?{}:r,o=e.uspConsent,a=e.gppConsent,s=void 0===a?{}:a,u=l.$W.getConfig("ttxSettings"),c=u&&u.syncUrl||"https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",d=i.consentString,f=i.gdprApplies,p=s.gppString,g=void 0===p?"":p,v=s.applicableSections,m=void 0===v?[]:v,h={type:"iframe",url:"".concat(c,"&id=").concat(t,"&gdpr_consent=").concat(encodeURIComponent(d),"&us_privacy=").concat(encodeURIComponent(o),"&gpp=").concat(encodeURIComponent(g),"&gpp_sid=").concat(encodeURIComponent(m.join(",")))};return"boolean"==typeof f&&(h.url+="&gdpr=".concat(Number(f))),h}({gdprConsent:t,uspConsent:r,gppConsent:i,siteId:e})}):[];return xf.uniqueSiteIds=[],o}}),(0,i.E)("33acrossBidAdapter");var Mf={};function Wf(e){var n="7.11.0";try{var t=function(e){return e.params.sdkVersion&&e.params.sdkVersion.startsWith("v")?e.params.sdkVersion.substring(1):e.params.sdkVersion}(e);return t&&function(e,n){if(!e)return 0;for(var t=function(e){return e.split(".").map(Number)},r=t(e),i=t(n),o=Math.max(r.length,i.length),a=0;a<o;a++){var s=r[a]||0,u=i[a]||0;if(s>u)return 1;if(s<u)return-1}return 0}(t,n)>0?t:n}catch(e){return(0,o.logError)("Version parsing failed, using default version:",e),n}}function Ff(e){for(var n=[0,0],t=0;t<e.length;t++)e[t][0]*e[t][1]>n[0]*n[1]&&(n=e[t]);return n}function Lf(e,n,t){for(var r=n||[0,0],i=t||[Number.MAX_VALUE,Number.MAX_VALUE],o=[],a=0;a<e.length;a++)e[a][0]*e[a][1]>=r[0]*r[1]&&e[a][0]*e[a][1]<=i[0]*i[1]&&o.push(e[a]);return Ff(o)}function zf(e){var n,t=[];if(e.querySelectorAll("Extension").forEach(function(e){"StickyBrand"===e.getAttribute("type")&&(n=e)}),n){var r=n.querySelector("Domain");t.push(r.textContent)}else(0,o.logWarn)("PREBID - fwssp: No bid received or missing StickyBrand extension.");return t}function Gf(e){var n="";return e.querySelectorAll("Creative").forEach(function(e){n+="["+e.getAttribute("id")+"]"}),n}function $f(e,n){var t="",r=e.querySelectorAll("Impression"),i=!1,o=!1;return r.forEach(function(e){if(i&&o)return t;i=!1,o=!1;var r=e.textContent.substring(e.textContent.indexOf("?")+1).split("&"),a="";r.forEach(function(e){var t=e.split("=");t[0]===n&&(a=t[1]),"reqType"===t[0]&&"AdsDisplayStarted"===t[1]&&(o=!0),"rootViewKey"===t[0]&&(i=!0)}),o&&(t=a)}),t}function Jf(e){return $f(e,"adId")}function Hf(e){return $f(e,"campaignId")}function Vf(e){var n=Object.keys(e);return n.map(function(t,r){var i=encodeURIComponent(t),o=encodeURIComponent(e[t]);return"".concat(i,"=").concat(o).concat(r<n.length-1?"&":"")}).join("")}dn({code:"fwssp",gvlid:285,supportedMediaTypes:[gr,pr],aliases:["freewheel-mrm"],isBidRequestValid:function(e){return!!(e.params.serverUrl&&e.params.networkId&&e.params.profile&&e.params.siteSectionId)},buildRequests:function(e,n){var t=this,r=function(){return((new Date).getTime()*Math.random()).toFixed(0)},u=function(e){(0,o.logInfo)("setFlagParameter, optionalFlags: ",e);var n="+fwssp+emcr+nucr+aeti+rema+exvt+fwpbjs";return e?e+n:n};return e.map(function(e){return function(e,n){var c=function(e){var n=Wf(e),t=(0,i.m)().version;return{nw:e.params.networkId,resp:"vast4",prof:e.params.profile,csid:e.params.siteSectionId,caid:e.params.videoAssetId?e.params.videoAssetId:0,pvrn:r(),vprn:r(),flag:u(e.params.flags),mode:e.params.mode?e.params.mode:"on-demand",vclr:"js-".concat(n,"-prebid-").concat(t)}}(e),d=function(e,n){var t,r=e.params.adRequestKeyValues||{},i=function(e,n){(0,o.logInfo)("PREBID -: getBidFloor called with:",e);var t=(0,a.A)(e,"params.bidfloor",0),r=(0,a.A)(e,"params.bidfloorcur","USD");if((0,o.isFn)(e.getFloor)){(0,o.logInfo)("PREBID - : getFloor() present and use it to retrieve floor and currency.");try{var i=e.getFloor({currency:n.getConfig("floors.data.currency")||"USD",mediaType:e.mediaTypes.banner?"banner":"video",size:"*"})||{};"number"==typeof i.floor&&(t=i.floor),i.currency&&(r=i.currency),(0,o.logInfo)("PREBID - : getFloor() returned floor:",t,"currency:",r)}catch(n){t=(0,a.A)(e,"params.bidfloor",0),r=(0,a.A)(e,"params.bidfloorcur","USD"),(0,o.logInfo)("PREBID - : getFloor() exception, fallback to static bid.params.bidfloor:",t,"currency:",r)}}return{floor:t,currency:r}}(e,l.$W),u=i.floor,c=i.currency;if(r._fw_bidfloor=u,r._fw_bidfloorcur=c,n&&n.gdprConsent&&(r._fw_gdpr_consent=n.gdprConsent.consentString,"boolean"==typeof n.gdprConsent.gdprApplies&&(r._fw_gdpr=n.gdprConsent.gdprApplies)),e.params.gdpr_consented_providers&&(r._fw_gdpr_consented_providers=e.params.gdpr_consented_providers),n&&n.uspConsent&&(r._fw_us_privacy=n.uspConsent),n&&n.gppConsent?(r.gpp=n.gppConsent.gppString,r.gpp_sid=n.gppConsent.applicableSections):n&&n.ortb2&&n.ortb2.regs&&n.ortb2.regs.gpp&&(r.gpp=n.ortb2.regs.gpp,r.gpp_sid=n.ortb2.regs.gpp_sid),n&&n.ortb2&&n.ortb2.site&&n.ortb2.site.content&&"object"===(0,s.A)(n.ortb2.site.content))try{r._fw_prebid_content=JSON.stringify(n.ortb2.site.content)}catch(e){(0,o.logWarn)("PREBID - fwssp: Unable to stringify the content object: "+e)}if(e.userIdAsEids&&e.userIdAsEids.length>0)try{r._fw_prebid_3p_UID=JSON.stringify(e.userIdAsEids)}catch(e){(0,o.logWarn)("PREBID - fwssp: Unable to stringify the userIdAsEids: "+e)}var d,f=null==n||null===(t=n.refererInfo)||void 0===t?void 0:t.page;if(function(e){var n=null;try{n=new URL(e)}catch(e){}return null!=n}(f)&&(r.loc=f),((d=e.mediaTypes.video&&e.mediaTypes.video.playerSize?(0,o.isArray)(e.mediaTypes.video.playerSize[0])?e.mediaTypes.video.playerSize[0]:e.mediaTypes.video.playerSize:e.mediaTypes.banner.sizes?Lf(e.mediaTypes.banner.sizes,e.mediaTypes.banner.minSizeLimit,e.mediaTypes.banner.maxSizeLimit):Ff(e.sizes))[0]>0||d[1]>0)&&(r._fw_player_width=r._fw_player_width?r._fw_player_width:d[0],r._fw_player_height=r._fw_player_height?r._fw_player_height:d[1]),e.mediaTypes.video){var p=e.mediaTypes.video.context?e.mediaTypes.video.context:"",g=e.mediaTypes.video.placement?e.mediaTypes.video.placement:null,v=e.mediaTypes.video.plcmt?e.mediaTypes.video.plcmt:null;"inbanner"===e.params.format&&(p="In-Banner",g=2),r._fw_video_context=p,r._fw_placement_type=g,r._fw_plcmt_type=v}var m=(0,a.A)(n,"ortb2.regs.coppa");"number"==typeof m&&(r._fw_coppa=m);var h=(0,a.A)(n,"ortb2.device.ext.atts");"number"==typeof h&&(r._fw_atts=h);var b=(0,a.A)(n,"ortb2.device.lmt");return"number"==typeof b&&(r._fw_is_lat=b),Mf={},null!=r._fw_coppa&&(Mf._fw_coppa=r._fw_coppa),null!=r._fw_atts&&(Mf._fw_atts=r._fw_atts),null!=r._fw_is_lat&&(Mf._fw_is_lat=r._fw_is_lat),r}(e,n),f=function(e){var n={tpos:e.params.tpos?e.params.tpos:0,ptgt:"a",slid:e.params.slid?e.params.slid:"Preroll_1",slau:e.params.slau?e.params.slau:"preroll"},t=(0,a.A)(e,"mediaTypes.video")||{},r=t.minduration||e.params.minD,i=t.maxduration||e.params.maxD;return r&&(n.mind=r),i&&(n.maxd=i),n}(e),p=function(e,n){var r=(0,a.A)(n,"ortb2.source.schain");return r||(r=(0,a.A)(n,"ortb2.source.ext.schain")),r||(r=e.schain),t.serializeSupplyChain(r)}(e,n),g=function(e,n,t,r){return Vf(e)+";"+(Vf(n)+t)+";"+Vf(r)+";"}(c,d,p,f);return{method:"GET",url:e.params.serverUrl,data:g,bidRequest:e}}(e,n)})},serializeSupplyChain:function(e){if(!e||!e.nodes)return"";var n=["asi","sid","hp","rid","name","domain"];return"&schain=".concat(e.ver,",").concat(e.complete,"!")+e.nodes.map(function(e){return n.map(function(n){return e[n]?encodeURIComponent(e[n]):""}).join(",")}).join("!")},interpretResponse:function(e,n){var t,r,i=n.bidRequest;r=i.mediaTypes.video&&i.mediaTypes.video.playerSize?(0,o.isArray)(i.mediaTypes.video.playerSize[0])?i.mediaTypes.video.playerSize[0]:i.mediaTypes.video.playerSize:i.mediaTypes.banner.sizes?Lf(i.mediaTypes.banner.sizes,i.mediaTypes.banner.minSizeLimit,i.mediaTypes.banner.maxSizeLimit):Ff(i.sizes),"object"===(0,s.A)(e)&&"string"==typeof e.body&&(e=e.body);try{t=(new DOMParser).parseFromString(e,"application/xml")}catch(e){return void(0,o.logWarn)("Prebid.js - fwssp : "+e)}var a,u=[],c=function(e){var n,t={};if(e.querySelectorAll("Extension").forEach(function(e){"StickyPricing"===e.getAttribute("type")&&(n=e)}),n){var r=n.querySelector("Price");t={currency:r.getAttribute("currency"),price:r.textContent}}else(0,o.logWarn)("PREBID - fwssp: No bid received or missing pricing extension.");return t}(t);if(c.price){var d={requestId:i.bidId,cpm:c.price,width:r[0],height:r[1],creativeId:Gf(t),currency:c.currency,netRevenue:!0,ttl:360,meta:{advertiserDomains:zf(t)},dealId:(a=t,$f(a,"dealId")),campaignId:Hf(t),bannerId:Jf(t)};i.mediaTypes.video&&(d.mediaType="video");var l=function(){var e=window;try{for(;top!==e;)e.parent.location.href.length&&(e=e.parent)}catch(e){}return e}();l.fwssp_cache||(l.fwssp_cache={}),l.fwssp_cache[i.adUnitCode]={response:e,listeners:i.params.listeners},d.vastXml=e,d.ad=function(e,n){var t=function(e){var n=e.params.env&&"stg"===e.params.env.toLowerCase()?"adm.stg.fwmrm.net":"mssl.fwmrm.net",t=Wf(e);return"https://".concat(n,"/libs/adm/").concat(t,"/AdManager-prebid.js")}(e),r="fwssp_display_base",i="boolean"!=typeof e.params.isMuted||e.params.isMuted,a="boolean"==typeof e.params.showMuteButton&&e.params.showMuteButton,s=null;try{s=JSON.stringify(e.params.playerParams)}catch(e){(0,o.logWarn)("Error parsing playerParams:",e)}return"<div id='".concat(r,"' class='ad-container' style='width:").concat(n[0],"px;height:").concat(n[1],"px;'>\n  <script type='text/javascript'>\n    const script = document.createElement('script');\n    script.src = '").concat(t,"';\n    script.async = true;\n\n    const topWindow = function() {\n      let res = window;\n      try {\n        while (top !== res) {\n          if (res.parent.location.href.length) {\n            res = res.parent;\n          }\n        }\n      } catch (e) {}\n      return res;\n    }();\n    const cache = topWindow.fwssp_cache ? topWindow.fwssp_cache['").concat(e.adUnitCode,"'] : null;\n    const vastResponse = cache ? cache.response : null;\n    const listeners = cache ? cache.listeners : null;\n\n    const config = {\n      displayBaseId: '").concat(r,"',\n      vastResponse: vastResponse,\n      showMuteButton: ").concat(a,",\n      startMuted: ").concat(i,",\n      playerParams: ").concat(s,",\n      format: 'outstream',\n      listeners: listeners\n    };\n\n    const timeoutId = setTimeout(() => {\n      console.warn('MRM AdManager load timeout: 5000 ms');\n      cleanup();\n    }, 5000);\n\n    script.onload = () => {\n      clearTimeout(timeoutId);\n      this.prebidPlayer = window.tv.freewheel.SDK.newPrebidPlayer(config);\n    };\n\n    script.onerror = (err) => {\n      cleanup();\n      console.warn('MRM AdManager load failed:', err.message);\n    };\n\n    const cleanup = () => {\n      clearTimeout(timeoutId);\n      script.remove();\n      var displayBase = document.getElementById('").concat(r,"');\n      if (displayBase) {\n        displayBase.remove();\n      }\n    };\n\n    document.head.appendChild(script);\n  <\/script>\n</div>")}(i,r),u.push(d)}return u},getUserSyncs:function(n,t,r,i,o){var a=function(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nf(Object(r),!0).forEach(function(t){(0,e.A)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Nf(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}({mode:"auto-user-sync"},Mf);r&&("boolean"==typeof r.gdprApplies?(a.gdpr=Number(r.gdprApplies),a.gdpr_consent=r.consentString):a.gdpr_consent=r.consentString),i&&(a.us_privacy=i),o&&("string"==typeof o.gppString&&(a.gpp=o.gppString),o.applicableSections&&(a.gpp_sid=o.applicableSections));var s="https://user-sync.fwmrm.net/ad/u?"+Vf(a),u=[];return n&&n.pixelEnabled&&u.push({type:"image",url:s}),n&&n.iframeEnabled&&u.push({type:"iframe",url:s}),u}}),(0,i.E)("fwsspBidAdapter"),t(969);var Kf=(0,i.m)();"undefined"!=typeof vslypbjs&&(vslypbjs=Kf)})()})();
(()=>{var t,e=null;try{parent.test,e=parent}catch(t){e=window}"performance"in e==0&&(e.performance={}),"now"in e.performance==0&&(t=Date.now(),e.performance.timing&&e.performance.timing.navigationStart&&(t=e.performance.timing.navigationStart),e.performance.now=function(){return Date.now()-t}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var n=0;n<this.length;n++)t.call(e,this[n],n,this)})})(),((Ht,$t,t)=>{if(!window.vsly.initalised){var x={t:function(t){for(var e=t.toString(),n="",i=0;i<e.length;i+=2)n+=String.fromCharCode(parseInt(e.substr(i,2),16));return n},i:function(t){var e,n,i,o,s,a,r="",c=0;for(t=x.o(t);c<t.length;)i=(e=t.charCodeAt(c++))>>2,o=(3&e)<<4|(e=t.charCodeAt(c++))>>4,s=(15&e)<<2|(n=t.charCodeAt(c++))>>6,a=63&n,isNaN(e)?s=a=64:isNaN(n)&&(a=64),r=r+g.charAt(i)+g.charAt(o)+g.charAt(s)+g.charAt(a);return r},u:function(t){var e,n,i,o,s,a,r="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)i=g.indexOf(t.charAt(c++)),e=(15&(o=g.indexOf(t.charAt(c++))))<<4|(s=g.indexOf(t.charAt(c++)))>>2,n=(3&s)<<6|(a=g.indexOf(t.charAt(c++))),r+=String.fromCharCode(i<<2|o>>4),64!==s&&(r+=String.fromCharCode(e)),64!==a&&(r+=String.fromCharCode(n));return r=x.l(r)},o:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):e=127<i&&i<2048?(e+=String.fromCharCode(i>>6|192))+String.fromCharCode(63&i|128):(e=(e+=String.fromCharCode(i>>12|224))+String.fromCharCode(i>>6&63|128))+String.fromCharCode(63&i|128)}return e},l:function(t){for(var e="",n=0,i=0,o=0,s=0;n<t.length;)(i=t.charCodeAt(n))<128?(e+=String.fromCharCode(i),n++):191<i&&i<224?(s=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&s),n+=2):(s=t.charCodeAt(n+1),o=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o),n+=3);return e}},w=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(e[n]&&"object"==typeof e[n]&&!Array.isArray(e[n])?t[n]=w(t[n]||{},e[n]):t[n]=e[n]);return t},g=x.t("56494f55534c5941424344454647484a4b4d4e5051525457585a76696f75736c7961626364656667686a6b6d6e7071727477787a393837363534333231302b2f3d");if("[object String]"===Object.prototype.toString.call(Ht)){Ht=x.u(Ht);try{Ht=JSON.parse(Ht)}catch(t){Ht=JSON.parse(Ht.replaceAll("\0",""))}}var e={advertising:{aips:{v_mwtji8:.5,v_1krg074:.75,v_fp43k0:1,v_18jxvcw:1.25,v_x6eio0:1.5,v_1td3f28:1.75,v_3rlk3k:2,v_16m0pog:2.25,v_i70g00:2.5,v_1nec5c0:2.75,v_bo9zi8:3,v_1g6mpds:3.25,v_rrmfpc:3.5,v_1um1la8:3.75,v_6ehp8g:4,v_12l6lmo:4.25,v_ptpa0w:4.5,v_1ioj1ts:4.75,v_dm756o:5,v_1cia328:5.25,v_y2v75s:5.5,v_1qxoyyo:5.75,v_1c7400:6,v_146m9kw:6.25,v_m5cnpc:6.5,v_1ozrta8:6.75,v_9xuiv4:7,v_1eg78qo:7.25,v_td23nk:7.5,v_1ykdszk:7.75,v_7aydq8:8,v_105s5j4:8.25,v_neatxc:8.5,v_1jkzqbk:8.75,v_hkjcw0:9,v_1afd4ow:9.25,v_vzy8sg:9.5,v_1tukphc:9.75,v_2l5a80:10,v_1817mrk:10.25,v_jm7d34:10.5,v_1mgmio0:10.75,v_cehx4w:11,v_1f8x2ps:11.25,v_qtwt1c:11.5,v_1wq7hts:11.75,v_5gs2kg:12,v_13bej9c:12.25,v_ovzncw:12.5,v_1hqtf5s:12.75,v_f1e29s:13,v_1b82yo0:13.25,v_ygln28:13.5,v_1rbfev4:13.75,v_1zzls:14,v_15yaoe8:14.25,v_kv5jb4:14.5,v_1pdi96o:14.75,v_abkyrk:15,v_1d604cg:15.25,v_us90qo:15.5,v_1xmo6bk:15.75,v_816bcw:16,v_10w035s:16.25,v_mgl79c:16.5,v_1lp5mv4:16.75,v_gmtq80:17,v_19hni0w:17.25,v_wq66f4:17.5,v_1swv2tc:17.75,v_40c7b4:18,v_16urcw0:18.25,v_ifr37k:18.5,v_1my3t34:18.75,v_b81n9c:19,v_1h4cc1s:19.25,v_spc2dc:19.5,v_1vjr7y8:19.75,v_5y9czk:20,v_q8270g:20.5,v_e0k268:21,v_xfrmyo:21.5,v_231ips:22,v_li93i8:22.5,v_9aqyo0:23,v_texiww:23.5,v_6nutj4:24,v_o558n4:24.5,v_gxfsow:25,v_vcuolc:25.5,v_2zi77k:26,v_j2uneo:26.5,v_d936dc:27,v_roi29s:27.5,v_4xfcw0:28,v_p1lx4w:28.5,v_ei1clc:29,v_zb6wao:29.5,v_wl8u8:30,v_apxvr4:31,v_8s0q2o:32,v_fzq60w:33,v_3d8n40:34,v_byw1z4:35,v_6cm9z4:36,v_dkbpxc:37,v_1mt6gw:38,v_9jhlvk:39,v_7lkg74:40,v_hdcwe8:41,v_2dytq8:42,v_cnjsw0:43,v_50uyv4:44,v_fafy0w:45,v_b1vcw:46,v_a85csg:47,v_8a8740:48,v_g6wmio:49,v_49e328:50,o_lsv5z4:.1,o_1lbf6yo:.11,o_cx85q8:.12,o_1cfs6ps:.13,o_uoi680:.14,o_1u7277k:.15,o_69hwjk:.16,o_15s1xj4:.17,o_o0rx1c:.18,o_1njby0w:.19,o_f54wsg:.2,o_1enoxs0:.21,o_wwexa8:.22,o_1weyy9s:.23,o_1toef4:.24,o_11c8feo:.25,o_jkyeww:.26,o_1j3ifwg:.27,o_apbeo0:.28,o_1a7vfnk:.29,o_sglf5s:.3,o_1rz5g5c:.31,o_7dga2o:.32,o_16w0b28:.33,o_p4qakg:.34,o_1onabk0:.35,o_g93abk:.36,o_1frnbb4:.37,o_y0datc:.38,o_1xixbsw:.39,o_2xmry8:.4,o_12g6sxs:.41,o_kowsg0:.42,o_1k7gtfk:.43,o_bt9s74:.44,o_1bbtt6o:.45,o_tkjsow:.46,o_1t33tog:.47,o_55jj0g:.48,o_14o3k00:.49,o_mwtji8:.5,o_1mfdkhs:.51,o_e16j9c:.52,o_1djqk8w:.53,o_vsgjr4:.54,o_1vb0kqo:.55,o_pq0w0:.56,o_108a1vk:.57,o_ih01ds:.58,o_1hzk2dc:.59,o_9ld14w:.6,o_193x24g:.61,o_rcn1mo:.62,o_1qv72m8:.63,o_7xfgu8:.64,o_17fzhts:.65,o_pophc0:.66,o_1p79ibk:.67,o_gt2h34:.68,o_1gbmi2o:.69,o_ykchkw:.7,o_1y2wikg:.71,o_3hlyps:.72,o_1305zpc:.73,o_l8vz7k:.74,o_1krg074:.75,o_cd8yyo:.76,o_1bvszy8:.77,o_u4izgg:.78,o_1tn30g0:.79,o_5pips0:.8,o_1582qrk:.81,o_ngsq9s:.82,o_1mzcr9c:.83,o_el5q0w:.84,o_1e3pr0g:.85,o_wcfqio:.86,o_1vuzri8:.87,o_19p7nk:.88,o_10s98n4:.89,o_j0z85c:.9,o_1ijj94w:.91,o_a5c7wg:.92,o_19nw8w0:.93,o_rwm8e8:.94,o_1rf69ds:.95,o_6th3b4:.96,o_16c14ao:.97,o_okr3sw:.98,o_1o3b4sg:.99,o_fp43k0:1,o_1f7o4jk:1.01,o_xge41s:1.02,o_1wyy51c:1.03,o_2dnl6o:1.04,o_11w7m68:1.05,o_k4xlog:1.06,o_1jnhmo0:1.07,o_b9alfk:1.08,o_1arumf4:1.09,o_t0klxc:1.1,o_1sj4mww:1.11,o_4lkc8w:1.12,o_1444d8g:1.13,o_mcucqo:1.14,o_1lvedq8:1.15,o_dh7chs:1.16,o_1czrdhc:1.17,o_v8hczk:1.18,o_1ur1dz4:1.19,o_5qu4g:1.2,o_zoav40:1.21,o_hx0um8:1.22,o_1hfkvls:1.23,o_91dudc:1.24,o_18jxvcw:1.25,o_qsnuv4:1.26,o_1qb7vuo:1.27,o_8re8zk:1.28,o_189y9z4:1.29,o_qio9hc:1.3,o_1q18agw:1.31,o_hn198g:1.32,o_1h5la80:1.33,o_zeb9q8:1.34,o_1ywvaps:1.35,o_4bkqv4:1.36,o_13u4ruo:1.37,o_m2urcw:1.38,o_1llescg:1.39,o_d77r40:1.4,o_1cprs3k:1.41,o_uyhrls:1.42,o_1uh1slc:1.43,o_6jhhxc:1.44,o_1621iww:1.45,o_oarif4:1.46,o_1ntbjeo:1.47,o_ff4i68:1.48,o_1exoj5s:1.49,o_x6eio0:1.5,o_1woyjnk:1.51,o_23nzsw:1.52,o_11m80sg:1.53,o_juy0ao:1.54,o_1jdi1a8:1.55,o_azb01s:1.56,o_1ahv11c:1.57,o_sql0jk:1.58,o_1s951j4:1.59,o_7nfvgg:1.6,o_175zwg0:1.61,o_pepvy8:1.62,o_1ox9wxs:1.63,o_gj2vpc:1.64,o_1g1mwow:1.65,o_yacw74:1.66,o_1xswx6o:1.67,o_37mdc0:1.68,o_12q6ebk:1.69,o_kywdts:1.7,o_1khgetc:1.71,o_c39dkw:1.72,o_1bltekg:1.73,o_tuje2o:1.74,o_1td3f28:1.75,o_5fj4e8:1.76,o_14y35ds:1.77,o_n6t4w0:1.78,o_1mpd5vk:1.79,o_eb64n4:1.8,o_1dtq5mo:1.81,o_w2g54w:1.82,o_1vl064g:1.83,o_zpm9s:1.84,o_10i9n9c:1.85,o_iqzmrk:1.86,o_1i9jnr4:1.87,o_9vcmio:1.88,o_19dwni8:1.89,o_rmmn0g:1.9,o_1r56o00:1.91,o_87f280:1.92,o_17pz37k:1.93,o_pyp2ps:1.94,o_1ph93pc:1.95,o_h322gw:1.96,o_1glm3gg:1.97,o_yuc2yo:1.98,o_1ycw3y8:1.99,o_3rlk3k:2,o_13a5l34:2.01,o_livklc:2.02,o_1l1flkw:2.03,o_cn8kcg:2.04,o_1c5slc0:2.05,o_ueiku8:2.06,o_1tx2lts:2.07,o_5zib5s:2.08,o_15i2c5c:2.09,o_nqsbnk:2.1,o_1n9ccn4:2.11,o_ev5beo:2.12,o_1edpce8:2.13,o_wmfbwg:2.14,o_1w4zcw0:2.15,o_1jot1c:2.16,o_1128u0w:2.17,o_jaytj4:2.18,o_1itiuio:2.19,o_afbta8:2.2,o_19xvu9s:2.21,o_s6lts0:2.22,o_1rp5urk:2.23,o_73goow:2.24,o_16m0pog:2.25,o_ouqp6o:2.26,o_1odaq68:2.27,o_fz3oxs:2.28,o_1fhnpxc:2.29,o_xqdpfk:2.3,o_1x8xqf4:2.31,o_2nn6kg:2.32,o_12677k0:2.33,o_kex728:2.34,o_1jxh81s:2.35,o_bja6tc:2.36,o_1b1u7sw:2.37,o_tak7b4:2.38,o_1st48ao:2.39,o_4vjxmo:2.4,o_14e3ym8:2.41,o_mmty4g:2.42,o_1m5dz40:2.43,o_dr6xvk:2.44,o_1d9qyv4:2.45,o_vigydc:2.46,o_1v10zcw:2.47,o_fqfi8:2.48,o_zyaghs:2.49,o_i70g00:2.5,o_1hpkgzk:2.51,o_9bdfr4:2.52,o_18txgqo:2.53,o_r2ng8w:2.54,o_1ql7h8g:2.55,o_8ceuww:2.56,o_17uyvwg:2.57,o_q3oveo:2.58,o_1pm8we8:2.59,o_h81v5s:2.6,o_1gqlw5c:2.61,o_yzbvnk:2.62,o_1yhvwn4:2.63,o_3wlcsg:2.64,o_13f5ds0:2.65,o_lnvda8:2.66,o_1l6fe9s:2.67,o_cs8d1c:2.68,o_1case0w:2.69,o_ujidj4:2.7,o_1u22eio:2.71,o_64i3uo:2.72,o_15n24u8:2.73,o_nvs4cg:2.74,o_1nec5c0:2.75,o_f0543k:2.76,o_1eip534:2.77,o_wrf4lc:2.78,o_1w9z5kw:2.79,o_1oolq8:2.8,o_1178mps:2.81,o_jfym80:2.82,o_1iyin7k:2.83,o_akblz4:2.84,o_1a2vmyo:2.85,o_sblmgw:2.86,o_1ru5ngg:2.87,o_78ghds:2.88,o_16r0idc:2.89,o_ozqhvk:2.9,o_1oiaiv4:2.91,o_g43hmo:2.92,o_1fmnim8:2.93,o_xvdi4g:2.94,o_1xdxj40:2.95,o_2smz9c:2.96,o_12b708w:2.97,o_kjwzr4:2.98,o_1k2h0qo:2.99,o_bo9zi8:3,o_14j3rb4:3.05,o_vngr28:3.1,o_1huk9og:3.15,o_7sfo5c:3.2,o_1g6mpds:3.25,o_l3w6io:3.3,o_1ti37r4:3.35,o_eg5xc0:3.4,o_10n9fy8:3.45,o_rrmfpc:3.5,o_1nybc3k:3.55,o_28nshs:3.6,o_1amutq8:3.65,o_m7uk1s:3.7,o_1um1la8:3.75,o_8we1og:3.8,o_184yha8:3.85,o_z9bh1c:3.9,o_1lgeznk:3.95,o_6ehp8g:4,o_1esoqgw:4.05,o_jpy7ls:4.1,o_1s458u8:4.15,o_ge330g:4.2,o_12l6lmo:4.25,o_tpjlds:4.3,o_1mkdd6o:4.35,o_uptkw:4.4,o_198wutc:4.45,o_ptpa0w:4.5,o_1y7wb9c:4.55,o_ci8rnk:4.6,o_15d2jgg:4.65,o_whfj7k:4.7,o_1ioj1ts:4.75,o_6ygw00:4.8,o_1fcnx8g:4.85,o_k9xedc:4.9,o_1so4fls:4.95,o_dm756o:5,o_ztansw:5.05,o_qxnnk0:5.1,o_1ptqlfk:5.15,o_4431ts:5.2,o_1cia328:5.25,o_o39tds:5.3,o_1whgum8:5.35,o_artb0g:5.4,o_16yi7eo:5.45,o_y2v75s:5.5,o_1k9yps0:5.55,o_581fcw:5.6,o_1dm8glc:5.65,o_ijhxq8:5.7,o_1qxoyyo:5.75,o_gvkdfk:5.8,o_132nw1s:5.85,o_u70vsw:5.9,o_1n1unls:5.95,o_1c7400:6,o_19qe58g:6.05,o_on905c:6.1,o_1x1g1ds:6.15,o_bbshs0:6.2,o_146m9kw:6.25,o_vaz9c0:6.3,o_1hi2ry8:6.35,o_8tw5c0:6.4,o_1h836kg:6.45,o_m5cnpc:6.5,o_1ujjoxs:6.55,o_fhmeio:6.6,o_11opx4w:6.65,o_st2ww0:6.7,o_1ozrta8:6.75,o_3a49og:6.8,o_1bobaww:6.85,o_n9b18g:6.9,o_1vni2gw:6.95,o_9xuiv4:7,o_17sgzk0:7.05,o_ywtzb4:7.1,o_1l3xhxc:7.15,o_6207i8:7.2,o_1eg78qo:7.25,o_jdgpvk:7.3,o_1rrnr40:7.35,o_g1lla8:7.4,o_128p3wg:7.45,o_td23nk:7.5,o_1m7vvgg:7.55,o_i8buo:7.6,o_18wfd34:7.65,o_q66rr4:7.7,o_1ykdszk:7.75,o_cuq9ds:7.8,o_15pk16o:7.85,o_wtx0xs:7.9,o_1j10jk0:7.95,o_7aydq8:8,o_neatxc:8.5,o_hkjcw0:9,o_vzy8sg:9.5,o_2l5a80:10,o_jm7d34:10.5,o_cehx4w:11,o_qtwt1c:11.5,o_5gs2kg:12,o_ovzncw:12.5,o_f1e29s:13,o_ygln28:13.5,o_1zzls:14,o_kv5jb4:14.5,o_abkyrk:15,o_us90qo:15.5,o_816bcw:16,o_mgl79c:16.5,o_gmtq80:17,o_wq66f4:17.5,o_40c7b4:18,o_ifr37k:18.5,o_b81n9c:19,o_spc2dc:19.5,o_5y9czk:20,o_e0k268:21,o_231ips:22,o_9aqyo0:23,o_6nutj4:24,o_gxfsow:25,o_2zi77k:26,o_d936dc:27,o_4xfcw0:28,o_ei1clc:29,o_wl8u8:30,o_apxvr4:31,o_8s0q2o:32,o_fzq60w:33,o_3d8n40:34,o_byw1z4:35},aipsi:{v_11c8feo:.25,v_8henls:.01,v_testBid:0,o_17zyolc:.01,o_q8oo3k:.02,o_1pr8p34:.03,o_hd1nuo:.04,o_1gvlou8:.05,o_z4bocg:.06,o_1ymvpc0:.07,o_41l5hc:.08,o_13k56gw:.09},user_sync:{third_party_images:{},third_party_scripts:{"yahoo.com":"https://connectid.analytics.yahoo.com/connectId-gpt.js","id5-sync.com":"https://cdn.id5-sync.com/api/1.0/esp.js","uidapi.com":"https://cdn.prod.uidapi.com/uid2SecureSignal.js"}},companion:{allowed:Boolean([1,4,9].includes(Ht.product.id))}},page:{lang:(document.documentElement.lang||navigator.language).split("-")[0].toUpperCase(),tcf:{tcString:"",addtlConsent:"",nbAddtlConsent:0,purpose:"",vendor:"",nbVendors:0,consentType:"unknown",additionalConsentType:"unknown",googleAllowed:"unknown",amazonAllowed:"unknown",sparteoAllowed:"unknown",purposeOneAllowed:"unknown",purposeFourAllowed:"unknown",specialPurposeOne:"unknown",cmp:{id:"",version:""},cmpuistate:"unknown",thresholds:{totalVendors:650,totalAddtlConsentVendors:575},neededVendorsMap:{"152 Media LLC (1111)":1111,"1plusX AG (92)":92,"33Across (58)":58,"A.Mob (272)":272,"AcuityAds Inc. (231)":231,"Ad Alliance GmbH (788)":788,"Adelaide Metrics Inc (1019)":1019,"AdElement Media Solutions Pvt Ltd (196)":196,"Adex (Virtual Minds GmbH) (44)":44,"Adform A/S (50)":50,"Adhese (553)":553,"Aditude Inc. (1317)":1317,"Adkernel LLC (14)":14,"Adloox SA (93)":93,"ADNOW I RENODO MEDIA LTD (1210)":1210,"Adobe Advertising Cloud (264)":264,"Adobe Audience Manager Adobe Experience Platform (565)":565,"AdSpirit GmbH (6)":6,"Adtelligent Inc. (410)":410,"Adventure Media SARL (1071)":1071,"ADYOULIKE SA (259)":259,"Alliance Gravity Data Media (501)":501,"AllMediaDesk GmbH (598)":598,"Amagi Corporation (1254)":1254,"Amazon Ad Server (68)":68,"Amazon Advertising (793)":793,"Ampliffy (1258)":1258,"Aniview LTD (780)":780,"AntVoice (155)":155,"Arkeero (685)":685,"Audience Network (717)":717,"Audienzz AG (783)":783,"Axel Springer Teaser Ad GmbH (647)":647,"Azerion Holding B.V. (610)":610,"B2B Media Group GmbH (461)":461,"Bababam (1120)":1120,"BeeswaxIO Corporation (12)":12,"Bertelsmann Data Service GmbH (920)":920,"Between Exchange (724)":724,"BidBerry SRL (715)":715,"BIDSWITCH GmbH (128)":128,"BLIINK SAS (658)":658,"Blockthrough Inc. (815)":815,"Blue Media Services LTDA (1105)":1105,"BSmartData GmbH (848)":848,"Captify Technologies Limited (2)":2,"Celtra Inc. (315)":315,"CND Motion Media GmbH (1206)":1206,"Comcast International France SAS/FreeWheel Media Inc. (285)":285,"Comscore B.V. (77)":77,"Contact Impact GmbH/Axel Springer Teaser Ad GmbH (630)":630,"Crimtan Holdings Limited (85)":85,"Criteo SA (91)":91,"DataDome SA (1284)":1284,"Dataseat Ltd (713)":713,"DataWave LTD (1244)":1244,"dataXtrade GmbH (938)":938,"DEFINE MEDIA GMBH (440)":440,"Dentsu A/S (1029)":1029,"Dentsu Italia SpA (707)":707,"Dentsu Product and Services GmbH (922)":922,"Dentsu UK Limited (122)":122,"DoubleVerify Inc. (126)":126,"Duration Media LLC. (674)":674,"Dynamic 1001 GmbH (584)":584,"EASYmedia GmbH (168)":168,"eBay Inc (929)":929,"Effiliation / Effinity (402)":402,"Encore Digital Media (1261)":1261,"Epsilon (24)":24,"Equativ (45)":45,"Ermes (244)":244,"Eskimi (814)":814,"Eyeota Pte Ltd (120)":120,"Feeltapmedia Limited (1207)":1207,"Fifty Technology Limited (100)":100,"First-id (1178)":1178,"Flashtalking (78)":78,"Footballco Media Limited (323)":323,"GameAnalytics ApS (1267)":1267,"Gamned (316)":316,"Genius Sports Media Inc. (1251)":1251,"GeoEdge (845)":845,"Global Media Group Services Limited (768)":768,"Golden Bees (274)":274,"Good-Loop Ltd (749)":749,"Google Advertising Products (755)":755,"Greenbids (1232)":1232,"Groupe Canal+ (1231)":1231,"GroupM UK Limited (98)":98,"GumGum Inc. (61)":61,"Happydemics (550)":550,"Havas Media (Artemis Alliance S.L.U.) (1031)":1031,"HUMAN (431)":431,"ID5 Technology Ltd (131)":131,"Improve Digital (253)":253,"Index Exchange Inc. (10)":10,"InMobi Pte Ltd (333)":333,"Innovid LLC (452)":452,"Integral Ad Science (incorporating ADmantX) (278)":278,"INVIBES GROUP (436)":436,"IPONWEB GmbH (129)":129,"iProspect GmbH (991)":991,"Italiaonline S.p.A. (1068)":1068,"Krush Media LLC (1315)":1315,"Lemma Media Inc (1329)":1329,"LinkedIn Ireland Unlimited Company (804)":804,"LiquidM Technology GmbH (254)":254,"LiveIntent Inc. (148)":148,"LiveRamp (97)":97,"LoopMe Limited (109)":109,"Lotame Solutions Inc (95)":95,"Luna Media Group LLC (998)":998,"Lupon Media (1132)":1132,"MADVERTISE MEDIA (153)":153,"Magnite CTV Inc. (202)":202,"Magnite Inc. (52)":52,"Magnite Inc. (Carbon AI Limited) (493)":493,"Marfeel Solutions SL (Compass) (943)":943,"Mars Media Group (776)":776,"MEDIA FORCE COMMUNICATIONS (2007) LTD (671)":671,"Media Square (791)":791,"Media.net Advertising FZ-LLC (142)":142,"Media16 ltd (987)":987,"MEDIAMETRIE (769)":769,"Media-Micro-Census GmbH (1122)":1122,"MEDIARITHMICS SAS (184)":184,"Mediavine Inc. (858)":858,"MEDIAWAYSS Sp. z o.o. (1196)":1196,"MGID Inc. (358)":358,"Microsoft Advertising (1126)":1126,"MiQ Digital Ltd (101)":101,"MISSENA (687)":687,"Mobkoi Ltd (898)":898,"Monet Engine Inc (AdaptMX) (737)":737,"Nativo Inc. (263)":263,"NBCUniversal Media LLC (1246)":1246,"Netpoint Media GmbH (982)":982,"Next Media SRL (568)":568,"Next Millennium Media INC (1060)":1060,"NextRoll Inc. (130)":130,"Nexx360 (965)":965,"Nexxen Group LLC (36)":36,"Nexxen Inc. (23)":23,"Nielsen International SA (812)":812,"Nielsen Media Research Ltd. (373)":373,"NoBid Inc. (816)":816,"Numberly (388)":388,"Ogury Ltd (31)":31,"OneTag Limited (241)":241,"Online Media Solutions LTD (883)":883,"OpenX (69)":69,"Opera Software Ireland Limited (1135)":1135,"Opt Out Advertising B.V. (227)":227,"Opti Digital SAS (915)":915,"Oracle Data Cloud - Moat (772)":772,"ORANGE CLICK MEDIA and COMMERCE LTD (1148)":1148,"OS Data Solutions GmbH and Co. KG (137)":137,"Outbrain UK Ltd (164)":164,"PerformMedia.com Inc. (1227)":1227,"Permutive Limited (361)":361,"Piano Software Inc. (412)":412,"Pixalate Inc. (384)":384,"PML Innovative Media (961)":961,"ProSiebenSat.1 Digital Data GmbH (952)":952,"Protected Media LTD (762)":762,"Publica LLC (860)":860,"Publicis Media GmbH (226)":226,"PubMatic Inc (76)":76,"PulsePoint Inc. (81)":81,"Pure Local Media GmbH (808)":808,"Quality Media Network GmbH (835)":835,"Quantcast (11)":11,"QuantumCast digital GmbH (990)":990,"QUARTER MEDIA GmbH (993)":993,"Rakuten Marketing LLC (60)":60,"Realytics (1025)":1025,"Relevant Audience Oy (1242)":1242,"Relevant Digital Oy (1100)":1100,"Reppublika Data Analytics and Technologies GmbH (800)":800,"RetailSpot (1319)":1319,"Revcontent LLC (203)":203,"Rich Audience Technologies SLU (108)":108,"Rockabox Media Ltd (308)":308,"Roku Advertising Services (71)":71,"RTB House S.A. (16)":16,"Samsung Ads (1015)":1015,"Seedtag Advertising S.L (157)":157,"SevenData S.p.a. (491)":491,"Sharethrough Inc (80)":80,"Showheroes SE (111)":111,"ShowHeroes SRL (276)":276,"Sirdata (53)":53,"Skaze (652)":652,"Smaato Inc. (82)":82,"Smart Analytics SL (653)":653,"smartclip Europe GmbH (115)":115,"Smartclip Hispania S.L. (531)":531,"SMARTSTREAM.TV GmbH (134)":134,"Smile Wanted Group (639)":639,"Sonobi Inc (104)":104,"SoundCast (662)":662,"Sovrn Inc. (13)":13,"Sparteo (1028)":1028,"SpringServe LLC (293)":293,"StackAdapt Inc. (238)":238,"Strer Digital Media GmbH (1057)":1057,"Strer SSP GmbH (SSP) (136)":136,"Sublime (114)":114,"Sunday Market Media Inc (1276)":1276,"SunMedia (517)":517,"TabMo SAS (275)":275,"Taboola Europe Limited (42)":42,"Teroa S.A. (90)":90,"The Kantar Group Limited (345)":345,"The MediaGrid Inc. (686)":686,"The Ozone Project Limited (524)":524,"The Reach Group GmbH (382)":382,"The UK Trade Desk Ltd (21)":21,"TimeOne Performance (893)":893,"travel audience GmbH (423)":423,"Triple Lift Inc. (28)":28,"TrueData Solutions Inc. (648)":648,"TypeA Holdings Ltd (1043)":1043,"Underdog Media LLC (159)":159,"Unicredit BankAustria AG (1144)":1144,"UniCredit S.p.A. (1040)":1040,"United Internet Media GmbH (831)":831,"VALIUZ (1270)":1270,"Venatus Media Limited (26)":26,"Verve Group Europe GmbH (512)":512,"Vistar Media EMEA BV (302)":302,"WebMedia (1130)":1130,"Weborama (284)":284,"WURL LLC (1262)":1262,"Xandr Inc. (32)":32,"Xapads Media Ltd (1320)":1320,"xpln.ai SAS (1142)":1142,"Yahoo EMEA Limited (25)":25,"Yieldmo Inc. (173)":173,"Zemanta Inc. (210)":210,"zeotap GmbH (301)":301,"Zeta Global Corp. (469)":469},neededVendors:[],availableVendors:[],missingVendors:[],neededVendorsCount:0,availableVendorsCount:0}},admin:{expire_timeout:300,prefetch_timeout:15,progress_timeout:6,request_timeout:9,hls_max_buffer:12,social_timeout:3,ima_num_redirects:10,ad_load_video_timeout:8,adserve_ad_load_video_timeout:8,first_ad_request_timeout:6,default_ad_request_timeout:10,booster_ad_request_timeout:3,adserving_ad_request_timeout:3,banner_render_timeout:6,banner_linear_duration:10,apstag_retry:10,ima_sdk_url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",no_tcfapi_retry:100,display_time_on_touch:1500,vd:{xv:!0,ds:.01}}};(Ht=w(w({},e),Ht)).user.hasOwnProperty("is_adblocked")||(Ht.user.is_adblocked=!1),Ht.user.hasOwnProperty("is_anonymous")||(Ht.user.is_anonymous=!1),Ht.user.hasOwnProperty("is_invalid_traffic")||(Ht.user.is_invalid_traffic=!1),Ht.page.hasOwnProperty("referrer")||(Ht.page.referrer=document.referrer),Ht.advertising.hasOwnProperty("viously_schain_config")||(Ht.advertising.viously_schain_config={complete:1,ver:"1.0",nodes:[{asi:"viously.com",sid:Ht.advertising.viously_seller_id,hp:1}]}),Ht.advertising.sparteo_schain_node&&!Ht.advertising.hasOwnProperty("sparteo_schain_config")&&(Ht.advertising.sparteo_schain_config={complete:1,ver:"1.0",nodes:[JSON.parse(Ht.advertising.sparteo_schain_node)]}),0==Ht.template.advertising.linear.viously_capping?Ht.template.advertising.linear.max_preroll_viously=1/0:Ht.template.advertising.linear.max_preroll_viously=parseInt(Ht.template.advertising.linear.max_preroll_viously);const Li=[[1e3,30],[1e3,90],[1e3,200],[1e3,250],[1e3,260],[1e3,300],[990,90],[980,300],[980,120],[980,90],[970,250],[970,150],[970,90],[970,66],[950,90],[750,100],[728,90],[728,250],[728,50],[480,80],[468,60],[320,100],[320,50],[300,100],[300,125],[300,150],[300,75],[300,50]],Vi=[[300,600],[160,600],[120,600]],Ni=[[320,75],[320,180],[300,168],[480,320],[640,480],[1024,768],[336,280],[300,250],[250,250],[200,200],[768,1024],[320,480]];var E,ct="%c player %c",Jt=Ht.ab,ne=Ht.page.versions&&Ht.page.versions.prio?Ht.page.versions.prio:"manual",ie="insecure",oe=640,se=480,ae=null,re=!1,ce=0,de=0,ue=5,le=2,pe=[],he=0,fe=[],me=0,_e=4,y=null,I=null,bt=!1,Ft={},ve=6,be=31,wt=40,we=Ht.user.device.type&&("mobile phone"===Ht.user.device.type.toLowerCase()||"mobile device"===Ht.user.device.type.toLowerCase()),Tt="ontouchstart"in document.documentElement,lt=0==Ht.product.id,Wt=1==Ht.product.id,e=(Ht.product.id,Ht.product.id,4==Ht.product.id),A=5==Ht.product.id,ge=6==Ht.product.id,Kt=9==Ht.product.id,ye=Wt&&Ht.publisher_channel&&1==Ht.publisher_channel.enable,Yt=e||Kt,Ie=!1,Ae=!1,Se=!1,S=/(\d+)/,k=50,M=null,O="json",ke=!1,C="mtscl-dbg",xe=!1,Te=!1,pt=1,ht=2,ft=3,mt=5,_t=6,vt="autoplay_muted",gt="autoplay_audible",yt="clicktoplay",R=[],L=25,V=5e3,N=!0,D=!1,P=!1,U=(Yt?window.parent:window).pageYOffset,j=Yt?setInterval(function(){window.parent.pageYOffset>U&&(U=window.parent.pageYOffset)},1e3):null,q=t({timeToIdle:V,inactivityEvents:[]}),Ee=(()=>{let t;function e(){let e=0;return{set TIMER(t){e=t},get TIMER(){return e}}}return{getInstance(){return t=t||e()}}})(),Zt={p:function(t,e){var n;window.location.href&&(void 0===E&&(1==Qt.m(O)?ke=E=!0:E=!1),E)&&(n=console,e?n.log(t):n.log("%c viously "+t,"font-family:Inter,sans-serif;user-select:none;text-transform:uppercase;margin-right:4px;color:#fff;padding:2px 4px;border-radius:6px;background:linear-gradient(35deg,#c2ff47 -17.68%,#5df385 -.03%,#05e8bb 17.62%,#1f96ff 52.93%,#6933ff 88.23%);","font-family:Inter,sans-serif;user-select:none;text-transform:uppercase;margin-right:4px;color:black;padding:2px 4px;border-radius:6px;background:#f2f2f2","font-family:Inter,sans-serif;"))},_:function(){if("undefined"!=typeof URLSearchParams)try{const t=new URLSearchParams(window.location.search),e=t.get(C);"1"!==e&&"2"!==e||(ke=xe=!0,Ht.admin.banner_linear_duration=30,Ht.advertising.linear.primary=!1,Ht.advertising.linear.passback=!1,Ht.advertising.linear.prebid=!1),"2"===e&&(Te=!0)}catch(t){}},v:function(t,e,n,i,o){if(window.location.href){var s=ee.g(e||Ht.admin.current_index),a=s.events[t];if(a){o=o||"";var r="&ts="+Math.round(100*Zt.I())/100+"&duid="+Ht.diffuser.uid+"&dun="+Ht.diffuser.name+"&pasn="+Ht.page.audience_source.name+"&pdn="+Ht.page.domain.name+"&pu="+encodeURIComponent(Ht.page.url)+"&pid="+Ht.product.id+"&ct="+Zt.A()+"&udbn="+(Ht.user.device.browser&&Ht.user.device.browser.name?Ht.user.device.browser.name:"")+"&udon="+(Ht.user.device.os&&Ht.user.device.os.name?Ht.user.device.os.name:"")+"&udt="+(Ht.user.device.type||"")+"&ugcn="+(Ht.user.geoip.country&&Ht.user.geoip.country.name?Ht.user.geoip.country.name:"")+"&uib="+Ht.user.is_bot+"&uidi="+Ht.user.is_datacenter_ip+"&uiad="+Ht.user.is_adblocked+"&uian="+Ht.user.is_anonymous+"&uiit="+Ht.user.is_invalid_traffic+"&pvf="+Ht.playlist.format;switch(-1==o.indexOf("&ab=")&&(r+="&ab="+Jt.toString()),t){case 24:case 14:case 15:case 75:r+="&pnpv="+Ht.page.nb_players+"&spgid="+Ht.id_session_page+"&pgs="+(Ht.page.fpd&&Ht.page.fpd.gv_safe?"true":"")+"&pge="+(Ht.page.fpd&&Ht.page.fpd.gs_error?"true":"")+"&pgsgt="+(Ht.page.fpd&&Ht.page.fpd.gs_terms?encodeURIComponent(Ht.page.fpd.gs_terms):"")+"&pgsy="+(Ht.page.fpd&&Ht.page.fpd.safety?Ht.page.fpd.safety:"unknown")+"&pgsg="+(Ht.page.fpd&&Ht.page.fpd.gs_channels?Ht.page.fpd.gs_channels:"")+"&pgcsg="+(Ht.page.fpd&&Ht.page.fpd.vc_channels?Ht.page.fpd.vc_channels:"")+"&pru="+encodeURIComponent(Ht.page.referrer)+"&prvs="+(Ht.related_videos&&Ht.related_videos.status?Ht.related_videos.status:""),15!=t&&75!=t||(r+="&ptfa="+(Ht.page.tcf.gdprApplies?"true":"false")+"&ptci="+(Ht.page.tcf.cmp?Ht.page.tcf.cmp.id:"")+"&ptcv="+(Ht.page.tcf.cmp?Ht.page.tcf.cmp.version:"")+"&ptcus="+Ht.page.tcf.cmpuistate+"&plix="+ee.S(e)+"&ti="+Ht.template.id+"&tv="+Ht.template.version+"&ptbtop="+ee.k()+"&ptbatf="+ee.T());break;case 70:case 71:case 72:case 73:case 74:case 77:r+="&pnpv="+Ht.page.nb_players+"&ptcus="+Ht.page.tcf.cmpuistate+"&ti="+Ht.template.id+"&tv="+Ht.template.version;break;case 21:case 22:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 32:r+="&pnpv="+Ht.page.nb_players+"&ptci="+(Ht.page.tcf.cmp?Ht.page.tcf.cmp.id:"")+"&ptcv="+(Ht.page.tcf.cmp?Ht.page.tcf.cmp.version:"")+"&ptcus="+Ht.page.tcf.cmpuistate+"&pta="+(Ht.page.tcf.addtlConsent?"true":"false")+"&ptact="+Ht.page.tcf.additionalConsentType+"&ptfa="+(Ht.page.tcf.gdprApplies?"true":"false")+"&ptna="+Ht.page.tcf.nbAddtlConsent+"&ptv="+Ht.page.tcf.nbVendors+"&ptts="+(Ht.page.tcf.tcString?"true":"false")+"&pua="+Ht.page.usp.applies,21!=t&&22!=t&&23!=t&&32!=t||(r+="&spgid="+Ht.id_session_page+"&plix="+ee.S(e)+"&ti="+Ht.template.id+"&tv="+Ht.template.version+"&ptbtop="+ee.k()+"&ptbatf="+ee.T()),21!=t&&23!=t&&32!=t||(r+="&ptnv="+Ht.page.tcf.neededVendors+"&ptav="+Ht.page.tcf.availableVendors+"&ptmv="+Ht.page.tcf.missingVendors+"&ptnvc="+Ht.page.tcf.neededVendorsCount+"&ptavc="+Ht.page.tcf.availableVendorsCount+"&ptas="+Ht.page.tcf.sparteoAllowed);break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 16:case 17:case 18:case 19:case 20:case 31:case 33:case 85:r+="&ptct="+Ht.page.tcf.consentType+"&ptfa="+(Ht.page.tcf.gdprApplies?"true":"false")+"&pix="+Ht.page.player_index+"&plid="+(Ht.playlist.id||"")+"&plix="+ee.S(e)+"&ti="+Ht.template.id+"&tv="+Ht.template.version+"&tm="+ee.M.getState().muted+"&tvs="+(0==Ht.template.advertising.linear.viously)+"&tna="+(0==Ht.template.advertising.linear.viously&&0==Ht.template.advertising.linear.primary&&0==Ht.template.advertising.linear.passback)+"&tt="+Ht.type+"&tpt="+Ht.template.play_type+"&talmpv="+(Ht.template.advertising.linear.max_preroll_viously==1/0?255:Ht.template.advertising.linear.max_preroll_viously)+"&ta="+Zt.O()+"&plv="+s.vid+"&plpv="+s.parent.vid+"&ptbtop="+ee.k()+"&ptbatf="+ee.T()+"&plit="+(Ht.playlist.type||"")+"&fus="+P+"&cuid="+s.creator.uid,31!=t&&85!=t||(r+="&pnpv="+Ht.page.nb_players+"&spgid="+Ht.id_session_page+"&ptci="+(Ht.page.tcf.cmp?Ht.page.tcf.cmp.id:"")+"&ptcv="+(Ht.page.tcf.cmp?Ht.page.tcf.cmp.version:"")+"&ptcus="+Ht.page.tcf.cmpuistate),16!=t&&31!=t&&85!=t||(r+=Zt.C());break;case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 65:case 66:case 67:case 68:case 69:case 76:case 80:case 81:case 84:case 87:r+="&pnpv="+Ht.page.nb_players+"&spgid="+Ht.id_session_page+"&svid="+s.id_session_video+"&pgs="+(Ht.page.fpd&&Ht.page.fpd.gv_safe?"true":"")+"&pgsg="+(Ht.page.fpd&&Ht.page.fpd.gs_channels?Ht.page.fpd.gs_channels:"")+"&pgsy="+(Ht.page.fpd&&Ht.page.fpd.safety?Ht.page.fpd.safety:"unknown")+"&pru="+encodeURIComponent(Ht.page.referrer)+"&ptci="+(Ht.page.tcf.cmp?Ht.page.tcf.cmp.id:"")+"&ptcv="+(Ht.page.tcf.cmp?Ht.page.tcf.cmp.version:"")+"&pta="+(Ht.page.tcf.addtlConsent?"true":"false")+"&ptct="+Ht.page.tcf.consentType+"&ptfa="+(Ht.page.tcf.gdprApplies?"true":"false")+"&ptna="+Ht.page.tcf.nbAddtlConsent+"&ptv="+Ht.page.tcf.nbVendors+"&ptts="+(Ht.page.tcf.tcString?"true":"false")+"&pua="+Ht.page.usp.applies+"&plid="+(Ht.playlist.id||"")+"&plix="+ee.S(e)+"&ti="+Ht.template.id+"&tv="+Ht.template.version+"&tm="+ee.M.getState().muted+"&tvs="+(0==Ht.template.advertising.linear.viously)+"&tna="+(0==Ht.template.advertising.linear.viously&&0==Ht.template.advertising.linear.primary&&0==Ht.template.advertising.linear.passback)+"&tt="+Ht.type+"&tpt="+Ht.template.play_type+"&talmpv="+Ht.template.advertising.linear.max_preroll_viously+"&ta="+Zt.O()+"&plv="+s.vid+"&plpv="+s.parent.vid+"&ptbtop="+ee.k()+"&ptbatf="+ee.T()+"&cuid="+s.creator.uid,38==t&&(r+="&ptcus="+Ht.page.tcf.cmpuistate),76!=t&&31!=t||(r+="&aaf=linear"+Zt.C())}r+=o,R.push(Zt.R("action="+a.replace(".gif","")+r)),i&&Zt.L("force"),R.length>=L&&Zt.L("max"),!0===n&&(s.events[t]=!1)}}},L:function(t){var n,e,i;0<R.length&&(n={},e=JSON.parse(JSON.stringify(R)),E?n.od=e:n.d=x.i(JSON.stringify(e)),(i=1)==N&&0==D?Zt.V(Ht.admin.event_url+"beacon","POST",!1,!0,2e3,function(t,e){(!t||""==t)&&0<i&&(i--,Zt.V(Ht.admin.event_url+"beacon","POST",!1,!0,2e3,function(t,e){Zt.p(ct+"Tracking retry : "+e)},JSON.stringify(n)))},JSON.stringify(n)):!navigator.sendBeacon||"ios"===(Ht.user.device.os&&Ht.user.device.os.name&&Ht.user.device.os.name.toLowerCase())&&Zt.N()<13?Zt.V(Ht.admin.event_url+"beacon","POST",!1,!1,2e3,function(t,e){(!t||""==t)&&0<i&&(i--,Zt.V(Ht.admin.event_url+"beacon","POST",!1,!1,2e3,function(t,e){Zt.p(ct+"Tracking retry : "+e)},JSON.stringify(n)))},JSON.stringify(n)):navigator.sendBeacon(Ht.admin.event_url+"beacon",JSON.stringify(n)),R=[])},D:function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e+"="+encodeURIComponent(t[e]));return n.join("&")},R:function(t){var i={};return t.split("&").forEach(function(e){var t,e=e.split("="),n=e[0],e=e[1];try{t=decodeURIComponent(e)}catch(t){return void Zt.p(ct+"Error decoding value:"+e+t)}""!==t&&","!==t&&(isNaN(t)||(t=Number(t)),i[n]=t)}),i},P:function(t,e,n){const i=this.U(t.pf,t.currency,e,Ht.advertising.currencies_rate,n);null!==i&&(t.pf=i,t.currency=e)},U:function(t,e,n,i,o=5){if(e===n)return Number(t);const s=i[e];if(s){const a=Number(s);if(0<a){const r=Number(t)/a,c=Math.pow(10,o);return Math.round(r*c)/c}}return null},j:function(t){t.pf=Number(t.pf*(1-t.fee))},N:function(){var t=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return!!t&&parseInt(t[1],10)},q:function(){var t=navigator.userAgent.match(/Chrome\/(\d+)\./);return!!t&&parseInt(t[1],10)},G:function(){var t=navigator.userAgent.match(/Firefox\/(\d+)\./);return!!t&&parseInt(t[1],10)},B:function(){var t=navigator.userAgent.match(/(Opera|OPR)\/(\d+)\./);return!!t&&parseInt(t[2],10)},H:function(){var t=navigator.userAgent.match(/(Edge|Edg)\/(\d+)\./);return!!t&&parseInt(t[2],10)},$:function(e,t){e.classList?t.split(" ").forEach(function(t){t&&e.classList.add(t)}):e.className+=" "+t},J:function(e,t){e.classList?t.split(" ").forEach(function(t){t&&e.classList.remove(t)}):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},F:function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},W:function(t,e){if(t.classList)t.classList.toggle(e);else{for(var n=t.className.split(" "),i=-1,o=n.length;o--;)n[o]===e&&(i=o);0<=i?n.splice(i,1):n.push(e),t.className=n.join(" ")}},K:function(t,e,n){var i="timeupdate"===e?{passive:!0}:!1;window.addEventListener?t.addEventListener(e,n,i):(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event)},t.attachEvent("on"+e,t[e+n]))},Y:function(t,e,n){window.removeEventListener?t.removeEventListener(e,n,!1):(t.detachEvent("on"+e,t[e+n]),t[e+n]=null)},Z:function(t,e){return t.split(".").reduce(function(t,e){return t&&"object"==typeof t&&e in t?t[e]:null},e)},X:function(t){return decodeURIComponent((t+"").replace(/\+/g,"%20"))},tt:function(t){const e=ee.et()?ee.et().offsetWidth:0;return e<=320?t.thumbnails.w240:e<=620?t.thumbnails.w320:e<=960?t.thumbnails.w620:t.thumbnails.w960},nt:function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="document",n.onload=function(){var t;200===n.status?(t=n.responseXML,e(t,n.status)):e(null,n.status)},n.onerror=function(){e(null,"error")},n.send()},V:function(t,e,n,i,o,s,a){var r;t?window.XMLHttpRequest?((r=new window.XMLHttpRequest).onreadystatechange=function(){var t;4===this.readyState&&(200<=(t=this.status)&&t<300||304===t?s(this.responseText,"XHR success"):s(null,"XHR Fail"))},r.ontimeout=function(){s(null,"XHR Timeout")},r.open(e,t,i),i&&(r.timeout=o),"withCredentials"in r&&(r.withCredentials=n),r.responseType="text","POST"===e&&a?(r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.send(a)):(r.setRequestHeader("Content-Type","text/plain"),r.send())):s(null,"XHR not supported"):s(null,"URL not specified")},it:function(t){return encodeURIComponent(t&&t.childNodes.length&&t.childNodes[0].nodeValue||"")},ot:function(e,n,i,o,s){var a=3,r=0;function c(){var t=document.createElement("script");t.src=n,s&&(t.async=s),t.readyState?t.onreadystatechange=function(){"loaded"===t.readyState||"complete"===t.readyState?(Zt.p(ct+"Script "+n+" "+t.readyState),t.onreadystatechange=null,i&&i()):Zt.p(ct+"Script "+n+" "+t.readyState)}:(t.onload=function(){0===t.status||404===t.status?(Zt.p(ct+"Script "+n+" error"),r<a-1?(r++,c()):o&&o()):(Zt.p(ct+"Script "+n+" loaded"),i&&i()),t.onload=null},t.onerror=function(){Zt.p(ct+"Script "+n+" error"),t.onload=null,r<a-1?(r++,c()):o&&o()}),e.insertBefore(t,e.firstChild)}c()},st:{},rt:function(n,t,e,i){t()?e&&e():(Zt.st[n]||(Zt.p(ct+(n+" library not found. Loading it now...")),Zt.st[n]=new Promise((t,e)=>{Zt.ot(document.body,n,()=>{Zt.p(ct+(n+" library loaded successfully.")),t()},()=>{Zt.p(ct+`Failed to load ${n} library.`),delete Zt.st[n],e(n+" library failed to load.")})})),Zt.st[n].then(e).catch(i))},ct:function(t,e,n){var i=document.createElement("style");i.type="text/css",e&&(i.id=e),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),(n=n||document.body).appendChild(i)},dt:function(t){t=Number(t);var e=Math.floor(t/3600),n=Math.floor(t%3600/60),t=Math.floor(t%3600%60);return(e=0!==e?("0"+e).slice(-2)+":":"")+("0"+n).slice(-2)+":"+("0"+t).slice(-2)},ut:function(t,e){t&&("function"==typeof t.fastSeek?t.fastSeek(e):t.currentTime=e)},lt:function(t,e,n){for(var i=0;i<t.length;i++)if(t[i][e]==n)return i},ht:function(t,e,n){t.splice(n,0,t.splice(e,1)[0])},ft:function(n,i,o,s,a){var r,c,d,u=null,l=0,p=function(){l=new Date,u=null,d=n.apply(r,c)};return function(){var t=new Date,e=i-(t-(l=l||o?l:t));return r=a||this,c=arguments,e<=0?(clearTimeout(u),u=null,l=t,d=n.apply(r,c)):!u&&s&&(u=setTimeout(p,e)),d}},_t:function(t,e,n){e=e||window;var i,o,t=t.getBoundingClientRect();return n?(i=t.width)*(o=t.height)!=0&&(t.left<0&&(i-=t.left),t.right>(e.innerWidth||e.document.documentElement.clientWidth)&&(i-=t.right-(e.innerWidth||e.document.documentElement.clientWidth)),t.top<0&&(o-=t.top),t.bottom>(e.innerHeight||e.document.documentElement.clientHeight)&&(o-=t.bottom-(e.innerHeight||e.document.documentElement.clientHeight)),n<(i=i<0?0:i)*(o=o<0?0:o)/(t.width*t.height)):0<=Math.floor(t.top)&&0<=Math.floor(t.left)&&Math.floor(t.bottom)<=(e.innerHeight||e.document.documentElement.clientHeight)&&Math.floor(t.right)<=(e.innerWidth||e.document.documentElement.clientWidth)},A:function(){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return t&&t.effectiveType?t.effectiveType:"unknown"},I:function(){var e=0;try{e=(Yt?parent.performance:performance).now()}catch(t){e=0}return e},C:function(){var t="";return Ht.page.preds&&"object"==typeof Ht.page.preds&&(t+="&apr="+JSON.stringify(Ht.page.preds)),Ht.page.versions&&"object"==typeof Ht.page.versions&&(t+="&aprv="+JSON.stringify(Ht.page.versions)),t},vt:function(){return Ht.page.preds&&Ht.page.preds.max_duration?parseInt(Ht.page.preds.max_duration):900},bt:function(t,e,n,i){var o=Ht.admin.default_ad_request_timeout;return 0===ee.S(t)&&0===e&&!1===n&&(o=Ht.admin.first_ad_request_timeout),i&&-1==i.id_ssp&&(o=Ht.admin.booster_ad_request_timeout),1e3*(o=i&&-2==i.id_ssp?Ht.admin.adserving_ad_request_timeout:o)},wt:function(t){(new Image).src=t},gt:function(t){for(var e in t)Zt.wt(t[e])},O:function(){return"autoplay"===Ht.template.play_type},yt:function(t){Ht.template.play_type=t?"autoplay":"clicktoplay"},It:function(){return"scrolltoplay"===Ht.template.play_type},At:function(){return Zt.O()||Zt.It()},St:function(){return Zt.At()&&!ee.M.getIntendedState().muted},kt:function(t){var e,n=(t.ver||"")+","+(t.complete||"");for(e in t.nodes)var i=t.nodes[e],n=(n=(n=(n=(n=(n=(n+="!")+(i.asi||""))+(","+(i.sid||"")))+(","+(i.hp||"")))+(","+(i.rid||"")))+(","+(i.name||"")))+(","+(i.domain||""));return n},xt:function(){void 0!==window.justDetectAdblock&&"detectAnyAdblocker"in window.justDetectAdblock&&window.justDetectAdblock.detectAnyAdblocker().then(t=>{Ht.user.is_adblocked=t,Zt.p(ct+"Adblock detected = "+t)})},Tt:function(){void 0!==window.detectIncognito&&window.detectIncognito().then(t=>{Ht.user.is_anonymous=t.isPrivate,Ht.user.is_invalid_traffic=Ht.user.is_datacenter_ip&&Ht.user.is_anonymous,Zt.p(ct+"Browser private mode = "+t.isPrivate)})},Et:function(){return!y&&ee.Ot.Mt()&&(y=Qt.Ct("firstid")||Yt&&!!parent.firstId&&!!parent.firstId.cookieName&&!!Qt.Ct(parent.firstId.cookieName),Zt.p(ct+"FirstId data = "+y)),y},Rt:function(){var t,e;return!I&&ee.Ot.Mt()&&(t=Qt.Ct("_sharedID")||Qt.Lt()?localStorage.getItem("_sharedID"):null,e=Qt.Ct("_pubcid")||Qt.Lt()?localStorage.getItem("_pubcid"):null,I=t||e,Zt.p(ct+"SharedId data = "+I)),I},Vt:function(){return Zt.Et()||Zt.Rt()},Nt:function(t){return!!(t&&t.url&&""!=t.url&&-1<t.url.indexOf("pubads.g.doubleclick.net"))},Dt:function(t,e){return t.includes("shield_adserve_05")&&!Zt.Nt(e)&&141!=e.id_vast_type},Pt:function(t){let e={getMessage:function(){return this.message||"Unknown Adserve Error"},getErrorCode:function(){return this.errorCode||900},getVastErrorCode:function(){return this.vastErrorCode||900},getType:function(){return this.type||""},getInnerError:function(){return this.innerError instanceof Object?this.innerError:null}};if(t instanceof Error){if(e.message=t.message||"Unexpected Error","string"==typeof(e.innerError=t).message){const n=S.exec(t.message);if(n){const i=parseInt(n[1],10);e.errorCode=i,e.vastErrorCode=i}}}else if("[object Object]"===Object.prototype.toString.call(t)){if("string"==typeof t.message){const o=S.exec(t.message);if(o){const s=parseInt(o[1],10);t.errorCode||(t.errorCode=s),t.vastErrorCode||(t.vastErrorCode=s)}}Object.assign(e,t)}else e.message=String(t);return e},Ut:function(){const t=navigator.language||navigator.userLanguage||"en",e=t.split("-")[0].toLowerCase();return 2!==e.length?"en":e},jt:function(t){return t.vasts&&t.vasts.length&&1==Ht.template.advertising.linear.viously||!!Ht.advertising.linear.primary&&1==Ht.template.advertising.linear.primary||!!Ht.advertising.linear.passback&&1==Ht.template.advertising.linear.passback||!!Ht.advertising.linear.prebid&&(1==Ht.template.advertising.linear.viously||1==Ht.template.advertising.linear.primary||1==Ht.template.advertising.linear.passback)},qt:function(t){const e={IAB1:"Entertainment",IAB2:"Automotive",IAB3:"Business/Financial",IAB4:"Consumer",IAB5:"Education",IAB6:"Kids and Family",IAB7:"Food",IAB8:"Health and Wellness",IAB9:"Lifestyle",IAB10:"Home and Garden",IAB11:"Law",IAB12:"News",IAB13:"Business/Financial",IAB14:"Other",IAB15:"Science",IAB16:"Animals",IAB17:"Sports",IAB18:"Fashion",IAB19:"Technology",IAB20:"Travel"};return e[t]||"Undeclared"},Gt:function(e,t){let n=1,i=t;for(;i<e.length&&0<n;){let t=e[++i];if("("===t&&n++,")"===t&&n--,0===n)return i}return e.length-1},zt:function(t=""){const e=[...t=t.trim()];if(!e.length)return"";const n=e.indexOf(".");if(-1===n)return t;let i=e.length-1;n!==e.length-1&&![" ","\n"].includes(e[n+1])||(i=n);const o=e.slice(0,i).indexOf("(");if(-1<o){const s=Zt.Gt(e,o);return e.slice(0,s+1).join("")}return e.slice(0,i+1).join("")},Bt:function(t){return Zt.zt(t).trim()},Ht:function(t){const e=[];if(t.ctr){const a=Math.round(100*parseFloat(t.ctr))/100;e.push({type:"click_through_rate",value:1<a?1:a,vendor:"EXCHANGE"})}let n=0,i=0;for(var o in t)o.startsWith("vtr_d")&&(n+=parseFloat(t[o]),i++);let s=null;return 0<i?s=n/i/100:t.mrc&&(s=parseFloat(t.mrc)/100),null!==s&&e.push({type:"viewability",value:1<s?1:s,vendor:"EXCHANGE"}),e},$t:function(){return"true"===localStorage.getItem("inViouslyCTVApp")},Jt:function(){const t=Ht.advertising.badv||[];return t.slice(0,k)},Ft:function(){return Ht.advertising.badv||[]},Wt:function(){return M=M||new Set(this.Ft())},Kt:function(){var n=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(n+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===t?e:3&e|8).toString(16)})}},Xt={Yt:null,v:function(t,e){var n;Yt&&(Zt.p(ct+"API Viously dispatch event : "+t),e=e||{},n=ee.g(Ht.admin.current_index),n={event_name:t,event_timestamp:Math.round(100*Zt.I())/100,session_id:Ht.id_session_page,content_vid:n.vid,content_title:n.title,content_description:n.description,content_category:n.category.name,content_url:n.user.url+"/"+n.vid,content_duration:n.duration,content_upload_date:n.datetime,content_author:n.creator.name,content_external_id:n.external_id,content_external_source:n.external_source,template_id:Ht.template.id,template_version:Ht.template.version,playlist_id:Ht.playlist.id||"",playlist_index:parseInt(ee.Zt()),playlist_type:Ht.playlist.type||"",player_position_onload:ee.T()?"above":"below",user_is_bot:Ht.user.is_bot,user_is_datacenter_ip:Ht.user.is_datacenter_ip,user_is_adblocked:Ht.user.is_adblocked,user_is_anonymous:Ht.user.is_anonymous,user_is_invalid_traffic:Ht.user.is_invalid_traffic},t=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:Object.assign({},n,e)}),Xt.Yt.dispatchEvent(t))},Xt:function(){Zt.p(ct+" Stop"),Yt&&(ee.M.setMute(!0),"advertising"!==ee.Qt()&&ee.et()&&ee.et().pause(),Ht.template.sdk.placement&&Ht.template.sdk.placement.xpath&&"vsly-invisible-placement"==Ht.template.sdk.placement.xpath||ee.ee.te(!1),Zt.v(20,null,!0,!1),Xt.v("playerClosed"),a.ne(),s.ie())},oe:function(t){Yt&&(Xt.Yt=parent.document.getElementById("_"+t),Xt.v("playerSetup"),parent.viously.fn.stop=Xt.Xt,parent.xj4fj5.nUd0WD=Xt.Xt)}},Qt={se:void 0,ae:void 0,re:function(){if(void 0===Qt.se)try{localStorage.setItem("test","1"),localStorage.removeItem("test"),Qt.se=!0}catch(t){Qt.se=!1}return Qt.se},ce:function(){if(void 0===Qt.ae)try{sessionStorage.setItem("test","1"),sessionStorage.removeItem("test"),Qt.ae=!0}catch(t){Qt.ae=!1}return Qt.ae},Lt:function(){return Qt.re()},de:function(){return Qt.ce()},ue:function(t,e){Qt.Lt()&&localStorage.setItem(x.i(t),x.i(e))},m:function(t){if(Qt.Lt()){t=localStorage.getItem(x.i(t));if(t)return x.u(t)}return null},le:function(t){Qt.Lt()&&localStorage.removeItem(x.i(t))},pe:function(t,e){Qt.de()&&sessionStorage.setItem(x.i(t),x.i(e))},he:function(t){if(Qt.de()){t=sessionStorage.getItem(x.i(t));if(t)return x.u(t)}return null},fe:function(t){Qt.de()&&sessionStorage.removeItem(x.i(t))},Ct:function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){var o=n[i].trim();if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null}},s={me:null,_e:!1,ve:function(t){Zt.v(84,null,!1,!0,"&aad="+t)},be:function(t){s.me=setInterval(function(){t+=10,s.ve(t)},1e4),setTimeout(function(){s.ie()},12e4)},ie:function(){clearInterval(s.me)},oe:function(){0==s._e&&(s._e=!0,"0"==Ht.id_session_page.charAt(0))&&(s.ve(0),s.be(0))}},a={we:null,_e:!1,ge:{player_play:[],player_play_monetizable:!1},ye:function(n){Zt.p(ct+"playerPlay _startTimeout"),a.ne(),a.we=setTimeout(function(){var t,e;!1===a.ge.player_play_monetizable&&(t=Yt?parent:window,e=Yt?window.frameElement:document.body,"onadstart"===Ht.template.sdk.sticky.event||"duringads"===Ht.template.sdk.sticky.event||Zt._t(e,t,.5))&&(Zt.v(85,null,!0,!0,n),a.ge.player_play_monetizable=!0,Zt.p(ct+"playerPlay is monetizable"))},3e3)},ne:function(){clearTimeout(a.we)},oe:function(t){var e;-1===a.ge.player_play.indexOf(Ht.admin.current_index)&&(ye||a.ge.player_play.push(Ht.admin.current_index),t=t||"&pet="+ee.Ie()+"&ppm="+ee.Ae(),Zt.v(31,null,!0,!1,t),1==ee.Se(Ht.admin.current_index))&&Xt.v("playerPlay",{play_event_type:ee.Ie(),iab_playback_method:ee.Ae()}),0==a._e&&(a._e=!0,0==Ht.user.is_bot)&&0==Ht.user.is_invalid_traffic&&0==Ht.user.is_adblocked&&(e=ee.g(Ht.admin.current_index),Zt.jt(e))&&0==Ht.page.player_index&&a.ye(t)}},te={we:null,ke:!1,xe:!1,ye:function(){Zt.p(ct+"contentCost _startTimeout"),0==Ht.user.is_bot&&0==Ht.user.is_invalid_traffic&&ee.g(Ht.admin.current_index).creator.uid!=Ht.diffuser.uid&&(Zt.p(ct+"contentCost uid creator different uid diffuser"),null==te.we)&&0==te.ke&&(Zt.p(ct+"contentCost setTimeout"),te.we=setTimeout(function(){te.Te()},3e3))},ne:function(){Zt.p(ct+"contentCost _stopTimeout"),1==te.ke?te.Ee():null!=te.we&&(Zt.p(ct+"contentCost clearTimeout"),clearTimeout(te.we))},Te:function(){Zt.p(ct+"contentCost _charge"),te.ke=!0,Zt.v(47,null,!0,!0)},Ee:function(){Zt.p(ct+"contentCost _refund"),te.xe=!0,Zt.v(87,null,!0,!0)},Me:function(){Zt.p(ct+"contentCost _clean"),te.we=null,te.ke=!1,te.xe=!1}};hi.prototype.addObserver=function(t,e){if("function"!=typeof t.update)throw new Error("Observer must implement an update method.");if("string"!=typeof e&&!Array.isArray(e))throw new Error("Topics must be a string or an array of strings.");Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];void 0===this.observers[i]&&(this.observers[i]=[]),this.observers[i].push(t)}},hi.prototype.removeObserver=function(e,t){this.observers[t]&&(this.observers[t]=this.observers[t].filter(function(t){return t!==e}))},hi.prototype.update=function(t,e={force:!1}){var n,i=!1,o={};for(n in t)(Object.prototype.hasOwnProperty.call(t,n)&&t[n]!==this.state[n]||e.force)&&(o[n]=t[n],i=!0);if(i){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(this.state[s]=o[s]);this.notifyObservers(o)}},hi.prototype.notifyObservers=function(t){const e=new Map;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&this.observers[n])for(var i of this.observers[n])e.has(i)||e.set(i,{}),e.get(i)[n]=t[n];e.forEach((t,e)=>{e.update(t,this.state)})},"undefined"!=typeof module&&module.exports&&(module.exports=hi);const Di=(()=>{const e={linkButton:"link-to-ctv"};function t(t){const{linkTarget:e,ctvDomain:n,linkText:i,enable:o,callback:s=()=>{}}=t;if(this.vid="",this.time=0,this.enabled=o,this.callback=s,this.ctvDomain=n,this.linkText=i,this.live=void 0,this.url=null,e instanceof HTMLElement){this.linkTarget=e;try{let t;t=/^(http[s]?):\/+.*/.test(this.ctvDomain)?this.ctvDomain:"https://"+this.ctvDomain,this.url=new URL(t)}catch(t){return}this.enabled&&this.init()}}return t.prototype.init=function(){this.enabled&&this.createLink()},t.prototype.createLink=function(){this.link=document.createElement("a");const t=document.createElement("span");t.textContent=this.linkText,this.link.setAttribute("href",this.url.toString()),this.link.setAttribute("target","_blank"),this.link.classList.add(e.linkButton),this.link.appendChild(t),this.link.addEventListener("click",this.callback),this.linkTarget.appendChild(this.link)},t.prototype.getLink=function(){return this.link},t.prototype.update=function({vid:e,time:n,live:i}){const o="startTime";if(this.enabled){let t=!1;void 0!==i&&(this.live=i),void 0!==e&&e!==this.vid&&(this.vid=e,this.vid?this.url.pathname="/"+this.vid:this.url.pathname="/",t=!0),this.live||n===this.time||(this.time=n,this.time?this.url.searchParams.set(o,this.time.toString()):this.url.searchParams.delete(o),t=!0),t&&this.link.setAttribute("href",this.url.toString())}},t.prototype.dispose=function(){this.link&&this.link.parentElement&&this.link.parentElement.removeChild(this.link),this.link=null,this.linkTarget=null},t})(),Pi=(()=>{const s=.001,n=.3;function i(t){const e=t.is_ios;let n,i;if(t.audio_mode)switch(t.audio_mode){case"sound-on":n=t.volume/100,i=!1;break;case"muted":n=0,i=!0;break;default:n=e?0:s,i=e}else n=t.volume/100,i=t.muted||0===n;return{volume:n,muted:i}}function t(t){this.getVideoElement=t.getVideoElement,this.listeners=[],this.currentAdManager=null,this.config=t,this.isAdAudible=!1,this.isAudioPlaybackAllowed=!1,this.isUnmuteAttemptPending=!1,this.isWhisperFirstUnmute=!1,this.toggleMute=this.Oe.bind(this);const e=i(this.config);"clicktoplay"===this.config.play_type?(this.currentMuted=e.muted,this.currentVolume=this.currentMuted?0:e.volume,this.lastAudibleVolume=e.volume>s?e.volume:n,this.Ce=0,this.isAudioPlaybackAllowed=!0):(this.currentVolume=0,this.currentMuted=!0,this.lastAudibleVolume=e.volume>s?e.volume:n,this.Ce=0,this.isAudioPlaybackAllowed=!1),this.Re()}return t.prototype.Le=function(t){this.currentVolume=t.volume,this.currentMuted=t.muted,this.Re()},t.prototype.applyInitialConfiguredState=function(){const t=i(this.config);!1===t.muted&&this.Le({volume:t.volume,muted:!1})},t.prototype.onStateChanged=function(t){this.listeners.push(t)},t.prototype.Ve=function(){const e=this.getState();this.listeners.forEach(t=>t(e))},t.prototype.Re=function(){let t=this.currentVolume,e=this.currentVolume;this.isWhisperFirstUnmute&&!this.isUnmuteAttemptPending&&this.isAudioPlaybackAllowed&&(t=0,e=s);const n=this.getVideoElement();if(n&&(n.volume=t,n.muted=0===this.currentVolume),this.currentAdManager&&this.currentAdManager.getVolume&&this.currentAdManager.setVolume&&"function"==typeof this.currentAdManager.getVolume&&"function"==typeof this.currentAdManager.setVolume&&0<=this.currentAdManager.getVolume()){this.currentAdManager.setVolume(e);const o=this.currentAdManager.getVolume();0<e&&e<.01&&o!==e&&(this.currentVolume=0,this.currentMuted=!0,this.currentAdManager.setVolume(0))}let i=e;this.currentAdManager&&this.currentAdManager.getVolume&&0<=this.currentAdManager.getVolume()&&(i=this.currentAdManager.getVolume()),this.isAdAudible=i>=s&&this.isAudioPlaybackAllowed,this.Ve()},t.prototype.setAdManager=function(t){this.currentAdManager=t,this.currentAdManager&&this.Re()},t.prototype.removeAdManager=function(){this.currentAdManager=null},t.prototype.setMute=function(e){if(e!==this.currentMuted){let t;t=e?(0<this.currentVolume&&(this.lastAudibleVolume=this.currentVolume),0):0<this.lastAudibleVolume?this.lastAudibleVolume:n,this.Le({volume:t,muted:e})}},t.prototype.Oe=function(){this.isWhisperFirstUnmute&&this.currentVolume<=s?(this.currentVolume=n,this.lastAudibleVolume=n,this.Ce=0,this.isWhisperFirstUnmute=!1):this.currentVolume>s?(this.lastAudibleVolume=this.currentVolume,this.currentVolume=this.Ce):(this.Ce=this.currentVolume,this.currentVolume=this.lastAudibleVolume),this.currentMuted=0===this.currentVolume,this.Re()},t.prototype.setVolume=function(t){t=Math.min(Math.max(t,0),1),this.isWhisperFirstUnmute&&t>s&&(this.isWhisperFirstUnmute=!1,this.Ce=0),this.currentVolume=t,this.currentMuted=0===t,!this.currentMuted&&this.currentVolume>s&&(this.lastAudibleVolume=this.currentVolume,this.Ce=0),this.Re()},t.prototype.enableInitialAudioPlayback=function(){if(!(0<this.currentVolume)){const t=i(this.config);!1===t.muted&&("whisper"!==this.config.audio_mode||this.config.is_ios||(this.isWhisperFirstUnmute=!0),this.setVolume(t.volume))}},t.prototype.confirmAudioPlaybackAllowed=function(){!1===this.isAudioPlaybackAllowed&&(this.isAudioPlaybackAllowed=!0,this.Re())},t.prototype.prepareForUnmuteAttempt=function(){if("clicktoplay"!==this.config.play_type){this.isUnmuteAttemptPending=!0;const t=this.getVideoElement();t&&(t.muted=!1,t.volume=s)}},t.prototype.resolveUnmuteAttempt=function(){this.isUnmuteAttemptPending&&(this.isUnmuteAttemptPending=!1,this.Re())},t.prototype.getIntendedState=function(){return i(this.config)},t.prototype.getLastAudibleVolume=function(){return this.lastAudibleVolume},t.prototype.getState=function(){return{volume:this.currentVolume,muted:this.currentMuted,isAdAudible:this.isAdAudible,isAudioPlaybackAllowed:this.isAudioPlaybackAllowed}},t})(),Ui=(fi.prototype.Ne=function(){this.De=document.createElement("div"),this.De.id="vsly-subtitles-display",this.De.className="vsly-subtitles-display",this.Pe.appendChild(this.De)},fi.prototype.Ue=function(){if(!this.je&&this.qe&&this.De){const n=this.qe.activeCues;if(this.De.innerHTML="",n){for(let t=0;t<n.length;t++){const i=n[t],o=document.createElement("p");let e;if(i.getCueAsHTML&&"function"==typeof i.getCueAsHTML)e=i.getCueAsHTML();else{let t=i.text;t=(t=(t=t.replace(/<\d{2}:\d{2}:\d{2}\.\d{3}>/g,"")).replace(/<v[^>]+>/g,"")).replace(/<\/?c>/g,"");const s=document.createElement("div");for(s.innerHTML=t,e=document.createDocumentFragment();s.firstChild;)e.appendChild(s.firstChild)}o.appendChild(e),this.De.appendChild(o)}if(n.length)this.Ge&&(clearTimeout(this.Ge),this.Ge=0),this.ze||(this.De.classList.add("vsly-active-subtitles"),this.ze=!0);else{const t=300,e=200;this.Ge=setTimeout(()=>{this.De.classList.remove("vsly-active-subtitles"),this.ze=!1},t+e)}}}},fi.prototype.Be=function(t,e){if(!this.je){if(this.qe&&(this.qe.removeEventListener("cuechange",this.Ue),this.qe.mode="disabled",this.qe=null),this.De.innerHTML="",t&&e&&"off"!==e){const n=this.He.textTracks;for(let t=0;t<n.length;t++){const i=n[t];if("subtitles"===i.kind&&i.language===e){this.qe=i,this.qe.mode="hidden",this.qe.addEventListener("cuechange",this.Ue),this.Ue();break}}}this.De.style.display=t&&e&&"off"!==e?"":"none"}},fi.prototype.update=function(t,e){this.je||("subtitlesLanguage"in t||"subtitlesEnabled"in t||"availableSubtitleTracks"in t)&&this.Be(e.subtitlesEnabled,e.subtitlesLanguage)},fi.prototype.setVideoElement=function(t){this.je||(this.qe&&(this.qe.removeEventListener("cuechange",this.Ue),this.qe=null),this.He=t,this.update({},this.$e.state))},fi.prototype.destroy=function(){this.je||(this.je=!0,this.Ge&&(clearTimeout(this.Ge),this.Ge=0),this.qe&&(this.qe.removeEventListener("cuechange",this.Ue),this.qe.mode="disabled",this.qe=null),this.De&&(this.De.parentNode&&this.De.parentNode.removeChild(this.De),this.De=null),this.$e&&(this.$e.removeObserver(this,"subtitlesLanguage"),this.$e.removeObserver(this,"subtitlesEnabled"),this.$e.removeObserver(this,"availableSubtitleTracks"),this.$e=null),this.He=null,this.Pe=null)},"undefined"!=typeof module&&module.exports&&(module.exports=fi),mi.prototype.Ne=function(){this.Je=document.createElement("div"),this.Je.id="vsly-subtitles-toggle",this.Je.className="c-controlBar__button c-controlBar__button--subtitles vsly-icon-subtitles",this.Fe?this.Fe.insertAdjacentElement("afterend",this.Je):this.We&&this.We.appendChild(this.Je)},mi.prototype.Ke=function(){this.Je&&(this.Je.addEventListener("click",this.Ye),this.Je.addEventListener("mouseenter",this.Ze),this.Je.addEventListener("mouseleave",this.Xe))},mi.prototype.Ye=function(t){if(t.target===this.Je&&this.Qe){t.stopPropagation();const e=this.$e.state.subtitlesMenuVisible;this.$e.update({subtitlesMenuVisible:!e})}},mi.prototype.Ze=function(){this.Qe||this.$e.update({subtitlesMenuVisible:!0})},mi.prototype.Xe=function(t){this.Qe||this.Je&&this.Je.contains(t.relatedTarget)||this.$e.update({subtitlesMenuVisible:!1})},mi.prototype.update=function(t,e){this.Je&&(e.subtitlesEnabled?this.Je.classList.add("subtitles-enabled"):this.Je.classList.remove("subtitles-enabled"),void 0!==e.subtitlesAvailable)&&(this.Je.style.display=e.subtitlesAvailable?"":"none")},Object.defineProperty(mi.prototype,"buttonElement",{get:function(){return this.Je},enumerable:!0,configurable:!0}),mi.prototype.destroy=function(){window.removeEventListener("touchstart",this.tn),this.Je&&(this.Je.removeEventListener("click",this.Ye),this.Je.removeEventListener("mouseenter",this.Ze),this.Je.removeEventListener("mouseleave",this.Xe),this.Je.parentNode&&this.Je.parentNode.removeChild(this.Je),this.Je=null),this.$e&&(this.$e.removeObserver(this,"subtitlesEnabled"),this.$e.removeObserver(this,"subtitlesAvailable"),this.$e=null),this.Fe=null,this.We=null},"undefined"!=typeof module&&module.exports&&(module.exports=mi),_i.prototype.setVideoTextTrackManager=function(t){if(!t||"function"!=typeof t.update)throw new Error("SubtitlesController: Invalid VideoTextTrackManager instance provided.");this.en=t},_i.prototype.setSubtitlesAvailable=function(t){this.je||(this.$e.update({subtitlesAvailable:t}),t)||this.$e.update({subtitlesEnabled:!1,subtitlesMenuVisible:!1,subtitlesLanguage:"off"})},_i.prototype.setAvailableSubtitleTracks=function(t){this.je||Array.isArray(t)&&(this.$e.update({availableSubtitleTracks:t}),this.setSubtitlesAvailable(0<t.length))},_i.prototype.destroy=function(){this.je=!0,this.$e=null,this.en=null},"undefined"!=typeof module&&module.exports&&(module.exports=_i),vi.prototype.nn=function(){this.$e=new hi({subtitlesAvailable:!1,subtitlesEnabled:!1,subtitlesMenuVisible:!1,subtitlesLanguage:"off",availableSubtitleTracks:[]}),this.en=new wi({videoElement:this.He,stateObserver:this.$e}),this.on=new _i(this.$e),this.on.setVideoTextTrackManager(this.en),this.sn=new mi({insertAfterElement:this.Fe,containerToInsert:this.We,stateObserver:this.$e}),this.an=new bi({menuContainer:this.sn.buttonElement,stateObserver:this.$e,storage:this.rn}),this.cn=new fi({playerContainer:this.Pe,videoElement:this.He,stateObserver:this.$e})},vi.prototype.onVideoTracksLoaded=function(e){if(!this.je&&(this.on.setAvailableSubtitleTracks(e),e)&&0<e.length){const n=this.rn.m("vsly-subtitles-lang"),i=(navigator.language||navigator.userLanguage).split("-")[0];let t=null;if(n)if("off"===n)t="off";else{const o=e.find(t=>t.srclang===n);o&&(t=n)}if(null===t){const s=e.find(t=>t.srclang===i);s&&(t=i)}null!==t&&this.$e.update({subtitlesEnabled:"off"!==t,subtitlesLanguage:t})}},vi.prototype.setVideoElement=function(t){!this.je&&t&&(this.He=t,this.en&&this.en.setVideoElement(t),this.cn)&&this.cn.setVideoElement(t)},vi.prototype.destroy=function(){this.je||(this.je=!0,this.cn&&(this.cn.destroy(),this.cn=null),this.an&&(this.an.destroy(),this.an=null),this.sn&&(this.sn.destroy(),this.sn=null),this.on&&(this.on.destroy(),this.on=null),this.en&&(this.en.destroy(),this.en=null),this.$e=null,this.He=null,this.Fe=null,this.We=null,this.Pe=null,this.rn=null)},"undefined"!=typeof module&&module.exports&&(module.exports=vi),bi.prototype.Ne=function(){this.dn=document.createElement("div"),this.dn.id="vsly-subtitles-menu",this.dn.className="vsly-subtitles-menu",this.un.appendChild(this.dn);const t=this.$e.state.availableSubtitleTracks||[];this.ln(t)},bi.prototype.ln=function(t){this.dn.innerHTML="",this.pn.clear();const e=document.createElement("h4"),n=(e.className="vsly-subtitles-menu__header",e.textContent="Subtitles",this.dn.appendChild(e),document.createElement("ul")),i=document.createElement("li");i.textContent="Deactivate",i.className="vsly-subtitles-menu__item",this.pn.set(i,"off"),n.appendChild(i),t.forEach(t=>{const e=document.createElement("li");e.textContent=t.label.englishName,e.className="vsly-subtitles-menu__item",this.pn.set(e,t.srclang),n.appendChild(e)}),this.dn.appendChild(n),this.hn(this.$e.state.subtitlesLanguage)},bi.prototype.Ke=function(){this.dn&&this.dn.addEventListener("click",this.fn)},bi.prototype.fn=function(t){if(!this.je){t.stopPropagation();const e=t.target;if(this.pn.has(e)){const n=this.pn.get(e);this.$e.update({subtitlesLanguage:n,subtitlesEnabled:"off"!==n}),this.rn.ue("vsly-subtitles-lang",n)}}},bi.prototype.mn=function(t){this.un.contains(t.target)||this.$e.update({subtitlesMenuVisible:!1})},bi.prototype.update=function(t,e){if(!this.je&&this.dn){const n=e.availableSubtitleTracks&&0<e.availableSubtitleTracks.length,i=e.subtitlesMenuVisible&&e.subtitlesAvailable&&n;i?this.show():this.hide(),e.availableSubtitleTracks!==this._n&&(this.ln(e.availableSubtitleTracks),this._n=e.availableSubtitleTracks),e.subtitlesLanguage!==this.vn&&(this.hn(e.subtitlesLanguage),this.vn=e.subtitlesLanguage)}},bi.prototype.hn=function(t){for(var[e,n]of this.pn)e.classList[n===t?"add":"remove"]("active")},bi.prototype.show=function(){this.je||(this.dn&&(this.dn.style.display="block"),document.addEventListener("click",this.mn,!0))},bi.prototype.hide=function(){this.je||(this.dn&&(this.dn.style.display="none"),document.removeEventListener("click",this.mn,!0))},bi.prototype.destroy=function(){this.je=!0,document.removeEventListener("click",this.mn,!0),this.dn&&(this.dn.removeEventListener("click",this.fn),this.dn.innerHTML="",this.dn.parentNode&&this.dn.parentNode.removeChild(this.dn),this.dn=null),this.$e&&(this.$e.removeObserver(this,"subtitlesMenuVisible"),this.$e.removeObserver(this,"subtitlesLanguage"),this.$e.removeObserver(this,"subtitlesAvailable"),this.$e.removeObserver(this,"availableSubtitleTracks"),this.$e=null),this.pn.clear(),this.un=null,this.rn=null,this._n=null},"undefined"!=typeof module&&module.exports&&(module.exports=bi),wi.prototype.setTracks=function(t){if(!this.je){if(!Array.isArray(t))throw new Error("VideoTextTrackManager: Subtitles data must be an array.");const e=Array.from(this.He.querySelectorAll("track"));e.forEach(t=>this.He.removeChild(t)),t.forEach(t=>{if(!t||"string"!=typeof t.file||!t.label||"string"!=typeof t.label.englishName||"string"!=typeof t.srclang)throw new Error("VideoTextTrackManager: Each subtitle object must have file, label.englishName, and srclang properties.");const e=document.createElement("track");e.kind="subtitles",e.label=t.label.englishName,e.srclang=t.srclang,e.src=t.file,this.He.appendChild(e),e.addEventListener("load",()=>{e.track&&this.bn(this.$e.state.subtitlesEnabled,this.$e.state.subtitlesLanguage)}),e.track&&(e.track.mode="disabled")}),this.bn(this.$e.state.subtitlesEnabled,this.$e.state.subtitlesLanguage)}},wi.prototype.setVideoElement=function(t){if(!this.je){const e=Array.from(this.He.querySelectorAll("track"));e.forEach(t=>this.He.removeChild(t)),this.He=t,this.wn(this.$e.state.availableSubtitleTracks)}},wi.prototype.update=function(t,e){this.je||("availableSubtitleTracks"in t?this.wn(e.availableSubtitleTracks):("subtitlesLanguage"in t||"subtitlesEnabled"in t)&&this.bn(e.subtitlesEnabled,e.subtitlesLanguage))},wi.prototype.wn=function(t){this.je||this.setTracks(t)},wi.prototype.bn=function(t,e){if(!this.je)for(var n of this.He.textTracks)"subtitles"===n.kind&&(t&&e&&n.language===e?n.mode="hidden":n.mode="disabled")},wi.prototype.destroy=function(){if(!this.je){this.je=!0;const t=Array.from(this.He.querySelectorAll("track"));t.forEach(t=>this.He.removeChild(t)),this.$e&&(this.$e.removeObserver(this,"subtitlesLanguage"),this.$e.removeObserver(this,"availableSubtitleTracks"),this.$e.removeObserver(this,"subtitlesEnabled"),this.$e=null),this.He=null}},"undefined"!=typeof module&&module.exports&&(module.exports=wi),gi.prototype.init=function(){this.generateFocusableMap(),this.setupVisibilityObserver(),window.addEventListener("keydown",t=>this.handleKeyPress(t)),window.addEventListener("focusin",t=>this.handleFocusIn(t)),this.initCallback()},gi.prototype.generateFocusableMap=function(){let i=0;const t=n=>{this.groupMap.set(n.name,n),n.children.forEach((t,e)=>{t.element&&this.focusableMap.set(t.element,{group:n,groupIndex:i,index:e})}),i++};this.tree.children.forEach(t)},gi.prototype.setupVisibilityObserver=function(){const t=()=>{for(var t in this.uiElements)if(Array.isArray(this.uiElements[t]))this.uiElements[t].forEach(t=>{const e=t.getBoundingClientRect();this.visibilityMap.set(t,{width:e.width,height:e.height,isVisible:e.top<window.innerHeight&&0<e.bottom})});else{const e=this.uiElements[t],n=e.getBoundingClientRect();this.visibilityMap.set(e,{width:n.width,height:n.height,isVisible:n.top<window.innerHeight&&0<n.bottom})}};t(),this.visibilityObserver=new IntersectionObserver(t=>{for(var e of t)this.visibilityMap.set(e.target,{width:e.boundingClientRect.width,height:e.boundingClientRect.height,isVisible:e.isIntersecting})});for(var e of this.visibilityMap.keys())this.visibilityObserver.observe(e)},gi.prototype.getGroupByName=function(t){return this.groupMap.get(t)},gi.prototype.handleFocusIn=function(t){const e=t.target;if(this.focusableMap.has(e)){const{group:n,index:i}=this.focusableMap.get(e);this.currentGroup=n,this.currentIndex=i}},gi.prototype.handleKeyPress=function(t){const e=t.key;this.currentGroup&&this.currentGroup.actions[e]&&this.currentGroup.actions[e](this,t)},gi.prototype.setFocus=function(t,e){for(;-1<e&&e<t.children.length&&!this.isElementVisible(t.children[e].element);)e++;if(-1<e&&e<t.children.length){this.currentGroup=t,this.currentIndex=e;const n=t.children[e].element;n.focus()}},gi.prototype.focusOnClosestVisible=function(t,e,n=!1){const i=t.children[e];if(this.setFocus(t,e),!1===this.isElementVisible(i.element)){const o=n?"moveToPreviousItem":"moveToNextItem";this[o]()}},gi.prototype.moveToNextItem=function(){let t,e;e=this.currentIndex===this.currentGroup.children.length-1?(t=this.currentGroup.nextGroup(this),0):(t=this.currentGroup,this.currentIndex+1),this.isElementVisible(t.children[e].element)?this.setFocus(t,e):(this.currentGroup=t,this.currentIndex=e,this.moveToNextItem())},gi.prototype.moveToPreviousItem=function(){let t,e;e=0===this.currentIndex?(t=this.currentGroup.previousGroup(this),this.currentGroup.previousGroup(this).children.length-1):(t=this.currentGroup,this.currentIndex-1),this.isElementVisible(t.children[e].element)?this.setFocus(t,e):(this.currentGroup=t,this.currentIndex=e,this.moveToPreviousItem())},gi.prototype.isElementVisible=function(t){const{width:e,height:n}=this.visibilityMap.get(t);return 0!==e&&0!==n},gi),ji=("undefined"!=typeof module&&module.exports&&(module.exports=Ui),Ti),qi=("undefined"!=typeof module&&module.exports&&(module.exports=ji),()=>{});let o=qi;const Gi=(...t)=>o(...t),zi=(Ei.prototype.clickHandler=function(){const t=this.$e.state;this.$e.update({isAdPlaying:!t.isAdPlaying})},Ei.prototype.setPause=function(){this.utils.$(this.Je,"ad-pause")},Ei.prototype.removePause=function(){this.utils.J(this.Je,"ad-pause")},Ei.prototype.update=function({isAdPlaying:t}){o=qi,setTimeout(()=>{o=this.clickHandler},100),t?this.setPause():this.removePause()},Ei.prototype.destroy=function(){this.utils.Y(this.Je,"click",Gi)},"undefined"!=typeof module&&module.exports&&(module.exports=Ei),(()=>{const f="%c hls.js %c",m="%c videoInstance %c";function t(t,e,n){if(!t||!e)throw new Error("VideoInstance: videoElement and initialVideoData must be provided.");if(!(n&&n.onError&&n.conf&&n.utils&&n.sdk&&n.events))throw new Error("VideoInstance: All dependencies (onError, conf, utils, sdk, events) must be provided.");this.videoElement=t,this.videoData=e,this.hls=null,this.streamingType="unknown",this.streamingQuality="unknown",this.isLoaded=!1,this.isLoading=!1,this.loadFailed=!1,this.isScrubbing=!1,this.isRecovering=!1,this.failureType=null,this.onError=n.onError,this.onSuccess=n.onSuccess||function(){},this.conf=n.conf,this.utils=n.utils,this.events=n.events,this.sdk=n.sdk,this.videoElement.videoInstance=this}return t.prototype.load=function(p,h){return new Promise((i,o)=>{if(!this.isLoaded&&!this.isLoading||h){this.isLoading=!0,p=p||0,h=h||!1;const e=this.videoData.sources.length&&this.videoData.sources[0];if(e){e.file=decodeURIComponent(e.file);const n=()=>{this.isLoading=!1,this.isLoaded=!0,i(this)},s=()=>{const t=this.videoElement.error;if(t,this.isScrubbing||t&&t.message&&t.message.includes("DEMUXER_ERROR_COULD_NOT_PARSE"))this.utils.p(m+"Video error during scrubbing or demuxer error. Attempting to recover by reloading."),this.isLoaded=!1,this.isLoading=!1,this.hls&&(this.isRecovering=!0,this.hls.destroy(),this.hls=null),setTimeout(()=>{this.isRecovering=!1,this.load(this.videoElement.currentTime).catch(()=>{this.utils.p(m+"Recovery from demuxer error failed.")})},50);else if(this.isLoading=!1,1<this.videoData.sources.length)this.utils.p(m+"Native video error. Trying next source."),this.videoData.sources.shift(),this.load(this.videoElement.currentTime).then(i).catch(o);else{this.loadFailed=!0;const e="Native video playback error and no more sources to try.",n=navigator.onLine?"video_unavailable":"network_error";this.onError(e,n,this.videoElement.error),o(e)}};if("hls"===e.type){const t="ios"===(this.conf.user.device.os&&this.conf.user.device.os.name&&this.conf.user.device.os.name.toLowerCase())&&this.utils.N()<17,a=this.videoElement.canPlayType("application/vnd.apple.mpegURL"),r=this.videoElement.canPlayType("application/x-mpegURL"),c="probably"===a||"maybe"===a||"probably"===r||"maybe"===r;if(window.Hls||t)if(window.Hls&&Hls.isSupported()){this.utils.p(f+"Using HLS.js playback."),this.streamingType="hls";let t=e.file;if(t&&!1===h){const u=new URL(t);!0!==e.live||u.searchParams.has("consent")||(u.searchParams.set("gdpr",this.conf.page.tcf.gdprApplies?"1":"0"),u.searchParams.set("consent",this.conf.page.tcf.tcString)),u.searchParams.has("spw")||(u.searchParams.set("pw",this.videoElement.offsetWidth),u.searchParams.set("ph",this.videoElement.offsetHeight),u.searchParams.set("spw",window.innerWidth||document.documentElement.clientWidth),u.searchParams.set("sph",window.innerHeight||document.documentElement.clientHeight)),t=u.toString()}else!0===h&&e.original_file&&(t=e.original_file);const d={startLevel:1,startPosition:0<p?p:this.videoData.starttime||-1,maxBufferLength:this.conf.admin.hls_max_buffer,maxMaxBufferLength:this.conf.admin.hls_max_buffer,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0};this.hls&&this.hls.destroy(),this.hls=new Hls(d),this.gn(o),this.hls.loadSource(t),this.hls.attachMedia(this.videoElement),this.videoElement.addEventListener("canplay",n,{once:!0}),this.videoElement.addEventListener("error",s,{once:!0})}else t||!Hls.isSupported()&&c?(this.utils.p(f+"Using native HLS playback."),this.streamingType="hls-native",this.streamingQuality="auto",this.videoElement.src=e.file,this.videoElement.load(),0<p&&(this.videoElement.currentTime=p),this.videoElement.addEventListener("canplay",n,{once:!0}),this.videoElement.addEventListener("error",s,{once:!0})):(this.utils.p(f+"HLS playback is not supported on this browser, trying next source."),this.videoData.sources.shift(),this.load(p,h).then(i).catch(o));else this.utils.p(f+"HLS.js library not found. Loading it now..."),this.utils.rt(this.conf.admin.hls_url,()=>Boolean(window.Hls),()=>{this.utils.p(f+"HLS.js library loaded successfully."),this.isLoading=!1,this.load(p).then(i).catch(o)},()=>{this.isLoading=!1,this.loadFailed=!0,this.utils.p(f+"Failed to load HLS.js library."),this.utils.v(14,null,!1,!1,"&sec=17&sem=script_error_hls"),this.videoData.sources.shift(),this.onError("HLS.js library failed to load.","video_unavailable",null),o("HLS.js library failed to load.")})}else this.utils.p(f+"Using progressive (non-HLS) playback."),this.streamingType=e.type,this.streamingQuality=e.label||"unknown",this.videoElement.src=e.file,this.videoElement.load(),0<p&&(this.videoElement.currentTime=p),this.videoElement.addEventListener("canplay",n,{once:!0}),this.videoElement.addEventListener("error",s,{once:!0})}else{this.isLoading=!1,this.loadFailed=!0;const l="No source available for this VideoInstance.";this.onError(l,"video_unavailable",null),void o(l)}}else i(this)})},t.prototype.play=function(){if(this.loadFailed){const t=navigator.onLine?"video_unavailable":"network_error";void this.onError("Attempted to play a failed instance.",t,null)}else{if(this.isLoaded){this.onSuccess();const e=this.videoElement.play();return void 0!==e&&e.catch(t=>{this.utils.p(f+"Play promise rejected: "+t)}),e}this.load().then(()=>{this.onSuccess(),this.videoElement.play()}).catch(t=>{this.utils.p(f+"Load failed on play(): "+t)})}},t.prototype.pause=function(){this.videoElement.pause()},t.prototype.destroy=function(){this.utils.p(f+"Destroying VideoInstance for "+this.videoData.vid),this.videoElement.pause(),this.hls&&(this.hls.destroy(),this.hls=null),this.events.yn(this.videoElement),this.videoElement.removeAttribute("src"),this.videoElement.load(),this.isLoaded=!1,this.isLoading=!1,this.videoElement.videoInstance&&(this.videoElement.videoInstance=null)},t.prototype.gn=function(n){this.hls&&(this.hls.on(Hls.Events.MANIFEST_PARSED,(t,e)=>{this.utils.p(f+"Manifest parsed for "+this.videoData.vid);for(let t=0;t<e.levels.length;t++){const n=e.levels[t];for(let e=0;e<n.url.length;e++){let t=n.url[e];t&&!t.includes("/hls/media-")&&(n.url[e]=t.replace("/media-","/hls/media-"),this.utils.p(f+"Rewrite url = "+n.url[e]))}}}),this.hls.on(Hls.Events.ERROR,(t,e)=>{if(this.utils.p(f+e.type+" "+e.details+" fatal="+e.fatal),e.fatal)if(this.isScrubbing)this.utils.p(f+"Scrubbing in progress, not destroying on fatal error.");else if(this.isLoading=!1,e.details&&"manifestLoadError"===e.details)this.hls.destroy();else switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:this.utils.p(f+"Fatal network error, trying to recover..."),this.hls.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:this.utils.p(f+"Fatal media error, trying to recover..."),this.hls.recoverMediaError();break;default:this.loadFailed=!0,this.utils.p(f+"Unrecoverable HLS error, destroying instance for "+this.videoData.vid),this.hls.destroy()}}),this.hls.on(Hls.Events.DESTROYING,()=>{if(this.isScrubbing||this.isRecovering)this.utils.p(f+"Scrubbing or recovering, not falling back to next source.");else if(this.videoData.sources.shift(),0<this.videoData.sources.length)this.utils.p(f+"Fallback to next source ("+this.videoData.sources[0].type+")"),this.load(this.videoElement.currentTime);else{const t="No more sources available for this VideoInstance.",e=(this.isLoading=!1,this.loadFailed=!0,navigator.onLine?"video_unavailable":"network_error");this.onError(t,e,null),n&&n(t)}}),this.hls.on(Hls.Events.LEVEL_SWITCHED,(t,e)=>{const n=this.hls.levels[e.level];let i=n.height?n.height+"p":"auto";switch(n.height){case 240:case 360:case 480:i+=" SD";break;case 720:case 1080:i+=" HD"}this.streamingQuality=i,this.sdk.v("contentQualityChanged",{content_quality:this.streamingQuality}),this.utils.p(f+"Switch quality to "+this.streamingQuality)}))},t})()),Bi=(()=>{const o="%c playlist_manager %c";function t(t,e){if(!t||!Array.isArray(t))throw new Error("PlaylistManager: A valid playlist array must be provided.");if(!e||!e.playlistAPI||!e.utils)throw new Error("PlaylistManager: All dependencies (playlistAPI, utils) must be provided.");this.In=t.map((t,e)=>({vid:t.vid,originalIndex:e,status:"unloaded",data:null,promise:null})),this.An=0,this.Sn=e.playlistAPI,this.kn=e.utils}return t.prototype.init=function(t){this.An=0<=t&&t<this.In.length?t:0},t.prototype.xn=function(n){const i=this.In[n];return i?(i.promise||(i.status="loading",this.kn.p(o+"Loading item at index: "+n),i.promise=new Promise(e=>{this.Sn.Tn({id:i.originalIndex,force_request:!1},t=>{this.kn.p(o+"Successfully fetched metadata for index: "+n),i.data=t,i.status="ready",e(i)},t=>{this.kn.p(o+`Failed to fetch metadata for index ${n}: `+t),i.status=navigator.onLine?"failed":"failed_network",e(i)})})),i.promise):Promise.reject(new Error("PlaylistManager: Invalid index "+n))},t.prototype.getItem=function(t){return t<0||t>=this.In.length?Promise.resolve(null):this.xn(t)},t.prototype.getCurrent=function(){return this.getItem(this.An)},t.prototype.getNext=function(){const t=(this.An+1)%this.In.length;return this.getItem(t)},t.prototype.getPrevious=function(){const t=(this.An-1+this.In.length)%this.In.length;return this.getItem(t)},t.prototype.moveNext=function(){return this.An=(this.An+1)%this.In.length,this.getCurrent()},t.prototype.movePrevious=function(){return this.An=(this.An-1+this.In.length)%this.In.length,this.getCurrent()},t.prototype.getCurrentIndex=function(){return this.An},t.prototype.retryFailedNetworkItems=function(){this.In.forEach(t=>{"failed_network"===t.status&&(t.status="unloaded",t.data=null,t.promise=null,this.xn(t.originalIndex))})},t})(),Hi=(()=>{const p="%c swipe %c",h=3;let n=!1,f=!1,m=null,e,_=0,i=!1,o=0,s=0,v=0;const b={container:null,previous:null,current:null,next:null,templateVideoElement:null},w={previous:null,current:null,next:null},a=t=>{t===w.current&&(0<_&&(Zt.p(p+"Current instance played. Resetting consecutive failure count."),_=0),b.current)&&Zt.J(b.current,"video-load-failed")},g=(e,t,n="video_unavailable")=>{Zt.p(p+`Instance failed: ${t}. Type: `+n);const i="network_error"===(e.failureType=n)?"video-network-error":"video-load-failed";if(e===w.current)Zt.p(p+("FAILURE ON *CURRENT* INSTANCE. Failures: "+(_+1))),++_>=h&&Zt.p(p+"Max failures reached. Stopping auto-advance."),b.current&&Zt.$(b.current,i);else{Zt.p(p+"Preload failure on non-active instance. Applying UI.");let t=null;e===w.next?t=b.next:e===w.previous&&(t=b.previous),t&&Zt.$(t,i)}},y=(t,e)=>{if(!t)return null;const n=e.querySelector("video");if(!n)return Zt.p(p+"Error: Could not find video element inside wrapper."),null;let i,o=!1;t.status.startsWith("failed")?o=!0:t.data||(Zt.p(p+"Error: Item is ready but data is missing. Creating dummy."),o=!0,t.status="failed"),i=o?{vid:t.vid,title:"Error: Video Unavailable",sources:[]}:t.data;const s=new zi(n,i,{onError:(t,e)=>{g(s,t,e)},onSuccess:()=>{a(s)},conf:Ht,utils:Zt,events:ee.En,sdk:Xt});return o&&(s.loadFailed=!0,Zt.$(e,"video-load-failed")),s};function r(t){const n=t.volume,i=t.muted,e=[b.previous,b.current,b.next];e.forEach(t=>{if(t){const e=t.querySelector("video");e&&(e.volume=n,e.muted=i)}}),b.templateVideoElement&&(b.templateVideoElement.volume=n,b.templateVideoElement.muted=i)}function c(t){Zt.p(p+"Creating DOM elements");const e=document.getElementById("player");e?(b.container=e,t?(b.templateVideoElement=t,b.current=I("swipe-current"),b.current.appendChild(t),e.appendChild(b.current),b.previous=I("swipe-previous"),b.next=I("swipe-next"),e.appendChild(b.previous),e.appendChild(b.next),Zt.$(t,"swipe-video")):Zt.p(p+"No original video element provided. Aborting setup.")):Zt.p(p+"No player container found. Aborting setup.")}function I(t){const e=document.createElement("div"),n=(Zt.$(e,"swipe-slot"),Zt.$(e,t),document.createElement("video")),i=(["playsinline","webkit-playsinline","autoplay"].forEach(t=>{b.templateVideoElement&&b.templateVideoElement.hasAttribute(t)&&n.setAttribute(t,b.templateVideoElement.getAttribute(t))}),b.templateVideoElement&&(n.muted=b.templateVideoElement.muted,n.volume=b.templateVideoElement.volume),Zt.$(n,"swipe-video"),e.appendChild(n),document.createElement("div"));return Zt.$(i,"swipe-error-overlay"),i.innerHTML='<span class="swipe-error-message"></span>',e.appendChild(i),e}function d(t){if(Zt.p(p+"Setting up instances around index: "+t),ee.Mn&&0!==ee.Mn.length){(m=new Bi(ee.Mn,{playlistAPI:ee.ee,utils:Zt})).init(t);const e=[m.getCurrent(),m.getPrevious(),m.getNext()];Promise.all(e).then(t=>{const[e,n,i]=t;w.current=y(e,b.current),n&&n.originalIndex!==e.originalIndex&&(w.previous=y(n,b.previous),w.previous.load().catch(()=>{})),i&&i.originalIndex!==e.originalIndex&&(w.next=y(i,b.next),w.next.load().catch(()=>{})),Zt.p(p+"All initial instances created and preloading."),ee.On(w.current)}).catch(t=>{ee.Cn(t)})}else Zt.p(p+"Playlist is empty. Aborting setup.")}function A(t,i="auto",e=!1){if(ee.Rn&&ee.Rn.hideScrollIndicator(),!f||e){const o="next"===t,n=o?w.next:w.previous;if(n){0===v&&(v=b.container.clientHeight),Zt.p(p+`Committing to ${t} video`),f=!0,o?m.moveNext():m.movePrevious(),T(!0),o?E(-v):E(v);const s=n,a=w.current,r=o?w.previous:w.next,c=o?b.next:b.previous,d=b.current,u=o?b.previous:b.next,l=(w.current.pause(),()=>{c.removeEventListener("transitionend",l),r&&r.destroy(),u&&b.container.contains(u)&&b.container.removeChild(u),Zt.J(d,"swipe-current"),Zt.$(d,o?"swipe-previous":"swipe-next"),Zt.J(c,o?"swipe-next":"swipe-previous"),Zt.$(c,"swipe-current");const n=I(o?"swipe-next":"swipe-previous"),t=(["playsinline","webkit-playsinline","muted","autoplay"].forEach(t=>{b.templateVideoElement.hasAttribute(t)&&n.setAttribute(t,b.templateVideoElement.getAttribute(t))}),Zt.$(n,"swipe-video"),Zt.$(n,o?"swipe-next":"swipe-previous"),o?v:-v),e=(n.style.transform=`translateY(${t}px)`,n.style.transitionDuration="0s",b.container.appendChild(n),(o?m.getNext():m.getPrevious()).then(t=>{if(!t||s.videoData&&t.originalIndex===s.videoData.originalIndex)return null;const e=y(t,n);return e&&!e.loadFailed&&e.load().catch(()=>{}),e}));e.then(t=>{if(w.current=s,b.current=c,o?(w.previous=a,w.next=t,b.previous=d,b.next=n):(w.next=a,w.previous=t,b.next=d,b.previous=n),w.current.loadFailed){if(g(w.current,"Instance failed on transition"),"auto"===i&&_<h)return Zt.p(p+"Skip-scrolling failed instance."),void setTimeout(()=>A("next","auto",!0),50);Zt.p(p+"MANUAL-SWIPE: Stopping on failed instance. User is in control.")}if(T(!1),E(0),ee.On(w.current),f=!1,window.parent){const e=m.getCurrentIndex();window.parent.postMessage({type:"event",event:"indexChanged",payload:{newIndex:e}},"*")}})});c.addEventListener("transitionend",l)}else Zt.p(p+`Commit failed: No ${t} instance.`),x()}}function t(t){f||(i=!0,o=(t.touches?t.touches[0]:t).clientY,v=b.container.clientHeight,T(!1))}function u(t){if(i){const e=(t.touches?t.touches[0]:t).clientY;E(s=e-o)}}function l(){if(i){T(!(i=!1));const t=.3*v;s<-t?A("next","manual"):s>t?A("previous","manual"):x(),s=0}}function S(t){f||(clearTimeout(e),e=setTimeout(()=>{0<t.deltaY?A("next","manual"):t.deltaY<0&&A("previous","manual")},50))}function k(){Zt.p(p+"Network connection restored. Retrying failed items...");const t=[w.current,w.previous,w.next].filter(t=>t&&t.loadFailed&&"network_error"===t.failureType);t.forEach(t=>{Zt.p(p+"Retrying load for instance: "+t.videoData.vid);let e=null;t===w.current&&(e=b.current),t===w.next&&(e=b.next),t===w.previous&&(e=b.previous),t.loadFailed=!1,t.failureType=null,e&&(Zt.J(e,"video-network-error"),Zt.J(e,"video-load-failed")),t.load().catch(()=>{})}),m&&"function"==typeof m.retryFailedNetworkItems&&m.retryFailedNetworkItems()}function x(){E(0)}function T(t){const e=t?"0.3s":"0s";b.previous&&(b.previous.style.transitionDuration=e),b.current&&(b.current.style.transitionDuration=e),b.next&&(b.next.style.transitionDuration=e)}function E(t=0){const e=-(v=0===v?b.container.clientHeight:v)+t,n=t,i=v+t;b.previous&&(b.previous.style.transform=`translateY(${e}px)`),b.current&&(b.current.style.transform=`translateY(${n}px)`),b.next&&(b.next.style.transform=`translateY(${i}px)`)}function M(){b.container.addEventListener("touchstart",t,{passive:!0}),b.container.addEventListener("touchmove",u,{passive:!0}),b.container.addEventListener("touchend",l),b.container.addEventListener("touchcancel",l),b.container.addEventListener("mousedown",t),b.container.addEventListener("mousemove",u),b.container.addEventListener("mouseup",l),b.container.addEventListener("mouseleave",l),b.container.addEventListener("wheel",S,{passive:!0}),window.addEventListener("online",k)}function O(t,e){n||(Zt.p(p+"Initializing Swipe Manager"),c(t),d(e),M(),ee.M.onStateChanged(r),n=!0)}function C(t){Zt.p(p+"Re-initializing Swipe Manager for index: "+t),w.previous&&w.previous.destroy(),w.current&&w.current.destroy(),w.next&&w.next.destroy(),w.previous=null,w.current=null,w.next=null,d(t)}function R(){n&&(Zt.p(p+"Destroying Swipe Manager"),b.container&&(b.container.removeEventListener("touchstart",t),b.container.removeEventListener("touchmove",u),b.container.removeEventListener("touchend",l),b.container.removeEventListener("touchcancel",l),b.container.removeEventListener("mousedown",t),b.container.removeEventListener("mousemove",u),b.container.removeEventListener("mouseup",l),b.container.removeEventListener("mouseleave",l),b.container.removeEventListener("wheel",S)),window.removeEventListener("online",k),w.previous&&w.previous.destroy(),w.current&&w.current.destroy(),w.next&&w.next.destroy(),b.previous&&b.previous.parentNode&&b.previous.parentNode.removeChild(b.previous),b.current&&b.current.parentNode&&b.current.parentNode.removeChild(b.current),b.next&&b.next.parentNode&&b.next.parentNode.removeChild(b.next),n=!1,f=!1,m=null,_=0,i=!1,w.previous=null,w.current=null,w.next=null,b.container=null,b.previous=null,b.current=null,b.next=null)}return{init:O,playVideo:C,destroy:R,commitNext:()=>A("next","auto"),clickNext:()=>A("next","manual"),clickPrevious:()=>A("previous","manual")}})();var G,T,z,B,H,n,$,r,J,F,W,K,Y,Z,c,X,Q,d,tt,et,u,nt,it,ot,st,at,rt,It,At,St,kt,xt,Mt,Ot,Ct,Rt,Lt,Vt,Nt,Dt,Pt,Ut,jt,qt,Gt,zt,Bt,Me,Oe,Ce,Re,Le,Ve,Ne,De,Pe,Et,l,Ue,je,qe,Ge,ze,Be,He,$e,Je,Fe,We,Ke,Ye,Ze,Xe,Qe,tn,en,nn,on,p,sn,an,rn,cn,dn,un,ln,pn,hn,fn,mn,_n,h,vn,bn,wn,gn,yn,In,An,f,Sn,kn,xn,Tn,En,Mn,On,Cn,Rn,m,_,v,Ln,Vn,Nn,Dn,Pn,Un,jn,qn,Gn,zn,Bn,Hn,$n,Jn,Fn,Wn,Kn,Yn,Zn,Xn,Qn,ti,ei,ni,ii,oi,si,ai,ri,dt=function(t){this.Ln=t,this.Pe=document.getElementById("vsly-player-container"),this.Vn=null,this.Nn=null,this.Dn=null,this.Pn=null,this.Un=null,this.jn=null,this.qn=null,this.Gn=null,this.zn=null,this.Bn=null,this.Hn=null,this.$n=null,this.Jn=!1,this.Fn=!1,this.Wn=!1,this.Kn=this.Yn.bind(this),this.Zn=this.Zn.bind(this),this.Xn=this.Xn.bind(this),this.Qn=this.Qn.bind(this),this.oe()},ci=(dt.prototype.oe=function(){var t=this,e=(this.Vn=document.createElement("div"),this.Vn.className="v-carouselPlaybackControls",this.Gn=document.createElement("div"),this.Gn.className="v-carouselPlaybackControls_gradient-top",this.Vn.appendChild(this.Gn),this.zn=document.createElement("div"),this.zn.className="v-carouselPlaybackControls_gradient-bottom",this.Vn.appendChild(this.zn),this.Dn=document.createElement("div"),this.Dn.className="v-carouselPlaybackControls_button v-carouselPlaybackControls_button-back",this.Dn.innerText="Back",this.Dn.addEventListener("click",function(){t.Ln.ti()}),this.Vn.appendChild(this.Dn),this.Nn=document.createElement("div"),this.Nn.className="v-carouselPlaybackControls_button v-carouselPlaybackControls_button-mute",this.Nn.addEventListener("click",function(){t.Ln.M.toggleMute()}),this.Vn.appendChild(this.Nn),this.Hn=document.createElement("div"),this.Hn.className="v-carouselPlaybackControls_title",this.Vn.appendChild(this.Hn),this.Pn=document.createElement("div"),this.Pn.className="v-carouselPlaybackControls_seekBar",this.Pn.addEventListener("mousedown",this.Zn),this.Pn.addEventListener("touchstart",this.Zn),this.Un=document.createElement("div"),this.Un.className="v-carouselPlaybackControls_seekBar_progress",this.Pn.appendChild(this.Un),this.Vn.appendChild(this.Pn),this.jn=document.createElement("div"),this.jn.className="v-carouselPlaybackControls_currentTime",this.Vn.appendChild(this.jn),this.qn=document.createElement("div"),this.qn.className="v-carouselPlaybackControls_duration",this.Vn.appendChild(this.qn),this.Bn=document.createElement("div"),this.Bn.className="v-carouselPlaybackControls_scrollIndicator",document.createElement("img")),e=(e.className="v-carouselPlaybackControls_scrollIndicator_icon",e.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTUuMDAwMDIgNC41MTE4NEwyLjkzNzY0IDYuNTc0MjZMMi4zNDgzOSA1Ljk4NTAxTDUuMDAwMDIgMy4zMzMzNEw3LjY1MTY4IDUuOTg1MDFMNy4wNjI0MyA2LjU3NDI2TDUuMDAwMDIgNC41MTE4NFoiIGZpbGw9IiNGOEY4RjgiLz4KPC9zdmc+Cg==",this.Bn.appendChild(e),document.createElement("div"));e.className="v-carouselPlaybackControls_scrollIndicator_text",e.textContent="Swipe up to see more videos",this.Bn.appendChild(e),this.Vn.appendChild(this.Bn),this.Pe.appendChild(this.Vn),this.Pe.addEventListener("mousemove",this.Kn),this.Pe.addEventListener("click",this.Kn),this.hide()},dt.prototype.ei=function(){this.ni(),this.$n=setTimeout(this.hide.bind(this),3e3)},dt.prototype.ni=function(){this.$n&&(clearTimeout(this.$n),this.$n=null)},dt.prototype.Yn=function(){this.show(),this.Wn||this.ei()},dt.prototype.updateMuteButton=function(t){t?this.Nn.classList.add("is-muted"):this.Nn.classList.remove("is-muted")},dt.prototype.updateSeekBar=function(t,e){0<e&&(this.Un.style.width=t/e*100+"%",this.jn.textContent=Zt.dt(t),this.qn.textContent=Zt.dt(e))},dt.prototype.updateTitle=function(t){this.Hn&&(this.Hn.textContent=t)},dt.prototype.destroy=function(){this.ni(),this.Pe.removeEventListener("mousemove",this.Kn),this.Pe.removeEventListener("click",this.Kn),this.Vn&&this.Vn.parentNode&&this.Vn.parentNode.removeChild(this.Vn)},dt.prototype.show=function(t){"boolean"==typeof t&&(this.Jn=t),this.Vn.style.display="block",this.updateMuteButton(this.Ln.M.getState().muted),this.Bn&&(this.Fn?this.Bn.style.display="none":this.Bn.style.display=this.Jn?"block":"none"),this.ei()},dt.prototype.hide=function(){this.Vn.style.display="none",this.ni()},dt.prototype.ii=function(t){var e=this.Pn.getBoundingClientRect(),n=t.clientX;t.touches&&0<t.touches.length?n=t.touches[0].clientX:t.changedTouches&&0<t.changedTouches.length&&(n=t.changedTouches[0].clientX);t=Math.max(0,Math.min(n-e.left,e.width))/e.width,n=this.Ln.et();return n&&isFinite(n.duration)?{time:n.duration*t,percentage:t}:{time:0,percentage:0}},dt.prototype.Zn=function(t){t.preventDefault(),this.Wn=!0,this.ni();var e=this.Ln.et();e&&(e.videoInstance&&(e.videoInstance.isScrubbing=!0),e.pause(),t=this.ii(t),this.updateSeekBar(t.time,e.duration)),window.addEventListener("mousemove",this.Xn),window.addEventListener("mouseup",this.Qn),window.addEventListener("touchmove",this.Xn),window.addEventListener("touchend",this.Qn)},dt.prototype.Xn=function(t){var e;this.Wn&&(t=this.ii(t),e=this.Ln.et())&&this.updateSeekBar(t.time,e.duration)},dt.prototype.Qn=function(t){var e;this.Wn&&(this.Wn=!1,(e=this.Ln.et())&&(t=this.ii(t),e.currentTime=t.time,void 0!==(t=e.play())?t.then(function(){e&&e.videoInstance&&(e.videoInstance.isScrubbing=!1)}).catch(function(t){e&&e.videoInstance&&(e.videoInstance.isScrubbing=!1)}):e&&e.videoInstance&&(e.videoInstance.isScrubbing=!1)),window.removeEventListener("mousemove",this.Xn),window.removeEventListener("mouseup",this.Qn),window.removeEventListener("touchmove",this.Xn),window.removeEventListener("touchend",this.Qn),this.ei())},dt.prototype.hideScrollIndicator=function(){this.Bn&&(this.Bn.style.display="none",this.Fn=!0)},"%c ima %c"),di=(()=>{let G,z,B,H,$,J,F,W,K,Y,Z,X,Q,tt,et,nt,it,ot,st,at,rt,ct,dt,ut,lt,pt,ht,ft,mt,_t,vt;function t(t){G=t.getUtils,z=t.getIma,B=t.getResize,H=t.getAdsManager,$=t.getVastInfosEventFn,J=t.getConf,W=t.getPlayer,K=t.getAd,Y=t.getSdk,Z=t.getKillAdsmanager,X=t.getIsBidderDisplay,Q=t.getSkipFn,tt=t.getCompanionAdsFromAdFn,et=t.getInitViewabilityTracking,nt=t.getTriggerSdkEventForBidder,it=t.getHandleMrcFn,ot=t.getTimeoutAllAdsCompleted,st=t.setTimeoutAllAdsCompleted,at=t.getHasVastBeenKilledFn,rt=t.getCleanFn,ct=t.getInitSDKFn,dt=t.getIsVASTBooster,ut=t.getIsVASTAdserving,lt=t.getIsExternalVAST,pt=t.getRefetchVastFn,mt=t.getAdViouslyState,_t=t.getAdContainer,vt=t.oi,this.onAdEvent=this.onAdEvent.bind(this),this.si=Mi,this.ai=Oi,this.ri=Ci,this.ci=Ri}return t.prototype.enrich=function(t){F=t.getAVideoIndex,ht=t.getVastIndex,ft=t.getAdState},t.prototype.onAdEvent=function(t){const i=G(),e=z(),n=B(),o=H(),s=$(),a=J(),r=F(),c=W(),d=K(),u=Y(),l=Z(),p=X(),h=Q(),D=tt(),P=et(),f=nt(),m=it(),U=at(),_=rt(),v=(ct(),dt()),b=ut(),w=lt(),g=pt(),j=ht(),y=ft(),I=mt();let A=ot();var S=c.g(r),k=t&&t.context_vast?t.context_vast:S.vasts[i.lt(S.vasts,"vast_index",j)],x=t.type,T="function"==typeof t.getAd?t.getAd():null,E=i.Nt(k)?"google":"prebid";if("adProgress"!=x&&i.p(ci+x+" : "+e.di(k)),T&&(k.advertising_universal_ad_id=k.advertising_universal_ad_id||T.getUniversalAdIdValue()||"unknown",k.advertising_vast_media_bitrate=k.advertising_vast_media_bitrate||T.getVastMediaBitrate()||0,k.advertising_wrapper_ad_id=k.advertising_wrapper_ad_id||T.getWrapperAdIds()||[],k.advertising_wrapper_ad_system=k.advertising_wrapper_ad_system||T.getWrapperAdSystems()||[],k.advertising_wrapper_creative_id=k.advertising_wrapper_creative_id||T.getWrapperCreativeIds()||[],k.advertising_title=k.advertising_title||T.getTitle()||"",k.advertising_id=k.advertising_id||T.getAdId()||"",k.advertising_name=k.advertising_name||T.getAdvertiserName()||"",k.advertising_creative_ad_id=k.advertising_creative_ad_id||T.getCreativeAdId()||"",k.advertising_creative_id=k.advertising_creative_id||(T.getCreativeId()?T.getCreativeId().toString():""),k.advertising_deal_id=k.advertising_deal_id||T.getDealId()||"",k.advertising_duration=k.advertising_duration||(T.getDuration()?parseInt(T.getDuration()):-1),k.advertising_vast_media_height=k.advertising_vast_media_height||T.getVastMediaHeight()||0,k.advertising_vast_media_width=k.advertising_vast_media_width||T.getVastMediaWidth()||0,k.ad_infos_event="&auai="+k.advertising_universal_ad_id+"&avmb="+k.advertising_vast_media_bitrate+"&awai="+k.advertising_wrapper_ad_id+"&awas="+k.advertising_wrapper_ad_system+"&awci="+k.advertising_wrapper_creative_id+"&aat="+k.advertising_title+"&aai="+k.advertising_id+"&aan="+k.advertising_name+"&acai="+k.advertising_creative_ad_id+"&aci="+k.advertising_creative_id+"&adi="+k.advertising_deal_id+"&aad="+k.advertising_duration+"&avmh="+k.advertising_vast_media_height+"&avmw="+k.advertising_vast_media_width),["loaded","start","firstQuartile","midpoint","thirdQuartile","complete"].includes(x)&&(45==k.id_vast_type||"8"==k.id_ssp||"9"==k.id_ssp||"17"==k.id_ssp)&&!k.advertising_title&&!k.advertising_name&&!k.advertising_vast_media_bitrate&&!k.advertising_creative_ad_id&&!k.advertising_creative_id&&!k.advertising_deal_id&&!k.advertising_vast_media_height&&!k.advertising_vast_media_width)return k.killed_at_load||(k.killed_at_load=!0,o&&o.stop(),i.p(ci+"Ad don't fire ad_impression event. Ad ignored."),i.v(67,null,!1,!0,s(k)+"&aem=adfa"),1==a.admin.vd.xv&&Math.random()>=1-a.admin.vd.ds&&"16"==k.id_ssp&&k.prebid&&1==k.prebid&&1==k.s2s&&i.nt(k.url,function(t,e){var n="";if(200===e)try{n=(new XMLSerializer).serializeToString(t.documentElement)}catch(t){n="serialize_error"}else n="xhr_error";n=n||"undefined_vast",i.p(ci+"VAST content is "+n),i.v(82,r,!1,!0,s(k,!1)+"&xv="+encodeURIComponent(encodeURIComponent(n)))})),!1;switch(x){case"loaded":case"start":case"impression":this.ai(T,k),"loaded"==x&&0==y.ad_loaded&&(y.ad_loaded=!0,_t().style.display="block",o&&c.M.setAdManager(o),i.p(k,!0),141!=k.id_vast_type&&c.ui("ad-buffering"),i.v(37,null,!1,!1,s(k,!0))),"impression"==x&&0==y.ad_impression&&(y.ad_impression=!0,w(k)||te.ne(),i.v(39,null,!1,!1,s(k)+(p?"&suuid="+a.sparteo.uuid:"")),0==bt&&(i.p(ci+"viously_impression"),i.v(83,null,!0,!1,s(k)),bt=!0),k.impression_notice_urls&&i.gt(k.impression_notice_urls),a.advertising.bidder)&&a.advertising.bidder.billable_impression_urls&&(i.gt(a.advertising.bidder.billable_impression_urls),a.advertising.bidder.billable_impression_urls=null),"start"==x&&0==y.ad_start&&(y.ad_start=!0,o&&c.M.setAdManager(o),141==k.id_vast_type?c.ui("ad-banner"):c.ui("advertising"),0==parseInt(d.li)&&u.v("adSlateStart",{ad_type:"preroll",ad_engine:E}),v(k)?u.v("adVastStart",{ad_vast_type:"booster",ad_type:"preroll",ad_engine:E}):b(k)?u.v("adVastStart",{ad_vast_type:"adserving",ad_type:"preroll",ad_engine:E}):0==I.adVastStart&&(I.adVastStart=!0,I.adVastDuration+=k.advertising_duration,u.v("adVastStart",{ad_vast_type:"viously",ad_type:"preroll",ad_engine:E})),w(k)&&te.ye(),i.v(38,null,!1,!0,s(k,!0)),0<l.TIMER&&(clearTimeout(l.TIMER),l.TIMER=0),T&&(M=-2,!(0<=(M=i.Nt(k)?parseInt(T.getSkipTimeOffset()):M))&&parseInt(T.getDuration())>=be?k.skippable=!0:k.skippable=!1),d.pi=!0,k.played=!0,vt(!0),c.fi.hi(!0),"function"==typeof t.getAd&&(n(),i.K(window,"resize",n),p||(i.Y(document.getElementById("ad-skip-button"),"click",h),d.mi=!1,M=document.getElementById("ad-play-pause"),i.$(M,"ad-pause")),D(k,t.getAd()))&&c.vi._i(k),P(r,k.vast_index),a.advertising.bidder&&a.advertising.bidder.ad_unit_id&&f("firstAdStart",a.advertising.bidder.ad_unit_id),parseInt(d.li)+1<a.template.advertising.linear.max_preroll_viously)&&(g(r,k,!0),y.refetch_vast=!0);break;case"firstQuartile":0==y.ad_first_quartile&&(y.ad_first_quartile=!0,i.v(44,null,!1,!1,s(k)),m(r,k));break;case"midpoint":0==y.ad_midpoint&&(y.ad_midpoint=!0,i.v(45,null,!1,!1,s(k)));break;case"thirdQuartile":0==y.ad_third_quartile&&(y.ad_third_quartile=!0,i.v(46,null,!1,!1,s(k)));break;case"skip":i.v(43,null,!1,!1,s(k,!0)),v(k)?u.v("adVastSkip",{ad_vast_type:"booster",ad_type:"preroll",ad_engine:E}):b(k)?u.v("adVastSkip",{ad_vast_type:"adserving",ad_type:"preroll",ad_engine:E}):0==I.adVastSkip&&(I.adVastSkip=!0,u.v("adVastSkip",{ad_vast_type:"viously",ad_type:"preroll",ad_engine:E})),this.si(T,o,i,s,k);break;case"userClose":i.v(42,null,!1,!1,s(k,!0));break;case"complete":0==y.ad_complete&&(y.ad_complete=!0,i.v(41,null,!1,!1,s(k,!0)),c.M.removeAdManager(),c.wi.bi&&c.gi(),this.ri(T,o,i),o&&"function"==typeof o.discardAdBreak&&o.discardAdBreak(),A=window.setTimeout(function(){this.onAdEvent({type:"allAdsCompleted"})}.bind(this),1e3),st(A),a.advertising.bidder)&&a.advertising.bidder.ad_unit_id&&f("firstAdComplete",a.advertising.bidder.ad_unit_id);break;case"allAdsCompleted":clearTimeout(A),c.ui("buffering"),!0===d.yi&&(U(k)||(d.li=parseInt(d.li)+1),i.p(ci+"ads completed = "+parseInt(d.li)),141!=k.id_vast_type&&(o&&o.destroy(),k.adsLoader.contentComplete()),v(k)?u.v("adVastComplete",{ad_vast_type:"booster",ad_vast_duration:k.advertising_duration,ad_type:"preroll",ad_engine:E}):b(k)&&u.v("adVastComplete",{ad_vast_type:"adserving",ad_vast_duration:k.advertising_duration,ad_type:"preroll",ad_engine:E}),k.ad=!1,parseInt(d.li)>=a.template.advertising.linear.max_preroll_viously?(d.li=parseInt(d.li)-1,i.v(58,null,!1,!1,s(k)),u.v("adSlateComplete",{ad_type:"preroll",ad_engine:E}),0==I.adVastComplete&&(I.adVastComplete=!0,u.v("adVastComplete",{ad_vast_type:"viously",ad_vast_duration:I.adVastDuration,ad_type:"preroll",ad_engine:E})),d.li=0,c.Ii(a.admin.current_index),_(!0)):k.killed||k.killed_at_load?(_(!1),e.Ai(a.admin.current_index,!0)):(_(!1),i.v(76,r,!1,!1,"&adix="+parseInt(d.li)),1!=y.refetch_vast&&parseInt(d.li)<a.template.advertising.linear.max_preroll_viously?g(r,k):e.Ai(a.admin.current_index,!0))),r!=a.admin.current_index&&c.ee.Si(a.admin.current_index);break;case"adProgress":var M="",O="",C=t.getAdData()?t.getAdData().duration:k.advertising_duration||-1,q=t.getAdData()?t.getAdData().currentTime:0,R=o&&"function"==typeof o.getRemainingTime?o.getRemainingTime():0;if(0<R){const N=c.et();if(!N)return;M=N.offsetWidth<=200?a.admin.lng.remainingsmall.replace("xx",parseInt(R,10)):1!=a.template.advertising.linear.max_preroll_viously&&a.template.advertising.linear.show_remaining_ads?a.admin.lng.remainingads.replace("%%INDEX%%",parseInt(d.li+1)).replace("%%LENGTH%%",a.template.advertising.linear.max_preroll_viously).replace("%%TIME%%",i.dt(parseInt(R,10))):a.admin.lng.remaining.replace("xx",parseInt(R,10));1==k.skippable&&be<=C&&(ve<=(C=-1<R&&-1<C?C-R:-1)?(p||d.mi||(i.K(document.getElementById("ad-skip-button"),"click",h),document.getElementById("ad-skip-button").style.pointerEvents="auto",d.mi=!0),1==c.xi.ki()?M=a.admin.lng.goskip:O=a.admin.lng.skiptext,wt<=q&&(i.p(ci+"Try auto skip"),h())):O=a.admin.lng.skipin.replace("xx",parseInt(ve-C,10)))}0==q&&(M=a.admin.lng.loading),p||(""==O?i.J(document.body,"show-ad-skip"):i.$(document.body,"show-ad-skip"),document.getElementById("ad-skip-button-text").textContent=O,document.getElementById("ad-countdown").textContent=M),m(r,k);break;case"adCanPlay":i.v(52,null,!1,!1,s(k));break;case"volumeChange":const L=o.getVolume(),V=c.M.getState().volume;0<=L&&L!==V&&o.setVolume(V);break;case"click":i.v(57,null,!1,!1,s(k,!0)),v(k)?u.v("adVastClick",{ad_vast_type:"booster",ad_type:"preroll",ad_engine:E}):b(k)?u.v("adVastClick",{ad_vast_type:"adserving",ad_type:"preroll",ad_engine:E}):0==I.adVastClick&&(I.adVastClick=!0,u.v("adVastClick",{ad_vast_type:"viously",ad_type:"preroll",ad_engine:E}));break;case"videoClicked":i.v(68,null,!1,!1,s(k,!0));break;case"videoIconClicked":i.v(69,null,!1,!1,s(k));break;case"resume":p||vt(!0);break;case"pause":p||vt(!1);break;case"error":case"adBreakFetchError":141!=k.id_vast_type&&(c.M.removeAdManager(),o&&o.destroy(),k.adsLoader.contentComplete()),c.wi.bi&&c.gi(),_(!1),this.ci(S,k),e.Ti.call(t.error,"AD_ERROR",r,j)}},t})(),ui=("undefined"!=typeof module&&module.exports&&(module.exports=di,module.exports.si=Mi,module.exports.ai=Oi,module.exports.ri=Ci,module.exports.ci=Ri),(()=>{const b="%c adserve %c",n="adserve-ad-slot",t={ad_loaded:!1,ad_impression:!1,ad_start:!1,ad_first_quartile:!1,ad_midpoint:!1,ad_third_quartile:!1,ad_complete:!1,refetch_vast:!1},e=()=>Object.assign({},t),w={},i=[];let o=0;function s(t){for(var[e,n]of i.entries())n&&n.video_index!==t&&(n.destroy(),i[e]=null)}function a(t,e,n){this.initialised=!1,this.destroyed=!1,s(e),i.push(this),this.id=o++,Object.assign(w,t),this.video_index=e,this.vast_index=n,this.requestOptions={},this.adSource="",this.adProgressTimeout=0,this.adSlot=this.getAdSlot(),this.manager=new adserve.AdsManager(this.adSlot),this.manager._ownSlot.dataset.instanceNumber=this.id,this.manager._videoSlot.dataset.instanceNumber=this.id,this.loadedAdResolve=null,this.loadedAdReject=null,this.loadedAd=new Promise((t,e)=>{this.loadedAdResolve=t,this.loadedAdReject=e;const s=w.getUtils(),a=w.getPlayer();this.manager.addEventListener("AdsManagerLoaded",t=>{s.p(b+"AdsManagerLoaderAdserve -- ADS_MANAGER_LOADED"+` ${this.video_index} ${this.vast_index} instance #${this.id} `),this.Ei();const e=a.et(),n=e.clientWidth,i=e.clientHeight,o="normal";this.manager.init(n,i,o)}),this.manager.addEventListener("AdError",t=>{if(s.p(b+"AdRequestLoaderAdserve AdsManagerLoaded Error"+` ${this.video_index} ${this.vast_index} instance #${this.id}  `+JSON.stringify(t)),-1<t.message.indexOf("XHRURLHandler")&&(s.p(b+'AdRequestLoaderAdserve requestAds failed, retry with "withCredentials: false" '+` ${this.video_index} ${this.vast_index} instance #`+this.id),this.requestOptions.withCredentials))this.requestOptions.withCredentials=!1,this.load(this.adSource,this.requestOptions);else{const e=s.Pt(t);this.destroy(e)}})}),this.init()}return a.prototype.init=function(){const t=w.getUtils();if(!this.initialised)try{this.initialised=!0,this.adState=e(),t.p(b+"AdRequestLoaderAdserve init"+` ${this.video_index} ${this.vast_index} instance #${this.id} `)}catch(t){}},a.prototype.start=function(){Zt.p(b+"AdsManagerLoaderAdserve.prototype.start"+(new Error).stack);const t=i.some(t=>t&&!t.destroyed&&t.adState.ad_start&&!t.adState.ad_complete);t||(this.manager.showSlot(),this.manager.start())},a.prototype.load=function(t,e={}){const n=w.getUtils();return this.adSource=t,this.requestOptions=e,n.p(b+"AdRequestLoaderAdserve load"+` ${this.video_index} ${this.vast_index} instance #${this.id}  `+t+"with options: "+JSON.stringify(e)),this.manager.requestAds(t,e),this},a.prototype.destroy=function(t={}){const e=w.getUtils();e.p(b+"AdRequestLoaderAdserve destroy"+` ${this.video_index} ${this.vast_index} instance #${this.id} `+(new Error).stack),this.loadedAdReject&&(e.p(b+("Rejecting pending promise for losing instance #"+this.id)),this.loadedAdReject(t),this.loadedAdReject=null,this.loadedAdResolve=null),this.manager.destroy(),this.destroyed=!0},a.prototype.getAdSlot=function(){let t=document.getElementById(n);return t=null===t?this.createAdSlot():t},a.prototype.createAdSlot=function(){const t=w.getAdContainer().parentElement,e=document.createElement("div");return e.id=n,Object.assign(e.style,{width:"100%",height:"100%",position:"absolute",zIndex:1,boxSizing:"border-box",display:"none"}),t.append(e),e},a.prototype.Ei=function(){this.manager.addEventListener("AdStarted",(...t)=>this.onAdStarted(...t)),this.manager.addEventListener("AdStopped",(...t)=>this.onAdStopped(...t)),this.manager.addEventListener("AdSkipped",(...t)=>this.onAdSkipped(...t)),this.manager.addEventListener("AdLoaded",(...t)=>this.onAdLoaded(...t)),this.manager.addEventListener("AdLinearChange",(...t)=>this.onAdLinearChange(...t)),this.manager.addEventListener("AdSizeChange",(...t)=>this.onAdSizeChange(...t)),this.manager.addEventListener("AdExpandedChange",(...t)=>this.onAdExpandedChange(...t)),this.manager.addEventListener("AdSkippableStateChange",(...t)=>this.onAdSkippableStateChange(...t)),this.manager.addEventListener("AdDurationChange",(...t)=>this.onAdDurationChange(...t)),this.manager.addEventListener("AdRemainingTimeChange",(...t)=>this.onAdRemainingTimeChange(...t)),this.manager.addEventListener("AdVolumeChange",(...t)=>this.onAdVolumeChange(...t)),this.manager.addEventListener("AdImpression",(...t)=>this.onAdImpression(...t)),this.manager.addEventListener("AdClickThru",(...t)=>this.onAdClickThru(...t)),this.manager.addEventListener("AdInteraction",(...t)=>this.onAdInteraction(...t)),this.manager.addEventListener("AdVideoStart",(...t)=>this.onAdVideoStart(...t)),this.manager.addEventListener("AdVideoFirstQuartile",(...t)=>this.onAdVideoFirstQuartile(...t)),this.manager.addEventListener("AdVideoMidpoint",(...t)=>this.onAdVideoMidpoint(...t)),this.manager.addEventListener("AdVideoThirdQuartile",(...t)=>this.onAdVideoThirdQuartile(...t)),this.manager.addEventListener("AdVideoComplete",(...t)=>this.onAdVideoComplete(...t)),this.manager.addEventListener("AdUserAcceptInvitation",(...t)=>this.onAdUserAcceptInvitation(...t)),this.manager.addEventListener("AdUserMinimize",(...t)=>this.onAdUserMinimize(...t)),this.manager.addEventListener("AdUserClose",(...t)=>this.onAdUserClose(...t)),this.manager.addEventListener("AdPaused",(...t)=>this.onAdPaused(...t)),this.manager.addEventListener("AdPlaying",(...t)=>this.onAdPlaying(...t)),this.manager.addEventListener("AdLog",(...t)=>this.onAdLog(...t)),this.manager.addEventListener("AllAdsCompleted",(...t)=>this.onAllAdsCompleted(...t)),this.manager.addEventListener("AdError",(...t)=>this.onAdError(...t))},a.prototype.getVolume=function(){return this.manager.getVolume()},a.prototype.setVolume=function(t){this.manager.setVolume(t)},a.prototype.resize=function(...t){this.manager.resize(...t)},a.prototype.resume=function(){this.manager.resume()},a.prototype.skip=function(){this.manager.skip()},a.prototype.stop=function(){this.manager.stop()},a.prototype.pause=function(){this.manager.pause()},a.prototype.startSyntheticAdProgress=function(){this.stopSyntheticAdProgress();const e=()=>{this.onAdDurationChange();const t=this.manager.getRemainingTime();0<t?this.adProgressTimeout=setTimeout(e,500):this.stopSyntheticAdProgress()};e()},a.prototype.stopSyntheticAdProgress=function(){this.adProgressTimeout&&(clearTimeout(this.adProgressTimeout),this.adProgressTimeout=null)},a.prototype.onAdStarted=function(t={}){t=t||{},w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_STARTED"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `);const e=w.getAd(),n=w.getConf(),i=w.getPlayer(),o=w.getSdk(),s=w.getUtils(),a=w.getVastInfosEventFn(),r=w.getKillAdsmanager(),c=w.getResize(),d=w.getIsBidderDisplay(),u=w.getInitViewabilityTracking(),l=w.getTriggerSdkEventForBidder(),p=w.getSkipFn(),h=(w.getIsVASTBooster(),w.getIsExternalVAST()),f=w.getRefetchVastFn(),m=w.getContentCost(),_=i.g(this.video_index),v=_.vasts[s.lt(_.vasts,"vast_index",this.vast_index)];0==this.adState.ad_start&&(this.adState.ad_start=!0,this.manager&&i.M.setAdManager(this.manager),141==v.id_vast_type?i.ui("ad-banner"):i.ui("advertising"),0==parseInt(e.li)&&o.v("adSlateStart"),h(v)&&m.ye(),s.v(38,null,!1,!0,a(v,!0)),0<r.TIMER&&(clearTimeout(r.TIMER),r.TIMER=0),e.pi=!0,v.played=!0,w.oi(!0),i.fi.hi(!0),c(),s.K(window,"resize",c),d||(s.Y(document.getElementById("ad-skip-button"),"click",p),document.getElementById("ad-skip-button").style.pointerEvents="auto",e.mi=!1,t=document.getElementById("ad-play-pause"),s.$(t,"ad-pause")),u(this.video_index,v.vast_index),n.advertising.bidder&&n.advertising.bidder.ad_unit_id&&l("firstAdStart",n.advertising.bidder.ad_unit_id),parseInt(e.li)+1<n.template.advertising.linear.max_preroll_viously)&&(f(this.video_index,v,!0),this.adState.refetch_vast=!0)},a.prototype.onAdStopped=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_STOPPED"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `)},a.prototype.onAdSkipped=function(t={}){this.stopSyntheticAdProgress();const e=w.getPlayer(),n=w.getUtils(),i=w.getVastInfosEventFn(),o=e.g(this.video_index),s=o.vasts[n.lt(o.vasts,"vast_index",this.vast_index)];n.p(b+"AdsManagerLoaderAdserve -- AD_SKIPPED"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),n.v(43,null,!1,!1,i(s,!0))},a.prototype.onAdLoaded=function(t){const e=w.getUtils(),n=w.getPlayer(),i=(w.getConf(),w.getPrefetchState()),o=w.getVastInfosEventFn(),s=(e.p(b+"AdsManagerLoaderAdserve -- AD_LOADED "+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),w.getAd()),a=(this.manager.hideSlot(),n.g(this.video_index)),r=a.vasts[e.lt(a.vasts,"vast_index",this.vast_index)];if(0==this.adState.ad_loaded){if(this.adState.ad_loaded=!0,141==r.id_vast_type||s.pi||i.Mi||n.ui("ad-buffering"),t.isLinear())try{this.loadedAdResolve({adsManager:this,ad:t}),this.loadedAdResolve=null}catch(t){e.p(b+"AdsManagerLoaderAdserve -- ERROR @ AD_LOADED"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `)}e.p(r,!0),e.v(37,null,!1,!1,o(r,!0))}},a.prototype.onAdLinearChange=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_LINEAR_CHANGE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `)},a.prototype.onAdSizeChange=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_SIZE_CHANGE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `)},a.prototype.onAdExpandedChange=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_EXPANDED_CHANGE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `)},a.prototype.onAdSkippableStateChange=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_SKIPPABLE_STATE_CHANGE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `)},a.prototype.onAdDurationChange=function(t=0){const e=w.getUtils(),n=w.getConf(),p=w.getAd(),h=w.getPlayer(),i=w.getIsBidderDisplay(),o=w.getHandleMrcFn(),s=h.g(this.video_index),a=s.vasts[e.lt(s.vasts,"vast_index",this.vast_index)];var r=this.manager?this.manager.getDuration():0,c=this.manager?this.manager.getRemainingTime():0,d=-1<c?r-c:-1;function u(t,e,n,i){const o=w.getConf(),s=w.getUtils();let a="",r="";if(!(n<=0)&&(a=c(),be<=e)){const l=-1<e&&-1<n?e-n:-1;r=u(l)}return{messageCountdown:a,messageSkipButton:r};function c(){const t=h.et()?h.et().offsetWidth:0;return t<=200?o.admin.lng.remainingsmall.replace("xx",parseInt(n,10)):1!=o.template.advertising.linear.max_preroll_viously&&o.template.advertising.linear.show_remaining_ads?o.admin.lng.remainingads.replace("%%INDEX%%",parseInt(p.li+1)).replace("%%LENGTH%%",o.template.advertising.linear.max_preroll_viously).replace("%%TIME%%",s.dt(parseInt(n,10))):o.admin.lng.remaining.replace("xx",parseInt(n,10))}function d(){const t=w.getSkipFn(),e=w.getIsBidderDisplay(),n=w.getAd();e||n.mi||(s.K(document.getElementById("ad-skip-button"),"click",t),n.mi=!0)}function u(t){const e=w.getPlayer(),n=w.getSkipFn();return ve<=t?(d(),wt<=i&&(w.getUtils().p(b+"Try auto skip"),n()),e.xi.ki()?o.admin.lng.goskip:o.admin.lng.skiptext):o.admin.lng.skipin.replace("xx",parseInt(ve-t,10))}}c<=0&&this.stopSyntheticAdProgress();let{messageCountdown:l,messageSkipButton:f}=u(a,r,c,d);0==d&&(l=n.admin.lng.loading),i||(""==f?e.J(document.body,"show-ad-skip"):e.$(document.body,"show-ad-skip"),document.getElementById("ad-skip-button-text").textContent=f,document.getElementById("ad-countdown").textContent=l),o(this.video_index,a)},a.prototype.onAdRemainingTimeChange=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_REMAINING_TIME_CHANGE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),this.onAdDurationChange(t)},a.prototype.onAdVolumeChange=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_VOLUME_CHANGE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `);const e=this.manager.getVolume(),n=w.getPlayer().M.getState().volume;0<=e&&e!==n&&this.manager.setVolume(n)},a.prototype.onAdImpression=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_IMPRESSION"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `);const e=w.getPlayer(),n=w.getUtils(),i=w.getConf(),o=w.getVastInfosEventFn(),s=w.getIsExternalVAST(),a=w.getIsBidderDisplay(),r=w.getContentCost(),c=e.g(this.video_index),d=c.vasts[n.lt(c.vasts,"vast_index",this.vast_index)];0==this.adState.ad_impression&&(this.adState.ad_impression=!0,s(d)||r.ne(),n.v(39,null,!1,!1,o(d)+(a?"&suuid="+i.sparteo.uuid:"")),0==bt&&(n.p(b+"viously_impression"),n.v(83,null,!0,!1,o(d)),bt=!0),d.impression_notice_urls&&n.gt(d.impression_notice_urls),i.advertising.bidder)&&i.advertising.bidder.billable_impression_urls&&(n.gt(i.advertising.bidder.billable_impression_urls),i.advertising.bidder.billable_impression_urls=null)},a.prototype.onAdClickThru=function(t,e,n){const i=w.getPlayer(),o=w.getUtils(),s=w.getVastInfosEventFn(),a=i.g(this.video_index),r=a.vasts[o.lt(a.vasts,"vast_index",this.vast_index)];o.p(b+"AdsManagerLoaderAdserve -- AD_CLICK_THRU"+JSON.stringify({url:t,id:e,playerHandles:n})+` ${this.video_index} ${this.vast_index} instance #${this.id} `),o.v(57,null,!1,!1,s(r,!0))},a.prototype.onAdInteraction=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_INTERACTION"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `)},a.prototype.onAdVideoStart=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_VIDEO_START"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),this.startSyntheticAdProgress()},a.prototype.onAdVideoFirstQuartile=function(t={}){const e=w.getUtils(),n=w.getPlayer(),i=w.getVastInfosEventFn(),o=w.getHandleMrcFn(),s=n.g(this.video_index),a=s.vasts[e.lt(s.vasts,"vast_index",this.vast_index)];e.p(b+"AdsManagerLoaderAdserve -- AD_VIDEO_FIRST_QUARTILE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),0==this.adState.ad_first_quartile&&(this.adState.ad_first_quartile=!0,e.v(44,null,!1,!1,i(a)),o(this.video_index,a))},a.prototype.onAdVideoMidpoint=function(t={}){const e=w.getUtils(),n=w.getPlayer(),i=w.getVastInfosEventFn(),o=n.g(this.video_index),s=o.vasts[e.lt(o.vasts,"vast_index",this.vast_index)];e.p(b+"AdsManagerLoaderAdserve -- AD_VIDEO_MIDPOINT"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),0==this.adState.ad_midpoint&&(this.adState.ad_midpoint=!0,e.v(45,null,!1,!1,i(s)))},a.prototype.onAdVideoThirdQuartile=function(t={}){const e=w.getUtils(),n=w.getPlayer(),i=w.getVastInfosEventFn(),o=n.g(this.video_index),s=o.vasts[e.lt(o.vasts,"vast_index",this.vast_index)];e.p(b+"AdsManagerLoaderAdserve -- AD_VIDEO_THIRD_QUARTILE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),0==this.adState.ad_third_quartile&&(this.adState.ad_third_quartile=!0,e.v(46,null,!1,!1,i(s)))},a.prototype.onAdVideoComplete=function(t={}){this.stopSyntheticAdProgress();const e=w.getConf(),n=w.getUtils(),i=w.getPlayer(),o=w.getVastInfosEventFn(),s=w.getTriggerSdkEventForBidder(),a=i.g(this.video_index),r=a.vasts[n.lt(a.vasts,"vast_index",this.vast_index)];let c=w.getTimeoutAllAdsCompleted();var d;w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_VIDEO_COMPLETE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),0==this.adState.ad_complete&&(this.adState.ad_complete=!0,n.v(41,null,!1,!1,o(r,!0)),i.M.removeAdManager(),i.wi.bi&&i.gi(),d=this,setTimeout(function(){d.manager&&d.manager.abort()},50),c=window.setTimeout(()=>this.onAllAdsCompleted(),1e3),w.setTimeoutAllAdsCompleted(c),e.advertising.bidder)&&e.advertising.bidder.ad_unit_id&&s("firstAdComplete",e.advertising.bidder.ad_unit_id)},a.prototype.onAdUserAcceptInvitation=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_USER_ACCEPT_INVITATION"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `)},a.prototype.onAdUserMinimize=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_USER_MINIMIZE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `)},a.prototype.onAdUserClose=function(t={}){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_USER_CLOSE"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `)},a.prototype.onAdPaused=function(t={}){const e=w.getUtils();e.p(b+"AdsManagerLoaderAdserve -- AD_PAUSED"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),w.oi(!1),this.stopSyntheticAdProgress(),w.getIsBidderDisplay()},a.prototype.onAdPlaying=function(t={}){const e=w.getUtils();e.p(b+"AdsManagerLoaderAdserve -- AD_PLAYING"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),w.oi(!0),this.startSyntheticAdProgress(),this.onAdDurationChange(t),w.getIsBidderDisplay()},a.prototype.onAdLog=function(t){w.getUtils().p(b+"AdsManagerLoaderAdserve -- AD_LOG"+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `+(new Error).stack)},a.prototype.onAllAdsCompleted=function(t={}){this.stopSyntheticAdProgress();const e=w.getConf(),n=w.getIma(),i=w.getUtils(),o=w.getPlayer(),s=w.getSdk(),a=w.getAd(),r=w.getVastInfosEventFn(),c=w.getHasVastBeenKilledFn(),d=w.getCleanFn(),u=(w.getIsVASTBooster(),w.getRefetchVastFn()),l=o.g(this.video_index),p=l.vasts[i.lt(l.vasts,"vast_index",this.vast_index)],h=w.getTimeoutAllAdsCompleted(),f=JSON.stringify({adEvent:t,video_index:this.video_index,vast_index:this.vast_index});w.getUtils().p(b+"AdsManagerLoaderAdserve -- ALL_ADS_COMPLETED"+f+` ${this.video_index} ${this.vast_index} instance #${this.id} `),this.manager.hideSlot(),clearTimeout(h),o.ui("buffering"),!(a.pi=!1)===a.yi&&(c(p)||(a.li=parseInt(a.li)+1),i.p(b+"ads completed = "+parseInt(a.li)),this.destroy(),p.ad=!1,parseInt(a.li)>=e.template.advertising.linear.max_preroll_viously?(a.li=parseInt(a.li)-1,i.v(58,null,!1,!1,r(p)),s.v("adSlateComplete"),a.li=0,o.Ii(e.admin.current_index),d(!0)):p.killed||p.killed_at_load?(d(!1),n.Ai(e.admin.current_index,!0)):(d(!1),i.v(76,this.video_index,!1,!1,"&adix="+parseInt(a.li)),1!=this.adState.refetch_vast&&parseInt(a.li)<e.template.advertising.linear.max_preroll_viously?u(this.a_video_index,p):n.Ai(e.admin.current_index,!0))),this.video_index!=e.admin.current_index&&o.ee.Si(e.admin.current_index)},a.prototype.onAdError=function(t){const e=w.getUtils(),n=w.getPlayer(),i=w.getCleanFn(),o=w.getIma(),s=w.getAd(),a=(e.p(b+"AdsManagerLoaderAdserve -- AD_ERROR "+JSON.stringify(t)+` ${this.video_index} ${this.vast_index} instance #${this.id} `),e.Pt(t)),r=n.g(this.video_index),c=r.vasts[e.lt(r.vasts,"vast_index",this.vast_index)];s.Oi==this.vast_index&&(this.stopSyntheticAdProgress(),s.pi=!1,this.manager.hideSlot(),this.destroy(a),n.M&&n.M.removeAdManager(),n.wi.bi&&n.gi(),i(!1)),Ri(r,c),o.Ti.call(a,"AD_ERROR",this.video_index,this.vast_index)},a})()),ut=("undefined"!=typeof module&&module.exports&&(module.exports=ui),function t(R){var g="%c ima %c",y="%c bidding %c",o="%c amazon %c",L="%c prebid %c",I="%c banner linear %c",s="%c mrc %c",A=document.getElementById("ad-container"),j=5,R=R||{},S=null,c=Ee.getInstance(),k=null,x=null,T=!1,q=null,O={yi:!1,pi:!1,Yt:document.getElementById("ad"),Vn:null,Ci:0,Oi:null,Ri:!1,Li:Ht.admin.current_index,mi:!1,li:0,Vi:null,Ni:!1,Di:-1,Pi:!1,Ui:!1},e=new hi,w=function(t){e.update({isAdPlaying:t})},G=function(t){O.Ui=t,Zt.p(y+"Ad queue hold set to: "+t)},z=function({isAdPlaying:t}){S&&(t?S.resume():S.pause())},a={},l={Mi:!1},V={smartadserver:"62",criteo:"59",ix:"63",pubmatic:"64",rubicon:"66",openx:"67",sharethrough:"68",grid:"69",improvedigital:"71",triplelift:"72",unruly:"73",adot:"74",oftmedia:"75",medianet:"77",amx:"78","improvedigital-outstream":"80","openx-outstream":"82","rubicon-outstream":"83","grid-outstream":"86","oftmedia-outstream":"88","sharethrough-outstream":"89","amx-outstream":"91","medianet-outstream":"92","triplelift-outstream":"94","adot-outstream":"97","ix-outstream":"98","unruly-outstream":"100","smartadserver-outstream":"114","pubmatic-outstream":"116",onetag:"117",sovrn:"126","sovrn-outstream":"129","meetscale-linear":"141",vslytest:"vslytest",adf:"142","adf-outstream":"143","meetscale-nonlinear":"144",xandr:"147","xandr-outstream":"149",rise:"160","rise-outstream":"165","criteo-outstream":"166","33across":"171","33across-outstream":"174","meetscale-video":"178","fw-mrm-saleshouse":"188","fw-mrm-ext-saleshouse":"189","fw-mrm-instream":"194","fw-mrm-outstream":"195"},n={ji:!1,qi:!1},p={adVastRequest:!1,adVastRequestError:!1,adVastStart:!1,adVastComplete:!1,adVastSkip:!1,adVastClick:!1,adVastDuration:0},B={getIma:()=>R,getPlayer:()=>ee,getUtils:()=>Zt,getSdk:()=>Xt,getConf:()=>Ht,getAd:()=>O,getAdContainer:()=>A,getAdDisplayContainerIMA:()=>ae,getAdViouslyState:()=>p,getAdsManager:()=>S,getIsAmp:()=>ge,getIsBidderDisplay:()=>Kt,getKillAdsmanager:()=>c,getTimeoutAllAdsCompleted:()=>q,getVideoElement:()=>ee.et(),getImsJsLoading:()=>Ae,getLoadImaJs:()=>Ie,getAB:()=>Jt,getPrefetchState:()=>l,setTimeoutAllAdsCompleted:t=>q=t,setImsJsLoading:t=>Ae=t,setLoadImaJs:t=>Ie=t,oi:w,getCleanFn:()=>h,getCompanionAdsFromAdFn:()=>It,getHandleMrcFn:()=>St,getHasVastBeenKilledFn:()=>qt,getInitSDKFn:()=>d,getInitViewabilityTracking:()=>At,getIsExternalVAST:()=>Ot,getIsSSPSeat:()=>v,getIsVASTAdserving:()=>f,getIsVASTBooster:()=>_,getRefetchVastFn:()=>Mt,getResize:()=>E,getSkipFn:()=>gt,getSortVastsByPriceFn:()=>U,getTriggerSdkEventForBidder:()=>Gt,getVastInfosEventFn:()=>P,getInitAdDisplayContainer:()=>$,getContentCost:()=>te},H=new di(B),$=function(){if(null!=ae){if(Zt.p(g+"AdDisplayContainer defined"),!1===re){re=!0;const t=ee.et();t&&(!0===ee.Gi.Qt()&&t.load(),ae.initialize(),Zt.p(g+"AdDisplayContainer init"))}}else Zt.p(g+"AdDisplayContainer undefined")},J=function(){!0===Se||window.apstag||(ee.Ot.zi()?(window.apstag={init:function(){window.apstag.Bi.push(["i",arguments,(new Date).getTime()])},fetchBids:function(){window.apstag.Bi.push(["f",arguments,(new Date).getTime()])},setDisplayBids:function(){},targetingKeys:function(){return[]},Bi:[]},Zt.ot(document.body,"https://c.amazon-adsystem.com/aax2/apstag.js",function(){Se=!0,Zt.p(o+"Lib loaded"),void 0!==window.apstag&&"function"==typeof window.apstag.debug&&window.apstag.init({pubID:"362e6c6d-8da2-4e42-b166-454ccc1976f0",schain:Ht.advertising.sparteo_schain_config,gdpr:{cmpTimeout:50}}),Zt.p(o+"Initialized")},function(){Se=!1,Zt.p(o+"Failed to load lib"),Zt.v(14,null,!1,!1,"&sec=17&sem=script_error_apstag")},!0)):Ht.admin.apstag_retry=0)},F=function(){return"normal"},E=function(){const t=ee.et();S&&t&&S.resize(t.offsetWidth,t.offsetHeight,F()),1==T&&window.sfs&&document.getElementById("ad-banner")&&t&&sfs.resize(document.getElementById("ad-banner"),t.offsetWidth,t.offsetHeight)},d=function(o){function s(){function t(){void 0!==window.google&&"ima"in window.google&&(Zt.p(g+"Lib loaded"),window.google.ima.settings.setLocale(Zt.Ut()),"3069"==Ht.diffuser.uid||"3551"==Ht.diffuser.uid?(ie="enabled",window.google.ima.settings.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.ENABLED)):(ie="insecure",window.google.ima.settings.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE)),Zt.p(g+"VPAID MODE is "+ie),window.google.ima.settings.setNumRedirects(Ht.admin.ima_num_redirects),Zt.Vt())&&window.google.ima.settings.setPpid(Zt.Vt())}function e(){if(void 0!==window.google&&"ima"in window.google){const t=ee.et();t&&(ae=new window.google.ima.AdDisplayContainer(A,t,A))}}function n(){Ae=!(Ie=!0),t(),e(),window.setTimeout(function(){d(o)},100)}function i(){Ae=Ie=!1,Zt.v(14,null,!1,!1,"&sec=17&sem=script_error_ima"),o==Ht.admin.current_index?u(g+"Failed to load lib",!0):ee.ee.Si(Ht.admin.current_index)}!0===Ae?Zt.p(g+"Skip init because IMA is loading"):(c.vasts&&c.vasts.length&&R.Hi(),Ae=!0,Zt.ot(document.body,Ht.admin.ima_sdk_url,n,i))}function a(){o==Ht.admin.current_index?u(y+"ad blocked",!0):ee.ee.Si(Ht.admin.current_index),Zt.v(49,o,!0,!1,"&aaf=linear")}function r(){function t(){return"undefined"!=typeof adserve&&"AdsManager"in adserve||void 0!==window.google&&"ima"in window.google}function e(){if(c.bidder_timestamp=Zt.I(),U(ee.g(o).vasts),Zt.v(64,o,!0,!1),0==parseInt(O.li)&&Zt.v(76,o,!1,!1,"&adix="+parseInt(O.li)),Ht.bcf)K(o);else{if(bt(c.vasts),Ht.advertising.linear.primary&&1==Ht.template.advertising.linear.primary&&(c.original_vasts.push(Ht.advertising.linear.primary),ut(o)),!ee.Ot.$i())for(var t=c.vasts.length;t--;){var e=c.vasts[t];Zt.Nt(e)&&(Zt.p(y+R.di(e)+" -> GOOGLE not allowed"),c.vasts.splice(t,1))}if(wt(c.vasts),Ht.advertising.linear.passback&&1==Ht.template.advertising.linear.passback&&0<Ht.advertising.linear.passback.bpf?(c.original_vasts.push(Ht.advertising.linear.passback),lt(o)):Zt.p(y+"VAST Adserving not allowed"),Ht.advertising.s2s&&Ht.advertising.linear.prebid&&(1==Ht.template.advertising.linear.viously||1==Ht.template.advertising.linear.primary||1==Ht.template.advertising.linear.passback)&&ht(o),!c.vasts.length)return delete c.bidder_timestamp,d(o);for(var n=[],t=0;t<c.vasts.length;t++)(e=c.vasts[t]).banner=!1,e.outstream=!1,e.nonlinear=!1,Vt(o,e,l.Mi?0:parseInt(O.li),!1),e.aps?it(o,e.vast_index):e.prebid?n.push(e.prebid_bidder):m(o,e.vast_index);n.length&&X(o,n)}}(t()?e:a)()}function t(){function t(){!1===Ht.template.advertising.linear.viously&&(c.vasts=[],Zt.p(y+" Viously VASTs are disabled in the publisher's template "))}function e(){ye&&(Ht.template.advertising.linear.primary=!0,Ht.template.advertising.linear.passback=!0,Ht.template.advertising.linear.viously=!0,c.sources.length)&&1==c.sources[0].live&&0==ee.S(o)&&(Ht.template.advertising.linear.primary=!1,Ht.template.advertising.linear.passback=!1,Ht.template.advertising.linear.viously=!1,c.vasts=[],Zt.p(y+" Monetization is disabled on first livestream "))}function n(){return Ie}function i(){te.ye(),Zt.v(50,o,!0,!1,"&aaf=linear"),o==Ht.admin.current_index?u(y+"no vasts",!0):ee.ee.Si(Ht.admin.current_index)}t(),e(),(1==Ht.user.is_adblocked?a:Zt.jt(c)?!1===n()?s:r:i)()}function e(){Zt.I()-c.bidder_timestamp>1e3*Ht.admin.expire_timeout?(Zt.p(y+"Bids expired"),delete c.bidder_timestamp,d(o)):(Zt.p(y+"Bids already done"),o==Ht.admin.current_index?null==O.Oi?R.Ai(o,!0):!0!==O.yi||O.pi||M():Zt.p(y+"Can't launch competion : a_video_index "+o+" (vid: "+i+") doesn't match current a_video_index "+Ht.admin.current_index+" (vid: "+ee.Ji(Ht.admin.current_index)+")"))}function n(){if(!c.original_vasts){1==xe&&(c.vasts=[{name:"SPARTEO SSP LINEAR",id_vast_type:141,id_ssp:"16",ssp_name:"PREBID",pf:0,currency:"EUR",url:"",fee:0,placement:"141",yvr:0,yvc:0}]),Zt.p(y+"Deep copy vasts object :"),c.original_vasts=JSON.parse(JSON.stringify(c.vasts)),Zt.p(c.original_vasts,!0);for(var t=c.vasts.length;t--;)199==c.vasts[t].id_vast_type&&c.vasts.splice(t,1)}}var c=ee.g(o),i=c.vid;Zt.p(y+"Init "+i+" "+o+" Prio version = "+ne),n(),(c.bidder_timestamp?e:t)()},W=function(t){var e=ee.g(t);Zt.p(y+"Reset "+e.vid+" "+t),O.li=0,w(!1),a={},l.Mi=!1,h(!0)},C=function(){return 0!=ee.ee.Fi()&&(Wt||"none"!=Ht.template.sdk.sticky.event)?1:0},N=function(t){return t&&t.outstream&&1==t.outstream?4:ee.M.getState().isAdAudible||3==ee.Ae()?1:t&&Zt.Nt(t)?2:"nocontent"==Ht.playlist.type?4:Ht.template.plcmt||2},K=function(t){if(Ht.bcf){Kt&&(Ht.advertising.bidder||(Ht.advertising.bidder={}),Ht.bcf.burl&&(Ht.advertising.bidder.billable_impression_urls=Ht.bcf.burl),Ht.bcf.imp_id&&(Ht.advertising.bidder.ad_unit_id=Ht.bcf.imp_id),Ht.bcf.ab_test)&&Ht.bcf.ab_test.length&&(Jt=Jt.concat(Ht.bcf.ab_test));for(var e=ee.g(t),n=[],o=[],s=Ht.bcf.bids.length;s--;){var a,r=e.vasts[Zt.lt(e.vasts,"id_vast_type",Ht.bcf.bids[s].ivt)];(r=r||"vslytest"!=Ht.bcf.bids[s].ivt?r:Y())?(r=JSON.parse(JSON.stringify(r)),a=b(t,Ht.bcf.bids[s].ivt),r.ad="waiting",r.vast_index=a,o.push(r),V[Ht.bcf.bids[s].bidder]&&n.push({params:{idVastType:Ht.bcf.bids[s].ivt,vastIndex:a}})):Ht.bcf.bids.splice(i,1)}o.length&&(e.vasts=o,n.length)&&D(t,Ht.bcf.bids,n),Ht.bcf=null}},Y=function(){return{id_ssp:"vslytest",id_vast_type:"vslytest",ssp_name:"vslytest",name:"vslytest",fee:0,currency:"EUR",position:1,pf:2,placement:"vslytest"}},Z=function(t,o){return Object.entries(t).reduce((t,[e,n])=>{if(e!==o){const i=Number(n);0<i&&(t[e]={[o]:1/i})}return t},{})},X=function(l,p,t){if("object"==typeof $t){var e=[],n=[],h=[],i=[],o=[],s=[],f=ee.g(l),m=null,_=(jt(f),Ut(l),Zt.p(L+"Requested bidders:"),Zt.p(p,!0),Jt.includes("pbs-adpod_multi_50")),a=Ht.template.advertising.linear.max_preroll_viously,v=a===1/0?j:a,r=1,c=Zt.vt();if(p.length)for(let t=0,e=null;t<p.length;t++){if(e=f.vasts[Zt.lt(f.vasts,"id_vast_type",p[t].params.idVastType)]){1==e.s2s&&n.push(p[t].bidder);const S=!0===e.s2s&&!e.outstream&&!e.banner&&!e.nonlinear,k=!_||!S||!0!==e.adpod;k&&(et(Ft[e.prebid_bidder.bidder]),Ft[e.prebid_bidder.bidder])&&Ft[e.prebid_bidder.bidder].length&&(Zt.p(L+"Get bid "+e.prebid_bidder.bidder+" from Adpod"),h.push(Ft[e.prebid_bidder.bidder].shift())),(1==e.banner?s:1==e.outstream?o:i).push(p[t])}m=_t(e)}if(i.length)if(_){const x=i.filter(t=>{const e=f.vasts[Zt.lt(f.vasts,"id_vast_type",t.params.idVastType)];return!n.includes(t.bidder)||e&&!0!==e.adpod}),T=i.filter(t=>{const e=f.vasts[Zt.lt(f.vasts,"id_vast_type",t.params.idVastType)];return n.includes(t.bidder)&&e&&!0===e.adpod});if(0<T.length){Zt.p(L+"Using Ad Pod Multi IMP strategy for S2S bidders");var d=Math.floor(1e9*Math.random());for(let t=1;t<=v;t++){var u="video_slot"+t+"_preroll_"+f.vid,b="V2_Open/V2_Open_"+Ht.diffuser.uid+"/V2_Open_"+Ht.diffuser.uid+"_"+Ht.product.id+"_slot"+t,w=b.split("/").pop(),u={code:u,mediaTypes:{video:{context:"instream",pos:C(),placement:1,plcmt:N(),playerSize:[[oe,se]],mimes:["video/mp4","application/javascript","video/webm"],protocols:[1,2,3,4,5,6,7,8],playbackmethod:[ee.Ae()],minduration:r,maxduration:c,api:[1,2],w:oe,h:se,startdelay:0,linearity:1,skip:1,skipmin:be,skipafter:ve,delivery:[2],playbackend:3,boxingallowed:1,adPodDurationSec:v*c,durationRangeSec:[c],podid:String(d),slotinpod:t}},ortb2Imp:{id:u+"_"+Math.random().toString(36).substring(2,8),tagid:w,ext:{tid:Zt.Kt(),gpid:b,data:{pbadslot:b}}},bids:T};e.push(u)}}0<x.length&&(Zt.p(L+"Using Legacy Instream strategy for C2S bidders"),e.push({code:"video",mediaTypes:{video:{context:"instream",pos:C(),placement:1,plcmt:N(),playerSize:[[oe,se]],api:[1,2],mimes:["video/mp4","application/javascript","video/webm"],protocols:[1,2,3,4,5,6,7,8],playbackmethod:[ee.Ae()],minduration:1,maxduration:Zt.vt(),w:oe,h:se,startdelay:0,linearity:1,skip:1,skipmin:be,skipafter:ve,delivery:[2],playbackend:3,boxingallowed:1}},ortb2Imp:{ext:{gpid:"V2_Open/V2_Open_"+Ht.diffuser.uid+"/V2_Open_"+Ht.diffuser.uid+"_"+Ht.product.id,data:{pbadslot:"V2_Open/V2_Open_"+Ht.diffuser.uid+"/V2_Open_"+Ht.diffuser.uid+"_"+Ht.product.id}}},bids:x}))}else Zt.p(L+"Using Legacy Instream strategy"),e.push({code:"video",mediaTypes:{video:{context:"instream",pos:C(),placement:1,plcmt:N(),playerSize:[[oe,se]],api:[1,2],mimes:["video/mp4","application/javascript","video/webm"],protocols:[1,2,3,4,5,6,7,8],playbackmethod:[ee.Ae()],minduration:1,maxduration:Zt.vt(),w:oe,h:se,startdelay:0,linearity:1,skip:1,skipmin:be,skipafter:ve,delivery:[2],playbackend:3,boxingallowed:1}},ortb2Imp:{ext:{gpid:"V2_Open/V2_Open_"+Ht.diffuser.uid+"/V2_Open_"+Ht.diffuser.uid+"_"+Ht.product.id,data:{pbadslot:"V2_Open/V2_Open_"+Ht.diffuser.uid+"/V2_Open_"+Ht.diffuser.uid+"_"+Ht.product.id}}},bids:i}),!0===Jt.includes("pbs-metric_enabled_25")&&Ht.page.preds&&(e[e.length-1].ortb2Imp.metric=Zt.Ht(Ht.page.preds)),!0===Jt.includes("pbs-vtr_gpid_25")&&(e[e.length-1].ortb2Imp.ext={gpid:"V2_Open/VTR_85",data:{pbadslot:"V2_Open/VTR_85"}}),!0===Jt.includes("pbs-vtr_combined_25")&&(e[e.length-1].ortb2Imp.ext={gpid:"V2_Open/VTR_85_HP",data:{pbadslot:"V2_Open/VTR_85_HP"}});if(o.length&&(_?(y=(a="V2_Open/V2_Open_"+Ht.diffuser.uid+"/V2_Open_"+Ht.diffuser.uid+"_"+Ht.product.id+"_outstream").split("/").pop()+"_tag",e.push({code:"video-outstream",mediaTypes:{video:{pos:C(),context:"outstream",placement:3,plcmt:4,playerSize:[[oe,se]],api:[1,2],mimes:["video/mp4","application/javascript","video/webm"],protocols:[1,2,3,4,5,6,7,8,11,12,13,14],playbackmethod:[ee.Ae()],minduration:1,maxduration:Zt.vt(),w:oe,h:se,startdelay:0,linearity:1,skip:1,skipmin:be,skipafter:ve,delivery:[2],playbackend:3,boxingallowed:1,renderer:{url:"https://cdn.adnxs.com/renderer/video/ANOutstreamVideo.js",render:function(t){Zt.p(L+"Renderer "+JSON.stringify(t))}}}},ortb2Imp:{id:"video-outstream-imp-"+Math.random().toString(36).substring(2,8),tagid:y,ext:{tid:Zt.Kt(),gpid:a,data:{pbadslot:a}}},bids:o})):(e.push({code:"video-outstream",mediaTypes:{video:{pos:C(),context:"outstream",placement:3,plcmt:4,playerSize:[[oe,se]],api:[1,2],mimes:["video/mp4","application/javascript","video/webm"],protocols:[1,2,3,4,5,6,7,8],playbackmethod:[ee.Ae()],minduration:1,maxduration:Zt.vt(),w:oe,h:se,startdelay:0,linearity:1,skip:1,skipmin:be,skipafter:ve,delivery:[2],playbackend:3,boxingallowed:1,renderer:{url:"https://cdn.adnxs.com/renderer/video/ANOutstreamVideo.js",render:function(t){Zt.p(L+"Renderer "+JSON.stringify(t))}}}},ortb2Imp:{ext:{gpid:"V2_Open/V2_Open_"+Ht.diffuser.uid+"/V2_Open_"+Ht.diffuser.uid+"_"+Ht.product.id,data:{pbadslot:"V2_Open/V2_Open_"+Ht.diffuser.uid+"/V2_Open_"+Ht.diffuser.uid+"_"+Ht.product.id}}},bids:o}),!0===Jt.includes("pbs-metric_enabled_25")&&Ht.page.preds&&(e[e.length-1].ortb2Imp.metric=Zt.Ht(Ht.page.preds)),!0===Jt.includes("pbs-vtr_gpid_25")&&(e[e.length-1].ortb2Imp.ext={gpid:"V2_Open/VTR_85",data:{pbadslot:"V2_Open/VTR_85"}}),!0===Jt.includes("pbs-vtr_combined_25")&&(e[e.length-1].ortb2Imp.ext={gpid:"V2_Open/VTR_85_HP",data:{pbadslot:"V2_Open/VTR_85_HP"}}))),s.length&&(e.push({code:"banner",mediaTypes:{banner:{sizes:t||Ni,pos:C()}},ortb2Imp:{ext:{gpid:"V2_Open/V2_Open_"+Ht.diffuser.uid+"/V2_Open_"+Ht.diffuser.uid+"_"+Ht.product.id,data:{pbadslot:"V2_Open/V2_Open_"+Ht.diffuser.uid+"/V2_Open_"+Ht.diffuser.uid+"_"+Ht.product.id}}},bids:s}),t||(1<=Ht.playlist.ratio?e[e.length-1].mediaTypes.banner.sizes.push(...Vi):e[e.length-1].mediaTypes.banner.sizes.push(...Li))),e.length){var g={debug:ke,bidderTimeout:Zt.bt(l,parseInt(O.li),O.pi),consentManagement:{gdpr:{cmpApi:"static",timeout:50,actionTimeout:50,defaultGdprScope:Ht.page.tcf.gdprApplies,consentData:{getTCData:{gdprApplies:Ht.page.tcf.gdprApplies,tcString:Ht.page.tcf.tcString,addtlConsent:Ht.page.tcf.addtlConsent,purpose:Ht.page.tcf.purpose,vendor:Ht.page.tcf.vendor}}},usp:{cmpApi:"static",timeout:50,actionTimeout:50,consentData:{getUSPData:{uspString:Ht.page.usp.uspString}}}},cache:{url:"https://pbc.bricks-co.com/cache"},ortb2:{site:{name:Ht.diffuser.name,domain:(Yt?window.location.hostname:Ht.page.domain.name).replace("www.",""),page:window.location.href,ref:Ht.page.referrer,cat:[...new Set(Ht.page.iab.category.map(t=>t.split("-")[0]))],sectioncat:Ht.page.iab.category,pagecat:Ht.page.iab.category,content:{id:f.vid,title:f.title,cat:Ht.page.iab.category,cattax:1,genre:Zt.qt(Ht.page.iab.category[0]),livestream:f.sources.length&&1==f.sources[0].live?1:0,contentrating:"G",len:f.duration,language:f.language.toLowerCase(),url:Ht.page.url,sourcerelationship:f.creator.uid==Ht.diffuser.uid?1:0,embeddable:1,prodq:1}},badv:Zt.Jt()},enableTIDs:!0,firstPartyData:{uaHints:["architecture","model","platform","bitness","uaFullVersion","platformVersion","fullVersionList"]},maxRequestsPerOrigin:"4g"==Zt.A()?8:4,performanceMetrics:!1,bidderSequence:"fixed",pageUrl:Ht.page.url,currency:{adServerCurrency:"EUR",rates:Z(Ht.advertising.currencies_rate,"EUR")},floors:{enforcement:{enforceJS:!0,enforcePBS:!0},data:{currency:"EUR",modelVersion:"Global floor",schema:{fields:["adUnitCode","bidderCode"]},values:{"video|*":ke?.01:1,"video-outstream|*":ke?.01:.5,"banner|*":ke?.01:.1}},additionalSchemaFields:{bidderCode:function(t){return t.bidderCode}}},criteo:{fastBidVersion:"latest"},useBidCache:!1,deviceAccess:ee.Ot.Wi()};if(_){g.adpod={brandCategoryExclusion:!0};for(let n=1;n<=v;n++){let t="video_slot"+n+"_preroll_"+f.vid,e=1;g.floors.data.values[t+"|*"]=ke?.01:e}}if(ee.Ot.Mt()?(g.userSync={syncEnabled:ee.Ot.Ki(),aliasSyncEnabled:ee.Ot.Ki(),iframeEnabled:ee.Ot.Ki(),filterSettings:{all:{bidders:"*",filter:"include"}},syncsPerBidder:0,enableOverride:!1,syncDelay:3e3,auctionDelay:50,userIds:[{name:"quantcastId"},{name:"teadsId",params:{pubId:25484}},{name:"sharedId",storage:{name:"_sharedID",type:"cookie",expires:365}},{name:"criteo"},{name:"id5Id",params:{partner:246},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}},{name:"lotamePanoramaId",params:{clientId:"17362"}},{name:"utiqId",params:{maxDelayTime:10},storage:{type:"html5",name:"utiq",expires:365}}]},g.pubcid={enable:!0},Ht.advertising.userIds.liveramp&&g.userSync.userIds.push({name:"identityLink",params:{pid:Ht.advertising.userIds.liveramp,notUse3P:!1},storage:{type:"html5",name:"idl_env",expires:15,refreshInSeconds:1800}},{name:"pairId",params:{liveramp:{storageKey:"_lr_pairId"}}}),Ht.page.tcf.gdprApplies||g.userSync.userIds.push({name:"uid2"}),Zt.Et()&&g.userSync.userIds.push({name:"pubProvidedId",params:{eids:[{source:"first-id.fr",uids:[{id:Zt.Et(),atype:1,ext:{stype:"ppuid"}}]}]}})):g.userSync={syncEnabled:!1},g.allowActivities={syncUser:{rules:[{allow:ee.Ot.Wi()}]},accessDevice:{rules:[{allow:ee.Ot.Wi()}]},enrichEids:{rules:[{allow:ee.Ot.Mt()}]},enrichUfpd:{rules:[{allow:ee.Ot.Mt()}]},transmitEids:{rules:[{allow:ee.Ot.Mt()}]},transmitUfpd:{rules:[{allow:ee.Ot.Mt()}]},transmitPreciseGeo:{rules:[{allow:ee.Ot.Yi()&&ee.Ot.Mt()}]}},Ht.user.geoip.country.code_a3&&ee.Ot.Yi()&&(g.ortb2.device={geo:{ipservice:3,country:Ht.user.geoip.country.code_a3}}),n.length){var y=1500;if("EU"!=Ht.user.geoip.continent.code&&(y+=200),g.s2sConfig={endpointCompression:!0,accountId:"fcd2457b-f514-4411-8d63-0efce5bfc1c9",bidders:n,allowUnknownBidderCodes:!1,enabled:!0,timeout:y,adapter:"prebidServer",endpoint:{p1Consent:"https://pbsj.bricks-co.com/openrtb2/auction",noP1Consent:"https://pbsj.bricks-co.com/openrtb2/auction"},syncTimeout:1e3,userSyncLimit:30,coopSync:!0,extPrebid:{aliases:{oftmedia:"appnexus","rubicon-outstream":"rubicon","openx-outstream":"openx","improvedigital-outstream":"improvedigital","grid-outstream":"grid","oftmedia-outstream":"appnexus","sharethrough-outstream":"sharethrough","amx-outstream":"amx","medianet-outstream":"medianet","triplelift-outstream":"triplelift","adot-outstream":"adot","ix-outstream":"ix","unruly-outstream":"unruly","smartadserver-outstream":"smartadserver","pubmatic-outstream":"pubmatic","sovrn-outstream":"sovrn","adf-outstream":"adf",xandr:"appnexus","xandr-outstream":"appnexus","rise-outstream":"rise","fw-mrm-saleshouse":"fwssp","fw-mrm-ext-saleshouse":"fwssp","fw-mrm-instream":"fwssp","fw-mrm-outstream":"fwssp"},cache:{vastxml:{returnCreative:!1}},bidadjustmentfactors:{oftmedia:.8,"oftmedia-outstream":.8}}},Ht.advertising.linear.prebid){var I=JSON.parse(Ht.advertising.linear.prebid.url),A=[];for(let t=0,e=null;t<I.length;t++)(e=I[t]).code&&(A.push(e.code+"-publisher"),g.s2sConfig.bidders.push(e.code+"-publisher"),g.s2sConfig.extPrebid.aliases[e.code+"-publisher"]=e.code);0<A.length&&$t.setBidderConfig({bidders:A,config:{schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[]}}}})}}if($t.setConfig(g),Wt)$t.setBidderConfig({bidders:Object.keys(V),config:{schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[]}}}});else{const E=["medianet","medianet-outstream","amx","amx-outstream","adot","adot-outstream","ix","ix-outstream","unruly","unruly-outstream","oftmedia","oftmedia-outstream","sharethrough","sharethrough-outstream","onetag","rubicon","rubicon-outstream","improvedigital","improvedigital-outstream","sovrn","sovrn-outstream","smartadserver","smartadserver-outstream","triplelift","triplelift-outstream","xandr","xandr-outstream","rise","rise-outstream","criteo","criteo-outstream","pubmatic","pubmatic-outstream","adf","adf-outstream","openx","openx-outstream","33across","33across-outstream","fw-mrm-saleshouse","fw-mrm-ext-saleshouse","fw-mrm-instream","fw-mrm-outstream"],M=Object.keys(V).filter(t=>!t.includes("-publisher"));Ht.advertising.sparteo_schain_config?($t.setBidderConfig({bidders:M.filter(t=>!E.includes(t)),config:{schain:{validation:"strict",config:Ht.advertising.viously_schain_config}}}),$t.setBidderConfig({bidders:E,config:{schain:{validation:"strict",config:Ht.advertising.sparteo_schain_config}}})):$t.setBidderConfig({bidders:M,config:{schain:{validation:"strict",config:Ht.advertising.viously_schain_config}}})}$t.bidderSettings={standard:{storageAllowed:ee.Ot.Ki()}},$t.setBidderConfig({bidders:["grid"],config:{localStorageWriteAllowed:ee.Ot.Ki()}}),Ht.advertising.s2s&&$t.setBidderConfig({bidders:["smartadserver-publisher"],config:{ortb2:{site:{keywords:Lt()}}}}),$t.aliasRegistry["meetscale-linear"]||$t.aliasBidder("sparteo","meetscale-linear",{gvlid:1028}),$t.aliasRegistry["meetscale-nonlinear"]||$t.aliasBidder("sparteo","meetscale-nonlinear",{gvlid:1028}),$t.aliasRegistry["meetscale-video"]||$t.aliasBidder("sparteo","meetscale-video",{gvlid:1028}),$t.aliasRegistry["criteo-outstream"]||$t.aliasBidder("criteo","criteo-outstream",{gvlid:91}),$t.aliasRegistry["33across-outstream"]||$t.aliasBidder("33across","33across-outstream",{gvlid:58}),$t.aliasRegistry["fw-mrm-saleshouse"]||$t.aliasBidder("fwssp","fw-mrm-saleshouse",{gvlid:285}),Ht.advertising.s2s||($t.aliasRegistry.oftmedia||$t.aliasBidder("appnexus","oftmedia",{gvlid:32}),$t.aliasRegistry["rubicon-outstream"]||$t.aliasBidder("rubicon","rubicon-outstream",{gvlid:52}),$t.aliasRegistry["openx-outstream"]||$t.aliasBidder("openx","openx-outstream",{gvlid:69}),$t.aliasRegistry["improvedigital-outstream"]||$t.aliasBidder("improvedigital","improvedigital-outstream",{gvlid:253}),$t.aliasRegistry["grid-outstream"]||$t.aliasBidder("grid","grid-outstream",{gvlid:686}),$t.aliasRegistry["oftmedia-outstream"]||$t.aliasBidder("appnexus","oftmedia-outstream",{gvlid:32}),$t.aliasRegistry["sharethrough-outstream"]||$t.aliasBidder("sharethrough","sharethrough-outstream",{gvlid:80}),$t.aliasRegistry["amx-outstream"]||$t.aliasBidder("amx","amx-outstream",{gvlid:737}),$t.aliasRegistry["medianet-outstream"]||$t.aliasBidder("medianet","medianet-outstream",{gvlid:142}),$t.aliasRegistry["triplelift-outstream"]||$t.aliasBidder("triplelift","triplelift-outstream",{gvlid:28}),$t.aliasRegistry["adot-outstream"]||$t.aliasBidder("adot","adot-outstream",{gvlid:272}),$t.aliasRegistry["ix-outstream"]||$t.aliasBidder("ix","ix-outstream",{gvlid:10}),$t.aliasRegistry["unruly-outstream"]||$t.aliasBidder("unruly","unruly-outstream",{gvlid:36}),$t.aliasRegistry["smartadserver-outstream"]||$t.aliasBidder("smartadserver","smartadserver-outstream",{gvlid:45}),$t.aliasRegistry["pubmatic-outstream"]||$t.aliasBidder("pubmatic","pubmatic-outstream",{gvlid:76}),$t.aliasRegistry["sovrn-outstream"]||$t.aliasBidder("sovrn","sovrn-outstream",{gvlid:13}),$t.aliasRegistry["adf-outstream"]||$t.aliasBidder("adf","adf-outstream",{gvlid:50}),$t.aliasRegistry.xandr||$t.aliasBidder("appnexus","xandr",{gvlid:32}),$t.aliasRegistry["xandr-outstream"]||$t.aliasBidder("appnexus","xandr-outstream",{gvlid:32}),$t.aliasRegistry["rise-outstream"]||$t.aliasBidder("rise","rise-outstream",{gvlid:1043}),$t.aliasRegistry["fw-mrm-ext-saleshouse"]||$t.aliasBidder("fwssp","fw-mrm-ext-saleshouse",{gvlid:285}),$t.aliasRegistry["fw-mrm-instream"]||$t.aliasBidder("fwssp","fw-mrm-instream",{gvlid:285}),$t.aliasRegistry["fw-mrm-outstream"])||$t.aliasBidder("fwssp","fw-mrm-outstream",{gvlid:285}),R.Zi(l)&&Zt.v(65,l,!1,!1,"&avt="+m),$t.processQueue(),$t.que.push(()=>{$t.removeAdUnit(),$t.addAdUnits(e),$t.requestBids({timeout:Zt.bt(l,parseInt(O.li),O.pi),bidsBackHandler:function(e){var n=[];if(Zt.p(L+"Bids back handler response"),Zt.p(e,!0),e&&(e["video-outstream"]&&e["video-outstream"].bids&&(n=n.concat(e["video-outstream"].bids)),e.banner&&e.banner.bids&&(n=n.concat(e.banner.bids)),e.video&&e.video.bids&&(n=n.concat(e.video.bids)),_))for(let t=1;t<=v;t++){var i="video_slot"+t+"_preroll_"+f.vid;e[i]&&e[i].bids&&(n=n.concat(e[i].bids))}h.length&&(n=n.concat(h)),Zt.p(L+"Bids back handler contains "+n.length+" bids (before filtering)");var o=Zt.Wt(),s=[];for(let e=0;e<n.length;e++){let t=n[e];const u=t.bidder;var a,r,c,d="";t.adserverTargeting&&t.adserverTargeting.hb_adomain&&""!==t.adserverTargeting.hb_adomain?d=t.adserverTargeting.hb_adomain.toString().trim():t.meta&&t.meta.advertiserDomains&&t.meta.advertiserDomains.length&&(d=t.meta.advertiserDomains[0].toString().trim()),d&&o.has(d)?(Zt.p(L+"Blocking bid from "+t.bidder+" due to blocked adomain: "+d),r=null,(a=(c=p.find(function(t){return t.bidder===u}))&&c.params?c.params.vastIndex||c.params.vast_index:a)&&-1<(c=Zt.lt(f.vasts,"vast_index",a))&&(r=f.vasts[c]),a?(R.Ti.call("Bid domain was blocked: "+d,"AD_LOAD_ERROR",l,a),r&&R.Zi(l,r)&&Zt.v(34,l,!1,!1,R.Xi(r))):Zt.p(L+"Could not determine vast_index or matching vast object for blocked bid from "+t.bidder+" (adUnitCode: "+t.adUnitCode+"). Error not logged to IMA response. Missing in requested_bidders.")):s.push(t)}Zt.p(L+"Bids after adomain filtering: "+s.length+" bids"),R.Zi(l)&&Zt.v(66,l,!1,!1,"&avt="+m),D(l,s,p)}})})}else h.length?D(l,h,p):D(l,[],p)}else D(l,[],p)},Q=function(t){return t.sort((t,e)=>e.cpm-t.cpm)},tt=function(n,i){let o=[],s=[];for(let e=0;e<n.length;e++){let t=n[e];if(o.includes(t.bidderCode)){const a=t.adUnitCode&&0===String(t.adUnitCode).indexOf("video_slot");a?s.push(t):(i[t.bidderCode]||(i[t.bidderCode]=[]),t.timestamp||(t.timestamp=Date.now(),i[t.bidderCode].push(t),i[t.bidderCode]=Q(i[t.bidderCode])))}else o.push(t.bidderCode),s.push(t)}return s},et=function(o){if(o){let i=Date.now();for(let n=0;n<o.length;n++){let t=o[n],e=i-t.timestamp;e>1e3*t.ttl&&(Zt.p(L+"Remove expired bid "+t.bidder+" from Adpod"),o.splice(n,1),n--)}}},D=function(t,e,n){for(var i=[],o=[],s=ee.g(t),a=0;a<n.length;a++){var r=n[a].params.vastIndex||n[a].params.vast_index;i.push(r)}Zt.p(L+"Bidders in bucket by vast_index : "+i.toString()),e=Q(e);for(var c,d,u=Jt.includes("pbs-adpod_multi_50"),l=(u?(c=tt(e,Ft),Zt.p(L+"AdpodMulti mode: processing all bids (except non-multi duplicates)")):(c=tt(e,Ft),e.length!=c.length&&(Zt.p(L+"We received "+c.length+" non duplicated bids"),Zt.p(c,!0),Zt.p(L+"Adpod contains "+Object.values(Ft).flat().length+" bids"),Zt.p(Ft,!0))),u?e:c),a=0;a<l.length;a++)if(d=l[a],Zt.p(L+"Bidder "+d.bidder+" with vast_index "+V[d.bidder]),V[d.bidder])for(var p=0;p<s.vasts.length;p++)if((f=s.vasts[p]).id_vast_type==V[d.bidder]&&Dt(f)&&-1<i.indexOf(f.vast_index)&&(d.vastUrl||d.ad||d.vastXml)){var h;Zt.p(L+"Bidder "+d.bidder+" with vast_index "+V[d.bidder]+" matched this VAST : "+R.di(f)),u&&f.a_bid&&(Zt.p(L+"AdpodMulti: VAST already has a bid. Cloning VAST for bid "+d.bidder),h=Object.assign({},f),f.predictions&&(h.predictions=Object.assign({},f.predictions)),f.prebid_bidder&&(h.prebid_bidder=Object.assign({},f.prebid_bidder),f.prebid_bidder.params)&&(h.prebid_bidder.params=Object.assign({},f.prebid_bidder.params)),h.vast_index=f.vast_index+"_dup_"+a,h.a_bid=null,s.vasts.push(h),f=h),f.a_bid=d,u&&-1<f.vast_index.indexOf("_dup_")?f.vast_index.split("_dup_")[0]:f.vast_index;o.push(f.vast_index),nt(t,f,d);break}if(o.length&&(Zt.p(L+"We matched bid responses with those vast_index : "+o),U(s.vasts,!0)),o.length!=n.length)for(var f,a=0;a<n.length;a++)if(r=n[a].params.vastIndex||n[a].params.vast_index,-1===o.indexOf(r)){f=s.vasts[Zt.lt(s.vasts,"vast_index",r)];var m=s.shieldData,_=n[a].bidder;if(m){var v=null,b="",w="";if(m.malicious){for(var g=0;g<m.malicious.length;g++){var y=m.malicious[g],I=y.bidder||y.ext&&y.ext.bidder;if(I&&(I===_||void 0!==$t&&$t.aliasRegistry&&$t.aliasRegistry[_]===I)){v=y;break}}v&&(b="malicious",w=v.ruleId||"valkyrie")}if(!v&&m.blocked){var A=!1;if(Array.isArray(m.blocked))for(var S=0;S<m.blocked.length;S++){var k=m.blocked[S],x=k.bidder||k.ext&&k.ext.bidder;if(x&&(x===_||void 0!==$t&&$t.aliasRegistry&&$t.aliasRegistry[_]===x)){v=k,A=!0;break}}else if("object"==typeof m.blocked)for(var T in m.blocked){if(m.blocked.hasOwnProperty(T)){var E=m.blocked[T];if(Array.isArray(E))for(var M=0;M<E.length;M++){var O=E[M],C=O.bidder||O.ext&&O.ext.bidder;if(C&&(C===_||void 0!==$t&&$t.aliasRegistry&&$t.aliasRegistry[_]===C)){(v=O).ruleId||(w=T),A=!0;break}}}if(A)break}v&&(b="blocked",w=w||v.ruleId||"adsleuth")}v&&(Zt.p(L+"Shield blocked bid from "+_+" ("+b+")"),b="&aet=bidBlocked&aec=408&aem="+b+"&aeim="+(w||"")+"&bcrid="+(v.crid||"")+"&abrpm="+-(v.cpm||0),R.Zi(t,f))&&Zt.v(36,t,!1,!1,b+R.Xi(f))}Zt.p(L+"Missing bid response for VAST : "+vt(f)),R.Zi(t,f)&&Zt.v(34,t,!1,!1,P(f)),R.Ti.call("Missing bid response","AD_LOAD_ERROR",t,r)}jt(s)},nt=function(t,e,n){n.vastUrl?e.url=n.vastUrl:e.url="",n.vastXml&&(e.responseXml=n.vastXml),n.ad&&(e.adContent=n.ad),n.nurl&&(e.winning_notice_urls=n.nurl),n.iurl&&(e.impression_notice_urls=n.iurl),e.obpf=n.cpm,e.obpc=n.currency?n.currency.toUpperCase():null,e.pf=n.cpm,e.currency=n.currency?n.currency.toUpperCase():null,Zt.P(e,"EUR"),Ot(e)||(e.rpf=Number(e.pf)),v(e)&&(e.ppf=Number(e.pf),Zt.j(e)),e.bpf=e.pf,n.adserverTargeting&&(e.predictions||(e.predictions={}),"object"==typeof n.adserverTargeting.publicPreds&&null!==n.adserverTargeting.publicPreds&&Object.keys(n.adserverTargeting.publicPreds).forEach(t=>{e.predictions[t]=n.adserverTargeting.publicPreds[t]}),Array.isArray(n.adserverTargeting.publicAB))&&(e.ab=n.adserverTargeting.publicAB),Zt.p(L+"Parse prebid response for : "+R.di(e)+" : pf="+e.pf),m(t,e.vast_index)},it=function(e,n){var i,t;void 0!==window.apstag&&"function"==typeof window.apstag.debug?(Zt.p(o+"Requesting bids"),t=ee.g(e),i=t.vasts[Zt.lt(t.vasts,"vast_index",n)],t={mediaType:"video"},R.Zi(e,i)&&Zt.v(80,e,!1,!1),81==i.id_vast_type&&(t.slotID=Zt.At()?"Autoplay":"Clicktoplay"),132==i.id_vast_type&&(t.slotID="Viously_Outstream_allpublishers"),window.apstag.fetchBids({slots:[t],timeout:2e3},function(t){Zt.p(o+"Bids request done"),R.Zi(e,i)&&Zt.v(81,e,!1,!1),ot(e,n,t)})):0<Ht.admin.apstag_retry?(Zt.p(o+"Retry "+Ht.admin.apstag_retry),--Ht.admin.apstag_retry,window.setTimeout(function(){it(e,n)},100)):(Zt.p(o+"Could not load the library. Skipping Amazon bids."),ot(e,n,{}))},ot=function(t,e,n){var i=ee.g(t),e=i.vasts[Zt.lt(i.vasts,"vast_index",e)];0<n.length?(Zt.p(o+"Bids received "+JSON.stringify(n)),Ht.advertising.aips[n[0].amznbid]?(e.url="https://aax.amazon-adsystem.com/e/dtb/vast?b="+n[0].amzniid+"&rnd="+Math.floor(1e13*Math.random())+"&pp="+n[0].amznbid,e.obpf=Ht.advertising.aips[n[0].amznbid],e.obpc=e.currency,e.pf=Ht.advertising.aips[n[0].amznbid],Zt.P(e,"EUR"),e.rpf=e.pf,e.epf=e.predictions&&"number"==typeof e.predictions.rpm?e.predictions.rpm:null,e.bpf=e.pf,U(i.vasts,!0),m(t,e.vast_index)):(Zt.p(o+"Request for VAST "+R.di(e)+" did not return any valid id. Skipping ad request."),R.Zi(t,e)&&(Ht.advertising.aipsi[n[0].amznbid]?Zt.v(36,t,!1,!1,P(e)+"&aem=amazon_invalid_id&aeim="+n[0].amznbid):Zt.v(36,t,!1,!1,P(e)+"&aem=amazon_missing_id&aeim="+n[0].amznbid)),e.ad=!1,0!=O.pi||l.Mi||R.Ai(t,!0))):(Zt.p(o+"Request for VAST "+R.di(e)+" did not return any bid. Skipping ad request."),e.ad=!1,0!=O.pi||l.Mi||R.Ai(t,!0))},m=function(e,n){var t=ee.g(e),i=t.vasts[Zt.lt(t.vasts,"vast_index",n)],t=(Zt.Nt(i)&&(46==i.id_vast_type?de++:ce++),Zt.Nt(i)?"google":"prebid");if(_(i)?Xt.v("adVastRequest",{ad_vast_type:"booster",ad_type:"preroll",ad_engine:t}):f(i)?Xt.v("adVastRequest",{ad_vast_type:"adserving",ad_type:"preroll",ad_engine:t}):0==p.adVastRequest&&(p.adVastRequest=!0,Xt.v("adVastRequest",{ad_vast_type:"viously",ad_type:"preroll",ad_engine:t})),Zt.p(y+"Request "+R.di(i)+" : "+i.url),141==i.id_vast_type||144==i.id_vast_type)i.adContent?R.Ti.call({},"ADS_MANAGER_LOADED",e,n):R.Ti.call("Banner linear error : no ad element","AD_LOAD_ERROR",e,n);else if(Zt.Dt(Jt,i)){const a=new ui(B,e,n),r={muted:ee.M.getState().muted||!1===ee.M.getState().isAudioPlaybackAllowed,vastLoadTimeout:Zt.bt(e,parseInt(O.li),O.pi,i),loadVideoTimeout:1e3*Ht.admin.adserve_ad_load_video_timeout,withCredentials:!0,wrapperLimit:Ht.admin.ima_num_redirects,playNextAdInPod:!1},c=i.url||i.responseXml;i.adsLoader=a.load(c,r),i.adsLoader.loadedAd.then(({})=>{R.Ti.call({},"ADS_MANAGER_LOADED",e,n)}).catch(t=>{R.Ti.call(t,"AD_LOAD_ERROR",e,n)})}else{i.adsLoader=new window.google.ima.AdsLoader(ae),i.adsLoader.getSettings().setAutoPlayAdBreaks(!0),Zt.K(i.adsLoader,window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){R.Ti.call(t,"ADS_MANAGER_LOADED",e,n)}),Zt.K(i.adsLoader,window.google.ima.AdErrorEvent.Type.AD_ERROR,function(t){R.Ti.call(t.getError(),"AD_LOAD_ERROR",e,n)});var o,s=new window.google.ima.AdsRequest,t=ee.et();for(o in s.vastLoadTimeout=Zt.bt(e,parseInt(O.li),O.pi,i),s.forceNonLinearFullSlot=!0,s.linearAdSlotWidth=t?t.offsetWidth:0,s.linearAdSlotHeight=t?t.offsetHeight:0,s.nonLinearAdSlotWidth=t?t.offsetWidth:0,s.nonLinearAdSlotHeight=t?t.offsetHeight:0,ge&&(s.pageUrl=Ht.page.url),s.setAdWillAutoPlay(ee.Qi.Qt()),s.setAdWillPlayMuted(ee.M.getState().muted||!1===ee.M.getState().isAudioPlaybackAllowed),s.omidAccessModeRules={},window.google.ima.OmidVerificationVendor)s.omidAccessModeRules[window.google.ima.OmidVerificationVendor[o]]=window.google.ima.OmidAccessMode.FULL;if(i.request_timestamp=Date.now(),""==i.url&&i.responseXml)s.adsResponse=i.responseXml,i.adsLoader.requestAds(s,ee.et());else{if(Zt.Nt(i)){const d=/correlator=(\d+)/,u=Math.floor(1e7*Math.random());i.url=i.url.replace(d,"correlator="+u),Zt.p(g+"Replace Google correlator "+i.url)}""!=i.url?(s.adTagUrl=i.url,i.adsLoader.requestAds(s,ee.et())):(Zt.p(g+R.di(i)+" Cancelled due to empty VAST URL"),i.ad=!1,i.adsLoader.destroy(),R.Ti.call("Cancelled due to empty VAST URL","AD_LOAD_ERROR",e,n))}window.setTimeout(function(){"waiting"===i.ad&&(Zt.p(g+R.di(i)+" Cancelled because request is too long"),i.ad=!1,i.adsLoader.destroy(),R.Ti.call("IMA request cancelled because it timed out","AD_LOAD_ERROR",e,n))},Zt.bt(e,parseInt(O.li),O.pi,i)+1e3)}R.Zi(e,i)&&Zt.v(34,e,!1,!1,P(i))},st=function(t,e,n){O.Ci++;var i=!0,o=ee.g(e),n=o.vasts[Zt.lt(o.vasts,"vast_index",n)];if(n&&!n.response_timestamp&&(n.response_timestamp=Date.now()),"ADS_MANAGER_LOADED"===t)45==n.id_vast_type&&(he=0),n.response=this,Zt.v(35,e,!1,!1,P(n)),n.ad=!0,Zt.p(y+"Response : "+t+" : "+R.di(n));else{i=!1,45==n.id_vast_type&&(he++,Zt.p(y+"GOOGLE_OPEN_AD_LOAD_ERROR="+he)),(Zt.Nt(n)&&"9"!=n.id_ssp&&"17"!=n.id_ssp&&"45"!=n.id_vast_type||45==n.id_vast_type&&2<=he)&&(pe.push(n.id_vast_type),-1==n.id_ssp&&(Ht.advertising.linear.primary=!1),-2==n.id_ssp&&(Ht.advertising.linear.passback=!1),Zt.p(y+"BAN GOOGLE = "+pe.join(",")));var s=this,a=901,r="",c="",d=!1;if("[object String]"===Object.prototype.toString.call(s))c+="&aem="+s,"Missing bid response"==s&&(d=!0),r=s;else if("[object Object]"===Object.prototype.toString.call(s)){let t=s.getMessage();const u=Zt.Bt(t)||"Unknown error";c=(c=(c=(c+="&aem="+u)+("&aec="+(s.getErrorCode()||900)))+("&aevc="+(s.getVastErrorCode()||900)))+("&aet="+s.getType()),"The VAST response document is empty."==s.getMessage()&&(d=!0),1009!=s.getErrorCode()&&1009!=s.getVastErrorCode()||(d=!0),c+="&aeim="+(t=900!=s.getVastErrorCode()&&901!=s.getVastErrorCode()||!s.getInnerError()?t:encodeURIComponent(s.getInnerError())),a=s.getVastErrorCode()||a,r=s.getMessage()||"Unknown error"}"AD_LOAD_ERROR"===t&&!1===d&&(R.Zi(e,n)&&Zt.v(36,e,!1,!1,P(n)+c),_(n)?Xt.v("adVastRequestError",{ad_vast_type:"booster",ad_error_code:a,ad_error_message:r}):f(n)&&Xt.v("adVastRequestError",{ad_vast_type:"adserving",ad_error_code:a,ad_error_message:r})),"AD_ERROR"===t&&Zt.v(40,e,!1,!1,P(n)+c),n.ad=!1,0==d&&Zt.p(y+"Response : "+t+" : "+R.di(n)+" : "+r)}e==Ht.admin.current_index||e==O.Li&&!l.Mi?R.Ai(e,i):(Zt.p(y+"Response a_video_index "+e+" (vid: "+o.vid+") doesn't match current a_video_index "+Ht.admin.current_index+" (vid: "+ee.Ji(Ht.admin.current_index)+") or ima is prefetching ("+l.Mi+")"),O.Ci===o.vasts.length&&ee.ee.Si(Ht.admin.current_index),"AD_ERROR"===t&&R.Ai(Ht.admin.current_index,i),e!=Ht.admin.current_index&&e!=O.Li||ee.no().eo(e,i))},at=function(t,e){const n=ee.g(t),i=n.original_vasts&&n.original_vasts.some(function(t){return 199==t.id_vast_type});i&&!n.backfill_called&&parseInt(O.li)<Ht.template.advertising.linear.max_preroll_viously?(Zt.p(y+"All bidders have lost, trying VAST Backfill as fallback."),pt(t,!0),n.backfill_called=!0):Ht.advertising.linear.passback&&1==Ht.template.advertising.linear.passback&&0==Ht.advertising.linear.passback.bpf&&parseInt(O.li)<Ht.template.advertising.linear.max_preroll_viously&&!n.passback_called?(Zt.p(y+"All bidders have lost, trying VAST Adserving (passback) as fallback."),lt(t,!0),n.passback_called=!0):(Zt.p(y+"* * -> no buyers"),Zt.v(51,t,!0,!0,P(null)),0==p.adVastStart&&0==p.adVastRequestError&&(p.adVastRequestError=!0,Xt.v("adVastRequestError",{ad_vast_type:"viously",ad_error_code:303,ad_error_message:"Empty VAST response returned"})),0==O.pi&&u(y+"no buyers",!1))},rt=function(t){var e,n="";return Yt&&(e=Xt.Yt.parentNode,parent.window.export_el=e,_(t)&&(parent.viously_params&&parent.viously_params.custom_macro&&parent.viously_params.custom_macro.vast_booster?n=parent.viously_params.custom_macro.vast_booster:e&&e.dataset&&(e.dataset.vastCustomMacro&&(n=e.dataset.vastCustomMacro),e.dataset.vastPrimaryCustomMacro&&(n=e.dataset.vastPrimaryCustomMacro),e.dataset.vastBoosterCustomMacro)&&(n=e.dataset.vastBoosterCustomMacro)),f(t))&&(parent.viously_params&&parent.viously_params.custom_macro&&parent.viously_params.custom_macro.vast_adserving?n=parent.viously_params.custom_macro.vast_adserving:e&&!e.dataset&&(e.dataset.vastPassbackCustomMacro&&(n=e.dataset.vastPassbackCustomMacro),e.dataset.vastAdservingCustomMacro)&&(n=e.dataset.vastAdservingCustomMacro)),n},ct=function(t,e){var n=ee.g(e),i="unknown",o=ee.et();if(Ht.page.fpd)if(1==Ht.page.fpd.gv_safe)i="safe";else if(Ht.page.fpd.gs_channels)for(var s=Ht.page.fpd.gs_channels.split(","),a=0;a<s.length;a++)"gv_safe"!=s[a]&&0==s[a].indexOf("gv_")&&(i="unsafe");t.url=t.url.replace("%%URL%%",encodeURIComponent(Ht.page.url)),t.url=t.url.replace("%%REFERRER_URL%%",encodeURIComponent(Ht.page.referrer)),t.url=t.url.replace("%%TIMESTAMP%%",Math.round(100*Zt.I())/100),t.url=t.url.replace("%%CACHEBUSTER%%",Math.floor(1e7*Math.random())),t.url=t.url.replace("%%GDPR_APPLIES%%",Ht.page.tcf.gdprApplies?"1":"0"),t.url=t.url.replace("%%GDPR_NPA%%",Ht.page.usp.applies?1:0),t.url=t.url.replace("%%GDPR_CONSENT%%",Ht.page.tcf.tcString),t.url=t.url.replace("%%PLAYLIST_INDEX%%",ee.Se(e)),t.url=t.url.replace("%%GV_SAFE%%",i),t.url=t.url.replace("%%BRAND_SAFE%%",i),t.url=t.url.replace("%%MUTE%%",(!ee.M.getState().isAdAudible).toString()),t.url=t.url.replace("%%CATEGORY%%",n.category.name),t.url=t.url.replace("%%AUDIENCE_SOURCE%%",Ht.page.audience_source.name),t.url=t.url.replace("%%TOP_OF_PAGE%%",ee.k()),t.url=t.url.replace("%%ABOVE_THE_FOLD%%",ee.T()),t.url=t.url.replace("%%IAB_CATEGORIES%%",Ht.page.iab.category.toString()),t.url=t.url.replace("%%ORTB_PLCMT%%",N(t)||""),t.url=t.url.replace("%%PLAYBACK_METHOD%%",ee.Ae()?ee.Ae():""),t.url=t.url.replace("%%PLAYER_WIDTH%%",o?o.offsetWidth:0),t.url=t.url.replace("%%PLAYER_HEIGHT%%",o?o.offsetHeight:0)},dt=function(t,e){if(t.url+=rt(t),ct(t,e),Zt.Nt(t)&&(-1==t.url.indexOf("&plcmt=")&&(t.url+="&plcmt="+N(t)),-1==t.url.indexOf("&gdpr=")&&(t.url+="&gdpr="+(Ht.page.tcf.gdprApplies?"1":"0")),-1==t.url.indexOf("&gdpr_consent=")&&(t.url+="&gdpr_consent="+Ht.page.tcf.tcString),Ht.page.tcf.addtlConsent&&0<Ht.page.tcf.addtlConsent.indexOf("~")&&-1==t.url.indexOf("&addtl_consent=")&&(t.url+="&addtl_consent="+Ht.page.tcf.addtlConsent),-1==t.url.indexOf("&max_ad_duration=")&&(t.url+="&max_ad_duration="+parseInt(1e3*Zt.vt())),-1==t.url.indexOf("&ad_rule="))&&(t.url+="&ad_rule=0"),Ht.advertising.psm){var n,i="",e="";for(n in t.key_values)"vsl_prio_version"!=n&&"vsl_primary_call_ver"!=n&&(i+="&"+n+"="+encodeURIComponent(t.key_values[n]));Zt.Nt(t)?-1<t.url.indexOf("&cust_params=")?e+=encodeURIComponent(i):e+="&cust_params="+encodeURIComponent(i.slice(1)):e+=i,-1<t.url.indexOf("%%SONAR%%")?t.url=t.url.replace("%%SONAR%%",e):Zt.Nt(t)&&-1<t.url.indexOf("&cust_params=")?t.url=t.url.replace("&cust_params=","&cust_params="+encodeURIComponent(i.slice(1)+"&")):t.url+=e}},ut=function(t,e){Zt.p(y+"Add VAST Booster");var n=ee.g(t),i=JSON.parse(JSON.stringify(Ht.advertising.linear.primary));R.io(i,t),Zt.Nt(i)&&R.oo(i),i.ad_infos_event="",i.vast_index=b(t,i.id_vast_type),i.ad_index=parseInt(O.li),i.ad="waiting",Zt.p(i,!0),n.vasts.push(i),e&&(Zt.p(y+"Request VAST Booster"),m(t,i.vast_index))},lt=function(t,e){Zt.p(y+"Add VAST Adserving");var n=ee.g(t),i=JSON.parse(JSON.stringify(Ht.advertising.linear.passback));R.io(i,t),Zt.Nt(i)&&R.oo(i),i.ad_infos_event="",i.vast_index=b(t,i.id_vast_type),i.ad_index=parseInt(O.li),i.ad="waiting",n.vasts.push(i),U(n.vasts),Zt.p(i,!0),e&&(Zt.p(y+"Request VAST Adserving"),m(t,i.vast_index))},pt=function(t,e){Zt.p(y+"Add VAST Backfill");var n=ee.g(t),i=n.original_vasts.find(function(t){return 199==t.id_vast_type});i?((i=JSON.parse(JSON.stringify(i))).url="https://83a19.v.fwmrm.net/ad/g/1?nw=539161&resp=vast4&prof=539161%3Aprebidserver_sparteo_web&csid=SS_Web_Sparteo_Sales_House_Backfill&caid=backfill&pvrn=%%CACHEBUSTER%%&vprn=%%TIMESTAMP%%&mode=on-demand;_fw_bidfloor=0&_fw_bidfloorcur=EUR&_fw_gdpr_consent=%%GDPR_CONSENT%%&_fw_gdpr=%%GDPR_APPLIES%%&_fw_us_privacy=1---&loc=%%URL%%&_fw_player_width=640&_fw_player_height=480&_fw_video_context=instream&_fw_placement_type=1&_fw_plcmt_type=1;tpos=0&ptgt=a&slid=Preroll_1&slau=preroll;",ct(i,t),i.ad_infos_event="",i.vast_index=b(t,i.id_vast_type),i.ad_index=parseInt(O.li),i.ad="waiting",n.vasts.push(i),U(n.vasts),Zt.p(i,!0),e&&(Zt.p(y+"Request VAST Backfill"),m(t,i.vast_index))):Zt.p(y+"No VAST Backfill found in original_vasts")},ht=function(s){if(Ht.advertising.linear.prebid){var a=ee.g(s);if(a.ssp_seats_added)Zt.p(y+"SSP Seats already added");else{a.ssp_seats_added=!0;var r=JSON.parse(Ht.advertising.linear.prebid.url);for(let t=0,e=null,n=null,i=null,o=null;t<r.length;t++)if(e=r[t],n=JSON.parse(JSON.stringify(Ht.advertising.linear.prebid)),e.code){for(var c in o=parseFloat(n.id_vast_type+"."+e.id),i=b(s,o),n.ssp_name=e.name+" PUBLISHER",n.bidder_id=e.id,n.ad_infos_event="",n.vast_index=i,n.ad_index=parseInt(O.li),n.ad="waiting",n.id_vast_type=o,n.s2s=Ht.advertising.s2s,n.prebid=!0,n.url="","outstream"==e.context&&(n.outstream=!0),n.prebid_bidder={bidder:e.code+"-publisher",params:{idVastType:o,vastIndex:i}},e.params)n.prebid_bidder.params[c]=e.params[c];V[n.prebid_bidder.bidder]||(V[n.prebid_bidder.bidder]=n.id_vast_type.toString()),Zt.p(n,!0),a.vasts.push(n)}U(a.vasts),Zt.p(y+"Add SSP Seats")}}else Zt.p(y+"SSP Seats not setup")},ft=function(t,e){if(O.Ui)Zt.p(y+"Competition is on hold.");else{var n=ee.g(t);if(null==O.Oi)if(e&&Zt.p(y+"Competition "+n.vid),n.vasts.length)for(var i=0,o=n.vasts.length,s=null;i<o;i++){if(!0===(s=n.vasts[i]).ad){e&&Zt.p(y+"* * "+R.di(s)+" -> "+s.bpf+" | "+(s.predictions&&"number"==typeof s.predictions.rpm?s.predictions.rpm:"not set")+" | "+s.mpf+" | "+s.pf+" | "+s.currency+" -> "+s.ad),O.Li=t,O.Oi=s.vast_index,s.nonlinear?ee.fi.so(t,s.vast_index):mt(t,s.vast_index);break}if(s.nonlinear){ee.fi.ao();break}if(!1!==s.ad){Zt.p(y+"* * "+R.di(s)+" -> "+s.ad);break}if(e&&Zt.p(y+"* * "+R.di(s)+" -> "+s.ad),i==o-1){at(t);break}}else at(t);else e&&Zt.p(y+"ID "+O.Oi+" from vid "+n.vid+" already win")}},mt=function(n,t){var e=null,i=ee.g(n),o=i.vasts[Zt.lt(i.vasts,"vast_index",t)],s=(k&&clearInterval(k),Zt.p(y+"Manage "+R.di(o)),o.winning_notice_urls&&("string"==typeof o.winning_notice_urls?Zt.wt(o.winning_notice_urls):Zt.gt(o.winning_notice_urls)),141!=o.id_vast_type&&!1===Zt.Dt(Jt,o)&&(Zt.p(g+"VPAID MODE is "+ie),(i=new window.google.ima.AdsRenderingSettings).enablePreloading=!0,i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.bitrate=500,i.loadVideoTimeout=1e3*Ht.admin.ad_load_video_timeout,i.useStyledLinearAds=!1,i.useStyledNonLinearAds=!0,i.uiElements=[],S=o.response.getAdsManager(ee.et(),i),Zt.p(y+"_AdsManager set for IMA as "+S.constructor.name+" for vast_index "+t),ee.M.setAdManager(S)),{ad_loaded:!1,ad_impression:!1,ad_start:!1,ad_first_quartile:!1,ad_midpoint:!1,ad_third_quartile:!1,ad_complete:!1,refetch_vast:!1}),a=(H.enrich({getAVideoIndex:()=>n,getVastIndex:()=>t,getAdState:()=>s}),H.onAdEvent);if(141==o.id_vast_type){document.getElementById("ad-banner")?e=document.getElementById("ad-banner"):((e=document.createElement("div")).id="ad-banner",A.appendChild(e));var r=!1,c=!1,d=!1,u=!1,l=500,p=Ft["meetscale-linear"]&&Ft["meetscale-linear"].length?Ht.admin.banner_linear_duration/2:Ht.admin.banner_linear_duration,h=Ht.admin.banner_linear_duration,f=0,m=(o.second_banner||(o.second_banner=!1),1==o.second_banner&&(p=Ht.admin.banner_linear_duration/2,h=Ht.admin.banner_linear_duration/2-l/1e3,f=p,e.style.display="none",ee.ui("ad-banner"),O.Ni=!1,O.Di=-1,O.Pi=!1),o.advertising_duration=p,a({type:"loaded",context_vast:o}),function(){1==T&&(e.removeAttribute("style"),sfs.destroy(e)),T=!1}),_=function(){clearInterval(k),clearTimeout(x),m(),Ft["meetscale-linear"]&&Ft["meetscale-linear"].length&&0==o.second_banner?(Zt.p(I+"Get bid "+o.prebid_bidder.bidder+" from Adpod"),clearTimeout(q),o.second_banner=!0,o.a_bid=Ft[o.prebid_bidder.bidder].shift(),o.a_bid.ad&&(o.adContent=o.a_bid.ad),o.a_bid.nurl&&(o.winning_notice_urls=o.a_bid.nurl),o.a_bid.iurl&&(o.impression_notice_urls=o.a_bid.iurl),o.obpf=o.a_bid.cpm,o.obpc=o.a_bid.currency?o.a_bid.currency.toUpperCase():null,o.pf=o.a_bid.cpm,o.currency=o.a_bid.currency?o.a_bid.currency.toUpperCase():null,Zt.P(o,"EUR"),o.rpf=o.pf,o.bpf=o.pf,Zt.p(I+"Use Adpod"),Zt.p(o.a_bid,!0),mt(n,t)):(document.getElementById("ad-countdown").textContent="",a({type:"allAdsCompleted",context_vast:o}))},v=function(){Ft["meetscale-linear"]&&Ft["meetscale-linear"].length&&0==o.second_banner&&(p=Ht.admin.banner_linear_duration/2),f+=l/1e3;const t=1==o.second_banner?Ht.admin.banner_linear_duration:p,e=(St(n,o),!1===r&&f>=t/4&&(r=!0,a({type:"firstQuartile",context_vast:o})),!1===c&&f>=t/2&&(c=!0,a({type:"midpoint",context_vast:o})),!1===d&&f>=3*t/4&&(d=!0,a({type:"thirdQuartile",context_vast:o})),!1===u&&f>=t&&(u=!0,a({type:"complete",context_vast:o}),_()),ee.et()?ee.et().offsetWidth:0);document.getElementById("ad-countdown").textContent=Ht.admin.lng[e<=200?"remainingsmall":"remaining"].replace("xx",parseInt(h,10)),h-=l/1e3},b=function(){const t=o;x=window.setTimeout(function(){Zt.p(I+"Timeout"),!1===T&&(Zt.p(I+"Error : rendering failed"),clearInterval(k),a({type:"error",error:"Banner linear error : rendering failed",context_vast:t}))},1e3*Ht.admin.banner_render_timeout),sfs.init({debug:ke,context:window,cookieDisallow:!ee.Ot.Ki(),resize:{observer:!1,center:!0,upscale:!0,downscale:!0},sf:{debug:ke,timeout:3e3,"read-cookie":ee.Ot.Ki(),"write-cookie":ee.Ot.Ki(),onEndPosRender:function(t){Zt.p(I+"onEndPosRender"),clearTimeout(x),T=!0,E(),Zt.K(window,"resize",E),a({type:"impression",context_vast:o}),a({type:"start",context_vast:o});const e=ee.et()?ee.et().offsetWidth:0;document.getElementById("ad-countdown").textContent=Ht.admin.lng[e<=200?"remainingsmall":"remaining"].replace("xx",parseInt(h,10)),k&&clearInterval(k),k=setInterval(function(){v()},l)},onVisible:function(t){Zt.p(I+"onVisible")}}}),sfs.render(e,o.a_bid)};m(),window.sfs?b():Zt.ot(document.body,Ht.admin.sfs_url,function(){Zt.p(I+"Lib loaded"),b()},function(){Zt.p(I+"Failed to load lib"),Zt.v(14,null,!1,!1,"&sec=17&sem=script_error_sfs"),a({type:"error",error:"Safeframe error : sfs not loaded",context_vast:o})})}else if(Zt.Dt(Jt,o))S=o.adsLoader,Zt.p(y+"_AdsManager set for Adserve as "+S.constructor.name+" for vast_index "+t);else{for(var w in window.google.ima.AdEvent.Type)Zt.K(S,window.google.ima.AdEvent.Type[w],a);Zt.K(S,window.google.ima.AdErrorEvent.Type.AD_ERROR,function(t){a({type:"error",error:t.getError(),context_vast:o})})}O.yi=!0,M(n)},P=function(t){var e="";if(t){if(Array.isArray(t.ab)&&Array.isArray(Jt)&&(e+="&ab="+t.ab.concat(Jt).toString()),t.id_vast_type&&(e+="&aivt="+t.id_vast_type),t.name&&(e+="&anvt="+t.name),r(t)&&(e+="&asvt="+r(t)),t.id_ssp&&(e+="&ais="+t.id_ssp),t.ssp_name&&(e+="&ans="+t.ssp_name),t.placement&&(e+="&apl="+(t.placement||"none")),t.pf&&(e+="&arpm="+t.pf),t.epf&&(e+="&aerpm="+(t.epf||0)),t.bpf&&(e+="&abrpm="+(t.bpf||0)),t.obpf&&(e+="&aobrpm="+(t.obpf||0)),t.obpc&&(e+="&aobpc="+(t.obpc||0)),void 0!==t.s2s&&(e+="&s2s="+t.s2s),t.rpf&&(e+="&rpf="+(t.rpf||0)),v(t)&&(e+="&ppf="+(t.ppf||0)),(_(t)||f(t))&&(e+="&ppf="+(t.yvr||0)),1==O.pi&&t.ad&&"refetching"===t.ad?e+="&adix="+Math.min(parseInt(parseInt(O.li)+1),Ht.template.advertising.linear.max_preroll_viously-1):e+="&adix="+parseInt(O.li),e=(e=(e=(e=(e=(e+="&aapv="+ne)+("&aapw="+(t.predictions&&"number"==typeof t.predictions.rpm_weight?t.predictions.rpm_weight:1)))+("&avt="+_t(t)))+("&aif="+(1==t.outstream?"outstream":t.banner?"banner":"instream")))+("&apc="+N(t)))+("&aaf="+(t.nonlinear?"nonlinear":"linear")),t.bidder_id&&(e+="&auabi="+t.bidder_id),t.predictions&&"object"==typeof t.predictions&&(e+="&apr="+JSON.stringify(t.predictions)),t.predictions_versions&&"object"==typeof t.predictions_versions&&(e+="&aprv="+JSON.stringify(t.predictions_versions)),t.ad_infos_event&&(e+=t.ad_infos_event),t.a_bid){if(t.a_bid.width&&t.a_bid.height?e+="&asz=["+parseInt(t.a_bid.width)+","+parseInt(t.a_bid.height)+"]":e+="&asz=unknown",t.a_bid.adserverTargeting&&t.a_bid.adserverTargeting.hb_adomain&&""!=t.a_bid.adserverTargeting.hb_adomain?e+="&ban="+t.a_bid.adserverTargeting.hb_adomain.toString().trim():t.a_bid.meta&&t.a_bid.meta.advertiserDomains&&t.a_bid.meta.advertiserDomains.length&&(e+="&ban="+t.a_bid.meta.advertiserDomains[0].toString().trim()),t.a_bid.vastXml)try{t.advertising_duration=parseInt(decodeURIComponent(t.a_bid.vastXml.match(/duration%3D(\d+)/)[1])),e+="&bad="+t.advertising_duration}catch(t){e+="&bad=-1"}else 1==t.banner?e=(e+="&bad="+t.advertising_duration)+"&aad="+t.advertising_duration:e+="&bad=-1";e=1==t.banner?(e+="&baid="+t.a_bid.requestId)+"&bcrid="+t.a_bid.seatBidId:(e+="&baid="+(t.a_bid.adId||"").toString().trim())+"&bcrid="+(t.a_bid.creativeId||t.a_bid.creative_id||"").toString().trim()}}else e=e+("&adix="+parseInt(O.li))+"&aaf=linear";return e+="&aivpm="+ie,ee.Ae()&&(e+="&ppm="+ee.Ae()),e},_t=function(t){return-1==t.id_ssp?"primary":-2==t.id_ssp?"passback":-3==t.id_ssp?"prebid":"viously"},vt=function(t){return t?(t.ssp_name?t.ssp_name+" ":"")+(t.name?t.name+" ":"")+(t.vast_index||t.id_vast_type)+(r(t)?" ("+r(t)+")":""):""},r=function(t){return t.key_values&&t.key_values.v2_dmd?t.key_values.v2_dmd:null},U=function(t,e){t.sort(function(t,e){var n=t.mpf||t.pf,i=e.mpf||e.pf,o=t.bpf||(t.predictions&&"number"==typeof t.predictions.rpm?t.predictions.rpm:n),s=e.bpf||(e.predictions&&"number"==typeof e.predictions.rpm?e.predictions.rpm:i),a=t.predictions&&"number"==typeof t.predictions.rpm_weight?t.predictions.rpm_weight:1,r=e.predictions&&"number"==typeof e.predictions.rpm_weight?e.predictions.rpm_weight:1,c=t.predictions&&"number"==typeof t.predictions.error_rate?1-t.predictions.error_rate:a,d=e.predictions&&"number"==typeof e.predictions.error_rate?1-e.predictions.error_rate:r,t=141==t.id_vast_type?Math.round(Ht.admin.banner_linear_duration/2):t.predictions&&"number"==typeof t.predictions.duration&&1<t.predictions.duration?t.predictions.duration:t.predictions&&"number"==typeof t.predictions.ad_duration&&1<t.predictions.ad_duration?t.predictions.ad_duration:1<t.advertising_duration?t.advertising_duration:1,e=141==e.id_vast_type?Math.round(Ht.admin.banner_linear_duration/2):e.predictions&&"number"==typeof e.predictions.duration&&1<e.predictions.duration?e.predictions.duration:e.predictions&&"number"==typeof e.predictions.ad_duration&&1<e.predictions.ad_duration?e.predictions.ad_duration:1<e.advertising_duration?e.advertising_duration:1;return 0===ne.indexOf("apiOA")?s*r-o*a:0===ne.indexOf("apiOB")?s*r/e-o*a/t:0===ne.indexOf("apiOC")?s*d/e-o*c/t:i-n});const n=t.findIndex(t=>_(t));if(-1<n){const[i]=t.splice(n,1);t.unshift(i)}e&&(Zt.p(y+"Sort Vasts by "+ne),t.forEach(function(t){Zt.p(y+"* * "+R.di(t)+" -> "+t.bpf+" | "+(t.predictions&&"number"==typeof t.predictions.rpm?t.predictions.rpm:"not set")+" | "+t.mpf+" | "+t.pf+" | "+t.currency+" -> "+t.ad)}))},bt=function(t){let e=t.length;if(ue<=ce)for(Zt.p(y+"Max Google ad requests reached");e--;){var n=t[e];Zt.Nt(n)&&"9"!=n.id_ssp&&"17"!=n.id_ssp&&46!=n.id_vast_type&&(Zt.p(y+"Remove "+R.di(n)),t.splice(e,1))}if(le<=de)for(Zt.p(y+"Max Google Saleshouse ad requests reached");e--;){n=t[e];Zt.Nt(n)&&46==n.id_vast_type&&(Zt.p(y+"Remove "+R.di(n)),t.splice(e,1))}},wt=function(o){function t(){if(pe.length)for(let e=0;e<pe.length;e++){let t=o.length;for(;t--;){var n=o[t];Zt.Nt(n)&&n.id_vast_type==pe[e]&&(Zt.p(y+"BAN "+R.di(n)),o.splice(t,1))}}}function e(){if(Ht.template.sdk.placement&&Ht.template.sdk.placement.xpath&&"vsly-invisible-placement"==Ht.template.sdk.placement.xpath)for(var t=o.length;t--;){var e=o[t];Zt.Nt(e)&&(Zt.p(y+"BAN "+R.di(e)),o.splice(t,1))}}function n(){if(Yt&&window.parent&&window.parent.xj4fj5&&"function"==typeof window.parent.xj4fj5.Qm93Tf){var t=fe.length;if(!1===window.parent.xj4fj5.Qm93Tf())for(var e=o.length;e--;){var n=o[e];Zt.Nt(n)&&(Zt.p(y+"POLICY BAN "+R.di(n)),fe.push(n),o.splice(e,1))}else if(0<t)for(;t--;){var i=fe.pop();Zt.p(y+"POLICY PUT BACK "+R.di(i)),o.push(i)}}}t(),e(),Ht.advertising.bucket&&n()},M=function(t){if(O.Ui)Zt.p(y+"Before start is on hold.");else if(Zt.p(y+"Before start"),(O.yi||O.Ri)&&(!0===ee.Qi.Qt()||!0===ee.Gi.Qt())){void 0===t&&(t=O.Li);const e=O.Oi;if(null!=e){const n=ee.g(t),i=n.vasts[Zt.lt(n.vasts,"vast_index",e)],o=document.getElementById("adserve-ad-slot"),s=document.getElementById("ad-container"),a=Zt.Dt(Jt,i)?"Adserve":"IMA";if("Adserve"===a?(Zt.p(y+"Before start -- ADSERVE"),o&&Object.assign(o.style,{display:"block"}),s&&Object.assign(s.style,{display:"none"})):"IMA"===a&&(Zt.p(y+"Before start -- IMA"),o&&Object.assign(o.style,{display:"none"}),s)&&Object.assign(s.style,{display:"block"}),void 0===t&&(t=O.Li),Zt.p(y+"adsManager start : "+R.di(i)),141!=i.id_vast_type){if(Zt.Y(document.getElementById("ad-volume"),"click",ee.M.toggleMute),Zt.K(document.getElementById("ad-volume"),"click",ee.M.toggleMute),"IMA"===a){$();const r=ee.et();r&&S.init(r.offsetWidth,r.offsetHeight,window.google.ima.ViewMode.NORMAL,r)}S&&"function"==typeof S.start?S.start():Zt.p(y+" Tried to call _AdsManager.start, but failed: "+(new Error).stack)}Zt.v(61,t,!1,!1,P(i)),0<c.TIMER&&(clearTimeout(c.TIMER),c.TIMER=0),c.TIMER=window.setTimeout(function(){null==e||0!=O.pi||l.Mi||(Zt.p(y+"Kill adsManager : "+R.di(i)),i.killed=!0,141!=i.id_vast_type&&(S&&S.destroy(),"IMA"===a)&&i.adsLoader.contentComplete(),h(!1),R.Ti.call("KILL ADSMANAGER","AD_ERROR",t,e))},parseInt(1e3*parseInt(Ht.admin.ad_load_video_timeout)+2e3))}else O.Ri=!1,ee.Ii(Ht.admin.current_index)}},u=function(t,e){Zt.p(t),ee.ui("idle"),O.Ri=!0,M(),h(e)},gt=function(){Zt.p(y+"Try to skip"),Kt||(Zt.Y(document.getElementById("ad-skip-button"),"click",gt),document.getElementById("ad-skip-button").style.pointerEvents="none"),S.adSlot?(Zt.p(y+"Call Adserve stop"),S.stop()):S&&"function"==typeof S.getAdSkippableState&&!0===S.getAdSkippableState()?(Zt.p(y+"Call IMA skip"),S.skip()):(Zt.p(y+"Call IMA stop"),S.stop());var t=ee.g(O.Li),t=t.vasts[Zt.lt(t.vasts,"vast_index",O.Oi)];Zt.v(43,O.Li,!1,!1,P(t))},h=function(t){Zt.p(y+"Clean"),0<c.TIMER&&(clearTimeout(c.TIMER),c.TIMER=0),Zt.Y(window,"resize",E),Kt||Zt.J(document.body,"show-ad-skip"),O.yi=!1,O.pi=!1,O.Vn=null,O.Ci=0,O.Oi=null,O.Li=Ht.admin.current_index,O.Ni=!1,O.Di=-1,O.Pi=!1,Kt||e.removeObserver({update:z},"isAdPlaying"),Zt.Y(document.getElementById("ad-volume"),"click",ee.M.toggleMute),O.Vi&&O.Vi.disconnect(),t&&(fe=[],p.adVastRequest=!1,p.adVastRequestError=!1,p.adVastStart=!1,p.adVastComplete=!1,p.adVastSkip=!1,p.adVastClick=!1,p.adVastDuration=0,te.Me())},yt=function(){S&&1==O.pi&&w(!0)},It=function(t,e){var n=new window.google.ima.CompanionAdSelectionSettings,i=(n.resourceType=window.google.ima.CompanionAdSelectionSettings.ResourceType.ALL,n.creativeType=window.google.ima.CompanionAdSelectionSettings.CreativeType.IMAGE,n.sizeCriteria=window.google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,e.getCompanionAds(300,250,n));if(i.length){a={vast_index:t.vast_index,list:[]};for(var o=0;o<i.length;o++)a.list.push(i[o])}return!!i.length},At=function(t,e){var n=Yt?parent:window,i=Yt?window.frameElement:document.body;"IntersectionObserver"in n?(O.Vi||(Zt.p(s+"IntersectionObserver: init for ad viewability"),O.Vi=new n.IntersectionObserver(function(t){t.forEach(function(t){t.target==i&&(.5<=t.intersectionRatio?(O.Ni=!0,-1==O.Di&&(O.Di=Zt.I())):(O.Ni=!1,O.Di=-1))})},{threshold:.5})),Zt.p(s+"IntersectionObserver: observe ad viewability"),O.Vi.observe(i)):(n=(n=ee.g(t)).vasts[Zt.lt(n.vasts,"vast_index",e)],Zt.p(s+"IntersectionObserver: not supported"),Zt.v(60,t,!1,!1,P(n)))},St=function(t,e){var n;O.Vi&&!O.Pi&&O.Ni&&-1!=O.Di&&(n=(Zt.I()-O.Di)/1e3,Zt.p(s+"Viewability duration : "+n),2<=n)&&(Zt.p(s+"Ad Viewability MRC reached"),Zt.v(59,t,!1,!1,P(e)),O.Pi=!0,O.Vi.disconnect())},kt=function(t,e){ft(t,e)},xt=function(){return S},Tt=function(){return a},Et=function(t){l.Mi=t},Mt=function(t,e,n){if(O.Ui)Zt.p(y+"Refetch is on hold.");else if(141!=e.id_vast_type||!e.second_banner){Zt.p(y+"Refetch VASTs");var i=ee.g(t);if(i.original_vasts){var o,s=[],a=[],r=n?parseInt(O.li)+1:parseInt(O.li),c=Jt.includes("pbs-adpod_multi_50"),d=c&&0<r&&r%j==0;if(c){Zt.p(y+"AdpodMulti: Using new refetch selection logic.");for(let t=0;t<i.original_vasts.length;t++){var u,l,p=i.original_vasts[t];(0<p.id_ssp&&199!=p.id_vast_type||_(p)&&!Ht.template.advertising.linear.primary_capping)&&(u=!1,(u=(l=i.vasts[Zt.lt(i.vasts,"id_vast_type",p.id_vast_type)])&&!0===l.adpod?!0:u)?d&&(Zt.p(y+"AdpodMulti: Adding adpod bidder for new infinite batch: "+R.di(p)),s.push(p)):s.push(p))}}else{Zt.p(y+"Legacy: Using production refetch selection logic."),(0<e.id_ssp||_(e)&&!Ht.template.advertising.linear.primary_capping)&&(c=i.original_vasts[Zt.lt(i.original_vasts,"id_vast_type",e.id_vast_type)])&&s.push(c);for(let t=0;t<i.vasts.length;t++)(f=i.vasts[t]).id_vast_type!=e.id_vast_type&&!1===f.ad&&f.ad_index==(n?parseInt(O.li):parseInt(O.li)-1)&&0<f.id_ssp&&199!=f.id_vast_type&&(o=i.original_vasts[Zt.lt(i.original_vasts,"id_vast_type",f.id_vast_type)])&&s.push(o)}bt(s),wt(s),U(s),Zt.p(y+"Refetching the following VASTs:"),Zt.p(s,!0);for(var h=0;h<s.length;h++){var f=JSON.parse(JSON.stringify(s[h]));Zt.p(y+"Refetch : "+R.di(f)+" for ad_index "+r),_(f)?1==Ht.template.advertising.linear.primary&&ut(t,!0):(Vt(t,f,r,!0),i.vasts.push(f),f.aps?it(t,f.vast_index):f.prebid?a.push(f.prebid_bidder):m(t,f.vast_index))}U(i.vasts),a.length&&X(t,a),s.length||R.Ai(t,!0)}}},_=function(t){return-1==t.id_ssp},f=function(t){return-2==t.id_ssp},v=function(t){return-3==t.id_ssp},Ot=function(t){return t.id_ssp<0},Ct=function(t,e){return ee.g(t)&&ee.g(t).id_session_video.charAt(0)<="1"||!!e&&Ot(e)||Kt},Rt=function(t,e){var n=ee.g(t),i=n.vasts[Zt.lt(n.vasts,"id_vast_type",e)],o={gdprapplies:Ht.page.tcf.gdprApplies?"true":"false",gdprconsent:Ht.page.tcf.tcString?"true":"false",gdprgoogleallowed:ee.Ot.$i()?"true":"false",vsl_gs_channels:Ht.page.fpd?Ht.page.fpd.gs_channels:"",vsl_gv_safe:Ht.page.fpd&&Ht.page.fpd.gv_safe?"true":"",vsl_vc_channels:Ht.page.fpd?Ht.page.fpd.vc_channels:"",vsl_video_index:ee.Se(t),vsl_mute:(!ee.M.getState().isAdAudible).toString(),vsl_category:n.category.name,vsl_template_id:Ht.template.id,vsl_template_version:Ht.template.version,vsl_consent_type:Ht.page.tcf.consentType,vsl_player_toproll:ee.k()?"true":"false",vsl_player_atf:ee.T()?"true":"false",vsl_ad_index:parseInt(O.li),vsl_vast_type:e,vsl_prio_version:ne,vsl_nonlinear_enable:Ht.advertising.companion.allowed?"true":"false",vsl_playback_method:ee.Ae(),duid:Ht.diffuser.uid,pasn:Ht.page.audience_source.name,pid:Ht.product.id,udbn:Ht.user.device.browser&&Ht.user.device.browser.name?Ht.user.device.browser.name:"",udon:Ht.user.device.os&&Ht.user.device.os.name?Ht.user.device.os.name:"",ugcn:Ht.user.geoip.country?Ht.user.geoip.country.name:"",udt:Ht.user.device.type,pnpv:Ht.page.nb_players,pet:ee.Ie(),aaf:"linear",ptcus:Ht.page.tcf.cmpuistate,pua:Ht.page.usp.applies.toString(),uib:Ht.user.is_bot.toString(),uidi:Ht.user.is_datacenter_ip.toString(),plv:n.vid};if(Ht.page.fpd){var s=3;if(Ht.page.fpd.safety)switch(Ht.page.fpd.safety){case"unsafe":s=0;break;case"safe":s=1;break;case"error":s=2}o.pgsy=s}if(ee.Ae()&&(o.vsl_playback_method=ee.Ae()),i)for(var a in i.key_values)o[a]=i.key_values[a];return o},Lt=function(){var e,n,i;return ee.Ot.Mt()&&Qt.Lt()&&(e=[],n=[],(i=JSON.parse(localStorage.getItem("mics_segments")||"{}"))&&"segments"in i&&(n=i.segments.map(function(t){return t.id}).filter(function(t){return parseInt(t)}),Array.prototype.push.apply(e,n)),(i=JSON.parse(localStorage.getItem("mics_sgmts")||"{}"))&&1<=Object.keys(i).length&&Object.keys(i).forEach(function(t){n=i[t].filter(function(t){return parseInt(t)}),Array.prototype.push.apply(e,n)}),e.length)?"mediarithmics="+e.filter(function(t,e,n){return n.indexOf(t)===e}).join(";mediarithmics="):""},Vt=function(t,e,n,i){var o=ee.g(t);if(i?(e.refetched=!0,e.ad="refetching"):e.ad="waiting",e.mpf||(e.mpf=e.pf),v(e)||(e.vast_index=b(t,e.id_vast_type)),e.ad_infos_event="",e.ad_index=n,"17"==e.id_ssp&&(e.obpf=e.pf,e.obpc=e.currency,a="",a=(a+="&vsl_domain="+window.location.hostname)+"&vsl_category="+Ht.page.iab.category.toString(),e.url+=encodeURIComponent(a),-1==e.url.indexOf("&plcmt=")&&(e.url+="&plcmt="+N(e)),e.url+="&gdpr="+Ht.page.tcf.gdprApplies,e.url+="&gdpr_consent="+Ht.page.tcf.tcString,Ht.page.tcf.addtlConsent&&0<Ht.page.tcf.addtlConsent.indexOf("~")&&(e.url+="&addtl_consent="+Ht.page.tcf.addtlConsent),-1==e.url.indexOf("&max_ad_duration=")&&(e.url+="&max_ad_duration="+parseInt(1e3*Zt.vt())),e.url+="&tfcd=0&impl=s&nofb=1&ad_rule=0"),Zt.P(e,"EUR"),void 0===e.epf&&(e.epf=e.predictions&&"number"==typeof e.predictions.rpm?e.predictions.rpm:e.pf),"3"!=e.id_ssp&&"8"!=e.id_ssp&&"9"!=e.id_ssp&&"17"!=e.id_ssp||(e.rpf="3"==e.id_ssp?e.epf:e.pf),"3"==e.id_ssp){var s,a="";for(s in a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a+="vsl_category="+o.category.name)+("&vsl_video_index="+ee.Se(t)))+("&vsl_template_id="+Ht.template.id))+("&vsl_template_version="+Ht.template.version))+("&vsl_ad_index="+n)+("&vsl_vast_type="+e.id_vast_type))+("&vsl_mute="+(!ee.M.getState().isAdAudible).toString()))+("&gdprapplies="+Ht.page.tcf.gdprApplies))+("&gdprconsent="+!!Ht.page.tcf.tcString))+("&gdprgoogleallowed="+!!ee.Ot.$i()))+("&vsl_consent_type="+Ht.page.tcf.consentType))+("&vsl_player_toproll="+ee.k()))+("&vsl_player_atf="+ee.T()),ee.Ae()&&(a+="&vsl_playback_method="+ee.Ae()),Ht.page.fpd&&(Ht.page.fpd.gv_safe&&(a+="&vsl_gv_safe="+Ht.page.fpd.gv_safe),Ht.page.fpd.gs_channels&&(a+="&vsl_gs_channels="+encodeURIComponent(Ht.page.fpd.gs_channels)),Ht.page.fpd.vc_channels)&&(a+="&vsl_vc_channels="+encodeURIComponent(Ht.page.fpd.vc_channels)),a+="&vsl_nonlinear_enable="+(Ht.advertising.companion.allowed?"true":"false"),e.key_values)a+="&"+s+"="+encodeURIComponent(e.key_values[s]);if(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a+="&vsl_prio_version="+ne)+("&duid="+Ht.diffuser.uid))+("&pasn="+Ht.page.audience_source.name))+("&pid="+Ht.product.id))+("&udbn="+(Ht.user.device.browser&&Ht.user.device.browser.name?encodeURIComponent(Ht.user.device.browser.name):"")))+("&udon="+(Ht.user.device.os&&Ht.user.device.os.name?encodeURIComponent(Ht.user.device.os.name):"")))+("&ugcn="+(Ht.user.geoip.country&&Ht.user.geoip.country.name?encodeURIComponent(Ht.user.geoip.country.name):"")))+("&udt="+(Ht.user.device.type?encodeURIComponent(Ht.user.device.type):"")))+("&pnpv="+Ht.page.nb_players))+("&pet="+ee.Ie()))+"&aaf=linear"+("&ptcus="+Ht.page.tcf.cmpuistate))+("&pua="+Ht.page.usp.applies))+("&uib="+Ht.user.is_bot))+("&uidi="+Ht.user.is_datacenter_ip))+("&plv="+o.vid),Ht.page.fpd){var r=3;if(Ht.page.fpd.safety)switch(Ht.page.fpd.safety){case"unsafe":r=0;break;case"safe":r=1;break;case"error":r=2}a+="&pgsy="+r}-1==e.url.indexOf("&plcmt=")&&(e.url+="&plcmt="+N(e)),a+="&plcmt="+N(e),e.url+="&gdpr="+(Ht.page.tcf.gdprApplies?"1":"0"),e.url+="&gdpr_consent="+Ht.page.tcf.tcString,Ht.page.tcf.addtlConsent&&0<Ht.page.tcf.addtlConsent.indexOf("~")&&(e.url+="&addtl_consent="+Ht.page.tcf.addtlConsent),-1==e.url.indexOf("&max_ad_duration=")&&(e.url+="&max_ad_duration="+parseInt(1e3*Zt.vt())),46==e.id_vast_type&&(e.url+="&ciu_szs=300x50"),e.url.indexOf("&cust_params=")<0&&(e.url+="&cust_params="+encodeURIComponent(a)),0<=e.url.indexOf("%%DFP_REGIE_INCREMENT%%")&&(e.url=e.url.replace("%%DFP_REGIE_INCREMENT%%",me),e.placement=e.placement.replace("%%DFP_REGIE_INCREMENT%%",me),me=me==_e?0:me+1)}var c="auto_play_sound_unknown";if(ee.Ae())switch(ee.Ae()){case 1:case 5:c="auto_play_sound_on";break;case 2:case 6:c="auto_play_sound_off";break;case 3:case 4:c="click_to_play"}"8"==e.id_ssp&&(e.url+="&gdpr="+Ht.page.tcf.gdprApplies,e.url+="&gdpr_consent="+Ht.page.tcf.tcString,e.url+="&schain="+Zt.kt(Ht.advertising.sparteo_schain_config)),"9"==e.id_ssp&&(e.url=e.url.replace("%%CUST_PPID%%",Ht.id_session_page),e.url=e.url.replace("%%T_VALUE%%",encodeURIComponent("autoplay,alwayson,breakpos"+e.ad_index+","+window.location.hostname)),e.url=e.url.replace("&cust_params=","&cust_params="+encodeURIComponent("iabcat="+Ht.page.iab.category[0].toString()+"&")),Ht.page.fpd.ipb_segments&&(e.url=e.url.replace("&cust_params=","&cust_params="+encodeURIComponent("CxSegments="+Ht.page.fpd.ipb_segments.toString()+"&"))),e.url+="&vpos=preroll",e.url+="&hl="+Zt.Ut(),-1==e.url.indexOf("&plcmt=")&&(e.url+="&plcmt="+N(e)),e.url+="&gdpr="+(Ht.page.tcf.gdprApplies?"1":"0"),e.url+="&gdpr_consent="+Ht.page.tcf.tcString,Ht.page.tcf.addtlConsent&&0<Ht.page.tcf.addtlConsent.indexOf("~")&&(e.url+="&addtl_consent="+Ht.page.tcf.addtlConsent),-1==e.url.indexOf("&max_ad_duration=")&&(e.url+="&max_ad_duration="+parseInt(1e3*Zt.vt())),e.url+="&ad_rule=0",a=""),59==e.id_vast_type&&(2665!=Ht.diffuser.uid&&2434!=Ht.diffuser.uid||(e.s2s=Ht.advertising.s2s),e.prebid=!0,e.prebid_bidder={bidder:"criteo",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,networkId:11086,publisherSubId:Ht.diffuser.uid+"_"+Ht.product.id,pubid:"100729",uid:467221}}),62==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"smartadserver",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,siteId:Kt?653306:696790,pageId:Kt?1970783:2058702,networkId:4163,formatId:105165,video:{protocol:8,startDelay:1}}},Jt.includes("pbs-vtr_ron_25")?(e.prebid_bidder.params.siteId=696788,e.prebid_bidder.params.pageId=2058700):Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.siteId=696790,e.prebid_bidder.params.pageId=2058702)),63==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"ix",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,siteId:"970661",account:"viously",publisherId:"195671"}}),64==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"pubmatic",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,publisherId:"162545",adSlot:Kt?"6297584":"4744551"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.adSlot="6783280":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.adSlot="6783281")),66==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"rubicon",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,accountId:22416,siteId:Kt?540764:584812,zoneId:Kt?3340586:3729864,video:{size_id:201,language:o.language.toLowerCase()}}},Jt.includes("pbs-vtr_ron_25")?(e.prebid_bidder.params.siteId=584812,e.prebid_bidder.params.zoneId=3729864):Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.siteId=584814,e.prebid_bidder.params.zoneId=3729866)),67==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"openx",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,unit:Kt?"560866107":"562178366",delDomain:"viously-d.openx.net"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.unit="562178366":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.unit="562178369")),68==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!1,e.prebid_bidder={bidder:"sharethrough",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,pkey:Kt?"xF7nmlon5AtGYCE2t18CazCA":"I1lXUzDeSlJH8zOYdKVCmYSR"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.pkey="HF50Pyzg0kOwQga2oeKiyMy3":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.pkey="HWgwslZcwO2qfgIhkxg2uKZ7")),69==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"grid",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,uid:Kt?420974:448728}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.uid=448728:Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.uid=448729)),71==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!1,e.prebid_bidder={bidder:"improvedigital",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,placementId:23369321,publisherId:1723}}),72==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"triplelift",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,inventoryCode:Kt?"Sparteo_Instream_RON":"Viously_XandrPSP_Allpublishers"}}),73==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"unruly",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,siteId:Kt?283110:254497}}),74==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"adot",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,placementId:e.placement,publisherId:"Viously"}}),75==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"oftmedia",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,placementId:Kt?"34503845":"29329802"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.placementId="35407294":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.placementId="35407322")),77==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"medianet",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,cid:"8CU507GON",crid:Kt?"188886258":"323026858"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.crid="888636415":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.crid="982886803")),78==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"amx",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,tagId:Kt?"OpNZi7YzR":"dmlvdXNseS5jb20"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.tagId="RJoVFggol":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.tagId="pVKAHnn4J")),80==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"improvedigital-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,placementId:23369322,publisherId:1723}}),81!=e.id_vast_type&&132!=e.id_vast_type||(e.aps=!0),82==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"openx-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,unit:Kt?"560866118":"562178386",delDomain:"viously-d.openx.net"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.unit="562178384":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.unit="562178386")),83==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"rubicon-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,accountId:22416,siteId:Kt?540770:584826,zoneId:Kt?3340692:3729920,video:{size_id:203,language:o.language.toLowerCase()}}},Jt.includes("pbs-vtr_ron_25")?(e.prebid_bidder.params.siteId=584826,e.prebid_bidder.params.zoneId=3729920):Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.siteId=584828,e.prebid_bidder.params.zoneId=3729932)),86==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"grid-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,uid:Kt?420975:448731}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.uid=448731:Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.uid=448732)),88==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"oftmedia-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,placementId:Kt?"34503882":"29329676"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.placementId="35407331":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.placementId="35407334")),89==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"sharethrough-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,pkey:Kt?"yIkG9Q6WNj5PrJAqvwilLidz":"9hfBzcN92WFUNu9eFqujuOwu"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.pkey="Zuo57ChVWqvnDu578Vw9kR0J":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.pkey="6pgkBaP1hWOYH35soAV0iDmK")),91==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"amx-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,tagId:Kt?"AkDmI341l":"dmlvdXNseS5jb20tb3V0c3JlYW0"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.tagId="LrDvhZZPj":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.tagId="OJVOuZZdb")),92==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"medianet-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,cid:"8CU507GON",crid:Kt?"922525334":"408878152"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.crid="757875606":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.crid="513174377")),94==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"triplelift-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,inventoryCode:Kt?"Sparteo_Outstream_RON_2":"Viously_PBS_Outstream_allpublishers"}}),97==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"adot-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,placementId:e.placement,publisherId:"Viously"}}),98==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"ix-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,siteId:"974030",account:"viously",publisherId:"195671"}}),100==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"unruly-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,siteId:Kt?283111:261180}}),114==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"smartadserver-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,siteId:Kt?653312:696792,pageId:Kt?1970789:2058704,networkId:4163,formatId:123148,video:{protocol:8,startDelay:1}}},Jt.includes("pbs-vtr_ron_25")?(e.prebid_bidder.params.siteId=696792,e.prebid_bidder.params.pageId=2058704):Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.siteId=696793,e.prebid_bidder.params.pageId=2058705)),116==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"pubmatic-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,publisherId:"162545",adSlot:Kt?"6297585":"5103681"}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.adSlot="6783308":Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.adSlot="6783322")),117==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"onetag",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,pubId:"7eef48de9069b7a"}}),126==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"sovrn",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,tagid:Kt?"1236440":"1287828"}}),129==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"sovrn-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,tagid:Kt?"1236439":"1287829"}}),141==e.id_vast_type&&(e.prebid=!0,e.banner=!0,e.prebid_bidder={bidder:"meetscale-linear",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,networkId:"240e31a3-dfc9-4f06-b210-46b7f1d25ace",disabledFormats:["slideshow"],multiBids:!0}},1==Te)&&(e.prebid_bidder.params.endpoint="https://preprod-bid.sparteo.com/auction"),178==e.id_vast_type&&(e.prebid=!0,e.prebid_bidder={bidder:"meetscale-video",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,networkId:"240e31a3-dfc9-4f06-b210-46b7f1d25ace",disabledFormats:["slideshow"]}}),142==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"adf",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,mid:2163825}}),143==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"adf-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,mid:2163826}}),147==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"xandr",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,placement_id:Kt?32846012:35308809,allow_smaller_sizes:!0,supply_type:we||"tablet"===(Ht.user.device.type&&Ht.user.device.type.toLowerCase())?"mobile_web":"web",video:{minduration:1,maxduration:Zt.vt(),context:"pre_roll",skippable:!0,skipoffset:ve,playback_method:c,frameworks:[1,2]}}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.placement_id=35308809:Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.placement_id=35308810)),149==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"xandr-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,placement_id:Kt?32846061:35308814,allow_smaller_sizes:!0,supply_type:we||"tablet"===(Ht.user.device.type&&Ht.user.device.type.toLowerCase())?"mobile_web":"web",video:{minduration:1,maxduration:Zt.vt(),context:"outstream",skippable:!0,skipoffset:ve,playback_method:c,frameworks:[1,2]}}},Jt.includes("pbs-vtr_ron_25")?e.prebid_bidder.params.placement_id=35308814:Jt.includes("pbs-vtr_combined_25")&&(e.prebid_bidder.params.placement_id=35308815)),160==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!1,e.prebid_bidder={bidder:"rise",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,org:"68347c1191b5ad0001b5a6fe",placementId:"29547732"}}),165==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"rise-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,org:"68347c1191b5ad0001b5a6fe",placementId:"29547733"}}),166==e.id_vast_type&&(2665!=Ht.diffuser.uid&&2434!=Ht.diffuser.uid||(e.s2s=Ht.advertising.s2s),e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"criteo-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,networkId:11086,publisherSubId:Ht.diffuser.uid+"_"+Ht.product.id,pubid:"100729",uid:467222}}),171==e.id_vast_type&&(e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"33across",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,siteId:"d_tjwuA70r8kOWrkHcnlKl",productId:"instream"}}),174==e.id_vast_type&&(e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"33across-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index,siteId:"aCm_C4A74r8lKErkHcnlxd",productId:"siab"}}),188==e.id_vast_type&&(e.s2s=!1,e.prebid=!0,e.prebid_bidder={bidder:"fw-mrm-saleshouse",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index}},e.s2s?(e.prebid_bidder.params.profile_id="539161:prebidserver_sparteo_web",e.prebid_bidder.params.network_id="539161",e.prebid_bidder.params.custom_site_section_id="SS_Web_Sparteo_Sales_House_"+e.placement):(e.prebid_bidder.params.profile="539161:prebidserver_sparteo_web",e.prebid_bidder.params.networkId="539161",e.prebid_bidder.params.siteSectionId="SS_Web_Sparteo_Sales_House_"+e.placement,e.prebid_bidder.params.serverUrl="https://83a19.v.fwmrm.net/ad/g/1",e.prebid_bidder.params.videoAssetId=o.vid,e.prebid_bidder.params.adRequestKeyValues=Rt(t,"188"))),189==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.prebid_bidder={bidder:"fw-mrm-ext-saleshouse",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index}},e.s2s?(e.prebid_bidder.params.profile_id="539161:prebidserver_sparteo_web",e.prebid_bidder.params.network_id="539161",e.prebid_bidder.params.custom_site_section_id="SS_Web_ExternalSalesHouse_CAMS_Viously_Instream_ESH_RON"):(e.prebid_bidder.params.profile="539161:prebidserver_sparteo_web",e.prebid_bidder.params.networkId="539161",e.prebid_bidder.params.siteSectionId="SS_Web_ExternalSalesHouse_CAMS_Viously_Instream_ESH_RON",e.prebid_bidder.params.serverUrl="https://83a19.v.fwmrm.net/ad/g/1",e.prebid_bidder.params.videoAssetId=o.vid)),194==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.adpod=!0,e.prebid_bidder={bidder:"fw-mrm-instream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index}},e.s2s?(e.prebid_bidder.params.profile_id="539161:prebidserver_sparteo_web",e.prebid_bidder.params.network_id="539161",e.prebid_bidder.params.custom_site_section_id="SS_Web_Open_Viously_Instream_RON"):(e.prebid_bidder.params.profile="539161:prebidserver_sparteo_web",e.prebid_bidder.params.networkId="539161",e.prebid_bidder.params.siteSectionId="SS_Web_Open_Viously_Instream_RON",e.prebid_bidder.params.serverUrl="https://83a19.v.fwmrm.net/ad/g/1",e.prebid_bidder.params.videoAssetId=o.vid)),195==e.id_vast_type&&(e.s2s=Ht.advertising.s2s,e.prebid=!0,e.outstream=!0,e.prebid_bidder={bidder:"fw-mrm-outstream",params:{idVastType:e.id_vast_type,vastIndex:e.vast_index}},e.s2s?(e.prebid_bidder.params.profile_id="539161:prebidserver_sparteo_web",e.prebid_bidder.params.network_id="539161",e.prebid_bidder.params.custom_site_section_id="SS_Web_Open_Viously_Outstream_RON"):(e.prebid_bidder.params.profile="539161:prebidserver_sparteo_web",e.prebid_bidder.params.networkId="539161",e.prebid_bidder.params.siteSectionId="SS_Web_Open_Viously_Outstream_RON",e.prebid_bidder.params.serverUrl="https://83a19.v.fwmrm.net/ad/g/1",e.prebid_bidder.params.videoAssetId=o.vid)),Zt.Nt(e)&&R.oo(e)},Nt=function(t){ee.Ot.Wi()||t.url.indexOf("&ltd=")<0&&(t.url+="&ltd=1"),Ht.page.usp.applies&&t.url.indexOf("&us_privacy=")<0&&(t.url+="&us_privacy="+Ht.page.usp.uspString)},b=function(t,e){for(var n=ee.g(t),i=1;n.vasts[Zt.lt(n.vasts,"vast_index",e+"-"+i)];)i++;return e+"-"+i},Dt=function(t){return"waiting"===t.ad||"refetching"===t.ad},Pt=new Map,Ut=function(n){var t;"object"==typeof $t&&((t=Pt.get(n))&&(Zt.p(L+"Shield: Detaching previous listener for video index "+n),$t.offEvent("auctionEnd",t)),Pt.set(n,t=function(t){var e;Zt.p(L+"Shield: auctionEnd event fired. s2s="+!(!t||!t.s2s)),t&&t.s2s&&(e=ee.g(n))&&(!!(t.response&&t.response.ext&&t.response.ext.crossfire&&t.response.ext.crossfire.shield)?(t=t.response.ext.crossfire.shield,Zt.p(L+"Shield: Captured shield data - malicious="+(t.malicious?t.malicious.length:0)+", blocked="+(t.blocked?Object.keys(t.blocked).length:0)),e.shieldData=t):(Zt.p(L+"Shield: No shield data in response"),e.shieldData=null))}),Zt.p(L+"Shield: Attaching auctionEnd listener for video index "+n),$t.onEvent("auctionEnd",t))},jt=function(t){t&&t.shieldData&&(t.shieldData=null)},qt=function(t){return t.killed||t.killed_at_load},Gt=function(t,e){e&&("firstAdStart"!=t||n.ji?"firstAdComplete"!=t||n.qi||(Xt.v("firstAdComplete",{ad_unit_id:e}),n.qi=!0):(Xt.v("firstAdStart",{ad_unit_id:e}),n.ji=!0))},zt=function(){return O};const Bt=document.getElementById("ad-play-pause");return Bt&&!Kt&&(new Ei({modules:{utils:Zt},element:Bt,stateObserver:e}),e.addObserver({update:z},"isAdPlaying")),R.ro=xt,R.co=d,R.Hi=J,R.do=W,R.Me=h,R.uo=t,R.lo=M,R.po=$,R.ho=Tt,R.fo=Et,R.eo=kt,R.mo=E,R._o=yt,R.vo=G,R.Xi=P,R.bo=X,R.wo=b,R.yo=O,R.Io=u,R.Tn=m,R.Ti=st,R.Zi=Ct,R.di=vt,R.Ao=zt,R.Ai=ft,R.So=ot,R.ko=nt,R.io=dt,R.oo=Nt,R}(ut||{})),ee=(c=>{var a="%c hls.js %c",o=["buffering","idle","advertising","paused","playing","complete","ad-buffering","ad-banner"],s="",d=null,t=!1,u=1,l=!1,p=null,e=!0,r="unknown",h="unknown",n=!1,i=null,f="history"in window&&"pushState"in history,m={xo:document.getElementById("player").getElementsByTagName("video")[0],To:null,Eo:document.getElementById("player").getElementsByTagName("video")[0].getElementsByTagName("source")[0].getAttribute("src"),ki:function(){return document.isFullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msIsFullScreen}},_=null,v=function(t){t&&t.ended&&(Zt.p(ct+"Video ended, resetting currentTime to 0"),t.currentTime=0)},b=function(){Zt.p(ct+"initPlaylist"),Yt&&parent.viously_params&&parent.viously_params.playlist&&parent.viously_params.playlist.length&&(Ht.playlist.videos=Ht.playlist.videos.slice(0,1),parent.viously_params.playlist.forEach(t=>{Ht.playlist.videos.push({vid:t})})),c.Mn=JSON.parse(JSON.stringify(Ht.playlist.videos)),Zt.p(c.Mn,!0)},w=function(){const n=document.getElementById("vsly-player-container");if(n){const t=t=>{const e=t.volume;0===e?(Zt.$(document.body,"player-is-muted"),Zt.J(document.body,"player-is-quiet"),Zt.$(n,"player-is-muted"),Zt.J(n,"player-is-quiet")):e<=.001?(Zt.J(document.body,"player-is-muted"),Zt.$(document.body,"player-is-quiet"),Zt.J(n,"player-is-muted"),Zt.$(n,"player-is-quiet")):(Zt.J(document.body,"player-is-muted"),Zt.J(document.body,"player-is-quiet"),Zt.J(n,"player-is-muted"),Zt.J(n,"player-is-quiet"),c.Rn&&c.Rn.updateMuteButton(0===t.volume))};c.M.onStateChanged(t),t(c.M.getState())}},g=function(){try{c.Mn.splice(c.Zt(),0,JSON.parse(JSON.stringify(Ht.playlist.videos[Ht.admin.current_index]))),Ht.playlist.videos.splice(c.Zt(),0,JSON.parse(JSON.stringify(Ht.playlist.videos[Ht.admin.current_index])))}catch(t){Zt.p(ct+t)}Zt.p(c.Mn,!0),Zt.p(Ht.playlist.videos,!0)},y=function(t){for(var e=0,n=o.length;e<n;e++){const i=document.getElementById("vsly-player-container");t==o[e]?(Zt.p(ct+"Change state to "+o[e]),Zt.$(document.body,"player-state-"+o[e]),i&&Zt.$(i,"player-state-"+o[e]),s=o[e]):(Zt.J(document.body,"player-state-"+o[e]),i&&Zt.J(i,"player-state-"+o[e]))}},I=function(){return s},A=function(t,e,n){if(window.Hls||!t.sources.length||"hls"!==t.sources[0].type||"ios"===(Ht.user.device.os&&Ht.user.device.os.name&&Ht.user.device.os.name.toLowerCase())&&Zt.N()<17)if(t.sources.length&&"hls"===t.sources[0].type&&(t.sources[0].original_file||(t.sources[0].original_file=t.sources[0].file),1==t.sources[0].live&&-1==t.sources[0].file.indexOf("&consent=")?t.sources[0].file+=(t.sources[0].file.indexOf("?")<0?"?":"&")+"gdpr="+(Ht.page.tcf.gdprApplies?"1":"0")+"&consent="+Ht.page.tcf.tcString:0==e&&-1==t.sources[0].file.indexOf("&spw=")?t.sources[0].file+=(t.sources[0].file.indexOf("?")<0?"?":"&")+"pw="+c.xi.xo.offsetWidth+"&ph="+c.xi.xo.offsetHeight+"&spw="+L()+"&sph="+V():t.sources[0].file=t.sources[0].original_file),t.sources.length&&"hls"===t.sources[0].type&&window.Hls&&Hls.isSupported()){r=t.sources[0].type;var i={startLevel:1,startPosition:n||t.starttime||-1,maxBufferLength:Ht.admin.hls_max_buffer,maxMaxBufferLength:Ht.admin.hls_max_buffer,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0};(d=new Hls(i)).on(Hls.Events.MANIFEST_PARSED,function(t,e){Zt.p(a+"Manifest parsed");for(var n=0;n<e.levels.length;n++)for(var i=e.levels[n],o=0;o<i.url.length;o++){var s=i.url[o];Zt.p(a+"Parsed url = "+s),s.includes("/hls/media-")||(i.url[o]=s.replace("/media-","/hls/media-"),Zt.p(a+"Rewrite url = "+s))}c.En.Mo(),d.attachMedia(m.xo),c.Oo(m.xo),m.xo.play()}),d.on(Hls.Events.ERROR,function(t,e){if(Zt.p(a+e.type+" "+e.details+" fatal="+e.fatal),e.fatal)if(e.details&&"manifestLoadError"==e.details)d.destroy();else switch(e.type){case window.Hls.ErrorTypes.NETWORK_ERROR:Zt.p(a+"Fatal network error encountered, try to recover"),d.startLoad(),c.Oo(m.xo),m.xo.play();break;case window.Hls.ErrorTypes.MEDIA_ERROR:Zt.p(a+"Fatal media error encountered, try to recover"),d.recoverMediaError();break;default:d.destroy()}}),d.on(Hls.Events.DESTROYING,function(){t.sources.shift(),t.sources.length?(Zt.p(a+"Fallback to next source ("+t.sources[0].type+")"),c.Co(t,e,n)):c.Cn("No source available")}),d.on(Hls.Events.LEVEL_SWITCHED,function(){switch(h=d.levels[d.currentLevel].height){case 240:case 360:case 480:h+="p SD";break;case 720:case 1080:h+="p HD"}Xt.v("contentQualityChanged",{content_quality:c.Ro()}),Zt.p(a+"Switch quality to "+h)}),d.loadSource(t.sources[0].file)}else{i="probably"===c.xi.xo.canPlayType("application/vnd.apple.mpegURL")||"probably"===c.xi.xo.canPlayType("application/x-mpegURL")||"maybe"===c.xi.xo.canPlayType("application/vnd.apple.mpegURL")||"maybe"===c.xi.xo.canPlayType("application/x-mpegURL");if(Zt.p(a+"Natively Supported : "+i),!i)for(;t.sources.length&&"hls"===t.sources[0].type;)Zt.p(a+"Shift source"),t.sources.shift();t.sources.length?(h=t.sources[0].label,r=t.sources[0].type,m.xo.src=t.sources[0].file,m.xo.load(),c.En.Mo(),c.Oo(m.xo),m.xo.play(),n&&Zt.ut(c.xi.xo,n)):c.Cn("No source available")}else Zt.ot(document.body,Ht.admin.hls_url,function(){Zt.p(a+"Lib loaded"),c.Co(t,e,n)},function(){Zt.p(a+"Failed to load lib"),Zt.v(14,null,!1,!1,"&sec=17&sem=script_error_hls"),t.sources.shift(),c.Co(t,e,n)})},S=function(e,t,n){if(e){p&&p!==e&&c.En.yn(p.videoElement);const i=c.Mn.findIndex(t=>t.vid===e.videoData.vid);-1!==i&&(Ht.admin.current_index=i,Zt.p(ct+("Active video index updated to: "+i))),p=e,m.xo=p.videoElement,c.Lo&&("function"==typeof c.Lo.init?c.Lo.init():c.Lo.setVideoElement(p.videoElement)),c.En.Mo(p.videoElement),p.isLoaded?(p.play(),c.En.Vo(Ht.admin.current_index)):p.load(n).then(()=>{c.En.Vo(Ht.admin.current_index)}).catch(()=>{Zt.p(ct+"load() failed. Error handler has already been triggered.")}),c.Do.No(),c.Rn&&c.Rn.updateTitle(e.videoData.title)}else Zt.p(ct+"Error: Tried to set an invalid video instance.")},k=function(t){Zt.p(ct+"Resume"),Xt.v("contentStart",{content_quality:c.Ro()});t=c.g(t);if(c.Uo.Po()?c.Uo.Ii():c.Uo.oe(),Ht.template.controls.autoskip.button_timeout&&(c.jo=!0),"carousel"===Ht.type){try{if(window.parent){window.parent.vslyActivePlayerId=Ht.playerId;const e=new CustomEvent("vsly-carousel-start");window.parent.dispatchEvent(e)}}catch(t){Zt.p(ct+"Could not access parent window to dispatch event.")}l=!0,p&&p.play()}else{try{window.parent&&!window.parent.vslyActivePlayerId&&(window.parent.vslyActivePlayerId=Ht.playerId)}catch(t){Zt.p(ct+"Could not access parent window to set active player.")}c.Co(t,lt)}},x=function(){var t=c.g(Ht.admin.current_index);Zt.Y(document.getElementById("vsly-overlay"),"click",c.qo),("carousel"===Ht.type?(l=!0,Zt.ut(p.videoElement,t.starttime||.1),c.Oo(p.videoElement),p):(Zt.ut(c.xi.xo,t.starttime||.1),c.Oo(m.xo),m.xo)).play()},T=function(t,e){var n=c.g(t),i=n.vid;if(Zt.p(ct+"Reset "+i),"carousel"===Ht.type?(l=!1,p&&p.destroy()):c.En.yn(),c.vi.ao(),c.fi.ao(),d&&d.stopLoad(),m.xo.src=m.Eo,Zt.ut(c.et(),0),c.Uo.do(),ut.do(Ht.admin.current_index),Wt&&!ye){if(Ht.admin.reset_article_mapping)for(var o in Ht.admin.reset_article_mapping){var s,a=Zt.Z(o,n);for(s in Ht.admin.reset_article_mapping[o])for(var r in Ht.admin.reset_article_mapping[o][s])try{document.querySelector(Ht.admin.reset_article_mapping[o][s][r])[s]=a}catch(t){continue}}e?history.replaceState({id:t},n.title,window.location.origin+"/"+Ht.diffuser.name+"/"+n.vid+window.location.search):history.pushState({id:t},n.title,window.location.origin+"/"+Ht.diffuser.name+"/"+n.vid+window.location.search)}Yt&&(c.g(c.Zt())&&(Zt.J(document.body,"vsly-show-related"),Zt.Y(document.getElementById("vsly-related-container"),"click",c.ee.Go)),Xt.Yt)&&(i=Xt.Yt.querySelector(".vsly-pip-image"))&&n.thumbnails&&i.setAttribute("style","background-image:url("+Zt.tt(n)+")"),c.jo=!1,ut=ut.uo(),c.ee=c.ee.uo(),c.Qi.zo(),c.Gi.zo(),c.vi.do(),c.fi.do(),u++,c.Bo(t)},E=function(t){var e=c.g(t),n=e.vid;Zt.p(ct+"Setup "+n),Zt.v(16,t,!0,!0,pi),Ht.admin.current_index=t;const i="carousel"===Ht.type;if(i&&(Zt.$(document.body,"swipe-nav-enabled"),Hi.init(m.xo,t)),1===u)Wt&&!ye&&c.Ho&&history.replaceState({id:t},e.title,window.location.origin+"/"+Ht.diffuser.name+"/"+e.vid+window.location.search),Xt.oe(n);else{const a=document.getElementById("vsly-overlay-image");a&&(a.removeAttribute("srcset"),a.removeAttribute("sizes"),a.setAttribute("src",Zt.tt(e)),a.setAttribute("alt",e.title))}Wt||(document.getElementById("vsly-overlay-title").textContent=e.title),Ht.template.ui&&(document.getElementById("vsly-overlay-title").style.display="none"),w(),c.Uo.Po()||c.Uo.oe(),!c.Rn&&i&&(c.Rn=new dt(c)),c.Do.oe(),c.$o.oe(),document.getElementById("vsly-overlay-button-text").textContent=Ht.admin.lng.launch;for(var o=0,s=e.sources.length;o<s;o++)e.sources[o].decoded||(e.sources[o].file=Zt.X(e.sources[o].file),e.sources[o].decoded=!0);i?window.parent&&window.parent.postMessage({type:"playerReady"},"*"):c.En.Vo(t)},M=function(){n=!0,document.body.classList.add("vsly-carousel-playback"),c.Uo.hide(),c.Rn.show(1===c.Se())},O=function(){if(n=!1,window.parent){window.parent.postMessage({type:"event",event:"exitCarouselPlaybackMode"},"*");try{if(window.parent.vslyActivePlayerId===Ht.playerId){window.parent.vslyActivePlayerId=null;const t=new CustomEvent("vsly-carousel-stop");window.parent.dispatchEvent(t)}}catch(t){Zt.p(ct+"Could not access parent window to dispatch event.")}}},C=function(){const t=c.et();"playing"==c.Qt()&&t&&t.pause()},R=function(){const t=c.et();"advertising"==c.Qt()&&ut._o(),"paused"==c.Qt()&&("carousel"!==Ht.type||c.Jo())&&t&&t.play()},D=function(t){c.ui("idle"),Zt.p(ct+"Error : "+t),Zt.v(13,null,!1,!1),Xt.v("contentError",{content_error_message:t,content_quality:c.Ro()}),c.g(c.Zt())?c.ee.Fo(c.Zt(),!0):c.En.Wo()},P=function(t){return t&&t!=Ht.admin.current_index?u+1:u},U=function(t){return t&&t!=Ht.admin.current_index?c.Zt():Ht.admin.current_index},j=function(t){e=t},q=function(){return e},L=function(){var t=c.et()?c.et().offsetWidth:0;return Yt&&"panoramic"!==Ht.template.sdk.sticky.width&&"none"!==Ht.template.sdk.sticky.event&&(560<=parent.document.documentElement.clientWidth?t>Ht.sticky.width_large&&(t=Ht.sticky.width_large):300<=parent.document.documentElement.clientWidth&&t>Ht.sticky.width_short&&(t=Ht.sticky.width_short)),t},V=function(){var t=c.et()?c.et().offsetHeight:0;return t=Yt&&"panoramic"!==Ht.template.sdk.sticky.width&&"none"!==Ht.template.sdk.sticky.event?Number(L()*Ht.playlist.ratio):t},G=function(){return ut},z=function(){return Wt||!0===e&&"none"!==Ht.template.sdk.sticky.event&&("optimized"===Ht.type||"top"==Ht.template.sdk.initial_position)},B=function(){return Wt||!0===e&&"none"!==Ht.template.sdk.sticky.event},H=function(t){Zt.p(ct+"Set playback method = "+t),i=t},$=function(){return null==i&&(Ht.template.autoplay?c.M.getState().muted?c.T()?c.Ko(ht):c.Ko(_t):c.T()?c.Ko(pt):c.Ko(mt):c.Ko(ft)),i},J=function(){return c.Ae()==ht||c.Ae()==_t?vt:c.Ae()==pt||c.Ae()==mt?gt:yt},F=function(t){return c.Mn[t]},W=function(t){return c.g(t).vid},K=function(){return"carousel"===Ht.type?p?p.streamingType:"unknown":r},Y=function(){return"carousel"===Ht.type?p?p.streamingQuality:"unknown":h},Z=function(){var t,e,n;"hls"==c.Yo()&&(t=c.et()?c.et().currentTime:0,e=!!c.et()&&!c.et().paused,n=c.g(Ht.admin.current_index),"carousel"===Ht.type?c.En.yn(p.videoElement):c.En.yn(),d&&"carousel"!==Ht.type&&d.stopLoad(),m.xo.src=m.Eo,c.Uo.do(),"carousel"===Ht.type?p.load(t,!0).then(function(){c.En.Mo(p.videoElement),c.Uo.Po()?c.Uo.Ii():c.Uo.oe(),e&&p.play()}).catch(function(t){Zt.p(ct+"Failed to reload video for max quality: "+t)}):(c.Co(n,!0,t),c.Uo.Po()?c.Uo.Ii():c.Uo.oe()))},X=function(){return ye?(Ht.admin.current_index+1)%c.Mn.length:Ht.admin.current_index+1},Q=function(){let t;return t="carousel"===Ht.type?p?p.videoElement:null:c.xi.xo},tt=function(){return p},et=function(){return Ht.admin.current_index},nt=function(){return l},it=function(t){l=!!t},ot=function(){return n},st=function(){window.xj4fj5.GdLmD9(),window.xj4fj5.J6oSao(!0)},at=function(){window.xj4fj5.J6oSao(!1),window.xj4fj5.OQ2njK()},rt=function(){const t=c.et();t&&t.pause(),c.Zo(),c.wi.bi=!1};const N={Xo:!1,Qo:!1,ts:!1,bi:!1};try{window.parent&&(window.parent.addEventListener("vsly-carousel-start",()=>{if("carousel"!==Ht.type&&(Zt.p(ct+"Carousel start event received."),N.Xo||(N.Qo=document.body.classList.contains("player-is-sticked"),N.ts="playing"===c.Qt(),N.Xo=!0),N.Qo)){if(["advertising","ad-banner"].includes(c.Qt()))c.M.getState().muted||(N.es=!0,c.M.setMute(!0)),N.Qo&&(N.bi=!0);else{if("playing"===c.Qt()){const t=c.et();t&&t.pause()}c.Zo()}ut.vo(!0)}}),window.parent.addEventListener("vsly-carousel-stop",()=>{if("carousel"!==Ht.type){if(Zt.p(ct+"Carousel stop event received."),N.Qo&&c.ns(),N.ts){const t=c.et();t&&t.play()}ut.vo(!1),N.es&&(c.M.setMute(!1),N.es=!1),ut.eo(Ht.admin.current_index,!0),N.Xo=!1,N.Qo=!1,N.ts=!1,N.bi=!1}}))}catch(t){Zt.p(ct+"Could not attach carousel event listeners to parent window.")}return c.jo=t,c.Mn=_,c.Oo=v,c.os=b,c.ss=g,c.ui=y,c.Qt=I,c.Ii=k,c.qo=x,c.do=T,c.Bo=E,c.Co=A,c.On=S,c.Se=P,c.S=U,c.rs=j,c.cs=q,c.us=L,c.ls=V,c.xi=m,c.Ho=f,c.no=G,c.k=z,c.T=B,c.Ko=H,c.Ae=$,c.Ie=J,c.Ji=W,c.g=F,c.Yo=K,c.Ro=Y,c.ps=Z,c.Cn=D,c.Zt=X,c.et=Q,c.hs=tt,c.fs=et,c._s=nt,c.vs=it,c.ti=O,c.Jo=ot,c.bs=C,c.ws=R,c.Zo=st,c.ns=at,c.gi=rt,c.wi=N,window.addEventListener("message",t=>{if(t.data&&t.data.command&&(!t.data.playerId||t.data.playerId===Ht.playerId)){const{command:e,payload:n}=t.data;switch(e){case"playVideoAtIndex":c.ee.gs(n.index);break;case"play":k(n.index);break;case"pause":p&&p.pause();break;case"carouselPlaybackStyleEnable":M();break;case"carouselPlaybackStyleDisable":O();break;case"carouselNext":Hi.clickNext();break;case"carouselPrevious":Hi.clickPrevious()}}}),c})(ee||{});if("undefined"!=typeof module&&module.exports&&(module.exports=ee),(G=ee||{}).M=(()=>{const t={getVideoElement:G.et,volume:Ht.template.volume,muted:Ht.template.mute,play_type:Ht.template.play_type,audio_mode:Ht.template.audio_mode,is_ios:Ht.user.device.os&&Ht.user.device.os.name&&"ios"===Ht.user.device.os.name.toLowerCase()};return new Pi(t)})(G.M),(T=(ee=G)||{}).ee=function t(e){var r="%c playlist %c",n=!1,e=e||{},i=Ht.playlist.related_url?document.querySelectorAll(".vsly-related-progress"):null,o=!1,s=!lt,a=0,c=10,d=null,u=function(){Wt&&!ye&&!1===n&&T.Ho&&(n=!0,window.addEventListener("popstate",function(t){var e,n;t.state&&void 0!==t.state.id?(e=t.state.id,n=T.Ji(e),p({id:e,force_request:!0},function(){Zt.p(r+"Request "+n+" success"),T.do(e,!0)},function(t){Zt.p(r+"Request "+n+" "+t),Wt&&!ye&&(window.location=window.location.origin+"/"+Ht.diffuser.name+"/"+T.g(e).vid+(E?"?"+O:""))})):Zt.p(r+"No VID")}))},l=function(t){if(Wt&&!ye){var e,n=T.g(t),i=(Zt.p(r+"Replace URL by "+n.vid),history.replaceState({id:t},n.title,window.location.origin+"/"+Ht.diffuser.name+"/"+n.vid+window.location.search),JSON.parse(JSON.stringify(Ht.admin.reset_article_mapping)));for(e in delete i.title.innerHTML,delete i.user,i){var o,s=Zt.Z(e,n);for(o in i[e])for(var a in i[e][o])try{document.querySelector(i[e][o][a])[o]=s}catch(t){continue}}}},p=function(t,n,i){var e,o,s,a=parseInt(t.id);!1===isNaN(a)?(o=(e=T.g(a)).vid,s="",Kt&&(s="&pdt="+x.i("display")),Ht.diffuser.nid&&(s+="&ntw="+x.i(Ht.diffuser.nid)),e&&e.id_session_video&&!t.force_request?(Zt.p(r+"We already prefetch vid "+o),n(e)):Zt.V(Ht.playlist.related_url+o+"?w="+encodeURIComponent(Ht.page.url)+"&r="+encodeURIComponent(Ht.page.referrer)+"&plix="+T.Zt()+"&pasi="+Ht.page.audience_source.id+"&pasn="+Ht.page.audience_source.name+"&l="+Ht.page.lang+"&spgid="+Ht.id_session_page+"&ab="+Jt.toString()+s,"GET",!0,!0,1e3*Ht.admin.request_timeout,function(e){if(e=e&&""!=e?e.trim():e){e=x.u(e);try{e=JSON.parse(e)}catch(t){Zt.p(r+t);try{e=JSON.parse(e.replaceAll("\0",""))}catch(t){return Zt.p(r+t),i("requestFailed")}}e.reload?i("requestExpired"):(Zt.p(e,!0),T.Mn[a]=Object.assign({},T.Mn[a],JSON.parse(JSON.stringify(e.video))),Ht.playlist.videos[a]=Object.assign({},Ht.playlist.videos[a],JSON.parse(JSON.stringify(e.video))),Zt.p(r+"Parse new conf"),Zt.p(T.Mn,!0),Zt.p(Ht.playlist.videos,!0),e.preds&&(Ht.page.preds=e.preds),e.versions&&(Ht.page.versions=e.versions),n(e.video))}else i("requestFailed")})):Zt.p(r+"No more video")},h=function(e){i&&i.forEach(function(t){t.style.width=e+"%"})},f=function(t){t&&t.stopImmediatePropagation(),Zt.p(r+"Click"),b(),T.do(T.Zt())},m=function(i){return Zt.p(r+"click CTV"),new Promise((e,n)=>{p({id:i},function(){T.do(i);const t=T.g(Ht.admin.current_index);e(t)},function(t){Zt.p(r+"next request failed"),n(t)})})},_=function(t){const e=T.Mn;e&&0!==e.length?(T.vs(!0),Hi.playVideo(t)):Zt.p(_LOG_SWIPE+"Playlist is empty. Aborting setup.")},v=function(t){t&&t.stopImmediatePropagation(),T.jo=!1,b()},b=function(){Zt.J(document.body,"vsly-show-related"),Zt.Y(document.getElementById("vsly-related-container"),"click",f)},w=function(t){var e;t&&(document.querySelector(".vsly-related-thumbnail img")||(e=document.createElement("img"),document.querySelector(".vsly-related-thumbnail").appendChild(e)),document.querySelector(".vsly-related-thumbnail img").setAttribute("src",Zt.tt(t)),document.querySelector(".vsly-related-title").textContent=t.title,document.querySelector(".vsly-related-label").textContent=Zt.dt(parseInt(t.duration),10)),document.querySelector(".vsly-related-next").textContent=Ht.admin.lng.related,Zt.K(document.getElementById("vsly-related-stay-btn"),"click",v),Zt.K(document.getElementById("vsly-related-next-btn"),"click",f),Zt.K(document.getElementById("vsly-related-container"),"click",f)},g=function(e,n){var i=T.g(e);0==o&&(o=!0,p({id:e},function(t){a=0,I(e),w(t),n&&T.En.Wo()},function(t){Zt.p(r+"Request "+i.vid+" "+t),a++,T.Mn.push(...T.Mn.splice(e,1)),Ht.playlist.videos.push(...Ht.playlist.videos.splice(e,1)),d=setTimeout(function(){o=!1,a<=c?T.jo&&(Ht.template.controls.autoskip.button_timeout+=.5):(Ht.template.controls.autoskip.button_timeout=15,Zt.p(ct+"Reset the same video after "+c+" attempts"),T.ss(),w(T.Mn[e]),n&&T.En.Wo())},c<=a?1e3:500)}))},y=function(){clearTimeout(d)},I=function(t){Zt.p(r+"Prefetch vasts for "+t),l(t),ut.fo(!0),ut.co(t)},A=function(t){if((t="carousel"===Ht.type?t||T.et():t)&&s){const i=T.Zt();var e=T.g(i),n=t.duration-t.currentTime;if(e||ye||(Zt.p(ct+"Fetch current video from server"),T.Mn.push.apply(T.Mn,[{vid:T.Ji(Ht.admin.current_index)}]),Zt.p(T.Mn,!0),Zt.p(Ht.playlist.videos,!0)),e)if(e.id_session_video)n<Ht.admin.progress_timeout?(Zt.$(document.body,"vsly-show-related"),Zt.$(document.body,"vsly-hide-stay")):(Zt.J(document.body,"vsly-show-related"),Zt.J(document.body,"vsly-hide-stay")),T.jo&&(t.currentTime>Ht.template.controls.autoskip.button_timeout+Ht.template.controls.autoskip.button_duration?T.En.Wo(!0):t.currentTime>Ht.template.controls.autoskip.button_timeout&&t.currentTime<Ht.template.controls.autoskip.button_timeout+Ht.template.controls.autoskip.button_duration?Zt.$(document.body,"vsly-show-related"):Zt.J(document.body,"vsly-show-related"));else if(e&&(n<=Ht.admin.prefetch_timeout||t.currentTime>=(T.jo?Ht.template.controls.autoskip.button_timeout-Ht.admin.prefetch_timeout:t.duration))){let t=T.Zt();g(t)}}},S=function(){return s},k=function(t){0==t&&Zt.p(r+"User canceled"),s=t,Zt.yt(t)};return e.oe=u,e.ys=b,e.Go=f,e.Si=l,e.Fi=S,e.Is=A,e.As=h,e.te=k,e.uo=t,e.Ss=v,e.ks=m,e.gs=_,e.Fo=g,e.xs=y,e.Tn=p,e}(T.ee||{}),(z=(ee=T)||{}).Gi=(e=z.Gi||{},H=B=!1,n={Ts:null,Es:null,Ms:!!(Ht.user.device.os&&Ht.user.device.os.name&&"android"===Ht.user.device.os.name.toLowerCase()&&Ht.user.device.browser&&Ht.user.device.browser.name&&"chrome"===Ht.user.device.browser.name.toLowerCase()&&Zt.q()<53||Ht.user.device.os&&Ht.user.device.os.name&&"ios"===Ht.user.device.os.name.toLowerCase()||Ht.user.device.os&&Ht.user.device.os.name&&"macosx"===Ht.user.device.os.name.toLowerCase()&&"ontouchstart"in window),Os:!!(Ht.user.device.os&&Ht.user.device.os.name&&"android"===Ht.user.device.os.name.toLowerCase()&&(Ht.user.device.browser&&Ht.user.device.browser.name&&"chrome"===Ht.user.device.browser.name.toLowerCase()||Ht.user.device.browser&&Ht.user.device.browser.name&&"android webview"==Ht.user.device.browser.name.toLowerCase())&&56<=Zt.q()||"ontouchend"in window&&(Ht.user.device.browser&&Ht.user.device.browser.name&&"firefox"===Ht.user.device.browser.name.toLowerCase()||Ht.user.device.browser&&Ht.user.device.browser.name&&"opera"===Ht.user.device.browser.name.toLowerCase()||Ht.user.device.browser&&Ht.user.device.browser.name&&"edge"===Ht.user.device.browser.name.toLowerCase()))},_start=function(e){var t,n=e.type;_stop(),"touchend"!=e.type&&"touchstart"!=e.type||("viously-touch"==e.target.id?(t=(Yt?parent.document:document).elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY),Yt?t==window.frameElement&&(n="click"):document.getElementById("vsly-player-container").contains(t)&&(n="click")):document.getElementById("vsly-player-container").contains(e.target)&&(n="click")),Zt.p(ct+"Start playonaction : "+n+" ("+e.type+")"),!1===B&&(ut.co(Ht.admin.current_index),z.Oo(z.et()),(z.et()?z.et().play():void 0).then(function(t){Zt.p(ct+n+" Playonaction promise success"),ut.po(),Zt.yt(!0),z.et().pause(),z.Ko(ft),a.oe(("click"==n?"&pet=clicktoplay":"&pet=scrolltoplay")+"&ppm="+z.Ae()),s.oe(),B=!0,z.ui("buffering"),ut.lo()}).catch(function(t){Zt.p(ct+n+" playonaction promise error"),"click"!=e.type&&(H=!1),_init()}))},_stop=function(){Zt.p(ct+"Stop playonaction"),Zt.Y(document.getElementById("vsly-overlay"),"click",_start),!0===H&&(n.Ts&&!0===n.Ms&&Zt.Y(n.Ts,"touchstart",_start),n.Es)&&!0===n.Os&&(n.Es.style.display="none",Zt.Y(n.Es,"touchend",_start))},_init=function(){var t,e;Zt.p(ct+"Init playonaction"),z.ui("idle"),Zt.K(document.getElementById("vsly-overlay"),"click",_start),!0===(H=Zt.At()&&(Yt||Wt))&&(t=Yt?parent.document:document,!0===n.Ms&&(n.Ts=t.body,Zt.K(n.Ts,"touchstart",_start)),!0===n.Os)&&(t.getElementById("viously-touch")||((e=document.createElement("div")).id="viously-touch",e.style.cssText="top:0;left:0;right:0;bottom:0;z-index:2147483647;position:fixed;touch-action:none;display:none;",t.body.appendChild(e)),n.Es=t.getElementById("viously-touch"),n.Es.style.display="block","chrome"===(Ht.user.device.browser&&Ht.user.device.browser.name&&Ht.user.device.browser.name.toLowerCase())&&72<=Zt.q()&&(n.Es.style.backgroundColor="rgba(255,255,255,0.01)"),Zt.K(n.Es,"touchend",_start,{passive:!1}))},_getState=function(){return B},_resetState=function(){B=!1},e.oe=_init,e._i=_start,e.Qt=_getState,e.zo=_resetState,e),($=(ee=z)||{}).Cs=(t=>{const n=Zt.St()&&(Yt||Wt),i={Ts:null,Es:null,Ms:!!(Ht.user.device.os&&Ht.user.device.os.name&&"android"===Ht.user.device.os.name.toLowerCase()&&Ht.user.device.browser&&Ht.user.device.browser.name&&"chrome"===Ht.user.device.browser.name.toLowerCase()&&Zt.q()<53||Ht.user.device.os&&Ht.user.device.os.name&&"ios"===Ht.user.device.os.name.toLowerCase()||Ht.user.device.os&&Ht.user.device.os.name&&"macosx"===Ht.user.device.os.name.toLowerCase()&&"ontouchstart"in window),Os:!!(Ht.user.device.os&&Ht.user.device.os.name&&"android"===Ht.user.device.os.name.toLowerCase()&&(Ht.user.device.browser&&Ht.user.device.browser.name&&"chrome"===Ht.user.device.browser.name.toLowerCase()||Ht.user.device.browser&&Ht.user.device.browser.name&&"android webview"==Ht.user.device.browser.name.toLowerCase())&&56<=Zt.q()||"ontouchend"in window&&(Ht.user.device.browser&&Ht.user.device.browser.name&&"firefox"===Ht.user.device.browser.name.toLowerCase()||Ht.user.device.browser&&Ht.user.device.browser.name&&"opera"===Ht.user.device.browser.name.toLowerCase()||Ht.user.device.browser&&Ht.user.device.browser.name&&"edge"===Ht.user.device.browser.name.toLowerCase()))};let o=!1;function s(t){let e=t.type;if(a(),"touchend"===t.type||"touchstart"===t.type)if("viously-touch"===t.target.id){const n=Yt?parent.document:document,i=n.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY);Yt?i===window.frameElement&&(e="click"):document.getElementById("vsly-player-container").contains(i)&&(e="click")}else document.getElementById("vsly-player-container").contains(t.target)&&(e="click");!1===o&&(Zt.p(ct+"Start soundonaction : "+e+" ("+t.type+")"),$.M.confirmAudioPlaybackAllowed(),$.Ko(pt),$.M.enableInitialAudioPlayback(),o=!0)}function a(){if(!0===n){Zt.p(ct+"Stop soundonaction");const t=Yt?parent.document:document;i.Ts&&!0===i.Ms&&Zt.Y(i.Ts,"touchstart",s),i.Es&&!0===i.Os&&(i.Es.style.display="none",Zt.Y(i.Es,"touchend",s)),Tt||Zt.Y(t,"click",s)}}function e(){if(!0===n){Zt.p(ct+"Init soundonaction");const t=Yt?parent.document:document;if(!0===i.Ms&&(i.Ts=t.body,Zt.K(i.Ts,"touchstart",s)),!0===i.Os){if(!t.getElementById("viously-touch")){const e=document.createElement("div");e.id="viously-touch",e.style.cssText="top:0;left:0;right:0;bottom:0;z-index:2147483647;position:fixed;touch-action:none;display:none;",t.body.appendChild(e)}i.Es=t.getElementById("viously-touch"),i.Es.style.display="block","chrome"===(Ht.user.device.browser&&Ht.user.device.browser.name&&Ht.user.device.browser.name.toLowerCase())&&72<=Zt.q()&&(i.Es.style.backgroundColor="rgba(255,255,255,0.01)"),Zt.K(i.Es,"touchend",s,{passive:!1})}Tt||Zt.K(t,"click",s)}}return t.oe=e,t._i=s,t})($.Cs||{}),(r=(ee=$)||{}).Qi=(t=r.Qi||{},F=J=!1,W=null,K=!!(Ht.user.device.browser&&Ht.user.device.browser.name&&"chrome"===Ht.user.device.browser.name.toLowerCase()&&53<=Zt.q()||Ht.user.device.os&&Ht.user.device.os.name&&"ios"===Ht.user.device.os.name.toLowerCase()&&10<=Zt.N()||Ht.user.device.browser&&Ht.user.device.browser.name&&"safari"===Ht.user.device.browser.name.toLowerCase()&&"desktop"===Ht.user.device.type||Ht.user.device.browser&&Ht.user.device.browser.name&&"firefox"===Ht.user.device.browser.name.toLowerCase()&&67<=Zt.G()||Ht.user.device.browser&&Ht.user.device.browser.name&&"opera"===Ht.user.device.browser.name.toLowerCase()&&54<=Zt.B()||Ht.user.device.browser&&Ht.user.device.browser.name&&"edge"===Ht.user.device.browser.name.toLowerCase()&&79<=Zt.H()),c={Rs:!(Z=function(){Zt.p(ct+"Browser blocked autoplay muted");const t=r.et();t&&(Zt.Y(t,"play",Y),Zt.Y(t,"suspend",Z),r.Gi.oe())}),Ls:!(Y=function(){Zt.p(ct+"Browser didn't block autoplay muted");const t=r.et();t&&(Zt.Y(t,"play",Y),Zt.Y(t,"suspend",Z),r.T()?r.Ko(ht):r.Ko(_t),a.oe(),s.oe(),J=!0,r.ui("buffering"),ut.co(Ht.admin.current_index))}),Vs:function(){c.Rs=!0,1<U?c._i():(Zt.K(parent.document.body,"keydown",c._i),Zt.K(parent.document.body,"mouseover",c._i),Zt.K(parent.document.body,"touchmove",c._i),Zt.K(parent.document.body,"touchstart",c._i),Zt.K(parent.window,"scroll",c._i),Zt.K(document.body,"keydown",c._i),Zt.K(document.body,"mouseover",c._i),Zt.K(document.body,"touchmove",c._i),Zt.K(document.body,"touchstart",c._i),r.ui("idle"))},Ns:function(){Zt.Y(parent.document.body,"keydown",c._i),Zt.Y(parent.document.body,"mouseover",c._i),Zt.Y(parent.document.body,"touchmove",c._i),Zt.Y(parent.document.body,"touchstart",c._i),Zt.Y(parent.window,"scroll",c._i),Zt.Y(document.body,"keydown",c._i),Zt.Y(document.body,"mouseover",c._i),Zt.Y(document.body,"touchmove",c._i),Zt.Y(document.body,"touchstart",c._i)},_i:function(){c.Ls=!0,c.Ns(),X(Ht.admin.current_index)}},X=function(e){if(Zt.At()){Zt.p(ct+"Init autoplay");const n=r.et();if(n){r.Oo(n);const i=r.M.getIntendedState().muted;if(1==r.Se(e)){var t;i&&K?!1===c.Rs&&!1===c.Ls&&Zt.It()?(Zt.p(ct+"Waiting for user gesture"),c.Vs()):Ht.user.device.browser&&Ht.user.device.browser.name&&"safari"===Ht.user.device.browser.name.toLowerCase()?(n.src=r.xi.Eo,n.play(),Zt.K(n,"play",Y),Zt.K(n,"suspend",Z)):(r.T()?r.Ko(ht):r.Ko(_t),a.oe(),s.oe(),J=!0,r.ui("buffering"),ut.co(e)):(r.ui("playing"),r.M.prepareForUnmuteAttempt(),void 0!==(t=n?n.play():void 0)?(Zt.p(ct+"Autoplay promise defined"),t.then(function(t){Zt.p(ct+"Autoplay promise success"),r.M.resolveUnmuteAttempt(),r.M.confirmAudioPlaybackAllowed(),r.M.applyInitialConfiguredState(),n.pause(),r.M.getState().muted?r.T()?r.Ko(ht):r.Ko(_t):r.T()?r.Ko(pt):r.Ko(mt),a.oe(),s.oe(),J=!0,r.ui("buffering"),ut.co(e),r.Cs.oe()}).catch(function(t){Zt.p(ct+"Autoplay promise error"),r.M.resolveUnmuteAttempt(),r.M.setMute(!0),(Zt.St()?(n.pause(),r.M.getState().muted?r.T()?r.Ko(ht):r.Ko(_t):r.T()?r.Ko(pt):r.Ko(mt),a.oe(),s.oe(),J=!0,r.ui("buffering"),ut.co(e),r.Cs):r.Gi).oe()})):(Zt.p(ct+"Autoplay promise undefined"),0==n.paused?(n.pause(),r.M.getState().muted?r.T()?r.Ko(ht):r.Ko(_t):r.T()?r.Ko(pt):r.Ko(mt),a.oe(),s.oe(),J=!0,r.ui("buffering"),ut.co(e)):(n.pause(),r.Gi.oe())))}else{const o=r.M.getState().muted;o&&K||n.pause(),o?r.T()?r.Ko(ht):r.Ko(_t):r.T()?r.Ko(pt):r.Ko(mt),a.oe(),s.oe(),J=!0,r.ui("buffering"),ut.co(e)}}}else Zt.p(ct+"No autoplay"),r.Gi.oe()},e=function(t){var e,n=Yt?parent:window,i=Yt?window.frameElement:document.body;(Yt||A)&&1==r.Se(t)?((e=r.g(t)).vasts&&e.vasts.length&&ut.Hi(),Yt&&Zt.At()&&Zt._t(i,n,.01)&&ut.co(t),r.M.getIntendedState().muted&&K&&document.body.classList.contains("player-is-sticked")?(Zt.p(ct+"Muted and sticked"),X(t)):Yt&&Zt._t(i,n,.5)?(Zt.p(ct+"Already in viewport"),X(t)):!Yt||"onadstart"!==Ht.template.sdk.sticky.event&&"duringads"!==Ht.template.sdk.sticky.event?(Zt.p(ct+"Not in viewport"),clearInterval(W),W=setInterval(Q,100)):(Zt.p(ct+"Not in viewport but start anyway"),X(t))):X(t)},Q=function(){var t,e,n;!1===J&&(t=Yt?parent:window,e=Yt?window.frameElement:document.body,n=we?1.5:1.3,Zt._t(e,t,.5)?(Zt.p(ct+"In viewport after interval"),X(Ht.admin.current_index),clearInterval(W)):!1===F&&Zt.At()&&window.frameElement.getBoundingClientRect().top-parent.document.documentElement.clientHeight*n<0&&(F=!0,Zt.p(ct+"Is near the bottom of the viewport"),ut.co(Ht.admin.current_index)))},b=function(){return J},_=function(){J=!1},t.oe=e,t.Qt=b,t.zo=_,t),(d=(ee=r)||{}).Uo=(e=d.Uo||{},u=document.querySelector("#vsly-player-container"),nt=document.getElementById("vsly-play-pause"),it=document.getElementById("vsly-mute"),ot=document.getElementById("vsly-fullscreen"),st=document.getElementById("vsly-logo"),at=document.getElementById("vsly-seekbar-thumb"),rt=document.getElementById("vsly-seekbar-progress"),It=document.getElementById("vsly-seekbar"),At=document.getElementById("vsly-volumebar-thumb"),St=document.getElementById("vsly-volumebar-progress"),document.getElementById("vsly-volumebar-track"),kt=document.getElementById("vsly-volumebar"),xt=document.getElementById("vsly-timer"),Mt=document.getElementById("vsly-timer-current"),Ot=!1,Ct=lt,Rt=-1<window.location.search.indexOf("layout=")&&window.location.search.indexOf("viously.com"),Lt=null,Vt=-1<window.location.search.indexOf("layout=mobile")&&window.location.search.indexOf("viously.com"),Nt="show-controls",Dt=function(t){if(rt&&at){rt.style.width=t+"%",at.style.left=t+"%";const e=d.et();e&&(Ht.playlist.related_url&&d.g(d.Zt())&&((t=e.duration-e.currentTime)<Ht.admin.progress_timeout?d.ee.As(100*((Ht.admin.progress_timeout-t)/Ht.admin.progress_timeout).toFixed(2)):d.ee.As(0),d.jo)&&(Ht.template.controls.autoskip.button_timeout&&e.currentTime>=Ht.template.controls.autoskip.button_timeout&&e.currentTime<=Ht.template.controls.autoskip.button_timeout+Ht.template.controls.autoskip.button_duration?d.ee.As(100*((e.currentTime-Ht.template.controls.autoskip.button_timeout)/Ht.template.controls.autoskip.button_duration).toFixed(2)):e.currentTime>Ht.template.controls.autoskip.button_timeout+Ht.template.controls.autoskip.button_duration&&d.ee.As(0)),cancelAnimationFrame(et))}else cancelAnimationFrame(et)},b=function(t,e){xt&&Ht.template.controls.control_bar.video_timer&&Mt&&(t&&(Mt.textContent="-"+Zt.dt(parseInt(e-t),10)),e)&&(xt.style.opacity="1")},_=function(){if(Zt.p(ct+"Init controlBar"),Ot&&Lt&&Zt.Y(Lt,"loadedmetadata",Ut),nt&&Pt(),It&&Bt(),kt&&Me(),st&&Oe(),ot){const t=d.et();t&&Zt.K(t,"loadedmetadata",Ut)}document.body.classList.contains("vsly-carousel-playback")||Zt.$(u,"controls-state-active"),Rt?Zt.$(document.body,Vt?"controls-mobile":"controls-desktop"):Zt.$(document.body,we?"controls-mobile":"controls-desktop"),Re(),Ot=!0,Lt=d.et()},Pt=function(){Ht.template.controls.control_bar.button_play?Zt.K(nt,"click",function(){const t=d.et();t&&(t.paused?(d.vs(!0),d.Oo(t),t.play(),Xt.v("contentResume",{cursor_position:parseInt(1e3*t.currentTime),content_quality:d.Ro()})):(d.vs(!1),t.pause(),Xt.v("contentPause",{cursor_position:parseInt(1e3*t.currentTime),content_quality:d.Ro()})))}):(nt.parentNode.removeChild(nt),nt=null)},Ut=function(){if(Ht.template.controls.control_bar.button_fullscreen){const e=d.et();e&&Zt.Y(e,"loadedmetadata",Ut),jt();var t=function(){(jt()?zt:Gt)(),0!=Ct||we||(d.ps(),Ct=!0),d.ee.Ss()};document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled?(Zt.K(document,"fullscreenchange",qt),Zt.K(ot,"click",t)):d.et()&&d.et().webkitSupportsFullscreen?Zt.K(ot,"click",t):ot.style.display="none"}else null!=ot&&(ot.parentNode.removeChild(ot),ot=null)},jt=function(){return!(!document.fullscreenElement&&!document.webkitFullscreenElement&&!document.mozFullScreenElement&&!document.msFullscreenElement)},qt=function(){jt()?Zt.$(u,"fullscreen"):Zt.J(u,"fullscreen")},Gt=function(){u.requestFullscreen?u.requestFullscreen():u.webkitRequestFullscreen?u.webkitRequestFullscreen():u.mozRequestFullScreen?u.mozRequestFullScreen():u.msRequestFullscreen?u.msRequestFullscreen():d.et()&&d.et().webkitEnterFullscreen&&d.et().webkitEnterFullscreen(),Xt.v("contentEnterFullscreen",{cursor_position:parseInt(1e3*(d.et()?d.et().currentTime:0)),content_quality:d.Ro()})},zt=function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():d.et()&&d.et().webkitExitFullscreen&&d.et().webkitExitFullscreen(),Xt.v("contentExitFullscreen",{cursor_position:parseInt(1e3*(d.et()?d.et().currentTime:0)),content_quality:d.Ro()})},Bt=function(){var o,i,n,e,s,t;Ht.template.controls.seek_bar?(o=0,i=!1,n=function(t,e){if(0!==e.offsetWidth&&0!==e.offsetHeight){var n=(t.offsetX||t.layerX||(t.changedTouches?t.changedTouches[0].clientX:0))/e.offsetWidth;const i=d.et();i&&(t=parseInt(o*i.duration*1e3),e=parseInt(n*i.duration*1e3),o<n?Xt.v("contentSeekForward",{old_cursor_position:t,new_cursor_position:e,content_quality:d.Ro()}):Xt.v("contentSeekBackward",{old_cursor_position:t,new_cursor_position:e,content_quality:d.Ro()}),Xt.v("contentSeek",{cursor_position:e,content_quality:d.Ro()}),o=n,et=window.requestAnimationFrame(function(){Dt(parseInt(100*n),10)}),d.Ds.update({time:Math.floor(i.currentTime)}))}},e=function(t,e){i=!0,e.target!=at&&n(e,t)},s=function(t,e){i&&e.target!=at&&n(e,t)},t=function(t,e){if(i){i=!1;const n=d.et();if(n){try{n.currentTime=o*n.duration}catch(t){}d.jo&&(d.jo=n.currentTime<Ht.template.controls.autoskip.button_timeout)}}},Ht.template.controls.control_bar.video_timer||(xt.parentNode.removeChild(xt),Mt=xt=null),Zt.K(It,"mousedown",function(t){e(this,t)}),Zt.K(It,"mousemove",Zt.ft(function(t){s(this,t)},50,!0,!0)),Zt.K(document.body,"mouseup",t),Tt&&(Zt.K(It,"touchstart",function(t){e(this,t)}),Zt.K(It,"touchmove",Zt.ft(function(t){s(this,t)},50,!0,!0)),Zt.K(document.body,"touchend",t))):(It.parentNode.removeChild(It),Mt=xt=at=rt=It=null)},Me=function(){const i=.001;if(Ht.template.controls.control_bar.button_volume){const t=function(t){const e=t.volume;we&&Vt||(At.style.bottom=100*(1-e)+"px",St.style.height=100*e+"px")};var o,s,a;d.M.onStateChanged(t),t(d.M.getState()),Zt.K(it,"click",function(t){if(t.target==it){d.M.confirmAudioPlaybackAllowed();const e=d.M.getState();let t;if(e.volume>i){t=0,Zt.v(11,null,!1,!1);const n=d.et();Xt.v("contentMuted",{volume:t,cursor_position:parseInt(n?1e3*n.currentTime:0),content_quality:d.Ro()})}else t=d.M.getLastAudibleVolume(),Zt.v(12,null,!1,!1),Xt.v("contentUnmuted",{volume:t,cursor_position:parseInt(d.et()?1e3*d.et().currentTime:0),content_quality:d.Ro()});d.M.toggleMute(),d.ee.Ss()}}),we&&Vt||(a=function(t){window.cancelAnimationFrame(o),Xt.v("contentVolume",{volume:t,cursor_position:parseInt(d.et()?1e3*d.et().currentTime:0),content_quality:d.Ro()}),d.M.setVolume(t)},Zt.K(kt,"mousedown",function(t){s=!0,d.M.confirmAudioPlaybackAllowed();const e=kt.getBoundingClientRect(),n=t.clientY-e.top;let i=1-n/kt.offsetHeight;i=Math.max(0,Math.min(1,i)),o=window.requestAnimationFrame(function(){a(i)})}),Zt.K(document,"mousemove",Zt.ft(function(e){if(s){const n=kt.getBoundingClientRect(),i=e.clientY-n.top;let t=1-i/kt.offsetHeight;t=Math.max(0,Math.min(1,t)),o=window.requestAnimationFrame(function(){a(t)})}},50,!0,!0)),Zt.K(document,"mouseup",function(t){s=s&&!1}))}else it.parentNode.removeChild(it),St=At=kt=it=null},Oe=function(){Ht.template.controls.control_bar.logo||(st.parentNode.removeChild(st),st=null)},Ce=function(){Zt.$(document.body,Nt),clearTimeout(tt),tt=setTimeout(function(){Zt.J(document.body,Nt)},Ht.admin.display_time_on_touch)},Re=function(){Tt?Zt.K(u,"touchend",Ce):Rt&&Zt.K(u,"click",Ce),Ht.template.controls.control_bar.video_timer&&xt&&(xt.style.opacity="0")},t=function(){Ct=!1,Tt?Zt.Y(u,"touchend",Ce):Rt&&Zt.Y(u,"click",Ce),jt()&&zt()},oi=function(){return Ot},_show=function(){document.body.classList.contains("vsly-carousel-playback")||Zt.$(u,"controls-state-active")},_hide=function(){Zt.J(u,"controls-state-active")},e.oe=_,e.do=t,e.Ii=Re,e.Po=oi,e.Ps=jt,e.updateSeekbar=Dt,e.updateTimer=b,e.show=_show,e.hide=_hide,e),(Le=(ee=d)||{}).Do=(_=Le.Do||{},Ve="%c ui %c",Ne={element:null,brand:{element:null,img:null},title:{element:null}},t=function(){Ht.template.ui&&Ht.template.ui.header&&(Zt.p(Ve+"Player has UI"),Zt.$(document.body,"has-ui"),Ne.element=document.querySelector("#viously-ui"),Ne.brand.element=document.querySelector("#viously-ui-header-brand"),Ne.brand.img=document.querySelector("#viously-ui-header-brand-img"),Ne.title.element=document.querySelector("#viously-ui-video-title"),Ht.template.ui.header)&&(Ne.brand.element.style.background=Ht.template.ui.header.brand.background,Ne.title.element.style.backgroundColor=Ht.template.ui.header.title.background,Ne.title.element.style.color=Ht.template.ui.header.title.color,De(),Ne.brand.img.src=Ht.template.ui.header.brand.img)},oi=function(){return Ne},De=function(){Ne.title.element&&(Ne.title.element.textContent=Pe(),Ne.title.element.setAttribute("title",Pe()))},Pe=function(){return Ht.template.ui.header.title&&Ht.template.ui.header.title.textContent?Ht.template.ui.header.title.textContent.includes("%%TITLE%%")?Ht.template.ui.header.title.textContent.replace("%%TITLE%%",Le.g(Ht.admin.current_index).title):Ht.template.ui.header.title.textContent:Le.g(Ht.admin.current_index).title},_.oe=t,_.Us=oi,_.No=De,_),(Et=(ee=Le)||{}).$o=(t=>{let n=null;const e=560,o=2e3,i="%c ctv %c",s={x:0,y:0},c={js:null,qs:null,Gs:null,zs:null,Bs:null,Hs:null,$s:null,Js:null,Fs:null,Ws:null,Ks:null,Ys:null,Zs:null,Xs:null,Qs:null,ta:null,ea:null,na:null,ia:null,oa:null},a={sa:"",aa:"",ra:"",ca:""},d={da:0,ua:!0,la:!1,pa:!1,ha:!1,fa:!1,ma:!1,_a:!0,va:!1,ba:0,wa:0,ga:0,ya:0,Ia:0,Aa:-1},r={Sa:[]},u={ka:".ctv-stream-section:not(.ghost-section)",xa:"#ctv-touch-area"},l=new hi({isVisibleUI:!1,activeThumbnailIndex:null,currentVideoIndex:null,activeSectionIndex:null,activeNavItemIndex:null,visualNavItemIndex:null,currentPlaylistItem:null,hasActiveLive:!1,currentTime:0,currentTimePercentage:0,isUserInteracting:!1,duration:null,hideUIProposedTime:null,hideUIScheduledTime:0,isPlaying:!1,shouldPlay:null}),p={update:function(t,e){void 0!==t.isVisibleUI&&(t.isVisibleUI?X:C)()}},h=(l.addObserver(p,"isVisibleUI"),{update:function(t,e){if(void 0!==t.currentVideoIndex&&(et(),"number"==typeof t.currentVideoIndex)){const n=c.na[t.currentVideoIndex];if(null!==n){!1===n.classList.contains("active")&&Q(n),d.ua=0===t.currentVideoIndex;const i=r.Sa[t.currentVideoIndex];l.update({activeSectionIndex:i,visualNavItemIndex:i})}}}}),f=(l.addObserver(h,"currentVideoIndex"),{update:function(t,e){void 0!==t.currentPlaylistItem&&"object"==typeof t.currentPlaylistItem&&mt(t.currentPlaylistItem)}}),m=(l.addObserver(f,"currentPlaylistItem"),{update:function(t,e){if(void 0!==t.activeThumbnailIndex){const n=e.currentVideoIndex;"number"==typeof t.activeThumbnailIndex&&0<=t.activeThumbnailIndex&&t.activeThumbnailIndex<d.wa&&(_t(),l.update({currentVideoIndex:t.activeThumbnailIndex,currentTimePercentage:0,currentTime:0}),Et.ee.ks(t.activeThumbnailIndex).then(t=>{l.update({currentPlaylistItem:t}),x()}).catch(()=>{l.update({currentVideoIndex:n},{force:!0})}))}}}),_=(l.addObserver(m,"activeThumbnailIndex"),{update:function(t,e){if(void 0!==t.activeSectionIndex&&"number"==typeof t.activeSectionIndex&&0<=t.activeSectionIndex&&t.activeSectionIndex<d.ya){L(t.activeSectionIndex),nt();const n=c.ea[t.activeSectionIndex];tt(n)}}}),v=(l.addObserver(_,"activeSectionIndex"),{update:function(t,e){if(void 0!==t.activeNavItemIndex&&0<d.ga&&"number"==typeof t.activeNavItemIndex&&0<=t.activeNavItemIndex){const n=c.ta[t.activeNavItemIndex];n&&("ctv-home-btn"===n.id||"ctv-mobile-home-btn"===n.id?l.update({activeThumbnailIndex:0,visualNavItemIndex:0,activeSectionIndex:0},{force:!0}):l.update({visualNavItemIndex:t.activeNavItemIndex,activeSectionIndex:t.activeNavItemIndex},{force:!0}))}}}),b=(l.addObserver(v,"activeNavItemIndex"),{update:function(t,e){if(void 0!==t.visualNavItemIndex&&0<d.ga&&"number"==typeof t.visualNavItemIndex&&0<=t.visualNavItemIndex){const n=c.ta[t.visualNavItemIndex];n&&(c.ta.forEach(t=>t.classList.remove("active")),n.classList.add("active"),c.Qs.classList[t.visualNavItemIndex?"remove":"add"]("has-active-home")),x(),setTimeout(function(){window.lazyload.init()},250)}}}),w=(l.addObserver(b,"visualNavItemIndex"),{update:function(t,e){void 0!==t.currentPlaylistItem&&l.update({hasActiveLive:Boolean(t.currentPlaylistItem.sources[0].live)})}}),g=(l.addObserver(w,"currentPlaylistItem"),{update:function(t,e){void 0!==t.hasActiveLive&&pt(t.hasActiveLive)}}),y=(l.addObserver(g,"hasActiveLive"),{update:function(t,e){void 0!==e.currentTime&&void 0!==e.duration&&!1===isNaN(e.duration)&&it(c.Gs.offsetWidth*e.currentTime/e.duration)}}),I=(l.addObserver(y,["currentTime","duration"]),{update:function(t,e){if(e.isUserInteracting&&void 0!==t.currentTime){const n=Et.et();n&&(n.currentTime=t.currentTime)}}}),A=(l.addObserver(I,["currentTime"]),{update:function(t,e){let n,i="";n=isNaN(e.currentTime)?"00:00":R(Math.floor(e.currentTime/60))+":"+R(Math.floor(e.currentTime%60)),isNaN(e.duration)||(i=R(Math.floor(e.duration/60))+":"+R(Math.floor(e.duration%60))),c.$s.textContent=n+" / "+i,c.Fs.textContent=i,c.Js.textContent=n}}),S=(l.addObserver(A,["currentTime","duration"]),{update:function(t,e){void 0!==t.currentTimePercentage&&void 0!==e.duration&&!1===isNaN(e.duration)&&l.update({currentTime:e.duration*t.currentTimePercentage})}}),D=(l.addObserver(S,["currentTimePercentage"]),{update:function(t,e){void 0!==t.topReachedOnThumbnail&&ht(t.topReachedOnThumbnail)}}),P=(l.addObserver(D,"topReachedOnThumbnail"),{update:function(t,e){const n=t.hideUIProposedTime,i=e.hideUIScheduledTime;null!=n&&n>i&&(-1<d.Aa&&clearTimeout(d.Aa),l.update({hideUIScheduledTime:n}),d.Aa=setTimeout(()=>{l.update({isVisibleUI:!1})},n-Date.now()))}}),U=(l.addObserver(P,["hideUIProposedTime","hideUIScheduledTime"]),{update:function(t,e){if("boolean"==typeof t.shouldPlay){const n=Et.et();if(n)if(t.shouldPlay)if(n.ended||n.currentTime>=n.duration)Et.En.Wo();else{const i=n.play();void 0!==i&&i.then(()=>{}).catch(t=>{})}else n.pause()}}}),j=(l.addObserver(U,"shouldPlay"),{update:function(t,e){void 0!==t.isPlaying&&t.isPlaying}}),k=(l.addObserver(j,"isPlaying"),function(e){e=parseInt(e),isNaN(e)&&(e=o);let n=0;const i=200;return function(){const t=Date.now();t-n<i||(n=t,l.update({isVisibleUI:!0,hideUIProposedTime:t+e}))}}),x=k(o),q=k(5*o),T=function(t){x(),l.update({isUserInteracting:!0});const e=l.state.currentTime||0,n=l.state.duration;let i;i=n&&!isNaN(n)?Math.max(0,Math.min(e+t,n)):Math.max(0,e+t),l.update({currentTime:i}),setTimeout(()=>{l.update({isUserInteracting:!1})},100)},G=()=>T(10),z=()=>T(-10),B=function(t){const e=(t.touches?t.touches[0]:t).pageX,n=c.Gs.getBoundingClientRect(),i=e-n.left,o=i/n.width,s=Et.et();if(s){const a=s.duration;if(a&&!isNaN(a)){const r=o*a;s.currentTime=r,l.update({currentTime:r})}}},E=function(t){if(x(),l.state.isUserInteracting){const e=(t.touches?t.touches[0]:t).pageX,n=(e-c.zs.getBoundingClientRect().left-d.da)/c.Gs.offsetWidth;l.update({currentTimePercentage:n})}},M=function(){Zt.J(c.Gs,"dragging"),x(),l.state.isUserInteracting&&(window.removeEventListener(a.sa,E),l.update({currentTimePercentage:c.zs.offsetWidth/c.Gs.offsetWidth}),l.update({isUserInteracting:!1}))},O=function(t){Zt.$(c.Gs,"dragging"),Zt.K(c.Xs,"mouseup",()=>{M("mousemove")});const e=(t.touches?t.touches[0]:t).pageX;d.da=d.va?e-c.Hs.getBoundingClientRect().left:e-c.Bs.getBoundingClientRect().left,l.update({isUserInteracting:!0}),Zt.K(window,a.sa,E)},H=t=>{x(),d.fa=!0;const i=(c.ia[0].getBoundingClientRect().top-c.qs.getBoundingClientRect().top)/c.ia[0].offsetHeight;if(!(Math.abs(i)>d.Ia)){d.ha=!d.ua&&0===Math.round(i);const e=-Math.round(i)-1;l.update({visualNavItemIndex:e}),l.update({topReachedOnThumbnail:d.ha}),c.ia.forEach((t,e)=>{const n=d.va?1:i+e+1;0<=n&&n<=1&&(t.style.opacity=Math.pow(n,5),t.style.pointerEvents=.5<n?"auto":"none")})}},$=function(){c.qs.addEventListener("scroll",t=>{d.va||H(t),window.lazyload.init()})},J=function(i){let o=!1,s,a;const r=5;i.addEventListener("mousedown",t=>{o=!0,t.preventDefault(),d.pa=!1,s=t.pageX-i.offsetLeft,a=i.scrollLeft,i.classList.add("active")}),i.addEventListener("mouseleave",()=>{o&&(o=!1,i.classList.remove("active"))}),i.addEventListener("mouseup",()=>{o=!1,i.classList.remove("active"),setTimeout(()=>{d.pa=!1},0)}),i.addEventListener("mousemove",t=>{if(o){t.preventDefault();const e=t.pageX-i.offsetLeft,n=e-s;Math.abs(n)>r&&(d.pa=!0),i.scrollLeft=a-n}})},F=function(){c.oa.forEach(t=>J(t))},W=function(t,e){t.stopPropagation(),l.update({activeNavItemIndex:e},{force:!0})},K=function(t,e){t.preventDefault(),d.pa?t.stopPropagation():(d.va||x(),l.update({activeThumbnailIndex:e},{force:!0}))},Y=function(t){x(),t.M.toggleMute()},Z=function(t){const e=!t.state.isPlaying;t.update({shouldPlay:e})},X=function(){document.body.classList.remove("ctv-fade-out"),d.va||d.ha&&!d.fa&&c.qs.scrollTo({top:document.querySelector("section").offsetHeight,behavior:"instant"})},C=function(){document.body.classList.contains("player-state-paused")||(d.fa=!1,document.body.classList.add("ctv-fade-out"))},Q=function(t){t.classList.add("active")},tt=function(t){t.classList.add("active")},et=function(){c.na.forEach(t=>{t.classList.remove("active"),t.getAttribute("data-opacity")&&(t.style.opacity=t.getAttribute("data-opacity"),t.removeAttribute("data-opacity"))})},nt=function(){c.ea.forEach(t=>{t.classList.remove("active")})},it=function(t){c.zs.style.width=t+"px",c.Bs.style.left=t+"px",c.Hs.style.left=t+"px"},ot=function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():Et.et()&&Et.et().webkitEnterFullscreen&&Et.et().webkitEnterFullscreen()},st=function(){d.va=document.body.offsetWidth<=e,c.Xs=d.va?document.querySelector(u.xa):window,x()},at=function(){l.update({isPlaying:!0,shouldPlay:null})},rt=function(){l.update({isPlaying:!1,shouldPlay:null})},ct=function(t){const e=Et.et();e&&e.src!==Et.xi.Eo&&l.update({currentTime:t.target.currentTime,duration:t.target.duration})},dt=function(){document.body.classList.add("ctv-stop-event"),C(),setTimeout(()=>{document.body.classList.remove("ctv-stop-event")},100)},ut=function(t,e,n){t.va||x();const o=(n[0].getBoundingClientRect().left-e.getBoundingClientRect().left)/(n[0].offsetWidth+t.ba);n.forEach((t,e)=>{const n=t.querySelector(".img-overlay"),i=o+e;n&&i<=1&&0<=i&&(t.style.opacity=""+(i+.2),t.querySelector(".ctv-video-title").style.opacity=i)})},lt=function(){At(),V(),c.Xs=d.va?document.querySelector(u.xa):window,N(),setTimeout(()=>{document.body.offsetWidth<=e&&c.ia.forEach(t=>{Object.assign(t.style,{opacity:"1",pointerEvents:"auto"})})},100),setTimeout(()=>L(l.state.visualNavItemIndex),100)};function pt(t){c.js.classList.toggle("has-active-live",t)}function ht(t){document.body.classList.toggle("navmenu-fade-out",t)}function ft(t){if(t&&/^[a-zA-Z0-9\-_]{11}$/.test(t.toString())){const{hostname:e,pathname:n}=window.location;if(Ht.page.ctv_domain&&Ht.page.ctv_domain===e&&!e.includes("viously.com"))return"/"+t;const i=/^\/(?<user_url>[a-z0-9\-]+)\/ctv(\/(?<video_id>[a-zA-Z0-9\-_]{11}))?$/,o=i.exec(n);if(o){const s=o.groups.user_url;return`/${s}/ctv/`+t}}return null}function mt(t){const e=ft(0<Ht.admin.current_index?t.vid:null);if(null!==e){const n={pathname:e,videoIndex:Ht.admin.current_index},i=history.state&&Ht.admin.current_index===history.state.videoIndex?"replaceState":"pushState";history[i](n,"",e)}}function _t(){const t=history.state;history.replaceState({currentTime:l.state.currentTime,...t},"")}const R=t=>t<10?"0"+t:""+t,vt=function(t){const e={x:Tt?t.pageX:t.clientX,y:Tt?t.pageY:t.clientY};return setTimeout(()=>{s.x=e.x,s.y=e.y},50),1<Math.pow(s.x-e.x,2)||1<Math.pow(s.y-e.y,2)},bt=function(){c.oa.forEach(t=>{t.scrollTo({left:0,behavior:"instant"})}),d._a=!1};function L(t){d.ma=!0,c.qs.scrollTo({top:(t+1)*document.querySelector("section").offsetHeight,behavior:"smooth"}),setTimeout(()=>{d.ma=!1},1e3)}const V=function(){d.ba=parseFloat(getComputedStyle(document.documentElement).fontSize),d.va=document.body.offsetWidth<=e},wt=function(){c.js=document.querySelector("#vsly-ctv-container"),c.qs=document.querySelector("#ctv-stream-sections"),c.Gs=document.querySelector("#ctv-seekbar"),c.zs=document.querySelector("#ctv-progress-bar"),c.Bs=document.querySelector("#ctv-progress-bar-anchor"),c.Hs=document.querySelector("#ctv-progress-bar-anchor-touch"),c.$s=document.querySelector("#ctv-progress-timer-mobile"),c.Js=document.querySelector("#ctv-progress-timer-desktop"),c.Fs=document.querySelector("#ctv-duration-timer-desktop"),c.Ws=document.querySelector("#ctv-mobile-mute-btn"),c.Ks=document.querySelector("#ctv-play-btn"),c.Ys=document.querySelector("#ctv-rewind-btn"),c.Zs=document.querySelector("#ctv-forward-btn"),c.Xs=d.va?document.querySelector(u.xa):window,c.Qs=document.querySelector("#ctv-navmenu"),c.ta=[...document.querySelectorAll(".ctv-navitem")],c.ea=[...document.querySelectorAll(u.ka)],c.na=[...document.querySelectorAll(".js-article")],c.ia=[...document.querySelectorAll(".js-stream-section")],c.oa=[...document.querySelectorAll(".ctv-stream-scroll")]},gt=function(){d.wa=c.na.length,d.ga=c.ta.length,d.ya=c.ea.length,d.Ia=c.ia.length;const e=new Map(c.ea.map((t,e)=>[t,e]));r.Sa=c.na.map(t=>e.get(t.closest(u.ka)))},yt=function(){const t=new ji({muteElement:[c.Ws],controlsElements:[c.Ys,c.Ks,c.Zs],menuItems:c.ta,sections:c.ea,thumbnails:c.na}),e=function(){const n=document.getElementById("fast-cmp-root");if(n){const i=setInterval(()=>{const t=n.getBoundingClientRect();if(!t.width&&!t.height){clearInterval(i);const e=this.tree.children[0];this.setFocus(e,0)}},250)}};new Ui(t,e)},It=function(){a.ca="click",a.sa=Tt?"touchmove":"mousemove",a.aa=Tt?"touchstart":"mousedown",a.ra=Tt?"touchend":"mouseup"},N=function(){c.Xs.addEventListener(a.aa,x),c.Xs.addEventListener(a.ra,x)},At=function(){c.Xs.removeEventListener(a.aa,x),c.Xs.removeEventListener(a.ra,x)},St=function(){c.Ks.addEventListener(a.ca,()=>Z(l)),c.Zs.addEventListener(a.ca,()=>G(Et)),c.Ys.addEventListener(a.ca,()=>z(Et))},kt=function(){x(),Tt?(N(),d.va||Zt.K(c.Xs,"click",x),window.addEventListener("orientationchange",lt)):(Zt.K(c.Xs,"mousemove",t=>{vt(t)&&x()}),Zt.K(c.Xs,"scroll",x),Zt.K(c.Xs,"click",x)),Zt.K(window,"keydown",t=>{q()}),Zt.K(window,"resize",st);const n=Et.et();n&&(n.addEventListener("play",at),n.addEventListener("pause",rt),Zt.K(n,"loadedmetadata",()=>{if(n.src!==Et.xi.Eo){let t=0;if(window.location.hash){const e=new RegExp(/#start=(?<time>\d+)/).exec(window.location.hash);t=parseInt(e.groups.time,10)||0}l.state.currentVideoIndex!==Ht.admin.current_index&&l.update({currentPlaylistItem:Et.g(Ht.admin.current_index),currentVideoIndex:Ht.admin.current_index,currentTimePercentage:0,currentTime:0}),l.update({duration:n.duration}),T(t)}}),window.addEventListener("popstate",t=>{t&&t.state&&l.update({activeThumbnailIndex:t.state.videoIndex},{force:!0})}),Zt.K(n,"timeupdate",ct),Zt.K(c.Bs,a.aa,O),Zt.K(c.Hs,a.aa,O),Zt.K(c.Bs,a.ra,M),Zt.K(c.Hs,a.ra,M),Zt.K(c.Gs,a.ca,B),d.va&&!d.la&&Zt.K(document.querySelector("#ctv-header-mobile"),a.ra,dt),$(),c.oa.forEach(t=>{const e=t.querySelectorAll("button");t.onscroll=()=>ut(d,t,e)}),c.ta.forEach((t,e)=>{t.addEventListener(a.ca,t=>{W(t,e)})}),c.na.forEach((t,n)=>{t.addEventListener(a.ca,t=>{K(t,n)}),t.addEventListener("focusin",t=>{const e=r.Sa[n];L(e)})}),document.querySelectorAll(".ctv-mute-btns").forEach(t=>{t.addEventListener(a.ca,()=>Y(Et))}),document.querySelectorAll(".ctv-fullscreen-btns").forEach(t=>{t.addEventListener(a.ca,()=>{ot(document.querySelector("#vsly-player-container"))})}),St(),F())},xt=function(){ye&&(Zt.$(document.documentElement,we?"ctv-mobile":"ctv-desktop"),n=Et.g(Ht.admin.current_index),document.querySelectorAll(".ctv-header").forEach(t=>{const e=t.querySelector("h1").dataset.liveLabel;t.querySelector("h1").style.setProperty("--after-content",`" ${e.toUpperCase()}"`),t.querySelector("h1").textContent=n.title||"",t.querySelector("p").textContent=n.description||""}),Zt.$t()&&(document.body.classList.add("in-ctv-app"),Ht.template.advertising.linear.viously=!1,Ht.template.advertising.linear.primary=!1,Ht.template.advertising.linear.passback=!1,Ht.template.advertising.nonlinear.event="never",Ht.advertising.linear.primary=!1,Ht.advertising.linear.passback=!1),V(),wt(),It(),gt(),d._a&&(bt(),kt(),yt()),Zt.p(i+"Player is CTV `"+(Tt?"on touch device":"")))};return t.oe=xt,t.Ta=C,t})(Et.$o||{}),(l=(ee=Et)||{}).En=(b=l.En||{},Ue=!1,qe=je=null,Ge=function(){l._s()&&l.Ii(l.fs())},e=function(t){var e=l.g(t);Zt.p(ct+"Ready "+e.vid),"number"==typeof t&&!isNaN(t)&&e&&e.vid&&l.Ds.update({vid:e.vid,live:!!e.sources.length&&e.sources[0].live}),"number"==typeof t&&!isNaN(t)&&e&&l.Lo&&("function"==typeof l.Lo.init?l.Lo.init():l.Lo.onVideoTracksLoaded(e.subtitles)),1==Ht.user.is_adblocked&&(Ht.template.autoplay=!1,Ht.template.play_type="clicktoplay"),1==l.Se(t)?((lt||!1===Ht.page.tcf.gdprApplies?l.Qi:("whisper"==Ht.template.audio_mode&&Ht.user.device.os&&Ht.user.device.os.name&&"ios"===Ht.user.device.os.name.toLowerCase()&&(Ht.template.play_type="autoplay"),l.Ot)).oe(t),Zt.p(e,!0)):l.Qi.oe(t),Xt.v("playerReady")},ze=function(){Zt.p(ct+"Play"),l.ui("playing"),0==N&&(Zt.p(ct+"Page is hidden so we force video to pause"),l.et())&&"function"==typeof l.et().pause&&l.et().pause()},Be=function(){Zt.p(ct+"Pause"),l.et()&&l.et().ended?l.ui("buffering"):l.ui("paused")},He=function(){var t;this.videoInstance?Zt.p(ct+"Error handled by VideoInstance, ignoring legacy error handler."):(t=l.g(Ht.admin.current_index)).sources.length?(Zt.p(ct+"Shift source"),t.sources.shift(),setTimeout(function(){l.Ii(Ht.admin.current_index)},100)):(t="&ec="+this.error.code+"&em="+encodeURIComponent(this.error.message||"nomessage"),l.Cn(t))},$e=function(t){if(Zt.p(ct+"Ended"),Xt.v("contentComplete",{content_quality:l.Ro()}),"carousel"===Ht.type)Zt.p(ct+"SwipeManager handling video end."),Hi.commitNext();else if(l.ee.ys(),l.ee.Fi()){l.ee.xs();let t=l.Zt();var e=l.g(t);e&&e.id_session_video?Wt&&l.Ho||!Wt?l.do(t):ye||(window.location=window.location.origin+"/"+Ht.diffuser.name+"/"+e.vid):(Zt.p(ct+"Reset the same video on ended"),ye||l.ss(),l.do(t))}else l.ui("complete"),Zt.K(document.getElementById("vsly-overlay"),"click",l.qo)},Je=function(t){if(this.currentTime&&0<this.currentTime&&this.duration&&0<this.duration){var e=this.currentTime/this.duration*100,n=l.g(Ht.admin.current_index);l.Uo.Po()&&(l.Uo.updateSeekbar(e),l.Uo.updateTimer(this.currentTime,this.duration)),l.Rn&&l.Rn.updateSeekBar(this.currentTime,this.duration);const o=l.et();o&&(this.currentTime<n.starttime&&Zt.ut(o,n.starttime),n.endtime!=n.duration)&&this.currentTime>n.endtime&&Zt.ut(o,o.duration),l.Ds.update({time:Math.floor(this.currentTime)});var i="&vst="+l.Yo()+"&vsq="+l.Ro();1<this.currentTime&&this.currentTime<parseInt(n.duration-Ht.admin.prefetch_timeout)&&(Zt.v(0,null,!0,!1,i),l.vi.Ea()||setTimeout(function(){l.fi.oe()},0)),10<e&&Zt.v(1,null,!0,!1,i),20<e&&Zt.v(2,null,!0,!1,i),30<e&&Zt.v(3,null,!0,!1,i),40<e&&Zt.v(4,null,!0,!1,i),50<e&&Zt.v(5,null,!0,!1,i),60<e&&Zt.v(6,null,!0,!1,i),70<e&&Zt.v(7,null,!0,!1,i),80<e&&Zt.v(8,null,!0,!1,i),90<e&&Zt.v(9,null,!0,!1,i),99<e&&Zt.v(10,null,!0,!1,i),(!this.lastHeartbeatTime||5e3<=Date.now()-this.lastHeartbeatTime)&&(this.lastHeartbeatTime=Date.now(),Xt.v("contentHeartbeat",{cursor_position:parseInt(1e3*this.currentTime),content_quality:l.Ro()})),Ht.playlist.related_url&&l.ee.Is(this)}},Fe=function(){Xt.v("contentWaiting",{cursor_position:parseInt(1e3*(l.et()?l.et().currentTime:0)),content_quality:l.Ro()})},We=function(){Xt.v("contentStalled",{cursor_position:parseInt(1e3*(l.et()?l.et().currentTime:0)),content_quality:l.Ro()})},Ke=function(){l.et().readyState<3&&Xt.v("contentWaitingHeartbeat",{cursor_position:parseInt(1e3*(l.et()?l.et().currentTime:0)),content_quality:l.Ro()})},Ye=function(){2===l.et().readyState&&Xt.v("contentStalledHeartbeat",{cursor_position:parseInt(1e3*(l.et()?l.et().currentTime:0)),content_quality:l.Ro()})},t=function(t){t||"carousel"!==Ht.type?(t=t||l.et(),!1===Ue&&(Zt.p(ct+"Add player events"),Ue=!0,"carousel"===Ht.type&&Zt.K(t,"canplay",Ge),Zt.K(t,"playing",ze),Zt.K(t,"pause",Be),Zt.K(t,"ended",$e),Zt.K(t,"timeupdate",Je),Zt.K(t,"waiting",Fe),Zt.K(t,"stalled",We),je=setInterval(Ke,5e3),qe=setInterval(Ye,5e3),Zt.K(t,"error",He))):Zt.p(ct+"Error: _add events called without a videoElement.")},oi=function(t){t||"carousel"!==Ht.type?(t=t||l.et(),!0===Ue&&(Zt.p(ct+"Remove player events"),Ue=!1,"carousel"===Ht.type&&Zt.Y(t,"canplay",Ge),Zt.Y(t,"playing",ze),Zt.Y(t,"pause",Be),Zt.Y(t,"ended",$e),Zt.Y(t,"timeupdate",Je),Zt.Y(t,"waiting",Fe),Zt.Y(t,"stalled",We),clearInterval(je),clearInterval(qe),Zt.Y(t,"error",He))):Zt.p(ct+"Error: _remove events called without a videoElement.")},b.Mo=t,b.yn=oi,b.Vo=e,b.Wo=$e,b),(Ze=(ee=l)||{}).vi=(_=Ze.vi||{},en=tn=Qe=!(Xe="%c companion %c"),nn=null,on=document.getElementById("vsly-display-container"),p=document.getElementById("vsly-display-content"),sn=document.getElementById("vsly-player-container"),an=document.getElementById("vsly-display-close"),t=function(t){if(!Ht.advertising.companion.allowed)return Zt.p(Xe+"Companions are not enabled for this context."),!1;if(Ze.no().ho().vast_index&&46!=t.id_vast_type)return Zt.p(Xe+"Not the right vast type, no companion displayed"),!1;rn();var e=cn();return e?(1==en&&(un(),ln()),dn(t,e),!0):(Zt.p(Xe+"No ad found"),!1)},rn=function(){0==Qe&&(Zt.p(Xe+"Initialize"),Qe=!0,mn())},cn=function(){var t=Ze.us(),e=Ze.ls(),n=Ze.no().ho().list;if(Zt.p(Xe+"Player size = ["+t+","+e+"]"),!n)return!1;if(n.length)for(var i=n.length;i--;)300==n[i].getWidth()&&50==n[i].getHeight()||(Zt.p(Xe+"["+n[i].getWidth()+"x"+n[i].getHeight()+"] too big"),n.splice(i,1));return!!n.length&&(n.sort(function(t,e){return e.getWidth()*e.getHeight()-t.getWidth()*t.getHeight()}),n[0])},dn=function(t,e){var n=Number(Ze.us()),i=e.getWidth(),o=e.getHeight();n<i&&(o=n*e.getHeight()/i,i=n),p.innerHTML=e.getContent(),i!=e.getWidth()&&((n=p.getElementsByTagName("img")[0]).setAttribute("width",i),n.setAttribute("height",o)),hn(on,i,o),en=!0,nn=Ze.no().ho().vast_index,Zt.v(62,null,!1,!1,pn(t))},un=function(){var t;1==Qe&&0==tn&&1==en&&(Zt.p(Xe+"Clear banner"),t=(t=Ze.g(Ht.admin.current_index)).vasts[Zt.lt(t.vasts,"vast_index",nn)],fn(),en=!(tn=!0),nn=null,Zt.v(63,null,!1,!1,pn(t)))},ln=function(){Zt.p(Xe+"Reset"),en=tn=!1,nn=null},pn=function(t){return"&ais="+t.id_ssp+"&ans="+t.ssp_name+"&aivt="+t.id_vast_type+"&anvt="+t.name+"&avt=viously&aaf=nonlinear"},hn=function(t,e,n){Zt.p(Xe+"Set size to ["+e+","+n+"]");const i=Ze.et();var o,s,a,r,c;i&&(o=i.offsetWidth,sn.style.height="100%",on.style.width="100%",on.style.backgroundColor="#333333",p.style.margin="0 auto",p.setAttribute("width",e),p.style.width=e+"px",p.style.maxWidth=e+"px",p.setAttribute("height",n),p.style.height=n+"px",p.style.maxHeight=n+"px",Yt&&(s=0,Ht.template.ui&&Ht.template.ui.header&&(e=Ze.Do.Us()).element&&(s=e.element.offsetHeight),window.frameElement.parentNode.setAttribute("style","height:"+(o*Ht.playlist.ratio+n+s)+"px!important"),Xt.Yt.setAttribute("style","height:"+(Xt.Yt.offsetWidth*Ht.playlist.ratio+n+s)+"px!important"),sn.style.height="calc(100% - "+n+"px)",sn.style.position="relative",window.onresize=Zt.ft(function(){window.frameElement.parentNode.setAttribute("style","height:"+(i.offsetWidth*Ht.playlist.ratio+n+s)+"px!important"),Xt.Yt.setAttribute("style","height:"+(Xt.Yt.offsetWidth*Ht.playlist.ratio+n+s)+"px!important")},50,!0,!0)),Wt&&(a=document.getElementsByClassName("embed-player")[0],r=document.getElementsByClassName("main")[0],c=document.getElementsByClassName("c-player__info")[0],window.matchMedia("(max-width: 800px)").matches&&window.matchMedia("(orientation: portrait)").matches?(a.setAttribute("style","height: calc(56.25vmin + "+n+"px)"),r.style.height="",c.style.paddingTop="calc(56.25vmin + "+n+"px)"):(a.style.height="",r.setAttribute("style","height:calc(100% + "+n+"px)!important"),c.style.paddingTop=""),sn.style.height="calc(100% - "+n+"px)",sn.style.position="relative",window.onresize=Zt.ft(function(){window.matchMedia("(max-width: 800px)").matches&&window.matchMedia("(orientation: portrait)").matches?(a.setAttribute("style","height: calc(56.25vmin + "+n+"px)"),r.style.height="",c.style.paddingTop="calc(56.25vmin + "+n+"px)"):(a.style.height="",r.setAttribute("style","height:calc(100% + "+n+"px)!important"),c.style.paddingTop=""),Ze.no().mo()},50,!0,!0)),an.style.display="block")},fn=function(){var t,e,n;Zt.p(Xe+"Unset banner"),sn.style.height="",on.style.width="",on.style.backgroundColor="",p.style.margin="",p.setAttribute("width",""),p.style.width="",p.style.maxWidth="",p.setAttribute("height",""),p.style.height="",p.style.maxHeight="",Yt&&(window.frameElement.parentNode.style.height="",Xt.Yt.style.height="",sn.style.position=""),Wt&&(t=document.getElementsByClassName("embed-player")[0],e=document.getElementsByClassName("main")[0],n=document.getElementsByClassName("c-player__info")[0],t.style.height="",e.style.height="",n.style.paddingTop="",sn.style.position=""),an.style.display="",window.onresize=null},mn=function(){Tt&&(an.ontouchstart=un),an.onclick=un},oi=function(){return en},_._i=t,_.ao=un,_.do=ln,_.Ea=oi,_),(_n=(ee=Ze)||{}).fi=(e=_n.fi||{},In=yn=gn=wn=bn=vn=!(h="%c nonlinear %c"),An=0,f=null,Sn=document.getElementById("vsly-banner"),kn=document.getElementById("vsly-banner-close"),xn=document.getElementById("vsly-banner-container"),Tn=function(){if(f=Ht.advertising.nonlinear.meetscale)if(0==Ht.user.is_adblocked){if(("always"===Ht.template.advertising.nonlinear.event||"noPreroll"===Ht.template.advertising.nonlinear.event&&!1===wn)&&"nocontent"!=Ht.playlist.type)if("playing"==_n.Qt())if(0==gn){0==vn&&(Zt.p(h+"Init"),vn=!0,kn.textContent="",Rn(f));var t=_n.g(Ht.admin.current_index);if(0==yn&&0==In&&0==bn){yn=!0,Zt.p(h+"Request"),t.vasts=[],f.ad_infos_event="",f.vast_index=ut.wo(Ht.admin.current_index,f.id_vast_type),f.ad_index=0,f.ad="waiting",f.banner=!0,f.nonlinear=!0,f.prebid_bidder={bidder:"meetscale-nonlinear",params:{idVastType:f.id_vast_type,vastIndex:f.vast_index,networkId:"240e31a3-dfc9-4f06-b210-46b7f1d25ace",disabledFormats:["slideshow"],multiBids:!0}},1==Te&&(f.prebid_bidder.params.endpoint="https://preprod-bid.sparteo.com/auction"),Zt.p(f,!0),t.vasts.push(f);var e=_n.et(),o=e?e.offsetWidth:0,s=e?e.offsetHeight:0,e=[...Ni,...Vi,...Li];const a=5;e=e.filter(([t,e])=>{const n=t/o,i=e/s;return n<=a&&i<=a});ut.bo(Ht.admin.current_index,[f.prebid_bidder],e)}else 0==yn&&On(t)}else ke&&Zt.p(h+"Not granted because already closed once");else ke&&Zt.p(h+"Not granted while not playing")}else Zt.p(h+"Adblock is enabled")},b=function(t,e){Zt.p(h+"Manage");var t=_n.g(t),l=t.vasts[Zt.lt(t.vasts,"vast_index",e)],n=function(){if(In&&window.sfs&&l&&l.a_bid){var t=_n.et();if(t){var e=0,n=0,i="vsly-banner-position-"+Ht.template.advertising.nonlinear.position+"-right",o=l.a_bid.width,s=l.a_bid.height,a=o/s,r=t.offsetWidth,t=t.offsetHeight,c=8;if(1.5<=a)i="vsly-banner-position-"+Ht.template.advertising.nonlinear.position+"-center",t/2<(n=(e=o<(e=r-c)?o:e)/a)&&(e=(n=t/2)*a);else if(.9<=a&&a<1.5)t<r?n=(e=o<(e=.4*r)?o:e)/a:(i="vsly-banner-position-"+Ht.template.advertising.nonlinear.position+"-center",r-c<(e=(n=Math.min(.8*t,s))*a)&&(n=(e=r-c)/a));else if(.5<=a){if(t<r){const u=.3*r;(e=(n=Math.min(.8*t,s))*a)<u&&(n=(e=u)/a)}else t-c<(n=(e=Math.min(.5*r,o))/a)&&(e=(n=t-c)*a);t-c<(n=r-c<e?(e=r-c)/a:n)&&(e=(n=t-c)*a)}else r-c<(e=(n=s<(n=t<r?t-c:.8*t)?s:n)*a)&&(n=(e=r-c)/a);d(xn,e,n),Zt.p(h+"bidRatio="+a+" banner="+o+"*"+s+" player="+r+"*"+t+" resize="+e+"*"+n),xn.className=i,sfs.resize(Sn,parseInt(e),parseInt(n))}}function d(t,e,n){Cn(t,parseInt(e),parseInt(n))}},i=function(){sfs.init({debug:ke,context:window,cookieDisallow:!_n.Ot.Ki(),resize:{observer:!1,center:!0,upscale:!0,downscale:!0},sf:{debug:ke,timeout:3e3,"read-cookie":_n.Ot.Ki(),"write-cookie":_n.Ot.Ki(),onEndPosRender:function(t){Zt.p(h+"onEndPosRender"),In=!(yn=!1),Zt.J(kn,"hidden"),Ht.template.sdk.sticky&&Ht.template.sdk.sticky.position&&-1<Ht.template.sdk.sticky.position.toLowerCase().indexOf("right")?Zt.$(kn,"vsly-banner-close-right"):Zt.J(kn,"vsly-banner-close-right"),Zt.$(document.body,"vsly-show-banner"),n(),Zt.K(window,"resize",n),Zt.v(39,null,!1,!1,ut.Xi(l)),Xt.v("adBannerStart",{ad_type:"banner",ad_engine:"prebid"})},onVisible:function(t){Zt.p(h+"onVisible")}}}),sfs.render(Sn,l.a_bid)};Zt.v(37,null,!1,!1,ut.Xi(l)),window.sfs?i():Zt.ot(document.body,Ht.admin.sfs_url,function(){Zt.p(h+"Lib loaded"),i()},function(){Zt.p(h+"Failed to load lib"),Zt.v(14,null,!1,!1,"&sec=17&sem=script_error_sfs")})},En=function(t){1==vn&&0==bn&&(Zt.p(h+"Clear"),bn=!0,1==In&&(Zt.$(kn,"hidden"),Zt.J(document.body,"vsly-show-banner"),setTimeout(function(){window.sfs&&sfs.destroy(Sn),t&&Zt.v(42,null,!1,!1,ut.Xi(f))},0),In=!1,Xt.v("adBannerComplete",{ad_type:"banner",ad_engine:"prebid"})),yn=!1,f=null)},Mn=function(){Zt.p(h+"Reset"),gn=wn=bn=!1},On=function(t){var e,n;0==gn&&!Zt.F(document.body,"vsly-show-related")&&_n.et()&&(e=_n.et().currentTime,t=t.duration-e,n=Ft["meetscale-nonlinear"]&&Ft["meetscale-nonlinear"].length?Ht.admin.banner_linear_duration/2:Ht.admin.banner_linear_duration,Math.floor(e)%n==0)&&n<=t&&Date.now()-An>=1e3*n&&(Zt.p(h+"Refresh"),An=Date.now(),Zt.v(48,null,!1,!1,ut.Xi(f)),ut.Me(),En(),setTimeout(function(){Mn(),Tn()},10))},Cn=function(t,e,n){Zt.p(h+"Set size to ["+e+","+n+"]"),t.style.left="50%",t.style.marginLeft=-e/2+"px",t.style.width=e+"px",t.style.maxWidth=e+"px",t.style.height=n+"px",t.style.maxHeight=n+"px"},Rn=function(t){Tt&&Zt.K(kn,"touchstart",function(){En(),gn=!0}),Zt.K(kn,"click",function(){En(!0),gn=!0})},t=function(){return wn},oi=function(t){wn=t},e.oe=Tn,e.so=b,e.ao=En,e.do=Mn,e.Ma=t,e.hi=oi,e),(m=(ee=_n)||{}).Ot=(_=m.Ot||{},v="%c gdpr %c",Nn=Vn=null,Dn=!(Ln="%c amp %c"),Pn=window.__tcfapi,Un=window.__uspapi,jn=/^1~([0-9]+(\.[0-9]+)*)?$/,qn=/^2~([0-9]+(\.[0-9]+)*)?(~dv\.([0-9]+(\.[0-9]+)*)?)?$/,Gn={},zn=function(){if(si()){if(Ht.advertising.user_sync.third_party_images)for(var t in Ht.advertising.user_sync.third_party_images)Zt.wt(Ht.advertising.user_sync.third_party_images[t]);if(Ht.advertising.user_sync.third_party_scripts)for(var t in Ht.advertising.user_sync.third_party_scripts)Zt.ot(document.body,Ht.advertising.user_sync.third_party_scripts[t],null,null,!0)}},Bn=function(t,e,n){var i=n.publisher&&n.publisher.consents,o=n.publisher&&n.publisher.legitimateInterests,s=n.purpose&&n.purpose.consents,n=n.purpose&&n.purpose.legitimateInterests;return"consent"===e?i&&void 0!==i[t]?!0===i[t]:s&&!0===s[t]:"legitimateInterests"===e&&(o&&void 0!==o[t]?!0===o[t]:n&&!0===n[t])},Hn=function(t,e,n){if(!Ht.page.tcf.gdprApplies||!n||!n.vendor)return!0;var i=n.vendor.consents||{},o=n.vendor.legitimateInterests||{},s=n.publisher&&n.publisher.restrictions,i=!0===i[t],o=!0===o[t];if(s&&s[t]&&void 0!==s[t][e]){s=s[t][e];if(0===s)return!1;if(1===s)return Bn(e,"consent",n)&&i;if(2===s)return Bn(e,"legitimateInterests",n)&&o}return Bn(e,"consent",n)?i:!!Bn(e,"legitimateInterests",n)&&o},$n=function(t){if(Pn=window.__tcfapi,Un=window.__uspapi,window.self!=window.parent)try{Pn=parent.__tcfapi,Un=parent.__uspapi,Zt.p(v+"Get parent CMP")}catch(t){Zt.p(v+"Get parent CMP failed")}if(Ht.page.tcf.gdprApplies?(Zt.p(v+"Applies"),"function"==typeof Pn?Pn("ping",2,function(t){Ht.page.tcf.cmp.id=t.cmpId,Ht.page.tcf.cmp.version=t.cmpVersion,Zt.v(25,null,!0,!1)}):Zt.v(25,null,!0,!1)):(zn(),Zt.p(v+"Doesn't apply")),"function"==typeof Un&&Un("getUSPData",1,(t,e)=>{e&&(Ht.page.usp.uspString=t.uspString,Zt.p(v+"getUSPData="+Ht.page.usp.uspString))}),"function"==typeof Pn)void 0===window.__tcfapi&&(Zt.p(v+"Storing the tcfapi in the window"),window.__tcfapi=Pn),Zt.p(v+"CMP TCF2 loaded"),m.ui("buffering"),Vn=setTimeout(function(){Jn("event_listener_timeout")},1e4),Pn("addEventListener",2,Wn);else if(Zt.p(v+"CMP TCF2 not loaded"),A||ge){if(m.ui("buffering"),A){Zt.p(v+"Proxy tcfapi");{let t=window,a;const r={};for(;t;){try{if(t.frames.__tcfapiLocator){a=t;break}}catch(t){}if(t===window.top)break;t=t.parent}function e(t){let e={};try{e="string"==typeof t.data?JSON.parse(t.data):t.data}catch(t){}const n=e.__tcfapiReturn;n&&"function"==typeof r[n.callId]&&(r[n.callId](n.returnValue,n.success),r[n.callId]=null)}window.__tcfapi=function(t,e,n,i){if(a){const o=Math.random()+"",s={__tcfapiCall:{command:t,parameter:i,version:e,callId:o}};r[o]=n,a.postMessage(s,"*")}else n({msg:"CMP not found"},!1)},window.addEventListener("message",e,!1)}window.__tcfapi("addEventListener",2,Wn)}ge&&(Zt.p(v+"Wait for postMessage"),window.addEventListener("message",Fn),window.parent.postMessage({sentinel:"amp",type:"send-intersections"},"*"))}else{var n=Xn();n&&1==Ht.page.tcf.gdprApplies?Wn(n,!0):!0===Ht.page.tcf.gdprApplies&&0<Ht.admin.no_tcfapi_retry?setTimeout(function(){Ht.admin.no_tcfapi_retry--,$n(t)},100):(Zt.p(v+"No tcfapi"),Jn("no_tcfapi"))}},Jn=function(t,e){Zt.p(v+t);var n=Xn();n&&1==Ht.page.tcf.gdprApplies?Wn(n,!0):(Zt.v(30,null,!0,!1,"&ptet="+t),0==m.Qi.Qt()&&0==m.Gi.Qt()&&m.Qi.oe(Ht.admin.current_index))},Fn=function(t){if(Zt.p(v+JSON.stringify(t)),t&&t.data&&t.data.__tcfapiReturn&&t.data.__tcfapiReturn.success){Zt.p(v+"getTCData from parent CMP"),window.removeEventListener("message",Fn);var e=t.data.__tcfapiReturn,n=e.returnValue;if("function"==typeof Gn[e.callId])return Gn[e.callId](n,e.success),void(Gn[e.callId]=null);Yn(n),Kn(n),Zt.v(21,null,!0,!1)}t&&t.data&&"amp"==t.data.sentinel&&"intersection"==t.data.type&&!1===Dn&&t.data.changes.forEach(function(t){.5<=t.intersectionRatio?(Zt.p(Ln+"Player is in viewport"),!(Dn=!0)===Ht.page.tcf.gdprApplies?m.Qi.oe(Ht.admin.current_index):window.parent.postMessage({sentinel:"amp",type:"send-consent-data"},"*")):Zt.p(Ln+"Player is not in viewport")}),t&&t.data&&"amp"==t.data.sentinel&&"consent-data"==t.data.type&&(Zt.p(Ln+"getTCData from amp-consent : "+JSON.stringify(t.data)),window.removeEventListener("message",Fn),t.data.consentString&&"undefined"!=t.data.consentString?(n=window.parseTCString(t),Yn(n),Kn(n)):m.Qi.oe(Ht.admin.current_index),Zt.v(21,null,!0,!1))},Wn=function(t,e){e&&t.eventStatus&&"undefined"!==t.eventStatus&&(clearTimeout(Vn),Zt.p(v+"TCF2 status = "+t.eventStatus),"cmpuishown"===t.eventStatus&&(Ht.page.tcf.cmpuistate="shown",Yt&&Zt.$(Xt.Yt,"viously-cmp-is-shown"),Nn=setTimeout(function(){Zt.v(29,null,!0,!0)},3e4)),"tcloaded"!==t.eventStatus&&"tcloadedfromstorage"!==t.eventStatus||(Ht.page.tcf.cmpuistate="not_shown"),Yn(t),"useractioncomplete"===t.eventStatus||"tcloaded"===t.eventStatus||"tcloadedfromstorage"===t.eventStatus?(clearTimeout(Nn),Yt&&Zt.J(Xt.Yt,"viously-cmp-is-shown"),Kn(t),ii()?("tcloadedfromstorage"!==t.eventStatus&&t.tcString&&"undefined"!=t.tcString&&Zn(t),li||Qt.pe("vsly-audience",JSON.stringify({audience_source_id:Ht.page.audience_source.id,audience_source_name:Ht.page.audience_source.name}))):(Qt.le("vsly-euconsent-v2"),Qt.fe("vsly-audience")),"useractioncomplete"===t.eventStatus&&Zt.v(23,null,!0,!1),"tcloaded"===t.eventStatus&&Zt.v(21,null,!0,!1),"tcloadedfromstorage"===t.eventStatus&&Zt.v(32,null,!0,!1)):"cmpuishown"===t.eventStatus&&Zt.v(22,null,!0,!1))},Kn=function(t){if(t.tcString&&"undefined"!=t.tcString){for(var e in Hn(755,1,t)?Ht.page.tcf.googleAllowed=!0:Ht.page.tcf.googleAllowed=!1,Hn(793,1,t)?Ht.page.tcf.amazonAllowed=!0:Ht.page.tcf.amazonAllowed=!1,Hn(1028,1,t)?Ht.page.tcf.sparteoAllowed=!0:Ht.page.tcf.sparteoAllowed=!1,Ht.page.tcf.neededVendors=[],Ht.page.tcf.availableVendors=[],Ht.page.tcf.missingVendors=[],Ht.page.tcf.neededVendorsCount=0,Ht.page.tcf.availableVendorsCount=0,Ht.page.tcf.neededVendorsMap){const o=Ht.page.tcf.neededVendorsMap[e];(Hn(o,1,t)?(Ht.page.tcf.availableVendorsCount++,Ht.page.tcf.availableVendors):Ht.page.tcf.missingVendors).push(e),Ht.page.tcf.neededVendorsCount++,Ht.page.tcf.neededVendors.push(e)}var n,i;Bn(1,"consent",t)||Bn(1,"legitimateInterests",t)?Ht.page.tcf.purposeOneAllowed=!0:Ht.page.tcf.purposeOneAllowed=!1,Bn(4,"consent",t)||Bn(4,"legitimateInterests",t)?Ht.page.tcf.purposeFourAllowed=!0:Ht.page.tcf.purposeFourAllowed=!1,t.specialFeatureOptins&&t.specialFeatureOptins[1]?Ht.page.tcf.specialPurposeOne=!0:Ht.page.tcf.specialPurposeOne=!1,Zt.p(v+"MissingVendors = "+Ht.page.tcf.missingVendors),Zt.p(v+"NeededVendorsCount = "+Ht.page.tcf.neededVendorsCount),Zt.p(v+"AvailableVendorsCount = "+Ht.page.tcf.availableVendorsCount),Zt.p(v+"Nb IAB vendors = "+Ht.page.tcf.nbVendors),Zt.p(v+"Nb Google vendors = "+Ht.page.tcf.nbAddtlConsent),Zt.p(v+"googleAllowed = "+Ht.page.tcf.googleAllowed),Zt.p(v+"amazonAllowed = "+Ht.page.tcf.amazonAllowed),Zt.p(v+"sparteoAllowed = "+Ht.page.tcf.sparteoAllowed),Zt.p(v+"purposeOneAllowed = "+Ht.page.tcf.purposeOneAllowed),Zt.p(v+"purposeFourAllowed = "+Ht.page.tcf.purposeFourAllowed),1==t.userIsSubscribed&&(P=!0,Ht.template.advertising.linear.viously=!1,Ht.template.advertising.linear.primary=!1,Ht.template.advertising.linear.passback=!1,Ht.template.advertising.nonlinear.event="never",Ht.advertising.linear.primary=!1,Ht.advertising.linear.passback=!1),Ht.page.tcf.cmp.id&&(n=ei(Ht.page.tcf.nbVendors),i=ni(Ht.page.tcf.nbAddtlConsent),"full_consent"==n&&"full_consent"==i?Zt.v(26,null,!0,!1):"no_consent"==n&&"no_consent"==i?Zt.v(28,null,!0,!1):Zt.v(27,null,!0,!1)),zn(),0==m.Qi.Qt()&&0==m.Gi.Qt()&&(n=Yt?parent:window,i=Yt?window.frameElement:document.body,Zt._t(i,n,.5)&&"useractioncomplete"===t.eventStatus&&!0===Zt.At()?m.Gi._i({type:"delegation"}):m.Qi.oe(Ht.admin.current_index))}else Jn("no_tcstring",t.listenerId)},Yn=function(t){t.tcString&&"undefined"!=t.tcString&&(Ht.page.tcf.tcString=t.tcString),Ht.page.tcf.nbVendors=Qn(t.vendor),Ht.page.tcf.consentType=ei(Ht.page.tcf.nbVendors),Ht.page.tcf.addtlConsent=t.addtlConsent,Ht.page.tcf.nbAddtlConsent=ti(t.addtlConsent),Ht.page.tcf.additionalConsentType=ni(Ht.page.tcf.nbAddtlConsent),"boolean"==typeof t.gdprApplies&&(Ht.page.tcf.gdprApplies=t.gdprApplies),Ht.page.tcf.purpose=t.purpose,Ht.page.tcf.vendor=t.vendor,Ht.page.tcf.publisher=t.publisher,Ht.page.tcf.publisherRestrictions=t.publisherRestrictions,Ht.page.tcf.cmp.id=t.cmpId,Ht.page.tcf.cmp.version=t.cmpVersion},Zn=function(t){Qt.ue("vsly-euconsent-v2",JSON.stringify(t))},Xn=function(){var e=Qt.m("vsly-euconsent-v2");if(e)try{(e=JSON.parse(e)).eventStatus="tcloadedfromstorage"}catch(t){e=!1}return e},Qn=function(t){var e=0;if(t&&t.consents)for(var n in t.consents)1==t.consents[n]&&e++;return e},ti=function(t){var e=0;if(jn.test(t)){const n=t.match(jn);n&&n[1]&&(e=n[1].split(".").length)}if(qn.test(t)){const i=t.match(qn);i&&i[1]&&(e=i[1].split(".").length)}return e},ei=function(t){return t>=Ht.page.tcf.thresholds.totalVendors?"full_consent":0==t?"no_consent":"partial_consent"},ni=function(t){return t>=Ht.page.tcf.thresholds.totalAddtlConsentVendors?"full_consent":0==t?"no_consent":"partial_consent"},b=function(){return!Ht.page.tcf.gdprApplies||1==Ht.page.tcf.googleAllowed},t=function(){return!Ht.page.tcf.gdprApplies||1==Ht.page.tcf.purposeOneAllowed&&1==Ht.page.tcf.amazonAllowed},ii=function(){return!Ht.page.tcf.gdprApplies||1==Ht.page.tcf.purposeOneAllowed&&1==Ht.page.tcf.sparteoAllowed},oi=function(){return!Ht.page.tcf.gdprApplies||1==Ht.page.tcf.purposeOneAllowed},si=function(){return!Ht.page.tcf.gdprApplies||1==Ht.page.tcf.purposeFourAllowed},e=function(){return!Ht.page.tcf.gdprApplies||1==Ht.page.tcf.specialPurposeOne},_.oe=$n,_.$i=b,_.zi=t,_.Ki=ii,_.Wi=oi,_.Mt=si,_.Yi=e,_),(ai=(ee=m)||{}).Ds=(()=>{const t=document.getElementById("vsly-player-container"),e={linkTarget:t,ctvDomain:Ht.page.ctv_domain,linkText:Ht.admin.lng.watchonctv,enable:!ye&&Ht.page.enable_link_to_ctv,callback:()=>ai.et()&&ai.et().pause()};return new Di(e)})(ai.Ds),(ri=(ee=ai)||{}).Lo={init:function(){const t=document.querySelector(".c-controlBar__button.c-controlBar__button--mute#vsly-mute"),e=document.querySelector(".c-controlBar__rightZone"),n=ri.et(),i=document.querySelector(".c-player#player");if((t||e)&&n&&i){const o={insertAfterElement:t,containerToInsert:e,videoElement:n,playerContainer:i,storage:Qt},s=(ri.Lo=new vi(o),ri.g(ri.fs()));s&&s.subtitles&&ri.Lo.onVideoTracksLoaded(s.subtitles)}}},ee=ri,window.self!=window.parent)try{(parent.viously||parent.xj4fj5)&&(window.viously=parent.viously,window.xj4fj5=parent.xj4fj5,Yt||(window.justDetectAdblock=parent.justDetectAdblock,window.detectIncognito=parent.detectIncognito),parent.viously.fn.isSparteoAllowed=function(){return Zt.p(ct+" isSparteoAllowed"),ee.Ot.Ki()},parent.xj4fj5.nW2vKP=function(){return Zt.p(ct+" isSparteoAllowed"),ee.Ot.Ki()},parent.xj4fj5.G7Kd4l=function(){return Zt.p(ct+" _isDeviceAccessAllowed"),ee.Ot.Wi()})}catch(t){}window.viously||(window.viously={}),window.xj4fj5||(window.xj4fj5={}),Yt||(Zt.xt(),Zt.Tt()),Zt._();var li=Qt.he("vsly-audience"),b=(li&&(li=JSON.parse(li),Ht.page.audience_source.id=li.audience_source_id,Ht.page.audience_source.name=li.audience_source_name),ee.os(),document.getElementById("viously-critical-css")),pi=(b&&b.parentNode.removeChild(b),"");function hi(t){this.state={...t},this.observers={},this.addObserver=this.addObserver.bind(this),this.update=this.update.bind(this),this.notifyObservers=this.notifyObservers.bind(this)}function fi(t){if(!t||!t.playerContainer)throw new Error("SubtitlesDisplay: playerContainer must be provided.");if(!t.videoElement)throw new Error("SubtitlesDisplay: videoElement must be provided.");if(!t.stateObserver)throw new Error("SubtitlesDisplay: State observer must be provided.");this.Pe=t.playerContainer,this.He=t.videoElement,this.$e=t.stateObserver,this.De=null,this.ze=!1,this.Ge=0,this.qe=null,this.je=!1,this.Ne=this.Ne.bind(this),this.Ue=this.Ue.bind(this),this.Be=this.Be.bind(this),this.update=this.update.bind(this),this.destroy=this.destroy.bind(this),this.Ne(),this.$e.addObserver(this,["subtitlesLanguage","subtitlesEnabled","availableSubtitleTracks"]),this.update({},this.$e.state)}function mi(t){if(!t||!t.insertAfterElement&&!t.containerToInsert)throw new Error("SubtitlesButton: Target node (insertAfterElement or containerToInsert) must be provided.");if(!t.stateObserver)throw new Error("SubtitlesButton: State observer must be provided.");this.Fe=t.insertAfterElement,this.We=t.containerToInsert,this.$e=t.stateObserver,this.Je=null,this.Qe=!1,this.Ye=this.Ye.bind(this),this.Ze=this.Ze.bind(this),this.Xe=this.Xe.bind(this),this.update=this.update.bind(this),this.destroy=this.destroy.bind(this),this.tn=()=>{this.Qe=!0,window.removeEventListener("touchstart",this.tn)},window.addEventListener("touchstart",this.tn),this.Ne(),this.Ke(),this.$e.addObserver(this,["subtitlesEnabled","subtitlesAvailable"]),this.update({},this.$e.state)}function _i(t){if(!t)throw new Error("SubtitlesController: State observer must be passed.");this.$e=t,this.en=null,this.je=!1,this.setSubtitlesAvailable=this.setSubtitlesAvailable.bind(this),this.setAvailableSubtitleTracks=this.setAvailableSubtitleTracks.bind(this),this.setVideoTextTrackManager=this.setVideoTextTrackManager.bind(this),this.destroy=this.destroy.bind(this)}function vi(t){if(!t||!t.videoElement)throw new Error("SubtitlesManager: videoElement must be provided.");if(!t.insertAfterElement&&!t.containerToInsert)throw new Error("SubtitlesManager: insertAfterElement or containerToInsert must be provided.");if(!t.playerContainer)throw new Error("SubtitlesManager: playerContainer must be provided.");if(!t.storage)throw new Error("SubtitlesManager: storage utility must be provided.");this.He=t.videoElement,this.Fe=t.insertAfterElement,this.We=t.containerToInsert,this.Pe=t.playerContainer,this.rn=t.storage,this.$e=null,this.en=null,this.on=null,this.sn=null,this.an=null,this.cn=null,this.je=!1,this.nn=this.nn.bind(this),this.onVideoTracksLoaded=this.onVideoTracksLoaded.bind(this),this.destroy=this.destroy.bind(this),this.nn()}function bi(t){if(!t||!t.menuContainer)throw new Error("SubtitlesMenu: Menu container must be provided.");if(!t.stateObserver)throw new Error("SubtitlesMenu: State observer must be provided.");if(!t.storage)throw new Error("SubtitlesMenu: storage utility must be provided.");this.un=t.menuContainer,this.$e=t.stateObserver,this.rn=t.storage,this.dn=null,this.pn=new Map,this._n=[],this.vn="",this.je=!1,this.Ne=this.Ne.bind(this),this.fn=this.fn.bind(this),this.mn=this.mn.bind(this),this.update=this.update.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.destroy=this.destroy.bind(this),this.Ne(),this.Ke(),this.$e.addObserver(this,["availableSubtitleTracks","subtitlesMenuVisible","subtitlesLanguage","subtitlesAvailable"]),this.update({},this.$e.state)}function wi(t){if(!t||!t.videoElement)throw new Error("VideoTextTrackManager: video element must be provided.");if(!t.videoElement||"object"!=typeof t.videoElement||"function"!=typeof t.videoElement.play||"function"!=typeof t.videoElement.pause||"number"!=typeof t.videoElement.currentTime)throw new Error("VideoTextTrackManager: Provided element is not a media element.");if(!t.stateObserver)throw new Error("VideoTextTrackManager: State observer must be provided.");this.He=t.videoElement,this.$e=t.stateObserver,this.je=!1,this.setTracks=this.setTracks.bind(this),this.destroy=this.destroy.bind(this),this.update=this.update.bind(this),this.wn=this.wn.bind(this),this.bn=this.bn.bind(this),this.$e.addObserver(this,["subtitlesLanguage","availableSubtitleTracks","subtitlesEnabled"])}function gi(t,e=()=>{}){this.tree=t.tree,this.uiElements=t.uiElements,this.initCallback=e,this.currentGroup=null,this.currentIndex=0,this.focusableMap=new Map,this.visibilityMap=new Map,this.groupMap=new Map,this.init()}function yi(t){return{name:"muteGroup",type:"group",children:t.map((t,e)=>({type:"button",element:t,id:"mute-"+e})),actions:{ArrowRight:t=>t.setFocus(t.getGroupByName("controlsGroup"),1),ArrowDown:t=>t.setFocus(t.getGroupByName("navigationMenuGroup"),0),ArrowUp:t=>t.setFocus(t.getGroupByName("section-1"),0)},nextGroup:t=>t.getGroupByName("navigationMenuGroup"),previousGroup:t=>t.getGroupByName("navigationMenuGroup")}}function Ii(t){return{name:"controlsGroup",type:"group",children:t.map((t,e)=>({type:"button",element:t,id:"control-"+e})),actions:{ArrowRight:t=>t.moveToNextItem(),ArrowLeft:t=>t.moveToPreviousItem(),ArrowDown:t=>t.setFocus(t.getGroupByName("section-1"),0),ArrowUp:t=>t.setFocus(t.getGroupByName("muteGroup"),0),Escape:t=>t.setFocus(t.getGroupByName("muteGroup"),0)},nextGroup:t=>t.getGroupByName("section-1"),previousGroup:t=>t.getGroupByName("navigationMenuGroup")}}function Ai(t){return{name:"navigationMenuGroup",type:"group",children:t.map((t,e)=>({type:"button",element:t,id:"menu-item-"+e})),actions:{ArrowDown:t=>t.moveToNextItem(),ArrowUp:t=>t.moveToPreviousItem(),ArrowRight:t=>{const e=t.getGroupByName("controlsGroup"),n=1;t.focusOnClosestVisible(e,n)},Enter:t=>{const e=t.getGroupByName("section-"+t.currentIndex);t.setFocus(e,0)},Escape:t=>t.setFocus(t.getGroupByName("muteGroup"),0)},nextGroup:t=>t.getGroupByName("section-1"),previousGroup:t=>t.getGroupByName("muteGroup")}}function Si(i){const t=i.map(t=>[...t.querySelectorAll(".js-article")]);return t.map((t,e,n)=>ki(t,e,n,i[e]))}function ki(t,e,n,i){const o=1<e?"section-"+(e-1):"navigationMenuGroup",s=e<n.length-1?"section-"+(e+1):"controlsGroup",a=t[0],r=a&&a.getBoundingClientRect();return{name:"section-"+e,type:"thumbnailGroup",children:t.map((t,e)=>({type:"thumbnail",element:t,id:"thumbnail-"+e})),actions:{ArrowRight:(t,e)=>{e.preventDefault(),t.moveToNextItem();const n=t.currentGroup.children[t.currentIndex].element;xi(i,n,r)},ArrowLeft:(t,e)=>{e.preventDefault(),t.moveToPreviousItem();const n=t.currentGroup.children[t.currentIndex].element;xi(i,n,r)},ArrowDown:t=>{const e=t.getGroupByName(s);t.focusOnClosestVisible(e,0)},ArrowUp:t=>{const e=t.getGroupByName(o);t.focusOnClosestVisible(e,0,!0)}},nextGroup:t=>t.getGroupByName(s),previousGroup:t=>t.getGroupByName(o)}}function xi(t,e,n){const i=t.getBoundingClientRect(),o=e.parentElement,s=o.lastElementChild,a=s.getBoundingClientRect(),r=e.getBoundingClientRect(),c=a.right<=i.right&&a.left>=i.left,d=r.right<=i.right&&r.left>=i.left;if(!c||!d){const u=n.left,l=r.left,p=l-u;o.scrollBy({left:p,behavior:"smooth"})}}function Ti(t){const e={type:"root",children:[yi((this.uiElements=t).muteElement),Ii(t.controlsElements),Ai(t.menuItems),...Si(t.sections)]};function n(e){return e.children&&e.children.forEach(t=>{t.parent=e,n(t)}),e}this.tree=n(e)}function Ei({modules:t,element:e,stateObserver:n}){this.utils=t.utils,this.Je=e,this.$e=n,this.$e.addObserver(this,["isAdPlaying"]),this.$e.update({isAdPlaying:this.$e.state.isAdPlaying}),this.clickHandler=this.clickHandler.bind(this),o=this.clickHandler,this.utils.K(this.Je,"click",Gi)}function Mi(t,e,n,i,o){t&&(t=t.getAdPodInfo())&&t.getAdPosition()<t.getTotalAds()&&(e&&e.stop(),n.v(67,null,!1,!1,i(o)+"&aem=ase"))}function Oi(t,e){t&&(t=t.getAdPodInfo())&&(e.ad_infos_event+="&avpi="+t.getAdPosition()+"&avtp="+t.getTotalAds())}function Ci(t,e,n){t&&(t=t.getAdPodInfo())&&t.getAdPosition()<t.getTotalAds()&&e&&(e.stop(),n.p(ci+"Stop ad pod"))}function Ri(t,e){for(var n=t.vasts.length;n--;)t.vasts[n].id_vast_type==e.id_vast_type&&t.vasts[n].refetched&&(t.vasts[n].ad=!1)}function Ri(t,e){for(var n=t.vasts.length;n--;)t.vasts[n].id_vast_type==e.id_vast_type&&t.vasts[n].refetched&&(t.vasts[n].ad=!1)}Yt?pi+="&ppos="+(window.frameElement.parentNode.parentNode.getBoundingClientRect().top+window.parent.pageYOffset):Zt.p(Ht,!0),Ht.page.fpd&&Ht.page.fpd.gv_safe&&Ht.page.preds&&Ht.page.preds.vtr_d30&&70<Ht.page.preds.vtr_d30&&(pi+="&ppce=true"),setTimeout(function(){Wt||"pageload"===Ht.template.sdk.sticky.event?Zt.v(17,null,!0,!1):(t=Yt?parent:window,e=Yt?window.frameElement:document.body,Yt?Zt._t(e,t,.5)?Zt.v(17,null,!0,!1):(ee.rs(!1),Zt.v(18,null,!0,!1),"IntersectionObserver"in t&&(i=new t.IntersectionObserver(function(t){t.forEach(function(t){t.target==e&&.5<=t.intersectionRatio&&(Zt.v(19,null,!0,!1),i.disconnect())})},{threshold:.5})).observe(e)):"IntersectionObserver"in t?(Zt.p(ct+"Init IntersectionObserver supported"),n=!1,(i=new t.IntersectionObserver(function(t){t.forEach(function(t){t.target==e&&(t.intersectionRatio<.5?(n=!0,ee.rs(!1),Zt.v(18,null,!0,!1)):(!1===n?Zt.v(17,null,!0,!1):Zt.v(19,null,!0,!1),i.disconnect()))})},{threshold:.5})).observe(e)):Zt._t(e,t,.5)?Zt.v(17,null,!0,!1):Zt.v(18,null,!0,!1)),Zt.v(33,null,!0,!1,pi),Yt||Zt.v(75,null,!0,!1);var t,e,n,i,o,s=function(t){for(var e=0;e<t.length;e++){var n,i,o,s=t[e];Zt.p(ct+"ReportingObserver : "+JSON.stringify(s)),s.body&&"HeavyAdIntervention"==s.body.id&&(Zt.p(ct+"HeavyAdIntervention "+JSON.stringify(s.body)),n=ee.g(Ht.admin.current_index),i="","advertising"!=ee.Qt()&&"ad-banner"!=ee.Qt()&&"ad-buffering"!=ee.Qt()||(null!=ut.yo.Oi&&(o=n.vasts[Zt.lt(n.vasts,"vast_index",ut.yo.Oi)])&&(i=ut.Xi(o,!0)),Zt.v(40,null,!0,!1,i+"&aem=heavy_ad_intervention")),Zt.v(24,null,!0,!1,i+"&aem="+encodeURIComponent(s.body.message)),Yt?parent.xj4fj5.xP2lOQ(!0,n.vid):window.location.reload())}};if(window.ReportingObserver&&(o=new window.ReportingObserver(function(t){s(t)},{buffered:!0})).observe(),window.lifecycle.addEventListener("statechange",function(t){if(Zt.p(ct+"Page state changed from "+t.oldState+" to "+t.newState),"hidden"===t.newState)N=!1,Zt.L("hidden"),ee.bs();else if("hidden"===t.oldState&&["active","passive"].includes(t.newState)){N=!0;try{if(window.parent){const e="none"!==Ht.template.sdk.sticky.event;window.parent.vslyActivePlayerId===Ht.playerId?ee.ws():!window.parent.vslyActivePlayerId&&e&&(window.parent.vslyActivePlayerId=Ht.playerId,ee.ws())}else ee.ws()}catch(t){Zt.p(ct+"Could not access parent window to check active player."),ee.ws()}}"terminated"===t.newState&&Yt&&(window.lifecycle.pageWasDiscarded||void 0===document.wasDiscarded)&&(Zt.v(14,null,!1,!0,"&sec=18&sem=bfcache_reload"),Zt.p(ct+"Page restored from bfcache. Re-initializing this player."),t=ee.g(Ht.admin.current_index),parent.xj4fj5)&&"function"==typeof parent.xj4fj5.xP2lOQ&&parent.xj4fj5.xP2lOQ(!0,t.vid)}),"carousel"!==Ht.type)try{window.parent&&window.parent.addEventListener("vsly-carousel-stop",()=>{if(N){const t="none"!==Ht.template.sdk.sticky.event;window.parent.vslyActivePlayerId||(t?(window.parent.vslyActivePlayerId=Ht.playerId,ee.ws()):setTimeout(()=>{window.parent.vslyActivePlayerId||(window.parent.vslyActivePlayerId=Ht.playerId,ee.ws())},100))}})}catch(t){Zt.p(ct+"Could not add event listeners on parent window.")}q.on("idle",()=>{Zt.p(ct+"User is idle since "+V+"ms"),Zt.L("idle")}),q.init(),window.onpagehide=function(){Yt||(D=!0,Zt.v(15,null,!0,!0)),window.ReportingObserver&&s(o.takeRecords()),clearInterval(j)},!Yt&&window.webVitals&&(window.webVitals.onCLS(function(t){0<=t.value&&Zt.v(70,null,!0,!0,"&wvv="+t.value),Zt.p(ct+"WebVitals : "+t.name+" = "+t.value)}),window.webVitals.onFCP(function(t){0<=t.value&&Zt.v(71,null,!0,!1,"&wvv="+t.value),Zt.p(ct+"WebVitals : "+t.name+" = "+t.value)}),window.webVitals.onLCP(function(t){0<=t.value&&Zt.v(73,null,!0,!0,"&wvv="+t.value),Zt.p(ct+"WebVitals : "+t.name+" = "+t.value)}),window.webVitals.onTTFB(function(t){let e=0;0<=(e=t.entries&&t.entries[0]&&"number"==typeof t.entries[0].requestStart?t.value-t.entries[0].requestStart:e)&&Zt.v(74,null,!0,!1,"&wvv="+e),Zt.p(ct+"WebVitals : "+t.name+" = "+e)}),window.webVitals.onINP(function(t){0<=t.value&&Zt.v(77,null,!0,!0,"&wvv="+t.value),Zt.p(ct+"WebVitals : "+t.name+" = "+t.value)}),setInterval(function(){Zt.L("interval")},V)),ee.ee.oe(),ee.Bo(Ht.admin.current_index),Wt&&"object"==typeof window.lazyload&&window.lazyload.init({mobilePictureWidth:321})},1),window.vsly.initalised=!0,Zt.p(Ht,!0)}})(conf,vslypbjs,activityDetector);
}